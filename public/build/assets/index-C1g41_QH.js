import{q as n,C as x,I as P,J as K,v as W,N as q,l as d,o,e as m,g as I,i as G,w as y,f as l,d as s,m as b,L as J,n as F,F as $,H as A}from"./vendor-core-BC1dSzkC.js";import{d as Q}from"./vendor-common-GpUWqhKr.js";import{u as X}from"./useActionLoading-BNGSEwHo.js";import{_ as Y}from"./AuthenticatedLayout-BqVghQ4K.js";import Z from"./modalFilter-BOAItUG7.js";import T from"./pagination-CRcCNabH.js";import{_}from"./Filter-CK_f7lh7.js";import{_ as ee}from"./DeleteConfirm-Cbh1lRoe.js";import{_ as te}from"./ImageModal-Htnhwuyn.js";import{B as ae}from"./BottomSheet-fL7Cjms_.js";import oe from"./ProductCardList-BWCrut4C.js";import re from"./ProductCardGrid-BIoOZ8s4.js";import le from"./ProductKanbanBoard-wVgwnnu7.js";import H from"./EmptyState-Dxth3DCA.js";import ne from"./StockAdjustmentSheet-DxiuXAm_.js";import se from"./PriceAdjustmentSheet-CDl8O3rU.js";import ie from"./ProductDetailSheet-BsZ-z30M.js";import ue from"./MobileCardGrid-DuWQ08ir.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-B3W3eSlW.js";import"./BottomSheetFilter-Df-ynfYe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-DkXQDXNC.js";import"./PrimaryButton-DmXwG_T0.js";import"./Modal-C34EPCsE.js";import"./ProductKanbanCard-42WXZdjr.js";import"./InputRupiah-BktbFODK.js";const de={class:"w-full pb-10"},me={class:"flex gap-1 p-1 my-3 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},ve={key:1,class:""},ce={key:0,class:"grid grid-cols-2 gap-6 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},fe={key:1,class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-2 lg:grid-cols-3"},ke={key:2},ge={key:2,class:"mt-8"},Ke={__name:"index",props:{products:Object,filters:Object,dropdowns:Object},setup(r){const c=r,{isActionLoading:w}=X(),i=n({title:"Detail Produk",data:{}}),u=n("grid"),k=n("detail"),C=n(!1),D=n(null),f=n(!1),g=n(c.filters.search||""),L=x(()=>c.filters.trashed===!0||c.filters.trashed==="true"),E=x(()=>{const a=Object.keys(c.filters),e=["search","page","per_page"];return a.filter(t=>!e.includes(t)).length}),M=n(!1),B=n(null),j=n(null),V=n(window.innerWidth<1024),N=()=>{V.value=window.innerWidth<1024},p=(a,e=null)=>{k.value=a,e!=null&&(i.value={},i.value.data=e),a=="detail"?i.value.title="Detail Produk":a=="stock"?i.value.title="Penyesuaian Stock":a=="price"&&(i.value.title="Penyesuaian Harga"),f.value=!0},S=a=>{B.value=a.path,j.value=a.name,M.value=!0},h=(a,e=!1)=>{let t={};e?t={title:"Hapus Permanen Produk",message:"Produk ini akan dihapus selamanya. Anda yakin menghapus",itemName:a.name,url:route("products.destroy",{id:a.id,permanen:!0})}:t={title:"Pindahkan ke Sampah",message:"Anda yakin ingin memindahkan produk",itemName:a.name,url:route("products.destroy",{id:a.id})},D.value.open(t)},z=a=>{w.value=!0,P.put(route("products.restoreProduct",{id:a.id}),{},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error(e)},onFinish:()=>{w.value=!1}})},O=Q.throttle(()=>{const a={...c.filters};a.search=g.value,(!a.search||g.value=="")&&delete a.search,P.get(route("products.index"),a,{preserveState:!0,replace:!0})},300);K(g,O);const R=x(()=>c.filters),U=()=>{w.value=!0,P.get(route("products.index"),{per_page:c.filters.per_page||10},{preserveState:!0,replace:!0,onFinish:()=>{w.value=!1}})};return W(()=>window.addEventListener("resize",N)),q(()=>window.removeEventListener("resize",N)),(a,e)=>(o(),d($,null,[m(te,{show:M.value,imageUrl:B.value,productName:j.value,onClose:e[0]||(e[0]=t=>M.value=!1)},null,8,["show","imageUrl","productName"]),m(ee,{ref_key:"showConfirmModal",ref:D,onSuccess:e[1]||(e[1]=()=>{})},null,512),m(I(G),{title:"Data Barang"}),m(Y,{headerTitle:"Data Barang"},{default:y(()=>[l("div",de,[m(I(J),{data:"dropdowns"},{fallback:y(()=>[...e[15]||(e[15]=[l("div",{class:""},null,-1)])]),default:y(()=>[m(Z,{show:C.value,onClose:e[2]||(e[2]=t=>C.value=!1),filters:r.filters,dropdowns:r.dropdowns},null,8,["show","filters","dropdowns"])]),_:1}),m(_,{filters:r.filters,modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),onShowFilter:e[4]||(e[4]=t=>C.value=!0),filterCount:E.value,actions:[{route:a.route("products.create"),buttonText:"Tambah Produk"}]},null,8,["filters","modelValue","filterCount","actions"]),l("div",me,[l("button",{onClick:e[5]||(e[5]=t=>u.value="grid"),class:F([u.value==="grid"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Grid"},[...e[16]||(e[16]=[l("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),l("button",{onClick:e[6]||(e[6]=t=>u.value="list"),class:F([u.value==="list"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Daftar"},[...e[17]||(e[17]=[l("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2),l("button",{onClick:e[7]||(e[7]=t=>u.value="kanban"),class:F([u.value==="kanban"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Analisa DSS"},[...e[18]||(e[18]=[l("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1)])],2)]),r.products.data.length>10?(o(),s(T,{key:0,metadata:r.products,filters:r.filters,class:"mb-3"},null,8,["metadata","filters"])):b("",!0),r.products.data.length>0?(o(),d("div",ve,[u.value==="grid"?(o(),d("div",ce,[V.value?(o(!0),d($,{key:0},A(r.products.data,t=>(o(),s(ue,{key:"mobile"+t.id,data:t,onClick:v=>p("detail",t),onImageClick:S},null,8,["data","onClick"]))),128)):(o(!0),d($,{key:1},A(r.products.data,t=>(o(),s(re,{key:"desktop"+t.id,data:t,onDelete:v=>h(t),onForceDelete:v=>h(t,!0),onRestore:v=>z(t),onImageClick:S,onAdjustStock:v=>p("stock",t),onAdjustPrice:v=>p("price",t)},null,8,["data","onDelete","onForceDelete","onRestore","onAdjustStock","onAdjustPrice"]))),128))])):u.value==="list"?(o(),d("div",fe,[(o(!0),d($,null,A(r.products.data,t=>(o(),s(oe,{"is-trash-view":L.value,key:t.id,data:t,onDelete:v=>h(t,!1),onForceDelete:v=>h(t,!0),onRestore:v=>z(t),onImageClick:S},null,8,["is-trash-view","data","onDelete","onForceDelete","onRestore"]))),128))])):u.value==="kanban"?(o(),d("div",ke,[m(le,{products:r.products.data},null,8,["products"])])):b("",!0)])):(o(),d("div",ge,[R.value?(o(),s(H,{key:0,title:"Tidak ditemukan",message:"Maaf, tidak ada produk yang cocok dengan pencarian atau filter Anda. Coba atur ulang.",icon:"search","action-label":"Reset Filter","action-type":"button",onAction:U})):(o(),s(H,{key:1,title:"Belum ada Produk",message:"Toko Anda masih kosong. Mulai tambahkan produk pertama Anda sekarang!",icon:"box","action-label":"Tambah Produk Baru","action-url":a.route("products.create"),"action-type":"link"},null,8,["action-url"]))])),r.products.total>8?(o(),s(T,{key:3,metadata:r.products,filters:r.filters},null,8,["metadata","filters"])):b("",!0)])]),_:1}),m(ae,{show:f.value,onClose:e[14]||(e[14]=t=>f.value=!1),title:i.value.title},{default:y(()=>[k.value=="detail"?(o(),s(ie,{key:0,data:i.value.data,onAdjustStock:e[8]||(e[8]=t=>p("stock")),onAdjustPrice:e[9]||(e[9]=t=>p("price")),onDelete:h},null,8,["data"])):k.value=="stock"?(o(),s(ne,{key:1,product:i.value.data,onClose:e[10]||(e[10]=t=>f.value=!1),onSuccess:e[11]||(e[11]=t=>{f.value=!1,k.value="detail"})},null,8,["product"])):k.value=="price"?(o(),s(se,{key:2,product:i.value.data,onClose:e[12]||(e[12]=t=>f.value=!1),onSuccess:e[13]||(e[13]=t=>{f.value=!1,k.value="detail"})},null,8,["product"])):b("",!0)]),_:1},8,["show","title"])],64))}};export{Ke as default};
