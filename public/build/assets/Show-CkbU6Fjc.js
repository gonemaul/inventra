import{v as B,D as S,l as n,o as l,e as u,g as p,i as T,w as m,f as t,C as b,t as s,k as c,F as y,I as v,p as w}from"./vendor-core-B46KUNyc.js";import{_ as I}from"./DeleteConfirm-jyL8Xp5l.js";import{_ as H}from"./AuthenticatedLayout-9yD8UcND.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./Modal-DXDloOS9.js";import"./useActionLoading-pomD9vky.js";import"./useSidebar-DSTl-7Rw.js";const M={class:"w-full min-h-screen px-4 py-2 print:h-fit print:bg-white print:p-0 sm:px-6 lg:px-8 bg-customBg-light text-customText-light dark:bg-customBg-dark dark:text-customText-dark"},V={class:"flex flex-col items-start justify-between gap-4 mx-auto mb-8 print:hidden md:flex-row"},N={class:"flex items-center gap-2 mb-1"},q={class:"flex items-center gap-2 text-sm text-gray-500"},L={class:"font-mono"},R={key:0,class:"px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wider bg-green-100 text-green-700"},$={key:1,class:"px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wider bg-blue-100 text-blue-700"},z={class:"flex gap-3"},Q=["href"],O={class:"grid grid-cols-1 gap-6 mx-auto max-w-[87rem] lg:grid-cols-3 print:block"},E={class:"space-y-6 lg:col-span-2"},K={class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},U={class:"p-4 bg-white border border-gray-200 shadow-sm rounded-xl"},A={class:"text-xl font-black text-gray-800"},G={class:"p-4 bg-white border border-gray-200 shadow-sm rounded-xl"},Y={class:"text-xl font-black text-gray-800 uppercase"},J={class:"p-4 bg-white border border-gray-200 shadow-sm rounded-xl"},W={class:"text-xl font-black text-green-600"},X={class:"p-4 bg-white border border-gray-200 shadow-sm rounded-xl"},Z={class:"text-xl font-black text-indigo-600"},tt={class:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl"},et={class:"overflow-x-auto"},st={class:"w-full text-left"},ot={class:"divide-y divide-gray-100"},at={class:"px-4 py-3 text-gray-500 w-10"},rt={class:"px-4 py-3"},nt={class:"font-bold text-gray-800"},lt={class:"text-xs text-gray-500 font-mono"},it={class:"px-4 py-3 text-right font-mono text-sm text-gray-600"},dt={class:"px-4 py-3 text-center font-bold text-gray-800"},ct={class:"px-4 py-3 text-right font-bold text-gray-900"},xt={class:"bg-gray-50/50 border-t-2 border-gray-100"},ut={key:0},gt={colspan:"4",class:"px-4 py-2 text-right text-sm font-bold text-gray-500 uppercase"},pt={class:"px-4 py-2 text-right font-bold text-red-500"},ht={class:"px-4 py-3 text-right text-lg font-black text-indigo-600"},ft={key:1},mt={class:"px-4 py-1 text-right text-sm font-bold text-gray-600"},yt={key:2},bt={class:"px-4 py-1 text-right text-sm font-bold text-gray-600"},vt={class:"space-y-6 print:space-y-3"},_t={class:"p-5 bg-white border border-gray-200 shadow-sm print:mt-3 rounded-xl"},wt={class:"space-y-4"},kt={class:"flex items-center gap-3 overflow-hidden"},Dt={class:"flex items-center justify-center flex-shrink-0 w-6 h-6 text-xs font-bold text-indigo-600 bg-indigo-100 rounded"},jt={class:"truncate"},Ct={class:"text-xs text-gray-500"},Ft={class:"flex-shrink-0 text-sm font-black text-gray-900"},Pt={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},Bt={class:"space-y-4"},St={class:"flex items-center gap-3 overflow-hidden"},Tt={class:"flex items-center justify-center flex-shrink-0 w-6 h-6 text-xs font-bold text-orange-600 bg-orange-100 rounded"},It={class:"truncate"},Ht={class:"flex-shrink-0 text-sm font-bold text-gray-900"},Mt={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},Vt={class:"space-y-4"},Nt={class:"flex items-center gap-3 overflow-hidden"},qt={class:"flex items-center justify-center flex-shrink-0 w-6 h-6 text-xs font-bold text-green-600 bg-green-100 rounded"},Lt={class:"truncate"},Rt={class:"flex-shrink-0 font-mono text-sm font-bold text-green-600"},$t={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},zt={class:"bg-gray-100 rounded-lg p-3 text-sm text-gray-600 italic border border-gray-200 min-h-[60px]"},Qt={class:"pt-4 mt-4 text-xs text-gray-400 border-t border-gray-200"},Ot={class:"flex justify-between"},Et={class:"hidden print:block"},Zt={__name:"Show",props:{sale:Object},setup(a){const g=a,k=B(null),d=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),D=r=>new Date(r).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),x=r=>r.product_snapshot?.name||r.product?.name||"Unknown",j=r=>r.product_snapshot?.code||r.product?.code||"-",C=new Date().toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),F=()=>{const r={title:"Hapus rekap penjualan?",message:"Yakin ingin menghapus rekap penjualan ini? Stok produk akan dikembalikan otomatis.",itemName:g.sale.reference_no,url:route("sales.destroy",g.sale.id)};k.value.open(r)},_=S(()=>{const r=g.sale.items;console.log(r);const e=[...r].sort((h,f)=>parseFloat(f.subtotal)-parseFloat(h.subtotal)).slice(0,3),o=[...r].sort((h,f)=>parseFloat(f.quantity)-parseFloat(h.quantity)).slice(0,3),i=[...r].sort((h,f)=>parseFloat(f.profit)-parseFloat(h.profit)).slice(0,3),P=g.sale.total_revenue>0?(g.sale.total_profit/g.sale.total_revenue*100).toFixed(1):0;return{topRevenue:e,topQty:o,topProfit:i,margin:P}});return(r,e)=>(l(),n(y,null,[u(p(T),{title:`Penjualan - ${a.sale.reference_no}`},null,8,["title"]),u(I,{ref_key:"showConfirmDelete",ref:k,onSuccess:e[0]||(e[0]=()=>{})},null,512),u(H,{showSidebar:!1,showHeader:!1},{default:m(()=>[t("div",M,[t("div",V,[t("div",null,[t("div",N,[u(p(b),{href:r.route("sales.index"),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:m(()=>[...e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),e[2]||(e[2]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"}," Detail Penjualan ",-1))]),t("div",q,[t("span",L,s(a.sale.reference_no),1),e[3]||(e[3]=t("span",null,"•",-1)),t("span",null,s(D(a.sale.transaction_date)),1),e[4]||(e[4]=t("span",null,"•",-1)),a.sale.input_type==="realtime"?(l(),n("span",R,"POS")):(l(),n("span",$,"REKAP"))])]),t("div",z,[t("button",{onClick:F,class:"px-4 py-2 text-sm font-bold text-red-600 transition bg-red-100 rounded-lg hover:bg-red-200"}," Hapus "),t("a",{href:`/sales/${a.sale.id}/print`,target:"_blank",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-indigo-600 rounded-lg hover:bg-indigo-700"},[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})],-1),c(" Cetak Struk ",-1)])],8,Q)])]),t("div",O,[t("div",E,[t("div",K,[t("div",U,[e[7]||(e[7]=t("div",{class:"text-xs font-bold text-gray-500 uppercase"},"Total Item",-1)),t("div",A,[c(s(parseFloat(a.sale.financial_summary?.total_qty||0))+" ",1),e[6]||(e[6]=t("span",{class:"text-sm font-normal text-gray-400"},"Unit",-1))])]),t("div",G,[e[8]||(e[8]=t("div",{class:"text-xs font-bold text-gray-500 uppercase"},"Input",-1)),t("div",Y,s(a.sale.payment_method),1)]),t("div",J,[e[9]||(e[9]=t("div",{class:"text-xs font-bold text-gray-500 uppercase"},"Profit",-1)),t("div",W,s(d(a.sale.total_profit)),1)]),t("div",X,[e[10]||(e[10]=t("div",{class:"text-xs font-bold text-gray-500 uppercase"},"Total Bayar",-1)),t("div",Z,s(d(a.sale.total_revenue)),1)])]),t("div",tt,[e[15]||(e[15]=t("div",{class:"p-4 border-b border-gray-100 bg-gray-50"},[t("h3",{class:"font-bold text-gray-700"},"Rincian Barang")],-1)),t("div",et,[t("table",st,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"text-xs text-gray-500 uppercase bg-gray-50 border-b"},[t("th",{class:"px-4 py-3"},"#"),t("th",{class:"px-4 py-3"},"Produk"),t("th",{class:"px-4 py-3 text-right"},"Harga"),t("th",{class:"px-4 py-3 text-center"},"Qty"),t("th",{class:"px-4 py-3 text-right"},"Subtotal")])],-1)),t("tbody",ot,[(l(!0),n(y,null,v(a.sale.items,(o,i)=>(l(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",at,s(i+1),1),t("td",rt,[t("div",nt,s(x(o)),1),t("div",lt,s(j(o)),1)]),t("td",it,s(d(o.selling_price)),1),t("td",dt,s(parseFloat(o.quantity)),1),t("td",ct,s(d(o.subtotal)),1)]))),128))]),t("tfoot",xt,[a.sale.discount_total>0?(l(),n("tr",ut,[t("td",gt," Diskon "+s(a.sale.discount_type=="percent"?`(${a.sale.discount_value}%)`:""),1),t("td",pt," -"+s(d(a.sale.discount_total)),1)])):w("",!0),t("tr",null,[e[11]||(e[11]=t("td",{colspan:"4",class:"px-4 py-3 text-right text-sm font-black text-gray-700 uppercase"},"Grand Total",-1)),t("td",ht,s(d(a.sale.total_revenue)),1)]),a.sale.financial_summary?.payment_amount>0?(l(),n("tr",ft,[e[12]||(e[12]=t("td",{colspan:"4",class:"px-4 py-1 text-right text-xs font-bold text-gray-400 uppercase"},"Tunai / Diterima",-1)),t("td",mt,s(d(a.sale.financial_summary.payment_amount)),1)])):w("",!0),a.sale.financial_summary?.change_amount>0?(l(),n("tr",yt,[e[13]||(e[13]=t("td",{colspan:"4",class:"px-4 py-1 text-right text-xs font-bold text-gray-400 uppercase"},"Kembalian",-1)),t("td",bt,s(d(a.sale.financial_summary.change_amount)),1)])):w("",!0)])])])])]),t("div",vt,[t("div",_t,[e[16]||(e[16]=t("h3",{class:"flex items-center gap-2 mb-4 text-sm font-bold tracking-wide text-gray-700 uppercase"},[t("svg",{class:"w-4 h-4 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),c(" Top 3 Omset Tertinggi ")],-1)),t("div",wt,[(l(!0),n(y,null,v(_.value.topRevenue,(o,i)=>(l(),n("div",{key:i,class:"flex items-center justify-between"},[t("div",kt,[t("div",Dt,s(i+1),1),t("div",jt,[u(p(b),{href:r.route("products.show",o.product.slug),class:"text-sm font-bold text-gray-800 hover:text-indigo-600 transition truncate block",title:x(o)},{default:m(()=>[c(s(x(o)),1)]),_:2},1032,["href","title"]),t("div",Ct,s(parseFloat(o.quantity))+" "+s(o.product_snapshot?.unit),1)])]),t("div",Ft,s(d(o.subtotal)),1)]))),128))])]),t("div",Pt,[e[17]||(e[17]=t("h3",{class:"flex items-center gap-2 mb-4 text-sm font-bold tracking-wide text-gray-700 uppercase"},[t("svg",{class:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),c(" Top 3 Paling Laris (Qty) ")],-1)),t("div",Bt,[(l(!0),n(y,null,v(_.value.topQty,(o,i)=>(l(),n("div",{key:i,class:"flex items-center justify-between"},[t("div",St,[t("div",Tt,s(i+1),1),t("div",It,[u(p(b),{href:r.route("products.show",o.product.slug),class:"text-sm font-bold text-gray-800 hover:text-orange-600 transition truncate block",title:x(o)},{default:m(()=>[c(s(x(o)),1)]),_:2},1032,["href","title"])])]),t("div",Ht,s(parseFloat(o.quantity))+" "+s(o.product_snapshot?.unit),1)]))),128))])]),t("div",Mt,[e[18]||(e[18]=t("h3",{class:"flex items-center gap-2 mb-4 text-sm font-bold tracking-wide text-gray-700 uppercase"},[t("svg",{class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),c(" Penyumbang Profit ")],-1)),t("div",Vt,[(l(!0),n(y,null,v(_.value.topProfit,(o,i)=>(l(),n("div",{key:i,class:"flex items-center justify-between"},[t("div",Nt,[t("div",qt,s(i+1),1),t("div",Lt,[u(p(b),{href:r.route("products.show",o.product.slug),class:"text-sm font-bold text-gray-800 hover:text-green-600 transition truncate block",title:x(o)},{default:m(()=>[c(s(x(o)),1)]),_:2},1032,["href","title"])])]),t("div",Rt,s(d(o.profit)),1)]))),128))])]),t("div",$t,[e[20]||(e[20]=t("h3",{class:"mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase"}," Catatan Shift ",-1)),t("div",zt,' "'+s(a.sale.notes||"Tidak ada catatan khusus.")+'" ',1),t("div",Qt,[e[19]||(e[19]=t("h4",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-3"}," Informasi Dokumen ",-1)),t("div",Ot,[t("div",null," Dibuat: "+s(new Date(a.sale.created_at).toLocaleString("id-ID")),1),t("div",Et," Dicetak: "+s(p(C)),1)])])])])])])]),_:1})],64))}};export{Zt as default};
