import{y as oe,x as u,u as se,C as re,S as ne,z as le,N as ie,j as w,g,o as m,a as A,c as de,i as _,b as t,d as i,h as ue,w as W,l as ce,k as Z,A as ee,W as me,n as Y,F as X,q as te,t as p,p as ge,f as ae}from"./app-Bur_-z3X.js";import{_ as pe}from"./BarcodeScanner-CNJcIF0s.js";import"./debounce-WurCnodS.js";import ye from"./ConfirmSubmit-B0cHLN-G.js";import{B as ve}from"./BottomSheet-Cblv-OPz.js";import fe from"./Cart-DyRHDSRy.js";import"./Modal-CXRX1i4i.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MoneyInput-BPtbCMtn.js";function he(P){const y=oe(),S="POS_REALTIME_DRAFT_V3",M=u(""),h=u("all"),C=u([]),q=u(!1),b=u(8),j=u(""),$=u([]),R=u(!1),x=u(null);u(null),u(!1),u("single");const H=u(null),s=se({input_type:"realtime",report_date:new Date().toISOString().slice(0,10),items:[],customer_id:null,payment_amount:0,change_amount:0,payment_method:"cash",discount_type:"fixed",discount_value:0,notes:""});re(async()=>{q.value=!0;try{const o=await ne.get(route("sales.products.lite"));C.value=o.data}catch(o){console.error("Gagal load produk:",o),y.error("Gagal memuat database produk")}finally{q.value=!1}const e=localStorage.getItem(S);if(e)try{const o=JSON.parse(e);o.items&&(s.items=o.items),s.payment_amount=o.payment_amount||0,s.payment_method=o.payment_method||"cash",s.notes=o.notes||"",s.discount_type=o.discount_type||"fixed",s.discount_value=o.discount_value||0,o.selectedMember&&(x.value=o.selectedMember,s.customer_id=o.selectedMember.id)}catch{localStorage.removeItem(S)}}),le([()=>s.items,()=>s.customer_id,()=>s.payment_amount,()=>s.discount_value,()=>s.notes],()=>{localStorage.setItem(S,JSON.stringify({items:s.items,customer_id:s.customer_id,payment_amount:s.payment_amount,payment_method:s.payment_method,notes:s.notes,discount_type:s.discount_type,discount_value:s.discount_value,selectedMember:x.value}))},{deep:!0});const V=e=>{const o=P.products.find(n=>n.code==e);if(o){if(o.stock<=0){y.warning(`Stok produk "${o.name}" habis!`);return}return o}else y.warning(`Produk tidak ditemukan (Kode: ${e})`)},Q=e=>{const o=P.customers.find(n=>n.member_code==code||n.phone==code);o?a(o):alert("member tidak ada")};ie(()=>{H.value&&H.value.isScanning&&H.value.stop()});const U=w(()=>{let e=C.value;if(h.value!=="all"&&(e=e.filter(o=>o.category_id===h.value)),M.value){const o=M.value.toLowerCase();e=e.filter(n=>n.name.toLowerCase().includes(o)||n.code.toLowerCase().includes(o))}return e.slice(0,b.value)}),T=()=>{b.value<C.value.length&&(b.value+=20)};w(()=>{if(!j){$.value=[];return}if(j.value){const e=j.value.toLowerCase();result=P.customers.filter(o=>o.name.toLowerCase().includes(e)||o.code.toLowerCase().includes(e))}$.value=result.slice(0,5)});const k=w(()=>s.items.reduce((e,o)=>e+(parseFloat(o.subtotal)||0),0)),F=w(()=>{const e=parseFloat(s.discount_value)||0;if(e<=0)return 0;if(s.discount_type==="percent"){const o=e>100?100:e;return Math.round(k.value*o/100)}return e>k.value?k.value:e}),v=w(()=>{const e=k.value-F.value,o=e>0?e:0;return o===0&&(s.payment_amount=0,s.discount_value=0),o}),B=w(()=>(parseFloat(s.payment_amount)||0)-v.value),L=w(()=>s.payment_method!=="cash"&&s.payment_method!==""?!0:(parseFloat(s.payment_amount)||0)>=v.value),z=w(()=>s.items.some(e=>e.quantity<=0||isNaN(e.quantity))),d=w(()=>{const e=v.value;if(e<=0)return[];const o=[{label:"Uang Pas",value:e}];if([2e3,5e3,1e4,2e4,5e4,1e5].forEach(c=>{c>e&&!o.find(J=>J.value===c)&&o.push({label:f(c),value:c})}),e>5e4){const c=Math.ceil(e/5e4)*5e4;o.find(J=>J.value===c)||o.push({label:f(c),value:c})}return o.slice(0,4)}),O=e=>{s.payment_amount=e.value},E=()=>{s.payment_amount=0},D=e=>{if(parseFloat(e.stock)<=0){y.error("Stok habis!");return}const o=s.items.find(n=>n.product_id===e.id);if(o){if(o.quantity+1>e.stock){y.warning("Stok maksimal!");return}o.quantity++,I(o)}else{const n=parseFloat(e.selling_price||e.price);s.items.push({product_id:e.id,code:e.code,name:e.name,unit:e.unit,stock_max:parseFloat(e.stock),image:e.image_path,selling_price:n,original_price:n,quantity:1,subtotal:n})}},N=e=>s.items.splice(e,1),K=(e,o)=>{const n=s.items[e],c=parseFloat(n.quantity)+o;if(c>n.stock_max){y.warning(`Stok sisa ${n.stock_max}`);return}if(c<=0){confirm("Hapus item ini?")&&N(e);return}n.quantity=c,I(n)},I=e=>{e.unit?.is_decimal===1||(e.quantity=Math.round(e.quantity),e.quantity<1&&(e.quantity=1)),e.quantity>e.stock_max&&(e.quantity=e.stock_max,y.warning(`Stok sisa ${e.stock_max}`)),e.subtotal=Math.round(e.quantity*e.selling_price)},G=e=>{const o=parseFloat(e.subtotal)||0,n=parseFloat(e.selling_price)||0;if(!(n<=0))if(e.unit?.is_decimal===1){let c=o/n;c>e.stock_max&&(c=e.stock_max,e.subtotal=Math.round(c*n),y.warning("Melebihi sisa stok!")),e.quantity=parseFloat(c.toFixed(4))}else confirm(`‚ö†Ô∏è Ubah harga satuan agar sesuai total Rp ${f(o)}?`)?e.quantity>0&&(e.selling_price=Math.round(o/e.quantity)):e.subtotal=Math.round(e.quantity*e.selling_price)},l=e=>{e.subtotal=Math.round(e.quantity*e.selling_price)},a=e=>{x.value=e,s.customer_id=e.id,$.value=[],j.value=""},r=(e=!1,o={})=>{s.change_amount=B.value,s.payment_amount=parseFloat(s.payment_amount),s.transform(n=>({...n,print_invoice:e})).post(route("sales.pos.store"),{onStart:o.onStart,onFinish:o.onFinish,onSuccess:n=>{localStorage.removeItem(S),s.reset(),s.items=[],x.value=null,o.onSuccess&&o.onSuccess(n)},onError:n=>{console.error(n),y.error("Gagal memproses transaksi")}})},f=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e);return{form:s,allProducts:C,filteredProducts:U,isFetchingData:q,queryProduk:V,queryMember:Q,searchQuery:M,selectedCategory:h,loadMoreProducts:T,memberSearch:j,memberSearchResults:$,isLoadingMember:R,selectedMember:x,selectMember:a,removeMember:()=>{x.value=null,s.customer_id=null},subTotal:k,discountAmount:F,grandTotal:v,changeAmount:B,isPaymentSufficient:L,hasInvalidQty:z,moneySuggestions:d,addItem:D,removeItem:N,updateQty:K,recalcFromQty:I,recalcFromSubtotal:G,recalcFromPrice:l,handleMoneyClick:O,resetPayment:E,submitTransaction:r,rp:f}}const be={class:"flex flex-col lg:flex-row h-[100dvh] w-full bg-gray-100 dark:bg-gray-900 overflow-hidden font-sans transition-colors duration-300"},xe={class:"relative flex flex-col flex-1 h-full overflow-hidden"},ke={class:"z-10 flex items-center gap-3 px-4 py-3 bg-white border-b shadow-sm shrink-0 dark:bg-gray-800 dark:border-gray-700"},we={class:"relative flex-1"},_e={key:0,class:"absolute right-11 top-3.5 flex items-center gap-2"},Me={class:"px-4 py-2 overflow-x-auto bg-white border-b shadow-sm shrink-0 dark:bg-gray-800 dark:border-gray-700 whitespace-nowrap scrollbar-hide"},Se=["onClick"],Ce={class:"grid grid-cols-2 gap-3 pb-20 md:grid-cols-3 lg:grid-cols-4"},qe=["onClick"],je={class:"relative w-full overflow-hidden bg-gray-100 aspect-square dark:bg-gray-700"},Fe=["src"],Be={key:1,class:"absolute z-10 top-2 right-2"},Pe={class:"bg-gray-900/70 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm"},$e={key:2,class:"absolute z-10 top-2 left-2"},Te={class:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm animate-pulse"},ze={class:"p-3 flex flex-col h-[85px] justify-between"},Ie={class:"text-xs font-bold leading-snug text-gray-800 sm:text-sm dark:text-gray-100 line-clamp-2"},He={class:"flex items-end justify-between mt-1"},Le={class:"flex flex-col"},Ae={class:"text-[13px] sm:text-[15px] font-black text-lime-600 dark:text-lime-400 leading-none"},De={key:0,class:"py-10 text-center"},Ne={key:1,class:"flex flex-col items-center justify-center px-4 py-16 text-center animate-fade-in"},Re={key:2,class:"py-4 text-center text-[10px] text-gray-400"},Ve={key:0,class:"absolute z-30 lg:hidden bottom-4 left-4 right-4"},Qe={class:"flex items-center gap-3"},Ue={class:"flex items-center justify-center text-xs font-bold text-white rounded-full shadow-sm bg-lime-500 dark:bg-white dark:text-lime-700 w-7 h-7"},Oe={class:"flex flex-col items-start leading-none gap-0.5"},Ee={class:"text-lg font-bold"},Ke={class:"space-y-6"},Ge={class:"flex items-center gap-4 pb-4 border-b border-gray-100 dark:border-gray-800"},Je={class:"flex items-center justify-center text-lg font-bold text-gray-400 bg-gray-100 border border-gray-200 w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-700 shrink-0"},We={class:"flex-1 min-w-0"},Ye={class:"text-lg font-bold leading-tight text-gray-800 truncate dark:text-white"},Xe={class:"flex items-center justify-between mt-1"},Ze={class:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"},et={class:"bg-gray-50 dark:bg-gray-800/50 p-1.5 rounded-2xl border border-gray-200 dark:border-gray-700"},tt={class:"flex items-center justify-between"},at=["disabled"],ot={class:"flex-1 px-2 text-center"},st={class:"flex items-center justify-between p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 dark:border-gray-800 rounded-xl"},rt={class:"font-bold text-gray-600 dark:text-gray-300"},nt={class:"text-right"},lt={class:"text-2xl font-black text-gray-900 dark:text-white"},it={key:0,class:"px-3 py-2 text-xs font-bold text-center text-red-600 border border-red-100 rounded-lg bg-red-50"},dt={class:"flex gap-3 h-14"},bt={__name:"index",props:{categories:Array,customers:Array},setup(P){const S=he(P),{form:M,filteredProducts:h,isFetchingData:C,searchQuery:q,selectedCategory:b,loadMoreProducts:j,queryMember:$,queryProduk:R,addItem:x,grandTotal:H,changeAmount:s,isPaymentSufficient:V,hasInvalidQty:Q,submitTransaction:U,rp:T}=S,k=oe(),F=u(!1),v=u(!1),B=u(!1),L=u(!1),z=u("product"),d=u({id:null,name:"",code:"",price:0,quantity:1,stock:0,unit:"Pcs",image:null}),O=l=>{console.log(l),d.value={id:l.id,name:l.name,code:l.code,image_url:l.image_url,price:parseFloat(l.selling_price||l.price||0),quantity:1,stock:parseInt(l.stock||0),unit:l.unit?.name||"Pcs"},L.value=!0},E=l=>{const{scrollTop:a,clientHeight:r,scrollHeight:f}=l.target;a+r>=f-50&&j()},D=()=>{z.value="product",v.value=!0},N=()=>{z.value="member",v.value=!0},K=l=>{v.value=!1,z.value=="product"?(l=R(l),O(l)):z.value=="member"&&(l=$(l))},I=(l=!1)=>{x(d),l&&D()},G=l=>{if(M.items.length===0)return k.error("Keranjang kosong!");if(Q.value)return k.error("Qty tidak valid!");if(M.payment_method==="cash"&&!V.value)return k.error("Uang kurang!");U(l,{onSuccess:a=>{B.value=!1,F.value=!1;const r=a.props.flash?.print_url;l&&r?setTimeout(()=>{window.open(r,"_blank","width=300,height=600")},50):l&&!r&&alert("Gagal mendapatkan URL Print dari server.")}})};return(l,a)=>(m(),g(X,null,[A(i(ue),{title:"Kasir POS"}),A(ye,{showConfirmModal:B.value,changeAmount:i(s),onClose:a[0]||(a[0]=r=>B.value=!1),onConfirmTransaction:G},null,8,["showConfirmModal","changeAmount"]),v.value?(m(),de(pe,{key:0,onResult:K,onClose:a[1]||(a[1]=r=>v.value=!1)})):_("",!0),t("div",be,[t("div",xe,[t("div",ke,[A(i(ce),{href:l.route("dashboard"),class:"p-2 rounded-lg bg-lime-50 dark:bg-gray-700 text-lime-700 dark:text-lime-400"},{default:W(()=>[...a[15]||(a[15]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t("div",we,[Z(t("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>me(q)?q.value=r:null),type:"text",placeholder:"Cari Nama / Kode...",class:"w-full pl-9 pr-10 py-2.5 bg-gray-100 dark:bg-gray-900 border-none rounded-xl focus:ring-2 focus:ring-lime-500 text-sm dark:text-white transition-all shadow-inner"},null,512),[[ee,i(q)]]),a[18]||(a[18]=t("span",{class:"absolute text-gray-400 left-3 top-3"},"üîç",-1)),i(C)?(m(),g("div",_e,[...a[16]||(a[16]=[t("span",{class:"text-[10px] text-gray-400 italic"},"Syncing...",-1),t("span",{class:"relative flex w-2 h-2"},[t("span",{class:"absolute inline-flex w-full h-full rounded-full opacity-75 animate-ping bg-lime-400"}),t("span",{class:"relative inline-flex w-2 h-2 rounded-full bg-lime-500"})],-1)])])):_("",!0),t("button",{onClick:a[3]||(a[3]=r=>D()),class:"absolute right-1.5 top-1.5 p-1 bg-white dark:bg-gray-700 rounded-lg shadow-sm text-gray-600 dark:text-gray-200 hover:text-lime-600 hover:bg-lime-50 transition border border-gray-200 dark:border-gray-600",title:"Scan Produk"},[...a[17]||(a[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])])]),t("div",Me,[t("button",{onClick:a[4]||(a[4]=r=>b.value="all"),class:Y([i(b)==="all"?"bg-lime-500 text-white shadow-lime-500/40":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600","px-5 py-2 mr-2 text-xs font-bold transition-all rounded-full active:scale-95"])}," Semua ",2),(m(!0),g(X,null,te(P.categories,r=>(m(),g("button",{key:r.id,onClick:f=>b.value=r.id,class:Y([i(b)===r.id?"bg-lime-500 text-white shadow-lime-500/40":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600","px-5 py-2 mr-2 text-xs font-bold transition-all rounded-full active:scale-95"])},p(r.name),11,Se))),128))]),t("div",{class:"h-[calc(100vh-220px)] flex-1 p-4 overflow-y-auto bg-gray-100 custom-scroll pb-28 lg:pb-4 dark:bg-gray-900",onScroll:E},[t("div",Ce,[(m(!0),g(X,null,te(i(h),r=>(m(),g("div",{key:r.id,onClick:f=>i(x)(r),class:"relative overflow-hidden transition-all bg-white border border-gray-200 shadow-sm cursor-pointer group dark:bg-gray-800 rounded-xl dark:border-gray-700 hover:shadow-md hover:border-lime-500 active:scale-95"},[t("div",je,[r.image_path?(m(),g("img",{key:0,src:r.image_url,loading:"lazy",decoding:"async",alt:"",class:"absolute inset-0 z-10 object-cover w-full h-full transition-opacity duration-500 opacity-0",onload:"this.classList.remove('opacity-0')",onerror:"this.style.display='none'"},null,8,Fe)):_("",!0),a[19]||(a[19]=t("div",{class:"flex flex-col items-center justify-center w-full h-full text-gray-500 bg-gray-300 dark:text-gray-700 dark:bg-gray-400"},[t("svg",{class:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",{class:"text-[9px] font-bold mt-1 opacity-50"},"NO IMG")],-1)),r.unit?(m(),g("div",Be,[t("span",Pe,p(r.unit.name),1)])):_("",!0),r.stock<=5?(m(),g("div",$e,[t("span",Te," Sisa "+p(parseFloat(r.stock)),1)])):_("",!0),a[20]||(a[20]=t("div",{class:"absolute inset-0 z-20 flex items-center justify-center transition-opacity opacity-0 bg-lime-500/20 group-hover:opacity-100"},[t("div",{class:"p-2 text-white transition-transform duration-300 scale-0 rounded-full shadow-lg bg-lime-500 group-hover:scale-110"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])])],-1))]),t("div",ze,[t("h3",Ie,p(r.name),1),t("div",He,[t("div",Le,[t("span",Ae,p(i(T)(r.selling_price||r.price)),1)]),a[21]||(a[21]=t("div",{class:"text-gray-300 transition-colors group-hover:text-lime-500"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])])],8,qe))),128))]),i(C)&&i(h).length===0?(m(),g("div",De,[...a[22]||(a[22]=[t("div",{class:"w-8 h-8 mx-auto mb-2 border-b-2 rounded-full animate-spin border-lime-500"},null,-1),t("span",{class:"text-xs text-gray-400"},"Memuat database produk...",-1)])])):i(h).length===0?(m(),g("div",Ne,[a[24]||(a[24]=ge('<div class="relative mb-6"><div class="flex items-center justify-center w-24 h-24 rounded-full shadow-inner bg-gray-50 dark:bg-gray-800"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div class="absolute -top-2 -right-2 bg-white dark:bg-gray-700 rounded-full p-1.5 shadow-md border border-gray-100 dark:border-gray-600"><div class="p-1 rounded-full bg-lime-100 dark:bg-lime-900/50"><svg class="w-5 h-5 text-lime-500 dark:text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"></path></svg></div></div></div><h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white"> Produk tidak ditemukan </h3><p class="max-w-xs mx-auto mb-6 text-sm leading-relaxed text-gray-500 dark:text-gray-400"> Kami tidak dapat menemukan produk dengan kata kunci atau kategori tersebut. </p>',3)),t("button",{onClick:a[5]||(a[5]=r=>{l.search="",b.value="all"}),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:border-lime-500 hover:text-lime-600 dark:hover:border-lime-500 dark:hover:text-lime-400 shadow-sm hover:shadow-md"},[...a[23]||(a[23]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),ae(" Reset Pencarian ",-1)])])])):_("",!0),i(h).length>0&&i(h).length%20===0?(m(),g("div",Re," Scroll untuk memuat lebih banyak... ")):_("",!0)],32),i(M).items.length>0?(m(),g("div",Ve,[t("button",{onClick:a[6]||(a[6]=r=>F.value=!0),class:"w-full bg-gray-900 dark:bg-lime-600 text-white p-3.5 rounded-2xl shadow-xl shadow-gray-900/20 flex justify-between items-center animate-bounce-subtle"},[t("div",Qe,[t("span",Ue,p(i(M).items.reduce((r,f)=>r+parseFloat(f.quantity),0)),1),t("div",Oe,[a[25]||(a[25]=t("span",{class:"text-[9px] text-gray-400 dark:text-lime-100 uppercase font-bold tracking-wider"},"Total Belanja",-1)),t("span",Ee,p(i(T)(i(H))),1)])]),a[26]||(a[26]=t("span",{class:"flex items-center gap-1 px-4 py-2 text-xs font-bold bg-gray-700 dark:bg-lime-800/30 rounded-xl"},[ae(" Bayar "),t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})])],-1))])])):_("",!0)]),A(fe,{showMobileCart:F.value,reprops:i(S),onOpenScanMember:N,onShowBayar:a[7]||(a[7]=r=>B.value=!0),onShowDesktop:a[8]||(a[8]=r=>F.value=!1)},null,8,["showMobileCart","reprops"])]),A(ve,{show:L.value,onClose:a[14]||(a[14]=r=>L.value=!1),title:"Tambah Pesanan"},{footer:W(()=>[t("div",dt,[t("button",{onClick:a[12]||(a[12]=r=>I(!1)),class:"flex-1 font-bold transition border text-lime-700 bg-lime-100 border-lime-200 rounded-xl active:bg-lime-200 dark:bg-lime-800 dark:text-lime-300 dark:border-lime-700"}," Masuk Keranjang "),t("button",{onClick:a[13]||(a[13]=r=>I(!0)),class:"flex-[1.3] bg-gray-900 text-white font-bold rounded-xl shadow-xl flex items-center justify-center gap-2 active:scale-[0.98] transition hover:bg-gray-800 dark:bg-white dark:text-gray-900"},[...a[32]||(a[32]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),t("span",null,"Scan Lagi",-1)])])])]),default:W(()=>[t("div",Ke,[t("div",Ge,[t("div",Je,p(d.value.name?.substring(0,2).toUpperCase()),1),t("div",We,[t("h3",Ye,p(d.value.name),1),t("div",Xe,[t("p",Ze,p(d.value.code),1),t("p",{class:Y(["text-xs font-medium",3>d.value.stock?"text-red-500":"text-gray-400"])}," Stok: "+p(d.value.stock),3)])])]),t("div",et,[t("div",tt,[t("button",{onClick:a[9]||(a[9]=r=>d.value.quantity>1?d.value.quantity--:null),class:"flex items-center justify-center text-gray-500 transition bg-white border border-gray-200 shadow-sm w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-600 active:scale-95 hover:text-red-500 disabled:opacity-50",disabled:d.value.quantity<=1},[...a[27]||(a[27]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,at),t("div",ot,[a[28]||(a[28]=t("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-0.5"},"Jumlah Beli",-1)),Z(t("input",{"onUpdate:modelValue":a[10]||(a[10]=r=>d.value.quantity=r),type:"number",class:"w-full p-0 text-3xl font-black text-center text-gray-800 bg-transparent border-none dark:text-white focus:ring-0"},null,512),[[ee,d.value.quantity,void 0,{number:!0}]])]),t("button",{onClick:a[11]||(a[11]=r=>d.value.quantity++),class:"flex items-center justify-center text-white transition shadow-lg w-14 h-14 bg-lime-500 rounded-xl shadow-lime-500/30 active:scale-95"},[...a[29]||(a[29]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),t("div",st,[t("div",null,[a[30]||(a[30]=t("p",{class:"text-xs text-gray-400"},"Harga Satuan",-1)),t("p",rt,p(i(T)(d.value.price)),1)]),t("div",nt,[a[31]||(a[31]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Subtotal ",-1)),t("p",lt,p(i(T)(d.value.price*d.value.quantity)),1)])]),d.value.quantity>d.value.stock?(m(),g("div",it," ‚ö†Ô∏è Jumlah melebihi sisa stok ("+p(d.value.stock)+") ",1)):_("",!0)])]),_:1},8,["show"])],64))}};export{bt as default};
