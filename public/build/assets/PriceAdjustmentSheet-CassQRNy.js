import{u as I,C as y,l as n,o as d,f as e,m as g,t as a,e as f,g as l,F as V,H as j,n as u,j as B}from"./vendor-core-B1zCOcYd.js";import{u as F}from"./useActionLoading-AmW3nhbQ.js";import{_ as k}from"./InputRupiah-QN5qUxkk.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";const M={class:"flex-1 p-4 space-y-6 overflow-y-auto custom-scrollbar"},P={class:"flex items-center gap-3 pb-3 border-b border-gray-100 dark:border-gray-700"},S={class:"relative flex-shrink-0 w-20 h-20 overflow-hidden bg-gray-100 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600"},z=["src"],D={class:"flex-1 min-w-0"},N={class:"flex items-center mb-1"},A={class:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-1.5 py-0.5 rounded text-[10px] font-mono font-bold"},H={class:"flex flex-wrap items-center gap-x-2 gap-y-1 text-[10px] leading-tight mb-2"},L={class:"flex items-center gap-1"},$={class:"font-bold tracking-tight text-blue-600 uppercase dark:text-blue-400"},R={key:0,class:"text-gray-300 dark:text-gray-600"},U={key:1,class:"text-gray-500 dark:text-gray-400"},E={class:"flex items-center gap-1 text-gray-500 dark:text-gray-400"},O={class:"font-bold text-gray-700 dark:text-gray-200"},G={class:"text-[9px] px-1 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-gray-600 dark:text-gray-300"},J={class:"text-sm font-bold leading-snug text-gray-900 dark:text-white line-clamp-2"},T={class:"space-y-5"},q={class:"relative p-3 border border-yellow-100 bg-yellow-50 dark:bg-yellow-900/10 rounded-xl dark:border-yellow-900/30"},K={class:"block text-[10px] font-bold text-yellow-700 dark:text-yellow-500 uppercase tracking-wider mb-1"},Q={key:0,class:"text-[10px] text-red-500 mt-1"},W={class:"relative p-3 border bg-lime-50 dark:bg-lime-900/10 rounded-xl border-lime-100 dark:border-lime-900/30"},X={class:"block text-[10px] font-bold text-lime-700 dark:text-lime-500 uppercase tracking-wider mb-1"},Y={key:0,class:"text-[10px] text-red-500 mt-1"},Z={class:"flex gap-2 pb-2 overflow-x-auto no-scrollbar"},ee=["onClick"],te={class:"flex flex-col"},re={class:"text-right"},se={class:"text-[10px] text-gray-400 uppercase font-bold block mb-0.5"},ae={class:"flex gap-3 p-4 bg-white border-t border-gray-200 dark:border-gray-700 dark:bg-customBg-tableDark"},oe=["disabled"],le={key:0},ne={key:1},de={__name:"PriceAdjustmentSheet",props:{product:Object},emits:["close","success"],setup(s,{emit:h}){const p=s;console.log(p.product);const _=h,{isActionLoading:x}=F(),r=I({id:p.product?.id,type:"price",purchase_price:p.product?.purchase_price||0,selling_price:p.product?.selling_price||0}),b=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i||0),c=y(()=>(parseInt(r.selling_price)||0)-(parseInt(r.purchase_price)||0)),m=y(()=>{const i=parseInt(r.selling_price)||0;return i<=0?0:(c.value/i*100).toFixed(1)}),v=i=>{const t=parseInt(r.purchase_price)||0;if(t<=0)return;const o=t*(i/100);r.selling_price=Math.ceil(t+o)},w=()=>{x.value=!0,r.put(route("products.update",p.product?.slug),{onSuccess:()=>_("success"),onFinish:()=>x.value=!1,preserveScroll:!0})};return(i,t)=>(d(),n("form",{onSubmit:B(w,["prevent"]),class:"flex flex-col h-full bg-white dark:bg-customBg-tableDark"},[e("div",M,[e("div",P,[e("div",S,[s.product.image_url?(d(),n("img",{key:0,src:s.product.image_url,loading:"lazy",decoding:"async",onerror:"this.style.display='none'",onload:"this.classList.remove('opacity-0')",class:"absolute inset-0 z-10 object-cover w-full h-full bg-white opacity-0 dark:bg-gray-900"},null,8,z)):g("",!0),t[3]||(t[3]=e("div",{class:"absolute inset-0 z-0 w-full h-full flex items-center justify-center text-[10px] text-gray-400"}," NO IMG ",-1))]),e("div",D,[e("div",N,[e("span",A,a(s.product.code),1)]),e("div",H,[e("div",L,[t[4]||(t[4]=e("svg",{class:"w-1 h-1 fill-blue-500",viewBox:"0 0 6 6"},[e("circle",{cx:"3",cy:"3",r:"3"})],-1)),e("span",$,a(s.product.category?.name),1),s.product.product_type?(d(),n("span",R,"â€¢")):g("",!0),s.product.product_type?(d(),n("span",U,a(s.product.product_type?.name),1)):g("",!0)]),t[7]||(t[7]=e("span",{class:"text-gray-300 dark:text-gray-600"},"|",-1)),e("div",E,[t[5]||(t[5]=e("span",{class:"font-medium"},"Size:",-1)),e("span",O,a(s.product.size?.name),1),t[6]||(t[6]=e("span",{class:"opacity-40"},"/",-1)),e("span",G,a(s.product.unit?.name),1)])]),e("h2",J,a(s.product.name),1)])]),e("div",T,[e("div",q,[e("label",K," Harga Beli (HPP) | "+a(b(s.product?.purchase_price)),1),f(k,{modelValue:l(r).purchase_price,"onUpdate:modelValue":t[0]||(t[0]=o=>l(r).purchase_price=o),placeholder:"0",class:"w-full p-0 text-xl font-black text-left text-gray-800 placeholder-gray-300 bg-transparent border-none dark:text-white focus:ring-0"},null,8,["modelValue"]),l(r).errors.purchase_price?(d(),n("p",Q,a(l(r).errors.purchase_price),1)):g("",!0)]),e("div",W,[e("label",X," Harga Jual | "+a(b(s.product?.selling_price)),1),f(k,{modelValue:l(r).selling_price,"onUpdate:modelValue":t[1]||(t[1]=o=>l(r).selling_price=o),placeholder:"0",class:"w-full p-0 text-xl font-black text-left text-gray-800 placeholder-gray-300 bg-transparent border-none dark:text-white focus:ring-0"},null,8,["modelValue"]),l(r).errors.selling_price?(d(),n("p",Y,a(l(r).errors.selling_price),1)):g("",!0)])]),e("div",null,[t[8]||(t[8]=e("label",{class:"text-[10px] text-gray-400 font-bold uppercase mb-2 block"},"Set Markup Cepat (%)",-1)),e("div",Z,[(d(),n(V,null,j([10,20,30,50,100],o=>e("button",{key:o,type:"button",onClick:ie=>v(o),class:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-600 text-xs font-bold text-gray-600 dark:text-gray-300 hover:bg-lime-50 hover:border-lime-200 hover:text-lime-600 transition whitespace-nowrap"}," +"+a(o)+"% ",9,ee)),64))])]),e("div",{class:u(["flex items-center justify-between p-4 transition-colors duration-300 border rounded-xl",c.value<0?"bg-red-50 border-red-100 dark:bg-red-900/20 dark:border-red-800":"bg-gray-50 border-gray-100 dark:bg-gray-700/50 dark:border-gray-600"])},[e("div",te,[e("span",{class:u(["text-[10px] font-bold uppercase tracking-wider",c.value<0?"text-red-500":"text-gray-400"])},a(c.value<0?"Potensi Rugi":"Estimasi Profit"),3),e("span",{class:u(["text-xl font-black",c.value<0?"text-red-600":"text-gray-800 dark:text-white"])},a(b(c.value)),3)]),e("div",re,[e("span",se,"Target Margin | "+a(s.product.target_margin_percent)+" % ",1),e("span",{class:u(["inline-block px-2 py-1 text-sm font-bold rounded",m.value<s.product.target_margin_percent?"bg-red-200 text-red-700":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300"])},a(m.value)+"% ",3)])],2)]),e("div",ae,[e("button",{type:"button",onClick:t[2]||(t[2]=o=>i.$emit("close")),class:"w-1/3 px-4 py-3 text-sm font-bold text-gray-700 transition bg-gray-100 rounded-xl hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"}," Batal "),e("button",{type:"submit",disabled:l(r).processing,class:"flex justify-center w-2/3 px-4 py-3 text-sm font-bold text-white transition transform shadow-lg bg-lime-600 rounded-xl hover:bg-lime-700 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed"},[l(r).processing?(d(),n("span",le,"Menyimpan...")):(d(),n("span",ne,"Update Harga"))],8,oe)])],32))}},me=C(de,[["__scopeId","data-v-29fc596b"]]);export{me as default};
