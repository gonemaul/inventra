import{u as j,D as c,l as g,o as b,e as p,g as d,i as B,w as m,f as t,C as I,k as x,z as u,A as f,t as o,n as N,m as P,F as y,I as C}from"./vendor-core-By7Plnkm.js";import{_ as V}from"./AuthenticatedLayout-BlgKae2S.js";import{u as z}from"./useExport-ZWbXSJP4.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-CpEDRVzi.js";import"./useActionLoading-BREuot5v.js";const H={class:"max-w-5xl mx-auto space-y-6"},M={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},F={class:"flex items-center gap-2"},T={class:"flex justify-end gap-2 p-3 bg-white shadow-sm dark:bg-gray-800 rounded-xl"},D={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},K={class:"relative overflow-hidden bg-white border border-gray-200 shadow-xl md:col-span-2 dark:bg-gray-800 rounded-2xl dark:border-gray-700"},O={class:"p-8"},R={class:"mb-6"},S={class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700"},E={class:"font-bold text-gray-900 dark:text-white"},U={class:"mb-6"},$={class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700"},A={class:"font-bold text-red-500"},q={class:"flex items-center justify-between p-4 mb-6 rounded-lg bg-blue-50 dark:bg-blue-900/20"},G={class:"text-xs font-bold text-blue-600"},J={class:"text-xl font-black text-blue-700 dark:text-blue-400"},Q={class:"mb-6"},W={class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700"},X={class:"font-bold text-red-500"},Y={class:"relative z-10 flex items-center justify-between"},Z={class:"mt-1 text-xs opacity-75"},tt={class:"text-3xl font-black tracking-tight"},et={class:"space-y-6"},at={class:"p-6 bg-white border border-gray-200 shadow-sm dark:bg-gray-800 rounded-2xl dark:border-gray-700"},st={key:0},rt={key:1,class:"py-10 text-xs text-center text-gray-400"},ot={class:"mt-4 space-y-2"},dt={class:"text-gray-600 dark:text-gray-400"},nt={class:"font-bold"},mt={__name:"ProfitLoss",props:{filters:Object,data:Object},setup(s){const a=s,l=j({start_date:a.filters.start_date,end_date:a.filters.end_date}),{exportToCsv:h}=z(),k=()=>{const r=[{Item:"Penjualan (Omzet)",Nilai:a.data.revenue},{Item:"HPP",Nilai:a.data.cogs},{Item:"Laba Kotor",Nilai:a.data.gross_profit},{Item:"Margin Laba Kotor (%)",Nilai:a.data.gross_margin},{Item:"Total Pengeluaran",Nilai:a.data.expenses},...a.data.expense_details.map(e=>({Item:` - ${e.category||"Lainnya"}`,Nilai:e.total})),{Item:"Laba Bersih",Nilai:a.data.net_profit},{Item:"Margin Laba Bersih (%)",Nilai:a.data.net_margin}];h("Laporan_Laba_Rugi",r)},v=()=>{l.get(route("reports.profit-loss"),{preserveScroll:!0})},n=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),w=c(()=>({chart:{type:"donut"},labels:a.data.expense_details.map(r=>r.category||"Lain-lain"),colors:["#f43f5e","#f59e0b","#8b5cf6","#3b82f6"],dataLabels:{enabled:!1},legend:{position:"bottom"}})),_=c(()=>a.data.expense_details.map(r=>parseFloat(r.total)));return(r,e)=>(b(),g(y,null,[p(d(B),{title:"Laporan Laba Rugi"}),p(V,{headerTitle:"Laba Rugi (Profit & Loss)"},{default:m(()=>[t("div",H,[t("div",M,[t("div",F,[p(d(I),{href:r.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:m(()=>[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),x(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",{class:"flex gap-2"},[t("button",{onClick:k,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),x(" Export CSV ",-1)])]),e[4]||(e[4]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),x(" Print ")],-1))])]),t("div",T,[u(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=i=>d(l).start_date=i),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[f,d(l).start_date]]),u(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=i=>d(l).end_date=i),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[f,d(l).end_date]]),t("button",{onClick:v,class:"px-4 text-sm font-bold text-white bg-purple-600 rounded-lg hover:bg-purple-700"}," Hitung ")]),t("div",D,[t("div",K,[e[14]||(e[14]=t("div",{class:"h-2 bg-gradient-to-r from-purple-500 to-indigo-600"},null,-1)),t("div",O,[e[13]||(e[13]=t("h2",{class:"mb-8 text-xl font-black tracking-widest text-center text-gray-800 uppercase dark:text-white"}," Income Statement ",-1)),t("div",R,[e[6]||(e[6]=t("p",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Pendapatan ",-1)),t("div",S,[e[5]||(e[5]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Penjualan Kotor (Omzet)",-1)),t("span",E,o(n(s.data.revenue)),1)])]),t("div",U,[e[8]||(e[8]=t("p",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Harga Pokok ",-1)),t("div",$,[e[7]||(e[7]=t("span",{class:"text-gray-700 dark:text-gray-300"},"HPP Barang Terjual",-1)),t("span",A,"("+o(n(s.data.cogs))+")",1)])]),t("div",q,[t("div",null,[e[9]||(e[9]=t("h4",{class:"text-sm font-black text-gray-800 uppercase dark:text-white"}," Laba Kotor ",-1)),t("span",G,"Margin: "+o(s.data.gross_margin)+"%",1)]),t("span",J,o(n(s.data.gross_profit)),1)]),t("div",Q,[e[11]||(e[11]=t("p",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Biaya Operasional ",-1)),t("div",W,[e[10]||(e[10]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Total Pengeluaran",-1)),t("span",X,"("+o(n(s.data.expenses))+")",1)])]),t("div",{class:N(["relative p-6 overflow-hidden text-white shadow-lg rounded-xl",s.data.net_profit>=0?"bg-gradient-to-br from-emerald-500 to-teal-600":"bg-gradient-to-br from-red-500 to-pink-600"])},[t("div",Y,[t("div",null,[e[12]||(e[12]=t("h3",{class:"text-sm font-bold tracking-widest uppercase opacity-90"}," Laba Bersih ",-1)),t("p",Z," Net Margin: "+o(s.data.net_margin)+"% ",1)]),t("div",tt,o(n(s.data.net_profit)),1)])],2)])]),t("div",et,[t("div",at,[e[15]||(e[15]=t("h3",{class:"mb-4 text-sm font-bold text-gray-800 dark:text-white"}," Komposisi Biaya ",-1)),s.data.expense_details.length>0?(b(),g("div",st,[p(d(P),{type:"donut",height:"250",options:w.value,series:_.value},null,8,["options","series"])])):(b(),g("div",rt," Belum ada data pengeluaran. ")),t("div",ot,[(b(!0),g(y,null,C(s.data.expense_details,(i,L)=>(b(),g("div",{key:L,class:"flex justify-between pb-1 text-xs border-b border-gray-100 dark:border-gray-700"},[t("span",dt,o(i.category||"Lainnya"),1),t("span",nt,o(n(i.total)),1)]))),128))])])])])])]),_:1})],64))}};export{mt as default};
