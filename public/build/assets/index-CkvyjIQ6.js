import{q as de,v as d,D as k,u as ue,K as X,x as ce,a as me,Z as ge,l as p,o as m,e as D,d as pe,p as v,f as a,g as n,i as ye,F as ne,I as fe,n as V,t as c,j as le,k as Z,y as be,w as ie,z as ve,A as he}from"./vendor-core-By7Plnkm.js";import{j as xe}from"./vendor-common-GpUWqhKr.js";import{B as ke}from"./BottomSheet-WceNnWH3.js";import we from"./ConfirmSubmit-BkKO_Odt.js";import _e from"./Cart-C8tBiRgZ.js";import{_ as Se}from"./BarcodeScanner-DKRXhBOH.js";import Ce from"./FilterProduct-DQhx_vVS.js";import Me from"./ProductDetailModal-BqI2Y1FV.js";import qe from"./ProductComparisonModal-BgsiD6p4.js";import"./vendor-charts-Bw6UNgWf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CAUBCNUq.js";import"./InputRupiah-BV5Iw5HO.js";import"./MoneyInput-DMVledyj.js";import"./vendor-scanner-og__AIM6.js";function je(x){const b=de(),q="POS_REALTIME_DRAFT_V3",f=d([]),u=d(!1),G=d(20),y=d({search:"",category:"all",subCategory:"all",brand:"all",sort:"default",hideEmptyStock:!0}),h=d([]),R=d(""),z=d([]),j=d(null),I=k(()=>x.mode==="edit"),g=x.sale||null,s=ue({id:g?.id||null,input_type:g?.input_type||"realtime",report_date:g?.transaction_date||(()=>{const e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${r}`})(),items:g?.items?.map(e=>({product_id:e.product_id,code:e.product?.code,name:e.product?.name,unit:e.product?.unit,size:e.product?.size,stock_max:parseFloat(e.product?.stock||0)+parseFloat(e.quantity),selling_price:parseFloat(e.selling_price),original_price:parseFloat(e.selling_price),quantity:parseFloat(e.quantity),original_quantity:parseFloat(e.quantity),subtotal:parseFloat(e.subtotal)}))||[],customer_id:g?.customer_id||null,payment_amount:g?parseFloat(g.total_payment):0,change_amount:g?parseFloat(g.change_amount):0,payment_method:g?.payment_method||"cash",discount_type:g?.discount_type||"fixed",discount_value:g?.discount_value||0,notes:g?.notes||""}),F=k(()=>s.items.reduce((e,t)=>e+(parseFloat(t.subtotal)||0),0)),Q=k(()=>{const e=parseFloat(s.discount_value)||0;if(e<=0)return 0;if(s.discount_type==="percent"){const t=e>100?100:e;return Math.round(F.value*t/100)}return e>F.value?F.value:e}),E=k(()=>{const e=F.value-Q.value,t=e>0?e:0;return t===0&&s.payment_amount>0,t}),$=k(()=>(parseFloat(s.payment_amount)||0)-E.value),K=k(()=>s.payment_method!=="cash"&&s.payment_method!==""?!0:(parseFloat(s.payment_amount)||0)>=E.value),J=k(()=>s.items.some(e=>e.quantity<=0||isNaN(e.quantity))),Y=k(()=>{const e=E.value;if(e<=0)return[];const t=[{label:"Uang Pas",value:e}];if([2e3,5e3,1e4,2e4,5e4,1e5].forEach(r=>{r>e&&!t.find(re=>re.value===r)&&t.push({label:T(r),value:r})}),e>5e4){const r=Math.ceil(e/5e4)*5e4;t.find(re=>re.value===r)||t.push({label:T(r),value:r})}return t.slice(0,4)}),w=e=>{e.unit?.is_decimal===1||(e.quantity=Math.round(e.quantity),e.quantity<1&&(e.quantity=1)),e.quantity>e.stock_max&&(e.quantity=e.stock_max,b.warning(`Stok sisa ${e.stock_max}`)),e.subtotal=Math.round(e.quantity*e.selling_price)},_=e=>{const t=parseFloat(e.subtotal)||0,o=parseFloat(e.selling_price)||0;if(!(o<=0))if(e.unit?.is_decimal===1){let r=t/o;r>e.stock_max&&(r=e.stock_max,e.subtotal=Math.round(r*o),b.warning("Melebihi sisa stok!")),e.quantity=parseFloat(r.toFixed(4))}else confirm(`⚠️ Ubah harga satuan agar sesuai total ${T(t)}?`)?e.quantity>0&&(e.selling_price=Math.round(t/e.quantity)):e.subtotal=Math.round(e.quantity*e.selling_price)},A=e=>{e.subtotal=Math.round(e.quantity*e.selling_price)},B=e=>{if(parseFloat(e.stock)<=0){b.error("Stok habis!");return}const t=s.items.find(o=>o.product_id===e.id);if(t){if(t.quantity+1>e.stock){b.warning("Stok maksimal!");return}t.quantity++,w(t)}else{const o=parseFloat(e.selling_price||e.price);s.items.push({product_id:e.id,code:e.code,name:e.name,unit:e.unit,size:e.size,stock_max:parseFloat(e.stock),selling_price:o,original_price:o,quantity:1,original_quantity:0,subtotal:o})}},P=e=>s.items.splice(e,1),H=(e,t)=>{const o=s.items[e],r=parseFloat(o.quantity)+t;if(r>o.stock_max){b.warning(`Stok sisa ${o.stock_max}`);return}if(r<=0){confirm("Hapus item ini?")&&P(e);return}o.quantity=r,w(o)},L=e=>{s.payment_amount=e.value},N=()=>{s.payment_amount=0},S=()=>{f.value.length&&s.items.forEach(e=>{const t=f.value.find(o=>o.id===e.product_id);if(t){const o=e.original_quantity||0,r=parseFloat(t.stock);e.stock_max=r+o,e.quantity>e.stock_max&&(b.warning(`Stok ${e.name} berubah! Disesuaikan ke max: ${e.stock_max}`),e.quantity=e.stock_max,w(e))}})},C=d(new Map),M=async(e={})=>{const t={query:e.search||y.value.search,limit:G.value,category_id:y.value.category,product_type_id:y.value.subCategory,brand_id:y.value.brand,sort:y.value.sort,hide_empty_stock:y.value.hideEmptyStock?1:0},o=JSON.stringify(t);C.value.has(o)?(f.value=C.value.get(o),S()):u.value=!0;try{const r=await me.get(route("sales.products.lite"),{params:t});f.value=r.data,C.value.set(o,r.data),S()}catch(r){console.error("Gagal load produk:",r),C.value.has(o)||b.error("Gagal memuat database produk")}finally{u.value=!1}},i=xe(()=>{M()},400);X(()=>y.value,(e,t)=>{e.search!==t.search?(u.value=!0,i()):(e.category!==t.category&&(f.value=[]),M())},{deep:!0});const U=k(()=>{let e=f.value;const{sort:t}=y.value;return t==="cheapest"?e.sort((o,r)=>o.selling_price-r.selling_price):t==="bestseller"?e.sort((o,r)=>(r.total_sold||0)-(o.total_sold||0)):e.sort((o,r)=>o.name.localeCompare(r.name)),e}),ee=()=>{G.value+=12,M()},te=e=>{j.value=e,s.customer_id=e.id,z.value=[],R.value=""};X(R,e=>{if(!e||!x.customers){z.value=[];return}const t=e.toLowerCase(),o=x.customers.filter(r=>r.name.toLowerCase().includes(t)||r.code.toLowerCase().includes(t));z.value=o.slice(0,5)});const W=e=>{const t=x.customers.find(o=>o.member_code==e||o.phone==e);t?te(t):b.warning("Member tidak ditemukan")},ae=()=>{if(I.value)return;const e=localStorage.getItem(q);if(e)try{const t=JSON.parse(e);t.items&&(s.items=t.items),s.payment_amount=t.payment_amount||0,s.payment_method=t.payment_method||"cash",s.notes=t.notes||"",s.discount_type=t.discount_type||"fixed",s.discount_value=t.discount_value||0,t.selectedMember&&(j.value=t.selectedMember,s.customer_id=t.selectedMember.id)}catch{localStorage.removeItem(q)}};X([()=>s.items,()=>s.customer_id,()=>s.payment_amount,()=>s.discount_value,()=>s.notes],()=>{localStorage.setItem(q,JSON.stringify({items:s.items,customer_id:s.customer_id,payment_amount:s.payment_amount,payment_method:s.payment_method,notes:s.notes,discount_type:s.discount_type,discount_value:s.discount_value,selectedMember:j.value}))},{deep:!0});const oe=(e=!1,t={})=>{s.change_amount=$.value,s.payment_amount=parseFloat(s.payment_amount);const o={onStart:t.onStart,onFinish:t.onFinish,onSuccess:r=>{I.value||(M(),localStorage.removeItem(q),s.reset(),s.items=[],j.value=null),t.onSuccess&&t.onSuccess(r)},onError:r=>{console.error(r),b.error("Gagal memproses transaksi")}};I.value?s.transform(r=>({...r})).put(route("sales.update",s.id),o):s.transform(r=>({...r,print_invoice:e})).post(route("sales.pos.store"),o)},T=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),se=e=>{const t=h.value.findIndex(o=>o.id===e.id);if(t!==-1)h.value.splice(t,1);else{if(h.value.length>=5){b.warning("Maksimal 5 produk untuk perbandingan.");return}h.value.push(e)}},O=()=>{h.value=[]},l=e=>h.value.some(t=>t.id===e);return ce(()=>{if(M(),ae(),I.value){const e=new Date().toISOString().slice(0,10);s.report_date=e}}),{form:s,filterState:y,allProducts:f,filteredProducts:U,isFetchingData:u,compareList:h,memberSearch:R,memberSearchResults:z,selectedMember:j,subTotal:F,discountAmount:Q,grandTotal:E,changeAmount:$,isPaymentSufficient:K,hasInvalidQty:J,moneySuggestions:Y,loadMoreProducts:ee,queryMember:W,addItem:B,removeItem:P,updateQty:H,resetPayment:N,handleMoneyClick:L,recalcFromQty:w,recalcFromSubtotal:_,recalcFromPrice:A,toggleCompare:se,clearCompare:O,isInCompare:l,submitTransaction:oe,rp:T}}const Fe={class:"flex flex-col lg:flex-row h-[100dvh] w-full bg-gray-100 dark:bg-gray-900 overflow-hidden font-sans transition-colors duration-300"},$e={class:"relative flex flex-col flex-1 h-full overflow-hidden"},Be={class:"grid grid-cols-2 gap-3 pb-10 md:grid-cols-3 lg:grid-cols-4"},Pe=["onClick"],Te={class:"relative w-full overflow-hidden bg-gray-100 border-b border-gray-100 aspect-square dark:border-gray-700 dark:bg-gray-700"},De={class:"absolute z-20 flex flex-col items-start gap-1 top-2 left-2"},ze={key:0,class:"text-[10px] font-bold px-2 py-0.5 rounded shadow-sm backdrop-blur text-gray-700 bg-white/90 dark:text-gray-200 dark:bg-gray-900/80 border border-gray-200 dark:border-gray-600"},Ie={key:1,class:"text-[10px] font-bold text-white px-2 py-0.5 rounded shadow-sm backdrop-blur bg-gray-800/90 dark:bg-gray-600/90 border border-gray-700"},Ee=["src"],Ae={key:1,class:"flex items-center justify-center w-full h-full text-gray-400 dark:text-gray-600"},He={key:2,class:"absolute inset-0 z-20 flex items-center justify-center bg-gray-900/60 backdrop-blur-[1px]"},Re={class:"flex flex-col flex-1 p-3"},Le={class:"mb-1 flex justify-between items-start"},Ne={class:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide"},Ue=["title"],Oe={class:"flex items-center justify-between mb-2"},Ve={class:"flex items-center gap-1.5"},Ge={class:"flex items-center justify-between pt-2 mt-auto border-t border-gray-100 dark:border-gray-700"},Qe={class:"text-sm font-black text-lime-600 dark:text-lime-400"},Ke={key:0,class:"flex items-center justify-center text-xs font-bold text-white bg-orange-500 rounded-full shadow-md w-7 h-7 animate-bounce-short"},Je={key:1,class:"p-1.5 rounded-lg text-lime-600 bg-lime-50 dark:text-lime-400 dark:bg-lime-500/10"},Ye={class:"grid grid-cols-2 border-t border-gray-100 dark:border-gray-700 divide-x divide-gray-100 dark:divide-gray-700 bg-gray-50 dark:bg-gray-800/50"},We=["onClick"],Ze=["onClick"],Xe={key:0,class:"py-10 text-center"},et={key:1,class:"flex flex-col items-center justify-center px-4 py-16 text-center animate-fade-in"},tt={key:2,class:"py-4 text-center text-[10px] text-gray-400"},at={key:0,class:"absolute z-40 bottom-24 lg:bottom-8 right-4 flex items-center bg-gray-900 dark:bg-gray-800 text-white pl-4 pr-1 py-1.5 gap-4 rounded-full shadow-xl animate-bounce-subtle border border-gray-700"},ot={class:"text-xs font-bold whitespace-nowrap"},st={class:"flex items-center gap-1"},rt={key:1,class:"absolute z-30 lg:hidden bottom-4 left-4 right-4"},nt={class:"flex items-center gap-3"},lt={class:"flex items-center justify-center text-xs font-bold text-white rounded-full shadow-sm bg-lime-500 dark:bg-white dark:text-lime-700 w-7 h-7"},it={class:"flex flex-col items-start leading-none gap-0.5"},dt={class:"text-lg font-bold"},ut={class:"space-y-6"},ct={class:"flex items-center gap-4 pb-4 border-b border-gray-100 dark:border-gray-800"},mt={class:"flex items-center justify-center text-lg font-bold text-gray-400 bg-gray-100 border border-gray-200 w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-700 shrink-0"},gt={class:"flex-1 min-w-0"},pt={class:"text-lg font-bold leading-tight text-gray-800 truncate dark:text-white"},yt={class:"flex items-center justify-between mt-1"},ft={class:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"},bt={class:"bg-gray-50 dark:bg-gray-800/50 p-1.5 rounded-2xl border border-gray-200 dark:border-gray-700"},vt={class:"flex items-center justify-between"},ht=["disabled"],xt={class:"flex-1 px-2 text-center"},kt={class:"flex items-center justify-between p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 dark:border-gray-800 rounded-xl"},wt={class:"font-bold text-gray-600 dark:text-gray-300"},_t={class:"text-right"},St={class:"text-2xl font-black text-gray-900 dark:text-white"},Ct={key:0,class:"px-3 py-2 text-xs font-bold text-center text-red-600 border border-red-100 rounded-lg bg-red-50"},Mt={class:"flex gap-3 h-14"},Nt={__name:"index",props:{categories:Array,customers:Array,brands:Array,sale:Object,mode:String},setup(x){const q=je(x),{form:f,filterState:u,allProducts:G,filteredProducts:y,isFetchingData:h,grandTotal:R,changeAmount:z,isPaymentSufficient:j,hasInvalidQty:I,addItem:g,loadMoreProducts:s,queryProduk:F,queryMember:Q,submitTransaction:E,rp:$,toggleCompare:K,clearCompare:J,isInCompare:Y,compareList:w}=q,_=de(),A=d(!1),B=d(!1),P=d(!1),H=d(!1),L=d(!1),N=d(!1),S=d("product"),C=d(null),M=d(null);X(u,async()=>{await ge(),C.value&&C.value.scrollTo({top:0,behavior:"smooth"})},{deep:!0});const i=d({id:null,name:"",code:"",price:0,quantity:1,stock:0,unit:"Pcs",image:null}),U=l=>{i.value={id:l.id,name:l.name,code:l.code,image_url:l.image_url,price:parseFloat(l.selling_price||l.price||0),quantity:1,stock:parseInt(l.stock||0),unit:l.unit?.name||"Pcs"},H.value=!0},ee=l=>{const{scrollTop:e,clientHeight:t,scrollHeight:o}=l.target;e+t>=o-50&&s()},te=l=>{M.value=l,L.value=!0},W=()=>{S.value="product",B.value=!0},ae=()=>{S.value="member",B.value=!0},oe=async l=>{if(B.value=!1,alert("scan berhasil "+S.value+" | "+l),S.value=="product")try{const e=await F(l);e?(l=e,U(l)):alert("Produk tidak ditemukan di database.")}catch(e){console.error("Terjadi kesalahan saat query produk:",e),alert("Gagal mengambil data produk.")}else S.value=="member"&&(l=Q(l))},T=(l=!1)=>{g(i.value),H.value=!1,l&&W()},se=l=>{if(f.items.length===0)return _.error("Keranjang kosong!");if(I.value)return _.error("Qty tidak valid!");if(f.payment_method==="cash"&&!j.value)return _.error("Uang kurang!");E(l,{onSuccess:e=>{if(e.props.flash.error){_.error(e.props.flash.error);return}P.value=!1,A.value=!1;const t=e.props.flash?.print_url;l&&t?setTimeout(()=>{window.open(t,"_blank","width=300,height=600")},50):l&&!t?_.error("Gagal mendapatkan URL Print dari server."):_.success("Transaksi berhasil disimpan.")}})},O=l=>{const e=f.items.find(t=>t.product_id===l);return e?e.quantity:0};return(l,e)=>(m(),p(ne,null,[D(n(ye),{title:"Kasir POS"}),D(we,{showConfirmModal:P.value,changeAmount:n(z),onClose:e[0]||(e[0]=t=>P.value=!1),onConfirmTransaction:se},null,8,["showConfirmModal","changeAmount"]),D(Me,{show:L.value,product:M.value,onClose:e[1]||(e[1]=t=>L.value=!1),onAddToCart:e[2]||(e[2]=t=>{U(t)})},null,8,["show","product"]),D(qe,{show:N.value,products:n(w),onClose:e[3]||(e[3]=t=>N.value=!1),onRemove:n(K),onAddToCart:e[4]||(e[4]=t=>{U(t)})},null,8,["show","products","onRemove"]),B.value?(m(),pe(Se,{key:0,onResult:oe,onClose:e[5]||(e[5]=t=>B.value=!1)})):v("",!0),a("div",Fe,[a("div",$e,[D(Ce,{categories:x.categories,brands:x.brands,"is-fetching":n(h),search:n(u).search,"onUpdate:search":e[6]||(e[6]=t=>n(u).search=t),category:n(u).category,"onUpdate:category":e[7]||(e[7]=t=>n(u).category=t),"sub-category":n(u).subCategory,"onUpdate:subCategory":e[8]||(e[8]=t=>n(u).subCategory=t),brand:n(u).brand,"onUpdate:brand":e[9]||(e[9]=t=>n(u).brand=t),sort:n(u).sort,"onUpdate:sort":e[10]||(e[10]=t=>n(u).sort=t),hideEmptyStock:n(u).hideEmptyStock,"onUpdate:hideEmptyStock":e[11]||(e[11]=t=>n(u).hideEmptyStock=t),onScan:W},null,8,["categories","brands","is-fetching","search","category","sub-category","brand","sort","hideEmptyStock"]),a("div",{ref_key:"productGridRef",ref:C,class:"h-[calc(100vh-220px)] flex-1 p-4 overflow-y-auto bg-gray-100 custom-scroll scroll-smooth pb-28 lg:pb-4 dark:bg-gray-900",onScroll:ee},[a("div",Be,[(m(!0),p(ne,null,fe(n(y),t=>(m(),p("div",{key:t.id,class:V(["relative flex flex-col justify-between overflow-hidden transition-all duration-200 border shadow-sm group rounded-xl bg-white dark:bg-gray-800",[t.stock==0?"opacity-75 grayscale-[0.5]":"",O(t.id)>0?"border-lime-500 ring-1 ring-lime-500 bg-lime-50/30 dark:bg-lime-900/10":"border-gray-200 dark:border-gray-700 hover:shadow-md"]])},[a("div",{class:"flex-1 flex flex-col cursor-pointer active:scale-[0.98] transition-transform",onClick:o=>n(g)(t)},[a("div",Te,[a("div",De,[t.unit?(m(),p("span",ze,c(t.unit.name),1)):v("",!0),t.size?(m(),p("span",Ie,c(t.size.name),1)):v("",!0)]),t.image_url?(m(),p("img",{key:0,src:t.image_url,loading:"lazy",class:"absolute inset-0 z-10 object-cover w-full h-full transition-transform duration-500 group-hover:scale-105",alt:"",onerror:"this.style.display='none'"},null,8,Ee)):v("",!0),t.image_url?v("",!0):(m(),p("div",Ae,[...e[24]||(e[24]=[a("svg",{class:"w-10 h-10 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),t.stock<=0?(m(),p("div",He,[...e[25]||(e[25]=[a("span",{class:"px-2 py-1 text-xs font-bold text-white transform border-2 border-white rounded -rotate-12"},"KOSONG",-1)])])):v("",!0)]),a("div",Re,[a("div",Le,[a("span",Ne,c(t.brand?.name||"No Brand"),1)]),a("h3",{class:"text-xs font-bold leading-snug text-gray-800 dark:text-gray-100 line-clamp-2 min-h-[2.5em] mb-2",title:t.name},c(t.name),9,Ue),a("div",Oe,[a("div",Ve,[a("div",{class:V(["w-1.5 h-1.5 rounded-full",t.stock<=5?"bg-red-500 animate-pulse":"bg-green-500 dark:bg-green-400"])},null,2),a("span",{class:V(["text-[10px] font-medium",t.stock<=5?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"])},c(t.stock<=5?`Sisa ${parseFloat(t.stock)}`:`Stok ${parseFloat(t.stock)}`),3)])]),a("div",Ge,[a("span",Qe,c(n($)(t.selling_price||t.price)),1),O(t.id)>0?(m(),p("div",Ke,c(O(t.id)),1)):(m(),p("div",Je,[...e[26]||(e[26]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]))])])],8,Pe),a("div",Ye,[a("button",{onClick:le(o=>te(t),["stop"]),class:"py-2.5 flex items-center justify-center gap-1.5 text-xs font-semibold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition"},[...e[27]||(e[27]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),Z(" Detail ",-1)])],8,We),a("button",{onClick:le(o=>n(K)(t),["stop"]),class:V(["py-2.5 flex items-center justify-center gap-1.5 text-xs font-semibold transition",n(Y)(t.id)?"bg-lime-100 text-lime-700 dark:bg-lime-900/30 dark:text-lime-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},[e[28]||(e[28]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),Z(" "+c(n(Y)(t.id)?"Batal":"Bandingkan"),1)],10,Ze)])],2))),128))]),n(h)?(m(),p("div",Xe,[...e[29]||(e[29]=[a("div",{class:"w-8 h-8 mx-auto mb-2 border-b-2 rounded-full animate-spin border-lime-500"},null,-1),a("span",{class:"text-xs text-gray-400"},"Memuat database produk...",-1)])])):n(y).length===0?(m(),p("div",et,[e[31]||(e[31]=be('<div class="relative mb-6"><div class="flex items-center justify-center w-24 h-24 rounded-full shadow-inner bg-gray-50 dark:bg-gray-800"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div class="absolute -top-2 -right-2 bg-white dark:bg-gray-700 rounded-full p-1.5 shadow-md border border-gray-100 dark:border-gray-600"><div class="p-1 rounded-full bg-lime-100 dark:bg-lime-900/50"><svg class="w-5 h-5 text-lime-500 dark:text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"></path></svg></div></div></div><h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white"> Produk tidak ditemukan </h3><p class="max-w-xs mx-auto mb-6 text-sm leading-relaxed text-gray-500 dark:text-gray-400"> Kami tidak dapat menemukan produk dengan kata kunci atau kategori tersebut. </p>',3)),a("button",{onClick:e[12]||(e[12]=t=>{l.search="",l.selectedCategory="all"}),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:border-lime-500 hover:text-lime-600 dark:hover:border-lime-500 dark:hover:text-lime-400 shadow-sm hover:shadow-md"},[...e[30]||(e[30]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Z(" Reset Pencarian ",-1)])])])):v("",!0),n(y).length>0&&n(G).length>n(y).length?(m(),p("div",tt," Scroll untuk memuat lebih banyak... ")):v("",!0)],544),n(w)?.length>0?(m(),p("div",at,[a("div",ot,c(n(w).length)+" Banding ",1),a("div",st,[a("button",{onClick:e[13]||(e[13]=t=>N.value=!0),class:"px-3 py-1.5 bg-lime-500 hover:bg-lime-400 text-black text-xs font-bold rounded-full transition"}," Buka "),a("button",{onClick:e[14]||(e[14]=(...t)=>n(J)&&n(J)(...t)),class:"p-1.5 hover:bg-gray-700 rounded-full text-gray-400 hover:text-white transition"},[...e[32]||(e[32]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):v("",!0),n(f).items.length>0?(m(),p("div",rt,[a("button",{onClick:e[15]||(e[15]=t=>A.value=!0),class:"w-full bg-gray-900 dark:bg-lime-600 text-white p-3.5 rounded-2xl shadow-xl shadow-gray-900/20 flex justify-between items-center animate-bounce-subtle"},[a("div",nt,[a("span",lt,c(n(f).items.reduce((t,o)=>t+parseFloat(o.quantity),0)),1),a("div",it,[e[33]||(e[33]=a("span",{class:"text-[9px] text-gray-400 dark:text-lime-100 uppercase font-bold tracking-wider"},"Total Belanja",-1)),a("span",dt,c(n($)(n(R))),1)])]),e[34]||(e[34]=a("span",{class:"flex items-center gap-1 px-4 py-2 text-xs font-bold bg-gray-700 dark:bg-lime-800/30 rounded-xl"},[Z(" Bayar "),a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})])],-1))])])):v("",!0)]),D(_e,{showMobileCart:A.value,reprops:n(q),onOpenScanMember:ae,onShowBayar:e[16]||(e[16]=t=>P.value=!0),onShowDesktop:e[17]||(e[17]=t=>A.value=!1)},null,8,["showMobileCart","reprops"])]),D(ke,{show:H.value,onClose:e[23]||(e[23]=t=>H.value=!1),title:"Tambah Pesanan"},{footer:ie(()=>[a("div",Mt,[a("button",{onClick:e[21]||(e[21]=t=>T(!1)),class:"flex-1 font-bold transition border text-lime-700 bg-lime-100 border-lime-200 rounded-xl active:bg-lime-200 dark:bg-lime-800 dark:text-lime-300 dark:border-lime-700"}," Masuk Keranjang "),a("button",{onClick:e[22]||(e[22]=t=>T(!0)),class:"flex-[1.3] bg-gray-900 text-white font-bold rounded-xl shadow-xl flex items-center justify-center gap-2 active:scale-[0.98] transition hover:bg-gray-800 dark:bg-white dark:text-gray-900"},[...e[40]||(e[40]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),a("span",null,"Scan Lagi",-1)])])])]),default:ie(()=>[a("div",ut,[a("div",ct,[a("div",mt,c(i.value.name?.substring(0,2).toUpperCase()),1),a("div",gt,[a("h3",pt,c(i.value.name),1),a("div",yt,[a("p",ft,c(i.value.code),1),a("p",{class:V(["text-xs font-medium",3>i.value.stock?"text-red-500":"text-gray-400"])}," Stok: "+c(i.value.stock),3)])])]),a("div",bt,[a("div",vt,[a("button",{onClick:e[18]||(e[18]=t=>i.value.quantity>1?i.value.quantity--:null),class:"flex items-center justify-center text-gray-500 transition bg-white border border-gray-200 shadow-sm w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-600 active:scale-95 hover:text-red-500 disabled:opacity-50",disabled:i.value.quantity<=1},[...e[35]||(e[35]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,ht),a("div",xt,[e[36]||(e[36]=a("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-0.5"},"Jumlah Beli",-1)),ve(a("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>i.value.quantity=t),type:"number",class:"w-full p-0 text-3xl font-black text-center text-gray-800 bg-transparent border-none dark:text-white focus:ring-0"},null,512),[[he,i.value.quantity,void 0,{number:!0}]])]),a("button",{onClick:e[20]||(e[20]=t=>i.value.quantity++),class:"flex items-center justify-center text-white transition shadow-lg w-14 h-14 bg-lime-500 rounded-xl shadow-lime-500/30 active:scale-95"},[...e[37]||(e[37]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),a("div",kt,[a("div",null,[e[38]||(e[38]=a("p",{class:"text-xs text-gray-400"},"Harga Satuan",-1)),a("p",wt,c(n($)(i.value.price)),1)]),a("div",_t,[e[39]||(e[39]=a("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Subtotal ",-1)),a("p",St,c(n($)(i.value.price*i.value.quantity)),1)])]),i.value.quantity>i.value.stock?(m(),p("div",Ct," ⚠️ Jumlah melebihi sisa stok ("+c(i.value.stock)+") ",1)):v("",!0)])]),_:1},8,["show"])],64))}};export{Nt as default};
