import{m as c,x as _,H as $,j as L,g as o,o as n,b as a,F as h,y as b,n as M,p as j,f as A,i as m,t as v,r as F,k as I,A as T,O as z}from"./app-Cde9GbA4.js";const E={class:"w-full p-5 border-2 rounded-md border-lime-300 text-customText-secondaryLight bg-customBg-light dark:text-customText-secondaryDark dark:border-borderc-dark dark:bg-customBg-dark"},R={class:"overflow-x-auto"},q={class:"min-w-full border-2 rounded-lg table-fixed"},H={class:"bg-gray-100 dark:bg-gray-800"},K={class:"border-b border-gray-400"},U=["onClick"],G={class:"flex items-center gap-2"},J={key:0,class:"w-4 h-3 lg:w-5 lg:h-4"},Q={key:0,viewBox:"0 0 23 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W={key:1,viewBox:"0 0 23 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X={key:2,viewBox:"0 0 23 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y=["onClick"],Z={key:1},ee={key:1},te=["colspan"],re={key:2},ae=["colspan"],se={class:"flex flex-col items-center justify-center gap-4 mt-6 text-center sm:flex-row sm:justify-between"},oe={class:"flex items-center gap-2 text-gray-500 dark:text-gray-300"},ne=["value"],le={class:"text-sm text-gray-500 lg:text-base dark:text-gray-300"},ie={class:"flex flex-wrap justify-center gap-2"},de=["disabled"],ue=["onClick"],ce=["disabled"],ve={__name:"DataTable",props:{data:{type:Array,default:()=>[]},columns:{type:Array,required:!0},perPageOptions:{type:Array,default:()=>[5,10,25,50]},serverSide:{type:Boolean,default:!1},endpoint:{type:String,default:""},params:{type:Object,default:()=>({})}},emits:["row-click","update:params"],setup(y,{emit:O}){const s=y,P=O,d=c(s.perPageOptions[0]),l=c(1),S=c(1),u=c(null),g=c("asc"),f=c(s.data),p=c(s.serverSide?0:s.data.length),k=c(!1),V=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r);function N(r,e){return r==null||r===""?"-":e.format==="rupiah"?V(r):e.format==="tanggal"?new Date(r).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):e.format==="datetime"?new Date(r).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):r}async function x(){k.value=!0;try{const e=(await z.get(s.endpoint,{params:{...s.params,page:l.value,per_page:d.value,sort:u.value,order:g.value}})).data;f.value=e.data||[],p.value=e.total||0,d.value=e.per_page||d.value,l.value=e.current_page||1,S.value=e.last_page||1}catch(r){console.error("Fetch error:",r)}finally{k.value=!1}}_([()=>s.params,l,u,g],async()=>{s.serverSide&&s.endpoint&&await x()},{deep:!0}),_(d,async()=>{s.serverSide&&s.endpoint&&(l.value=1,await x())}),$(()=>{s.serverSide&&x()});const w=L(()=>{if(s.serverSide)return f.value;let r=[...s.data];return s.params.search&&(r=r.filter(e=>Object.values(e).some(t=>String(t).toLowerCase().includes(s.params.search.toLowerCase())))),Object.keys(s.params).forEach(e=>{e!=="search"&&e!=="sort"&&e!=="order"&&s.params[e]&&(r=r.filter(t=>String(t[e])===String(s.params[e])))}),u.value&&r.sort((e,t)=>{const i=e[u.value],C=t[u.value];return i<C?g.value==="asc"?-1:1:i>C?g.value==="asc"?1:-1:0}),r}),B=L(()=>{if(s.serverSide)return f.value;const r=(l.value-1)*d.value;return w.value.slice(r,r+d.value)}),D=L(()=>s.serverSide?S.value:Math.ceil(p.value/d.value)||1);return _([d,w],()=>{s.serverSide||(p.value=w.value.length,l.value=1)}),(r,e)=>(n(),o("div",E,[a("div",R,[a("table",q,[a("thead",H,[a("tr",K,[(n(!0),o(h,null,b(y.columns,t=>(n(),o("th",{key:t.key,onClick:i=>t.sortable?(u.value=t.key,g.value=u.value===t.key&&g.value==="asc"?"desc":"asc"):null,style:j({width:t.width||"150px"}),class:M(["px-4 text-sm md:text-base py-2 border-b dark:border-gray-700 text-left select-none",t.sortable?"cursor-pointer":"",t.class])},[a("div",G,[A(v(t.label)+" ",1),t.sortable?(n(),o("span",J,[u.value!==t.key?(n(),o("svg",Q,[...e[3]||(e[3]=[a("path",{d:"M15.5 15.75V2.25M15.5 2.25L12.375 6M15.5 2.25L18.625 6",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),a("path",{d:"M7.5 2.25L7.5 15.75M7.5 15.75L10.625 12M7.5 15.75L4.375 12",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):g.value==="asc"?(n(),o("svg",W,[...e[4]||(e[4]=[a("path",{d:"M15.5 15.75V2.25M15.5 2.25L12.375 6M15.5 2.25L18.625 6",stroke:"#84CC16","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),a("path",{d:"M7.5 2.25L7.5 15.75M7.5 15.75L10.625 12M7.5 15.75L4.375 12",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(n(),o("svg",X,[...e[5]||(e[5]=[a("path",{d:"M7.5 2.25L7.5 15.75M7.5 15.75L10.625 12M7.5 15.75L4.375 12",stroke:"#84CC16","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),a("path",{d:"M15.5 15.75L15.5 2.25M15.5 2.25L12.375 6M15.5 2.25L18.625 6",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])):m("",!0)])],14,U))),128))])]),a("tbody",null,[k.value?m("",!0):(n(!0),o(h,{key:0},b(B.value,t=>(n(),o("tr",{key:t.id,onClick:i=>P("row-click",t),class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700"},[(n(!0),o(h,null,b(y.columns,i=>(n(),o("td",{key:i.key,style:j({width:i.width||"150px"}),class:M(["px-4 py-2 border-b text-sm md:text-base dark:border-gray-700 truncate",i.class])},[i.slot?F(r.$slots,i.slot,{key:0,row:t}):(n(),o("span",Z,v(N(t[i.key],i)),1))],6))),128))],8,Y))),128)),!k.value&&B.value.length===0?(n(),o("tr",ee,[a("td",{colspan:y.columns.length,class:"py-4 text-center text-gray-500"}," No data available ",8,te)])):m("",!0),k.value?(n(),o("tr",re,[a("td",{colspan:y.columns.length,class:"py-4 text-center text-gray-500 dark:text-gray-300"}," Loading... ",8,ae)])):m("",!0)])])]),a("div",se,[a("div",oe,[e[6]||(e[6]=a("label",{class:"text-sm lg:text-base"},"Show",-1)),I(a("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),class:"px-5 py-1 border rounded dark:bg-gray-800 dark:text-white"},[(n(!0),o(h,null,b(y.perPageOptions,t=>(n(),o("option",{key:t,value:t},v(t),9,ne))),128))],512),[[T,d.value]]),e[7]||(e[7]=a("span",{class:"text-sm lg:text-base"},"entries",-1))]),a("div",le," Showing "+v(p.value===0?0:(l.value-1)*d.value+1)+" to "+v(Math.min(l.value*d.value,p.value))+" of "+v(p.value)+" entries ",1),a("div",ie,[a("button",{onClick:e[1]||(e[1]=t=>l.value--),disabled:l.value===1,class:"px-3 py-1 border border-gray-300 rounded shadow disabled:opacity-50 disabled:hover:bg-gray-300 dark:bg-gray-800 disabled:dark:hover:bg-gray-800 dark:hover:bg-primary-hover hover:bg-customBg-dark hover:text-white hover:bg-opacity-80 dark:border-gray-600"}," Prev ",8,de),(n(!0),o(h,null,b(D.value,t=>(n(),o("button",{key:t,onClick:i=>l.value=t,class:M(["px-3 py-1 rounded border shadow border-gray-300 dark:bg-gray-800 dark:border-gray-600",t===l.value?"dark:bg-primary-light bg-customBg-tableDark text-white dark:text-customBg-dark":"dark:hover:bg-primary-hover hover:bg-customBg-dark hover:text-white hover:bg-opacity-80"])},v(t),11,ue))),128)),a("button",{onClick:e[2]||(e[2]=t=>l.value++),disabled:l.value===D.value,class:"px-3 py-1 border border-gray-300 rounded shadow disabled:opacity-50 disabled:hover:bg-gray-300 dark:bg-gray-800 disabled:dark:hover:bg-gray-800 dark:hover:bg-primary-hover hover:bg-customBg-dark hover:text-white hover:bg-opacity-80 dark:border-gray-600"}," Next ",8,ce)])])]))}};export{ve as _};
