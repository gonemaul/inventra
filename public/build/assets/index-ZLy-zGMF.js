import{_ as k}from"./AuthenticatedLayout-2TC9EZAp.js";import{x as m,g as o,o as a,a as u,d as c,h as v,w as d,b as t,t as l,i as g,f as w,F as p,q as N,n as T,c as V,l as x,m as M}from"./app-Bgy6qXfz.js";import{_ as B}from"./DataTable--fjz-xUY.js";import"./useActionLoading-C6Q8Ko1z.js";const D={class:"w-full min-h-screen space-y-6"},H={class:"p-4 space-y-6 bg-gray-100 shadow-md dark:bg-customBg-tableDark rounded-xl"},j={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},L={class:"grid items-center h-32 grid-rows-2 p-3 text-center bg-white border shadow-md dark:border-gray-600 lg:h-40 dark:bg-gray-800 rounded-xl"},Z={class:"text-2xl font-bold text-red-500 lg:text-3xl"},S={class:"grid items-center h-32 grid-rows-2 p-3 text-center bg-white border shadow-md dark:border-gray-600 lg:h-40 dark:bg-gray-800 rounded-xl"},F={class:"text-2xl font-bold text-green-500 lg:text-3xl"},I={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},P={class:"grid grid-cols-1 gap-3 p-4 text-sm bg-white rounded-md shadow dark:bg-gray-800 lg:text-base lg:grid-cols-2"},K={class:"flex justify-between"},O={class:"font-semibold"},z={class:"flex justify-between"},J={class:"font-semibold"},R={class:"flex justify-between"},$={class:"font-semibold"},q={class:"flex justify-between"},A={class:"font-semibold"},E={class:"flex flex-col justify-center p-4 space-y-2 bg-white rounded-md shadow dark:bg-gray-800"},U={class:"flex flex-col text-sm text-gray-500 dark:text-gray-300 lg:flex-row lg:items-center lg:gap-2"},G={key:0,class:"text-gray-400"},Q={class:"font-semibold text-gray-600"},W={key:1,class:"italic text-gray-400"},X={key:0,class:"mb-6 space-y-2"},Y={key:0,class:"mr-2 text-xl"},tt={key:1,class:"mr-2 text-xl"},et={class:"font-medium"},st={class:"p-4 space-y-6 bg-gray-100 border shadow-md rounded-xl dark:bg-customBg-tableDark"},at={class:"flex flex-col"},lt={class:"font-medium"},ot={class:"text-xs text-gray-500"},nt={key:0,class:"mb-1 text-xs text-gray-500"},rt={key:1},dt={class:"text-base font-bold text-red-600"},it={key:2,class:"text-base font-semibold"},ut={key:0,class:""},ct={class:"text-xs"},gt={class:"w-full h-2 bg-gray-300 rounded-full"},mt={key:1,class:"flex items-center gap-2"},pt={class:"inline-flex items-center justify-end w-full gap-2"},bt={__name:"index",props:{stats:Object,invoices:Object},setup(n){const h=n,y=m({search:"",kategori:"",refresh_key:0});console.log(h.stats);const f=m(null),i=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),b=r=>new Date(r).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),_=[{key:"due_date",label:"Jatuh Tempo",sortable:!0,width:"130px",format:"tanggal"},{key:"invoice_number",label:"No Nota",sortable:!0,width:"120px"},{key:"supplier",label:"Supplier",sortable:!0,width:"200px",slot:"supplier"},{key:"total",label:"Total",sortable:!0,width:"200px",slot:"total"},{key:"progress",label:"Progress",sortable:!0,width:"200px",slot:"progress"},{key:"aksi",label:"Aksi",width:"120px",class:"!text-right text-red-400",slot:"aksi"}];return(r,s)=>(a(),o(p,null,[u(c(v),{title:"Keuangan"}),u(k,{headerTitle:"Keuangan"},{default:d(()=>[t("div",D,[t("div",H,[t("div",j,[t("div",L,[s[0]||(s[0]=t("span",{class:"text-lg font-medium text-gray-700 lg:text-2xl dark:text-gray-200"},"Total Tagihan",-1)),t("span",Z,l(i(n.stats.financial.total_debt)),1)]),t("div",S,[s[1]||(s[1]=t("span",{class:"text-lg font-medium text-gray-700 lg:text-2xl dark:text-gray-200"},"Total Terbayar",-1)),t("span",F,l(i(n.stats.financial.total_paid)),1)])]),t("div",I,[t("div",P,[t("div",K,[s[2]||(s[2]=t("span",null,"Nota Lunas",-1)),t("span",O,l(n.stats.counts.paid)+" Nota",1)]),t("div",z,[s[3]||(s[3]=t("span",null,"Nota Belum Lunas",-1)),t("span",J,l(n.stats.counts.unpaid)+" Nota",1)]),t("div",R,[s[4]||(s[4]=t("span",null,"Nota Jatuh Tempo",-1)),t("span",$,l(n.stats.counts.overdue)+" Nota",1)]),t("div",q,[s[5]||(s[5]=t("span",null,"Total Nota",-1)),t("span",A,l(n.stats.counts.paid+n.stats.counts.unpaid)+" Nota",1)])]),t("div",E,[t("div",U,[n.stats.last_payment?(a(),o("span",G,[s[6]||(s[6]=w(" Terakhir bayar: ",-1)),t("span",Q,l(b(n.stats.last_payment)),1)])):(a(),o("span",W," Belum ada riwayat pembayaran "))]),n.stats.alerts.length>0?(a(),o("div",X,[(a(!0),o(p,null,N(n.stats.alerts,(e,C)=>(a(),o("div",{key:C,class:T(["p-4 rounded-lg border-l-4 flex items-center shadow-sm",e.type==="danger"?"bg-red-50 border-red-500 text-red-700":"bg-yellow-50 border-yellow-500 text-yellow-700"])},[e.type==="danger"?(a(),o("span",Y,"ðŸš¨")):(a(),o("span",tt,"âš ï¸")),t("span",et,l(e.message),1)],2))),128))])):g("",!0)])])]),t("div",st,[s[10]||(s[10]=t("div",null,[t("h2",{class:"text-base font-semibold text-gray-900 dark:text-white sm:text-lg lg:text-xl"}," Tagihan Pembelian "),t("p",{class:"mt-1 text-xs text-gray-600 dark:text-gray-300 sm:text-sm lg:text-base"}," Kelola semua invoice setiap transaksi. ")],-1)),u(B,{ref_key:"datatable",ref:f,serverSide:!0,endpoint:r.route("finance.index"),columns:_,perPageOptions:[5,10,25,50,100],params:y.value},{supplier:d(({row:e})=>[t("div",at,[t("span",lt,l(e.purchase.supplier?e.purchase.supplier.name:"Umum/Cash"),1),t("span",ot,l(e.purchase.supplier?e.purchase.supplier.phone:"-"),1)])]),total:d(({row:e})=>[e.total_amount-e.amount_paid>0?(a(),o("div",nt," Tagihan: "+l(i(e.total_amount)),1)):g("",!0),e.total_amount-e.amount_paid>0?(a(),o("div",rt,[t("span",dt," Sisa: "+l(i(e.total_amount-e.amount_paid)),1)])):(a(),o("div",it,l(i(e.total_amount)),1))]),progress:d(({row:e})=>[e.amount_paid<e.total_amount?(a(),o("div",ut,[t("span",ct,"Progress: "+l(Math.min(100,Math.round(e.amount_paid/e.total_amount*100)))+"%",1),t("div",gt,[t("div",{class:"h-2 bg-green-500 rounded-full",style:M({width:Math.min(100,Math.round(e.amount_paid/e.total_amount*100))+"%"})},null,4)])])):(a(),o("div",mt,[...s[7]||(s[7]=[t("span",{class:"px-2 py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-md dark:bg-green-700 dark:text-white"}," Lunas ",-1)])]))]),aksi:d(({row:e})=>[t("div",pt,[e.amount_paid<e.total_amount?(a(),V(c(x),{key:0,href:r.route("finance.show",e.id),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600"},{default:d(()=>[...s[8]||(s[8]=[t("svg",{class:"w-5 h-5 text-gray-700 dark:text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12.875 3.29134V6.45801H11.625V3.29134C11.625 3.06634 11.425 2.95801 11.2917 2.95801C11.25 2.95801 11.2084 2.96634 11.1667 2.98301L4.55837 5.47467C4.11671 5.64134 3.83337 6.05801 3.83337 6.53301V7.09134C3.07504 7.65801 2.58337 8.56634 2.58337 9.59134V6.53301C2.58337 5.54134 3.19171 4.65801 4.11671 4.30801L10.7334 1.80801C10.9167 1.74134 11.1084 1.70801 11.2917 1.70801C12.125 1.70801 12.875 2.38301 12.875 3.29134Z",fill:"currentColor"}),t("path",{d:"M18.4167 12.0837V12.917C18.4167 13.142 18.2417 13.3253 18.0083 13.3337H16.7917C16.35 13.3337 15.95 13.0087 15.9167 12.5753C15.8917 12.317 15.9917 12.0753 16.1583 11.9087C16.3083 11.7503 16.5167 11.667 16.7417 11.667H18C18.2417 11.6753 18.4167 11.8587 18.4167 12.0837Z",fill:"currentColor"}),t("path",{d:"M16.7334 10.7913H17.5834C18.0417 10.7913 18.4167 10.4163 18.4167 9.95801V9.59134C18.4167 7.86634 17.0084 6.45801 15.2834 6.45801H5.71671C5.00837 6.45801 4.35837 6.69134 3.83337 7.09134C3.07504 7.65801 2.58337 8.56634 2.58337 9.59134V15.1997C2.58337 16.9247 3.99171 18.333 5.71671 18.333H15.2834C17.0084 18.333 18.4167 16.9247 18.4167 15.1997V15.0413C18.4167 14.583 18.0417 14.208 17.5834 14.208H16.8584C16.0584 14.208 15.2917 13.7163 15.0834 12.9413C14.9084 12.308 15.1167 11.6997 15.5334 11.2913C15.8417 10.9747 16.2667 10.7913 16.7334 10.7913ZM12.1667 10.6247H6.33337C5.99171 10.6247 5.70837 10.3413 5.70837 9.99967C5.70837 9.65801 5.99171 9.37467 6.33337 9.37467H12.1667C12.5084 9.37467 12.7917 9.65801 12.7917 9.99967C12.7917 10.3413 12.5084 10.6247 12.1667 10.6247Z",fill:"currentColor"})],-1)])]),_:2},1032,["href"])):g("",!0),u(c(x),{href:r.route("finance.show",e.id),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600"},{default:d(()=>[...s[9]||(s[9]=[t("svg",{class:"w-5 h-5 text-lime-600 dark:text-lime-400",viewBox:"0 0 21 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10 8.12467C8.96451 8.12467 8.12504 8.96414 8.12504 9.99967C8.12504 11.0352 8.96451 11.8747 10 11.8747C11.0356 11.8747 11.875 11.0352 11.875 9.99967C11.875 8.96414 11.0356 8.12467 10 8.12467Z",fill:"currentColor"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 4.58301C7.81856 4.58301 5.85671 5.45916 4.44305 6.54414C3.7353 7.08733 3.15457 7.69062 2.74712 8.27774C2.34742 8.85368 2.08337 9.45929 2.08337 9.99967C2.08337 10.5401 2.34742 11.1457 2.74712 11.7216C3.15457 12.3087 3.7353 12.912 4.44305 13.4552C5.85671 14.5402 7.81856 15.4163 10 15.4163C12.1815 15.4163 14.1434 14.5402 15.557 13.4552C16.2648 12.912 16.8455 12.3087 17.253 11.7216C17.6527 11.1457 17.9167 10.5401 17.9167 9.99967C17.9167 9.45929 17.6527 8.85368 17.253 8.27774C16.8455 7.69062 16.2648 7.08733 15.557 6.54414C14.1434 5.45916 12.1815 4.58301 10 4.58301ZM6.87504 9.99967C6.87504 8.27378 8.27415 6.87467 10 6.87467C11.7259 6.87467 13.125 8.27378 13.125 9.99967C13.125 11.7256 11.7259 13.1247 10 13.1247C8.27415 13.1247 6.87504 11.7256 6.87504 9.99967Z",fill:"currentColor"})],-1)])]),_:2},1032,["href"])])]),_:1},8,["endpoint","params"])])])]),_:1})],64))}};export{bt as default};
