import{u as S,d as C,o as i,w as D,f as e,l as n,m as V,q as u,g as l,F as b,C as y,t as p,J as f,I as x,D as w}from"./vendor-core-D38XQ_w0.js";import{_ as M}from"./Modal-DrnPoAKc.js";import{u as U}from"./useActionLoading-s7e1gqkt.js";import"./vendor-common-BBegFRNv.js";import"./vendor-charts-Bw6UNgWf.js";const B={class:"w-full p-6 bg-white shadow-xl rounded-2xl dark:bg-gray-800"},$={class:"flex items-center justify-between pb-4 mb-6 border-b border-gray-100 dark:border-gray-700"},j={class:"space-y-4"},T={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},A=["value"],R={key:0},I=["value"],L=["value"],N={class:"flex items-center gap-2"},O={class:"relative w-full"},q={class:"relative w-full"},E={class:"flex gap-3"},G={class:"flex-1"},J={class:"relative"},P={class:"text-[10px] text-gray-400 mt-1 text-left"},W={class:"flex-1"},z={class:"relative"},H={class:"text-[10px] text-gray-400 mt-1 text-left"},K={class:"flex items-center justify-between pt-4 mt-8 border-t border-gray-100 dark:border-gray-700"},Q={class:"flex gap-2"},X=["disabled"],st={__name:"modalFilter",props:{show:{type:Boolean,default:!1},filters:Object,dropdowns:Object},emits:["close"],setup(m,{emit:h}){const d=m,c=h,s=S({status:d.filters.status||"",supplier_id:d.filters.supplier_id||"",user_id:d.filters.user_id||"",min_date:d.filters.min_date||"",max_date:d.filters.max_date||"",min_total:d.filters.min_total||"",max_total:d.filters.max_total||""}),{isActionLoading:g}=U();function k(a){return Object.entries(a).reduce((t,[r,o])=>(typeof o=="boolean"&&o===!1||o!=null&&o!==""&&(Array.isArray(o)&&o.length===0||(t[r]=o)),t),{})}function _(){const a=s.data(),r={...{search:d.filters.search||""},...a},o=k(r);g.value=!0,w.get(route("purchases.index"),o,{preserveState:!0,replace:!0,only:["purchases","filters"],onFinish:()=>{g.value=!1,c("close")}})}function F(){const a=k({search:d.filters.search||""});g.value=!0,w.get(route("purchases.index"),a,{preserveState:!0,replace:!0,onFinish:()=>{g.value=!1,c("close"),s.reset("status","supplier_id","user_id","min_date","max_date","min_total","max_total")}})}const v=a=>a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a):"0";return(a,t)=>(i(),C(M,{show:m.show,onClose:t[9]||(t[9]=r=>a.$emit("close")),maxWidth:"lg"},{default:D(()=>[e("div",B,[e("div",$,[t[11]||(t[11]=e("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"}," Filter Data Pembelian ",-1)),e("button",{onClick:t[0]||(t[0]=r=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",j,[e("div",T,[e("div",null,[t[13]||(t[13]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Status",-1)),u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>l(s).status=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[t[12]||(t[12]=e("option",{value:""},"Semua Status",-1)),(i(!0),n(b,null,y(m.dropdowns.purchaseStatuses,r=>(i(),n("option",{key:r,value:r},p(r.charAt(0).toUpperCase()+r.slice(1)),9,A))),128))],512),[[f,l(s).status]])]),m.dropdowns.users?(i(),n("div",R,[t[15]||(t[15]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Dibuat Oleh",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>l(s).user_id=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[t[14]||(t[14]=e("option",{value:""},"Semua Staff",-1)),(i(!0),n(b,null,y(m.dropdowns.users,r=>(i(),n("option",{key:r.id,value:r.id},p(r.name),9,I))),128))],512),[[f,l(s).user_id]])])):V("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Supplier",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>l(s).supplier_id=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[t[16]||(t[16]=e("option",{value:""},"Semua Supplier",-1)),(i(!0),n(b,null,y(m.dropdowns.suppliers,r=>(i(),n("option",{key:r.id,value:r.id},p(r.name),9,L))),128))],512),[[f,l(s).supplier_id]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Tanggal Transaksi",-1)),e("div",N,[e("div",O,[u(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=r=>l(s).min_date=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Dari"},null,512),[[x,l(s).min_date]])]),t[18]||(t[18]=e("span",{class:"text-gray-400"},"-",-1)),e("div",q,[u(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=r=>l(s).max_date=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Sampai"},null,512),[[x,l(s).max_date]])])])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Total Nominal (Grand Total)",-1)),e("div",E,[e("div",G,[e("div",J,[t[20]||(t[20]=e("span",{class:"absolute text-xs text-gray-500 left-3 top-2"},"Rp",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=r=>l(s).min_total=r),class:"w-full py-2 pl-8 pr-3 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Min"},null,512),[[x,l(s).min_total,void 0,{number:!0}]])]),e("p",P,p(v(l(s).min_total)),1)]),t[22]||(t[22]=e("span",{class:"self-start mt-2 text-gray-400"},"-",-1)),e("div",W,[e("div",z,[t[21]||(t[21]=e("span",{class:"absolute text-xs text-gray-500 left-3 top-2"},"Rp",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=r=>l(s).max_total=r),class:"w-full py-2 pl-8 pr-3 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Max"},null,512),[[x,l(s).max_total,void 0,{number:!0}]])]),e("p",H,p(v(l(s).max_total)),1)])])])]),e("div",K,[e("button",{type:"button",onClick:F,class:"text-sm font-medium text-gray-500 transition hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}," Reset Filter "),e("div",Q,[e("button",{onClick:t[8]||(t[8]=r=>a.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600"}," Batal "),e("button",{onClick:_,disabled:l(s).processing,class:"px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm bg-lime-600 hover:bg-lime-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lime-200 dark:shadow-none"},p(l(s).processing?"Memuat...":"Terapkan Filter"),9,X)])])])]),_:1},8,["show"]))}};export{st as default};
