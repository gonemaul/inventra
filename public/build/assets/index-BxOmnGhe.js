import{x as ae,y as c,u as se,z as oe,a as re,J as ne,p as w,l as u,o as d,e as L,d as le,m as p,f as t,g as l,i as ie,w as X,B as de,q as W,A as Z,X as ue,n as D,F as Y,H as ee,t as m,G as ce,k as te}from"./vendor-core-5xBySu3Y.js";import"./vendor-scanner-CWCxwXow.js";import"./vendor-common-pmZ7KOuE.js";import me from"./ConfirmSubmit-VxNV-Rlp.js";import{B as ge}from"./BottomSheet-Dqr7fYKf.js";import pe from"./Cart-BAhQGh9D.js";import{_ as ye}from"./BarcodeScanner-_MwryXXR.js";import"./vendor-charts-Bw6UNgWf.js";import"./Modal-CvxaYuhL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MoneyInput-CI7b5BiC.js";function he(z){const h=ae(),S="POS_REALTIME_DRAFT_V3",b=c(""),f=c("all"),_=c([]),C=c(!1),x=c(8),q=c(""),F=c([]),N=c(!1),v=c(null);c(null),c(!1),c("single"),c(null);const o=se({input_type:"realtime",report_date:new Date().toISOString().slice(0,10),items:[],customer_id:null,payment_amount:0,change_amount:0,payment_method:"cash",discount_type:"fixed",discount_value:0,notes:""});oe(async()=>{C.value=!0;try{const s=await re.get(route("sales.products.lite"));_.value=s.data}catch(s){console.error("Gagal load produk:",s),h.error("Gagal memuat database produk")}finally{C.value=!1}const e=localStorage.getItem(S);if(e)try{const s=JSON.parse(e);s.items&&(o.items=s.items),o.payment_amount=s.payment_amount||0,o.payment_method=s.payment_method||"cash",o.notes=s.notes||"",o.discount_type=s.discount_type||"fixed",o.discount_value=s.discount_value||0,s.selectedMember&&(v.value=s.selectedMember,o.customer_id=s.selectedMember.id)}catch{localStorage.removeItem(S)}}),ne([()=>o.items,()=>o.customer_id,()=>o.payment_amount,()=>o.discount_value,()=>o.notes],()=>{localStorage.setItem(S,JSON.stringify({items:o.items,customer_id:o.customer_id,payment_amount:o.payment_amount,payment_method:o.payment_method,notes:o.notes,discount_type:o.discount_type,discount_value:o.discount_value,selectedMember:v.value}))},{deep:!0});const R=e=>{try{const s=_.value.find(n=>n.code==e);if(s){if(s.stock<=0){h.warning(`Stok produk "${s.name}" habis!`);return}return s}}catch{return null}},V=e=>{const s=z.customers.find(n=>n.member_code==code||n.phone==code);s?$(s):alert("member tidak ada")},Q=w(()=>{let e=_.value;if(f.value!=="all"&&(e=e.filter(s=>s.category_id===f.value)),b.value){const s=b.value.toLowerCase();e=e.filter(n=>n.name.toLowerCase().includes(s)||n.code.toLowerCase().includes(s))}return e.slice(0,x.value)}),G=()=>{x.value<_.value.length&&(x.value+=20)};w(()=>{if(!q){F.value=[];return}if(q.value){const e=q.value.toLowerCase();result=z.customers.filter(s=>s.name.toLowerCase().includes(e)||s.code.toLowerCase().includes(e))}F.value=result.slice(0,5)});const y=w(()=>o.items.reduce((e,s)=>e+(parseFloat(s.subtotal)||0),0)),B=w(()=>{const e=parseFloat(o.discount_value)||0;if(e<=0)return 0;if(o.discount_type==="percent"){const s=e>100?100:e;return Math.round(y.value*s/100)}return e>y.value?y.value:e}),k=w(()=>{const e=y.value-B.value,s=e>0?e:0;return s===0&&(o.payment_amount=0,o.discount_value=0),s}),M=w(()=>(parseFloat(o.payment_amount)||0)-k.value),P=w(()=>o.payment_method!=="cash"&&o.payment_method!==""?!0:(parseFloat(o.payment_amount)||0)>=k.value),T=w(()=>o.items.some(e=>e.quantity<=0||isNaN(e.quantity))),j=w(()=>{const e=k.value;if(e<=0)return[];const s=[{label:"Uang Pas",value:e}];if([2e3,5e3,1e4,2e4,5e4,1e5].forEach(g=>{g>e&&!s.find(J=>J.value===g)&&s.push({label:a(g),value:g})}),e>5e4){const g=Math.ceil(e/5e4)*5e4;s.find(J=>J.value===g)||s.push({label:a(g),value:g})}return s.slice(0,4)}),i=e=>{o.payment_amount=e.value},O=()=>{o.payment_amount=0},U=e=>{if(parseFloat(e.stock)<=0){h.error("Stok habis!");return}const s=o.items.find(n=>n.product_id===e.id);if(s){if(s.quantity+1>e.stock){h.warning("Stok maksimal!");return}s.quantity++,I(s)}else{const n=parseFloat(e.selling_price||e.price);o.items.push({product_id:e.id,code:e.code,name:e.name,unit:e.unit,stock_max:parseFloat(e.stock),image:e.image_path,selling_price:n,original_price:n,quantity:1,subtotal:n})}},H=e=>o.items.splice(e,1),E=(e,s)=>{const n=o.items[e],g=parseFloat(n.quantity)+s;if(g>n.stock_max){h.warning(`Stok sisa ${n.stock_max}`);return}if(g<=0){confirm("Hapus item ini?")&&H(e);return}n.quantity=g,I(n)},I=e=>{e.unit?.is_decimal===1||(e.quantity=Math.round(e.quantity),e.quantity<1&&(e.quantity=1)),e.quantity>e.stock_max&&(e.quantity=e.stock_max,h.warning(`Stok sisa ${e.stock_max}`)),e.subtotal=Math.round(e.quantity*e.selling_price)},A=e=>{const s=parseFloat(e.subtotal)||0,n=parseFloat(e.selling_price)||0;if(!(n<=0))if(e.unit?.is_decimal===1){let g=s/n;g>e.stock_max&&(g=e.stock_max,e.subtotal=Math.round(g*n),h.warning("Melebihi sisa stok!")),e.quantity=parseFloat(g.toFixed(4))}else confirm(`‚ö†Ô∏è Ubah harga satuan agar sesuai total Rp ${a(s)}?`)?e.quantity>0&&(e.selling_price=Math.round(s/e.quantity)):e.subtotal=Math.round(e.quantity*e.selling_price)},K=e=>{e.subtotal=Math.round(e.quantity*e.selling_price)},$=e=>{v.value=e,o.customer_id=e.id,F.value=[],q.value=""},r=(e=!1,s={})=>{o.change_amount=M.value,o.payment_amount=parseFloat(o.payment_amount),o.transform(n=>({...n,print_invoice:e})).post(route("sales.pos.store"),{onStart:s.onStart,onFinish:s.onFinish,onSuccess:n=>{localStorage.removeItem(S),o.reset(),o.items=[],v.value=null,s.onSuccess&&s.onSuccess(n)},onError:n=>{console.error(n),h.error("Gagal memproses transaksi")}})},a=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e);return{form:o,allProducts:_,filteredProducts:Q,isFetchingData:C,queryProduk:R,queryMember:V,searchQuery:b,selectedCategory:f,loadMoreProducts:G,memberSearch:q,memberSearchResults:F,isLoadingMember:N,selectedMember:v,selectMember:$,removeMember:()=>{v.value=null,o.customer_id=null},subTotal:y,discountAmount:B,grandTotal:k,changeAmount:M,isPaymentSufficient:P,hasInvalidQty:T,moneySuggestions:j,addItem:U,removeItem:H,updateQty:E,recalcFromQty:I,recalcFromSubtotal:A,recalcFromPrice:K,handleMoneyClick:i,resetPayment:O,submitTransaction:r,rp:a}}const be={class:"flex flex-col lg:flex-row h-[100dvh] w-full bg-gray-100 dark:bg-gray-900 overflow-hidden font-sans transition-colors duration-300"},fe={class:"relative flex flex-col flex-1 h-full overflow-hidden"},xe={class:"z-10 flex items-center gap-3 px-4 py-3 bg-white border-b shadow-sm shrink-0 dark:bg-gray-800 dark:border-gray-700"},ve={class:"relative flex-1"},ke={key:0,class:"absolute right-11 top-3.5 flex items-center gap-2"},we={class:"px-4 py-2 overflow-x-auto bg-white border-b shadow-sm shrink-0 dark:bg-gray-800 dark:border-gray-700 whitespace-nowrap scrollbar-hide"},_e=["onClick"],Me={class:"grid grid-cols-2 gap-3 pb-20 md:grid-cols-3 lg:grid-cols-4"},Se=["disabled","onClick"],Ce={key:0,class:"absolute z-10 flex items-center justify-center w-8 h-8 text-xs font-bold text-white border-2 border-white rounded-full shadow-lg bottom-1 right-1 bg-lime-600 animate-bounce-short"},qe={class:"relative w-full overflow-hidden bg-gray-100 aspect-square dark:bg-gray-700"},je=["src"],Fe={key:1,class:"absolute z-10 top-2 right-2"},Be={class:"bg-gray-900/70 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm"},Pe={class:"absolute z-10 top-2 left-2"},$e={key:0,class:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm animate-pulse"},ze={key:1,class:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm animate-pulse"},Te={key:2,class:"bg-gray-500 text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm"},He={key:2,class:"absolute inset-0 z-20 flex items-center justify-center transition-opacity opacity-0 bg-lime-500/20 group-hover:opacity-100"},Ie={class:"p-3 flex flex-col max-h-[150px] justify-between"},Le={class:"flex justify-between text-[10px] text-gray-500 font-medium truncate uppercase"},Ae={class:"text-xs font-bold leading-snug text-gray-800 sm:text-sm dark:text-gray-100 line-clamp-2"},De={class:"flex items-end justify-between mt-1"},Ne={class:"flex flex-col"},Re={class:"text-[13px] sm:text-[15px] font-black text-lime-600 dark:text-lime-400 leading-none"},Ve={key:0,class:"text-gray-300 transition-colors group-hover:text-lime-500"},Qe={key:0,class:"py-10 text-center"},Ge={key:1,class:"flex flex-col items-center justify-center px-4 py-16 text-center animate-fade-in"},Oe={key:2,class:"py-4 text-center text-[10px] text-gray-400"},Ue={key:0,class:"absolute z-30 lg:hidden bottom-4 left-4 right-4"},Ee={class:"flex items-center gap-3"},Ke={class:"flex items-center justify-center text-xs font-bold text-white rounded-full shadow-sm bg-lime-500 dark:bg-white dark:text-lime-700 w-7 h-7"},Je={class:"flex flex-col items-start leading-none gap-0.5"},Xe={class:"text-lg font-bold"},Ye={class:"space-y-6"},We={class:"flex items-center gap-4 pb-4 border-b border-gray-100 dark:border-gray-800"},Ze={class:"flex items-center justify-center text-lg font-bold text-gray-400 bg-gray-100 border border-gray-200 w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-700 shrink-0"},et={class:"flex-1 min-w-0"},tt={class:"text-lg font-bold leading-tight text-gray-800 truncate dark:text-white"},at={class:"flex items-center justify-between mt-1"},st={class:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"},ot={class:"bg-gray-50 dark:bg-gray-800/50 p-1.5 rounded-2xl border border-gray-200 dark:border-gray-700"},rt={class:"flex items-center justify-between"},nt=["disabled"],lt={class:"flex-1 px-2 text-center"},it={class:"flex items-center justify-between p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 dark:border-gray-800 rounded-xl"},dt={class:"font-bold text-gray-600 dark:text-gray-300"},ut={class:"text-right"},ct={class:"text-2xl font-black text-gray-900 dark:text-white"},mt={key:0,class:"px-3 py-2 text-xs font-bold text-center text-red-600 border border-red-100 rounded-lg bg-red-50"},gt={class:"flex gap-3 h-14"},St={__name:"index",props:{categories:Array,customers:Array},setup(z){const S=he(z),{form:b,filteredProducts:f,isFetchingData:_,searchQuery:C,selectedCategory:x,loadMoreProducts:q,queryMember:F,queryProduk:N,addItem:v,grandTotal:o,changeAmount:R,isPaymentSufficient:V,hasInvalidQty:Q,submitTransaction:G,rp:y}=S,B=ae(),k=c(!1),M=c(!1),P=c(!1),T=c(!1),j=c("product"),i=c({id:null,name:"",code:"",price:0,quantity:1,stock:0,unit:"Pcs",image:null}),O=r=>{i.value={id:r.id,name:r.name,code:r.code,image_url:r.image_url,price:parseFloat(r.selling_price||r.price||0),quantity:1,stock:parseInt(r.stock||0),unit:r.unit?.name||"Pcs"},T.value=!0},U=r=>{const{scrollTop:a,clientHeight:e,scrollHeight:s}=r.target;a+e>=s-50&&q()},H=()=>{j.value="product",M.value=!0},E=()=>{j.value="member",M.value=!0},I=async r=>{if(M.value=!1,alert("scan berhasil "+j.value+"|"+r),j.value=="product")try{const a=await N(r);a?(r=a,O(r)):alert("Produk tidak ditemukan di database.")}catch(a){console.error("Terjadi kesalahan saat query produk:",a),alert("Gagal mengambil data produk.")}else j.value=="member"&&(r=F(r))},A=(r=!1)=>{v(i),r&&H()},K=r=>{if(b.items.length===0)return B.error("Keranjang kosong!");if(Q.value)return B.error("Qty tidak valid!");if(b.payment_method==="cash"&&!V.value)return B.error("Uang kurang!");G(r,{onSuccess:a=>{P.value=!1,k.value=!1;const e=a.props.flash?.print_url;r&&e?setTimeout(()=>{window.open(e,"_blank","width=300,height=600")},50):r&&!e&&alert("Gagal mendapatkan URL Print dari server.")}})},$=r=>{const a=b.items.find(e=>e.product_id===r);return a?a.quantity:0};return(r,a)=>(d(),u(Y,null,[L(l(ie),{title:"Kasir POS"}),L(me,{showConfirmModal:P.value,changeAmount:l(R),onClose:a[0]||(a[0]=e=>P.value=!1),onConfirmTransaction:K},null,8,["showConfirmModal","changeAmount"]),M.value?(d(),le(ye,{key:0,onResult:I,onClose:a[1]||(a[1]=e=>M.value=!1)})):p("",!0),t("div",be,[t("div",fe,[t("div",xe,[L(l(de),{href:r.route("dashboard"),class:"p-2 rounded-lg bg-lime-50 dark:bg-gray-700 text-lime-700 dark:text-lime-400"},{default:X(()=>[...a[15]||(a[15]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t("div",ve,[W(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>ue(C)?C.value=e:null),type:"text",placeholder:"Cari Nama / Kode...",class:"w-full pl-9 pr-10 py-2.5 bg-gray-100 dark:bg-gray-900 border-none rounded-xl focus:ring-2 focus:ring-lime-500 text-sm dark:text-white transition-all shadow-inner"},null,512),[[Z,l(C)]]),a[18]||(a[18]=t("span",{class:"absolute text-gray-400 left-3 top-3"},"üîç",-1)),l(_)?(d(),u("div",ke,[...a[16]||(a[16]=[t("span",{class:"text-[10px] text-gray-400 italic"},"Syncing...",-1),t("span",{class:"relative flex w-2 h-2"},[t("span",{class:"absolute inline-flex w-full h-full rounded-full opacity-75 animate-ping bg-lime-400"}),t("span",{class:"relative inline-flex w-2 h-2 rounded-full bg-lime-500"})],-1)])])):p("",!0),t("button",{onClick:a[3]||(a[3]=e=>H()),class:"absolute right-1.5 top-1.5 p-1 bg-white dark:bg-gray-700 rounded-lg shadow-sm text-gray-600 dark:text-gray-200 hover:text-lime-600 hover:bg-lime-50 transition border border-gray-200 dark:border-gray-600",title:"Scan Produk"},[...a[17]||(a[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])])]),t("div",we,[t("button",{onClick:a[4]||(a[4]=e=>x.value="all"),class:D([l(x)==="all"?"bg-lime-500 text-white shadow-lime-500/40":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600","px-5 py-2 mr-2 text-xs font-bold transition-all rounded-full active:scale-95"])}," Semua ",2),(d(!0),u(Y,null,ee(z.categories,e=>(d(),u("button",{key:e.id,onClick:s=>x.value=e.id,class:D([l(x)===e.id?"bg-lime-500 text-white shadow-lime-500/40":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600","px-5 py-2 mr-2 text-xs font-bold transition-all rounded-full active:scale-95"])},m(e.name),11,_e))),128))]),t("div",{class:"h-[calc(100vh-220px)] flex-1 p-4 overflow-y-auto bg-gray-100 custom-scroll pb-28 lg:pb-4 dark:bg-gray-900",onScroll:U},[t("div",Me,[(d(!0),u(Y,null,ee(l(f),e=>(d(),u("div",{disabled:e.stock==0,key:e.id,onClick:s=>l(v)(e),class:D(["relative overflow-hidden transition-all bg-white border border-gray-200 shadow-sm cursor-pointer group dark:bg-gray-800 rounded-xl dark:border-gray-700 hover:shadow-md hover:border-lime-500 active:scale-95",$(e.id)>0?"border-lime-500 shadow-md bg-lime-50 ring-1 ring-lime-500":"border-gray-200 shadow-sm bg-white hover:border-lime-300"])},[$(e.id)>0?(d(),u("div",Ce,m($(e.id))+"x ",1)):p("",!0),t("div",qe,[e.image_path?(d(),u("img",{key:0,src:e.image_url,loading:"lazy",decoding:"async",alt:"",class:"absolute inset-0 z-10 object-cover w-full h-full transition-opacity duration-500 opacity-0",onload:"this.classList.remove('opacity-0')",onerror:"this.style.display='none'"},null,8,je)):p("",!0),a[20]||(a[20]=t("div",{class:"flex flex-col items-center justify-center w-full h-full text-gray-500 bg-gray-300 dark:text-gray-700 dark:bg-gray-400"},[t("svg",{class:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",{class:"text-[9px] font-bold mt-1 opacity-50"},"NO IMG")],-1)),e.unit?(d(),u("div",Fe,[t("span",Be,m(e.unit.name),1)])):p("",!0),t("div",Pe,[e.stock==0?(d(),u("span",$e," HABIS ")):p("",!0),e.stock<=5&&e.stock>0?(d(),u("span",ze," Sisa "+m(parseFloat(e.stock)),1)):p("",!0),e.stock>5?(d(),u("span",Te," Stock "+m(parseFloat(e.stock)),1)):p("",!0)]),e.stock>0?(d(),u("div",He,[...a[19]||(a[19]=[t("div",{class:"p-2 text-white transition-transform duration-300 scale-0 rounded-full shadow-lg bg-lime-500 group-hover:scale-110"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1)])])):p("",!0)]),t("div",Ie,[t("div",Le,[t("span",null,m(e.brand.name),1),t("span",null,m(e.size?.name||"-"),1)]),t("h3",Ae,m(e.name),1),t("div",De,[t("div",Ne,[t("span",Re,m(l(y)(e.selling_price||e.price)),1)]),e.stock>0?(d(),u("div",Ve,[...a[21]||(a[21]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})],-1)])])):p("",!0)])])],10,Se))),128))]),l(_)&&l(f).length===0?(d(),u("div",Qe,[...a[22]||(a[22]=[t("div",{class:"w-8 h-8 mx-auto mb-2 border-b-2 rounded-full animate-spin border-lime-500"},null,-1),t("span",{class:"text-xs text-gray-400"},"Memuat database produk...",-1)])])):l(f).length===0?(d(),u("div",Ge,[a[24]||(a[24]=ce('<div class="relative mb-6"><div class="flex items-center justify-center w-24 h-24 rounded-full shadow-inner bg-gray-50 dark:bg-gray-800"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div class="absolute -top-2 -right-2 bg-white dark:bg-gray-700 rounded-full p-1.5 shadow-md border border-gray-100 dark:border-gray-600"><div class="p-1 rounded-full bg-lime-100 dark:bg-lime-900/50"><svg class="w-5 h-5 text-lime-500 dark:text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"></path></svg></div></div></div><h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white"> Produk tidak ditemukan </h3><p class="max-w-xs mx-auto mb-6 text-sm leading-relaxed text-gray-500 dark:text-gray-400"> Kami tidak dapat menemukan produk dengan kata kunci atau kategori tersebut. </p>',3)),t("button",{onClick:a[5]||(a[5]=e=>{r.search="",x.value="all"}),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:border-lime-500 hover:text-lime-600 dark:hover:border-lime-500 dark:hover:text-lime-400 shadow-sm hover:shadow-md"},[...a[23]||(a[23]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),te(" Reset Pencarian ",-1)])])])):p("",!0),l(f).length>0&&l(f).length%20===0?(d(),u("div",Oe," Scroll untuk memuat lebih banyak... ")):p("",!0)],32),l(b).items.length>0?(d(),u("div",Ue,[t("button",{onClick:a[6]||(a[6]=e=>k.value=!0),class:"w-full bg-gray-900 dark:bg-lime-600 text-white p-3.5 rounded-2xl shadow-xl shadow-gray-900/20 flex justify-between items-center animate-bounce-subtle"},[t("div",Ee,[t("span",Ke,m(l(b).items.reduce((e,s)=>e+parseFloat(s.quantity),0)),1),t("div",Je,[a[25]||(a[25]=t("span",{class:"text-[9px] text-gray-400 dark:text-lime-100 uppercase font-bold tracking-wider"},"Total Belanja",-1)),t("span",Xe,m(l(y)(l(o))),1)])]),a[26]||(a[26]=t("span",{class:"flex items-center gap-1 px-4 py-2 text-xs font-bold bg-gray-700 dark:bg-lime-800/30 rounded-xl"},[te(" Bayar "),t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})])],-1))])])):p("",!0)]),L(pe,{showMobileCart:k.value,reprops:l(S),onOpenScanMember:E,onShowBayar:a[7]||(a[7]=e=>P.value=!0),onShowDesktop:a[8]||(a[8]=e=>k.value=!1)},null,8,["showMobileCart","reprops"])]),L(ge,{show:T.value,onClose:a[14]||(a[14]=e=>T.value=!1),title:"Tambah Pesanan"},{footer:X(()=>[t("div",gt,[t("button",{onClick:a[12]||(a[12]=e=>A(!1)),class:"flex-1 font-bold transition border text-lime-700 bg-lime-100 border-lime-200 rounded-xl active:bg-lime-200 dark:bg-lime-800 dark:text-lime-300 dark:border-lime-700"}," Masuk Keranjang "),t("button",{onClick:a[13]||(a[13]=e=>A(!0)),class:"flex-[1.3] bg-gray-900 text-white font-bold rounded-xl shadow-xl flex items-center justify-center gap-2 active:scale-[0.98] transition hover:bg-gray-800 dark:bg-white dark:text-gray-900"},[...a[32]||(a[32]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),t("span",null,"Scan Lagi",-1)])])])]),default:X(()=>[t("div",Ye,[t("div",We,[t("div",Ze,m(i.value.name?.substring(0,2).toUpperCase()),1),t("div",et,[t("h3",tt,m(i.value.name),1),t("div",at,[t("p",st,m(i.value.code),1),t("p",{class:D(["text-xs font-medium",3>i.value.stock?"text-red-500":"text-gray-400"])}," Stok: "+m(i.value.stock),3)])])]),t("div",ot,[t("div",rt,[t("button",{onClick:a[9]||(a[9]=e=>i.value.quantity>1?i.value.quantity--:null),class:"flex items-center justify-center text-gray-500 transition bg-white border border-gray-200 shadow-sm w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-600 active:scale-95 hover:text-red-500 disabled:opacity-50",disabled:i.value.quantity<=1},[...a[27]||(a[27]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,nt),t("div",lt,[a[28]||(a[28]=t("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-0.5"},"Jumlah Beli",-1)),W(t("input",{"onUpdate:modelValue":a[10]||(a[10]=e=>i.value.quantity=e),type:"number",class:"w-full p-0 text-3xl font-black text-center text-gray-800 bg-transparent border-none dark:text-white focus:ring-0"},null,512),[[Z,i.value.quantity,void 0,{number:!0}]])]),t("button",{onClick:a[11]||(a[11]=e=>i.value.quantity++),class:"flex items-center justify-center text-white transition shadow-lg w-14 h-14 bg-lime-500 rounded-xl shadow-lime-500/30 active:scale-95"},[...a[29]||(a[29]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),t("div",it,[t("div",null,[a[30]||(a[30]=t("p",{class:"text-xs text-gray-400"},"Harga Satuan",-1)),t("p",dt,m(l(y)(i.value.price)),1)]),t("div",ut,[a[31]||(a[31]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Subtotal ",-1)),t("p",ct,m(l(y)(i.value.price*i.value.quantity)),1)])]),i.value.quantity>i.value.stock?(d(),u("div",mt," ‚ö†Ô∏è Jumlah melebihi sisa stok ("+m(i.value.stock)+") ",1)):p("",!0)])]),_:1},8,["show"])],64))}};export{St as default};
