import{x as f,C as H,H as N,g as l,o,b as e,i as b,p as V,n as k,j as C,c as U,a as A,t as i,f as _,m as O,w as B,T as R,F as q,q as j,k as I,A as $}from"./app-B5O1DEgc.js";import{B as E}from"./BottomSheet-D-oFX2bz.js";import{H as Q}from"./html5-qrcode-scanner-Dc90e2ja.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"fixed inset-0 z-[9999] bg-black flex flex-col justify-center"},J={key:0,class:"absolute inset-0 flex items-center justify-center bg-black z-[10000]"},W={class:"absolute z-10 bottom-4 right-4"},X={class:"absolute top-0 left-0 right-0 p-6 flex justify-between items-start z-[10001]"},Y={__name:"BarcodeScanner",emits:["result","close"],setup(d,{emit:u}){const m=u;let c=null;const v=f(!1),p=f(!1),x=async()=>{const g="global-reader";try{c=new Q(g);const n={fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1},S={facingMode:"environment",focusMode:"continuous",width:{min:640,ideal:1920},height:{min:480,ideal:1080}};await c.start({facingMode:"environment"},{...n,videoConstraints:S},a,w),v.value=!0}catch(n){console.error("Error starting scanner:",n),alert("Gagal mengakses kamera. Pastikan izin diberikan."),m("close")}},a=(g,n)=>{h().then(()=>{m("result",g)})},w=g=>{},h=async()=>{if(c)try{c.isScanning&&await c.stop(),c.clear()}catch(g){console.error("Failed to stop scanner",g)}c=null,v.value=!1},M=()=>{const g=!p.value;c.applyVideoConstraints({advanced:[{torch:g}]}).then(()=>{p.value=g}).catch(n=>{console.error("Fitur Flash tidak didukung di device ini",n),alert("Flash tidak didukung di perangkat/browser ini.")})};return H(()=>{x()}),N(()=>{h()}),(g,n)=>(o(),l("div",G,[n[5]||(n[5]=e("div",{id:"global-reader",class:"w-full h-full bg-black"},null,-1)),v.value?b("",!0):(o(),l("div",J,[...n[1]||(n[1]=[V('<div class="text-center"><svg class="w-10 h-10 mx-auto mb-2 animate-spin text-lime-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-sm font-medium text-white">Membuka Kamera...</p></div>',1)])])),e("div",W,[e("button",{onClick:M,class:k(["p-3 transition-colors rounded-full shadow-lg",p.value?"bg-yellow-400 text-black":"bg-white text-gray-800"])},[...n[2]||(n[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})],-1)])],2)]),e("div",X,[n[4]||(n[4]=e("div",{class:"px-4 py-2 text-sm font-medium text-white border rounded-full bg-black/50 backdrop-blur-sm border-white/20"}," Arahkan ke Barcode ",-1)),e("button",{onClick:n[0]||(n[0]=S=>g.$emit("close")),class:"flex items-center justify-center w-10 h-10 text-white transition rounded-full bg-white/20 backdrop-blur-md hover:bg-white/40"},[...n[3]||(n[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),n[6]||(n[6]=V('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-[10000]"><div class="relative w-64 h-64 border-2 border-lime-500/50 rounded-2xl"><div class="absolute top-0 left-0 w-5 h-5 border-t-4 border-l-4 border-lime-500 -mt-0.5 -ml-0.5 rounded-tl-lg"></div><div class="absolute top-0 right-0 w-5 h-5 border-t-4 border-r-4 border-lime-500 -mt-0.5 -mr-0.5 rounded-tr-lg"></div><div class="absolute bottom-0 left-0 w-5 h-5 border-b-4 border-l-4 border-lime-500 -mb-0.5 -ml-0.5 rounded-bl-lg"></div><div class="absolute bottom-0 right-0 w-5 h-5 border-b-4 border-r-4 border-lime-500 -mb-0.5 -mr-0.5 rounded-br-lg"></div><div class="absolute top-1/2 left-4 right-4 h-0.5 bg-red-500 shadow-[0_0_15px_rgba(239,68,68,0.8)] animate-scan"></div></div></div>',1))]))}},Z={class:"relative min-h-screen font-sans bg-gray-50 dark:bg-gray-950 pb-28"},D={class:"sticky top-0 z-30 bg-white border-b border-gray-100 shadow-lg dark:bg-gray-900 shadow-gray-200/50 dark:shadow-none dark:border-gray-800 rounded-b-3xl"},ee={class:"px-5 pt-5 pb-6"},te={class:"flex items-start justify-between mb-3"},re={class:"flex items-start"},se={class:"flex items-center gap-2 mb-1"},ae={class:"text-xl font-black tracking-tight text-gray-800 dark:text-white"},oe={class:"flex items-center gap-1.5 text-gray-500 dark:text-gray-400 pl-3.5"},le={class:"text-xs font-medium truncate max-w-[150px]"},ie={class:"text-right"},ne={class:"text-[10px] text-gray-400 mt-1"},de={class:"font-bold text-red-500"},ue={class:"relative h-2 mb-4 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-800"},ce={class:"grid grid-cols-2 gap-3 h-[72px]"},ge={class:"flex flex-col justify-center p-3 border border-gray-100 bg-gray-50 dark:bg-gray-800 rounded-2xl dark:border-gray-700"},be={class:"text-sm font-bold text-gray-800 truncate dark:text-gray-200"},ve={class:"relative z-10"},pe={class:"text-[10px] uppercase font-bold tracking-wider mb-0.5 opacity-70"},me={class:"text-sm font-black truncate"},xe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"absolute w-10 h-10 -right-2 -bottom-2 opacity-10",viewBox:"0 0 20 20",fill:"currentColor"},he={key:1,xmlns:"http://www.w3.org/2000/svg",class:"absolute w-10 h-10 -right-2 -bottom-2 opacity-10",viewBox:"0 0 20 20",fill:"currentColor"},ye={class:"px-4 py-3 sticky top-[108px] z-20 bg-gray-50/95 dark:bg-gray-950/95 backdrop-blur-sm"},ke={class:"flex p-1 bg-gray-200 rounded-lg dark:bg-gray-800"},fe={class:"px-4 space-y-3"},we={key:0},_e={key:0,class:"flex flex-col items-center py-10 text-sm text-center text-gray-400"},Ce=["onClick"],Me={class:"flex items-center gap-3"},Se={class:"flex items-center justify-center w-10 h-10 text-xs font-bold text-gray-400 bg-gray-100 border border-gray-200 rounded dark:bg-gray-800 dark:border-gray-700"},ze={class:"text-sm font-bold text-gray-800 dark:text-gray-100"},Be={class:"text-xs text-gray-400"},qe={key:1},je={key:0,class:"py-10 text-sm text-center text-gray-400"},Ie=["onClick"],$e={class:"flex items-start justify-between pl-2"},Ve={class:"flex items-center gap-2 mb-1"},Ae={class:"text-sm font-bold text-gray-800 dark:text-white"},Pe={key:0,class:"text-[9px] px-1.5 rounded bg-purple-100 text-purple-600 font-bold border border-purple-200"},Le={class:"flex gap-3 text-xs"},Te={class:"text-gray-500"},Fe={class:"text-gray-800 dark:text-gray-200"},He={class:"text-gray-500"},Ne={class:"text-gray-800 dark:text-gray-200"},Ue={key:0,class:"fixed inset-0 z-40 p-4 pt-20 bg-white dark:bg-gray-900 animate-fade-in"},Oe={class:"relative"},Re={class:"mt-4 space-y-2 overflow-y-auto max-h-[80vh]"},Ee={key:0,class:"mt-10 text-sm text-center text-gray-400"},Qe={key:1,class:"mt-10 text-sm text-center text-gray-400"},Ke=["onClick"],Ge={class:"text-sm font-bold text-gray-800 dark:text-white"},Je={class:"text-xs text-gray-500"},We={key:0,class:"text-[9px] bg-lime-100 text-lime-700 px-2 py-0.5 rounded font-bold"},Xe={key:2,class:"fixed z-30 w-full max-w-xs px-4 -translate-x-1/2 bottom-6 left-1/2"},Ye={class:"flex gap-3"},Ze={class:"space-y-5"},De={class:"flex gap-4"},et={class:"flex items-center justify-center font-bold text-gray-400 bg-gray-100 border border-gray-200 rounded-lg w-14 h-14 dark:bg-gray-800 dark:border-gray-700 shrink-0"},tt={class:"flex-1"},rt={class:"text-lg font-bold leading-tight text-gray-800 dark:text-white"},st={class:"text-xs text-gray-500"},at={class:"p-1 border border-gray-200 bg-gray-50 dark:bg-gray-800/50 rounded-xl dark:border-gray-700"},ot={class:"grid items-center grid-cols-2 mb-4"},lt={class:"text-center border-r border-gray-200 dark:border-gray-700"},it={key:0,class:"text-xl font-bold text-gray-400"},nt={key:1,class:"text-xl font-bold text-gray-300"},dt={class:"text-[10px] text-gray-400 block uppercase"},ut={class:"px-2"},ct={class:"grid items-center grid-cols-2 pb-2"},gt={class:"px-1 text-center border-r border-gray-200 dark:border-gray-700"},bt={key:0,class:"text-sm font-medium text-gray-500 dark:text-gray-400"},vt={key:1,class:"text-sm font-medium text-gray-300"},pt={class:"px-2"},mt={class:"relative"},xt={key:0,class:"text-[10px] text-gray-400 text-center italic"},ht={class:"flex gap-3"},yt={__name:"MobileChecking",props:{invoice:Object,unlinkedItems:Array,linkedItems:Array,products:Array,actions:Object},setup(d){const u=d,m=f("unlinked"),c=f(!1),v=f(!1),p=f(!1),x=f(""),a=f({product_id:null,name:"",sku:"",unit:"",is_po_match:!1,po_qty:0,po_price:0,quantity:0,price:0,mode:"link",target_id:null}),w=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s||0),h=C(()=>{const s=u.invoice.total_amount||0,t=u.linkedItems.reduce((r,y)=>r+(y.quantity||0)*(y.purchase_price||0),0);return s-t}),M=C(()=>{if(x.value.length<2)return[];const s=x.value.toLowerCase();return u.products.filter(t=>t.name.toLowerCase().includes(s)||t.code.toLowerCase().includes(s)).slice(0,10)}),g=(s,t=!1)=>{let r=null;t?(r=s,a.value={product_id:r.product_id,name:r.product?.name,sku:r.product?.code||r.product?.sku,unit:r.unit?.name||"Pcs",is_po_match:!0,po_qty:r.quantity,po_price:r.purchase_price,quantity:r.quantity,price:r.purchase_price,mode:"link",target_id:r.id}):(r=u.unlinkedItems.find(y=>y.product_id===s.id),r?a.value={product_id:s.id,name:s.name,sku:s.code,unit:s.unit?.name||"Pcs",is_po_match:!0,po_qty:r.quantity,po_price:r.purchase_price,quantity:r.quantity,price:r.purchase_price,mode:"link",target_id:r.id}:a.value={product_id:s.id,name:s.name,sku:s.code,unit:s.unit?.name||"Pcs",is_po_match:!1,po_qty:0,po_price:0,quantity:1,price:0,mode:"create",target_id:s.id}),p.value=!1,x.value="",v.value=!0},n=s=>{const t=!!s.purchase_item_id;a.value={product_id:s.product_id,name:s.product?.name,sku:s.product?.code,unit:s.unit?.name,is_po_match:t,po_qty:0,po_price:0,quantity:s.quantity,price:s.purchase_price,mode:"edit",target_id:s.id},v.value=!0},S=()=>{if(a.value.mode==="edit"){const s=u.linkedItems.find(t=>t.id===a.value.target_id);s&&(s.quantity=a.value.quantity,s.purchase_price=a.value.price),u.actions.saveCorrections()}else a.value.mode==="link"?u.actions.submitLinkage(a.value.target_id):a.value.mode==="create"&&u.actions.addNewSubstituteItem({id:a.value.target_id});v.value=!1},P=()=>{confirm("Lepaskan item ini dari invoice?")&&(u.actions.submitUnlinkage(a.value.target_id),v.value=!1)},L=s=>{c.value=!1,x.value=s,p.value=!0},T=C(()=>u.linkedItems.reduce((s,t)=>s+(t.quantity||0)*(t.purchase_price||0),0)),z=C(()=>Math.abs(h.value)<100&&u.linkedItems.length>0),F=C(()=>{const s=u.invoice.total_amount||1;let t=T.value/s*100;return Math.min(Math.max(t,0),100)});return(s,t)=>(o(),l("div",Z,[e("header",D,[e("div",ee,[e("div",te,[e("div",null,[e("div",re,[e("button",{onClick:t[0]||(t[0]=r=>s.$emit("back")),class:"p-2 mr-3 -ml-2 text-gray-400 transition-colors rounded-full hover:text-gray-800 hover:bg-gray-100 dark:text-gray-500 dark:hover:text-white dark:hover:bg-gray-800"},[...t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("div",se,[e("span",{class:k(["w-1.5 h-8 rounded-full",z.value?"bg-lime-500 animate-pulse":"bg-gray-300 dark:bg-gray-700"])},null,2),e("h1",ae," #"+i(d.invoice.invoice_number),1)])]),e("div",oe,[t[14]||(t[14]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 01-2 2H6a1 1 0 01-2-2V4zm2 0h8v12H6V4z","clip-rule":"evenodd"})],-1)),e("p",le,i(d.invoice.supplier?.name||"Supplier Umum"),1)])]),e("div",ie,[e("span",{class:k(["px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider border",d.invoice.status==="validated"?"bg-teal-50 text-teal-700 border-teal-200":"bg-orange-50 text-orange-700 border-orange-200"])},i(d.invoice.status),3),e("p",ne,[t[15]||(t[15]=_(" Jatuh Tempo: ",-1)),e("span",de,i(d.actions.formatTanggal(d.invoice.due_date)),1)])])]),e("div",ue,[e("div",{class:k(["absolute top-0 left-0 h-full transition-all duration-500 ease-out rounded-full",z.value?"bg-lime-500 shadow-[0_0_10px_rgba(132,204,22,0.6)]":"bg-blue-500"]),style:O({width:`${F.value}%`})},null,6)]),e("div",ce,[e("div",ge,[t[16]||(t[16]=e("p",{class:"text-[10px] uppercase font-bold text-gray-400 tracking-wider mb-0.5"}," Total Nota ",-1)),e("p",be,i(w(d.invoice.total_amount)),1)]),A(R,{name:"fade",mode:"out-in"},{default:B(()=>[z.value&&d.invoice.status!=="validated"?(o(),l("button",{key:0,onClick:t[1]||(t[1]=(...r)=>d.actions.validateInvoice&&d.actions.validateInvoice(...r)),class:"relative flex items-center justify-between w-full h-full px-4 overflow-hidden text-white transition-all shadow-lg bg-lime-500 hover:bg-lime-600 active:scale-95 rounded-2xl shadow-lime-500/40 group"},[...t[17]||(t[17]=[e("div",{class:"absolute inset-0 transition-transform duration-300 translate-y-full bg-white/10 group-hover:translate-y-0"},null,-1),e("div",{class:"relative z-10 text-left"},[e("p",{class:"text-[10px] font-bold opacity-90 uppercase tracking-wider"}," Data Cocok "),e("p",{class:"text-sm font-black leading-none"}," VALIDASI ")],-1),e("div",{class:"bg-white/20 p-1.5 rounded-full relative z-10 group-hover:translate-x-1 transition-transform"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1)])])):(o(),l("div",{key:1,class:k(["w-full h-full p-3 rounded-2xl border flex flex-col justify-center relative overflow-hidden",Math.abs(h.value)<100?"bg-teal-50 border-teal-200 text-teal-800":"bg-white dark:bg-gray-800 border-red-100 text-red-600"])},[e("div",ve,[e("p",pe,i(Math.abs(h.value)<100?"Status":"Selisih"),1),e("p",me,i(Math.abs(h.value)<100?"SELESAI":w(h.value)),1)]),Math.abs(h.value)>=100?(o(),l("svg",xe,[...t[18]||(t[18]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])])):(o(),l("svg",he,[...t[19]||(t[19]=[e("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])]))],2))]),_:1})])])]),e("div",ye,[e("div",ke,[e("button",{onClick:t[2]||(t[2]=r=>m.value="unlinked"),class:k(["flex-1 py-2 text-xs font-bold rounded-md transition",m.value==="unlinked"?"bg-white dark:bg-gray-700 shadow text-gray-800 dark:text-white":"text-gray-500"])}," Sisa PO ("+i(d.unlinkedItems.length)+") ",3),e("button",{onClick:t[3]||(t[3]=r=>m.value="linked"),class:k(["flex-1 py-2 text-xs font-bold rounded-md transition",m.value==="linked"?"bg-white dark:bg-gray-700 shadow text-lime-600 dark:text-lime-400":"text-gray-500"])}," Sudah Masuk ("+i(d.linkedItems.length)+") ",3)])]),e("div",fe,[m.value==="unlinked"?(o(),l("div",we,[d.unlinkedItems.length===0?(o(),l("div",_e,[...t[20]||(t[20]=[e("svg",{class:"w-12 h-12 mb-2 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),e("p",null,"Semua item PO sudah ditemukan!",-1)])])):b("",!0),(o(!0),l(q,null,j(d.unlinkedItems,r=>(o(),l("div",{key:r.id,onClick:y=>g(r,!0),class:"bg-white dark:bg-gray-900 p-3 rounded-xl border border-gray-100 dark:border-gray-800 flex justify-between items-center opacity-75 hover:opacity-100 transition cursor-pointer active:scale-[0.99]"},[e("div",Me,[e("div",Se,i(r.product?.name?.substring(0,2).toUpperCase()),1),e("div",null,[e("h4",ze,i(r.product?.name),1),e("p",Be,[t[21]||(t[21]=_(" Order: ",-1)),e("b",null,i(r.quantity),1),_(" "+i(r.unit?.name),1)])])])],8,Ce))),128))])):b("",!0),m.value==="linked"?(o(),l("div",qe,[d.linkedItems.length===0?(o(),l("div",je,[...t[22]||(t[22]=[e("p",null,"Belum ada item yang di-scan.",-1)])])):b("",!0),(o(!0),l(q,null,j(d.linkedItems,r=>(o(),l("div",{key:r.id,onClick:y=>n(r),class:"bg-white dark:bg-gray-900 mb-1 p-3 rounded-xl border border-lime-200 dark:border-lime-900/50 relative overflow-hidden active:scale-[0.98] transition cursor-pointer shadow-sm"},[t[26]||(t[26]=e("div",{class:"absolute top-0 bottom-0 left-0 w-1 bg-lime-500"},null,-1)),e("div",$e,[e("div",null,[e("div",Ve,[e("h4",Ae,i(r.product?.name),1),r.purchase_item_id?b("",!0):(o(),l("span",Pe,"TAMBAHAN"))]),e("div",Le,[e("span",Te,[t[23]||(t[23]=_("Qty: ",-1)),e("b",Fe,i(r.quantity),1)]),e("span",He,[t[24]||(t[24]=_("@ ",-1)),e("b",Ne,i(w(r.purchase_price)),1)])])]),t[25]||(t[25]=e("div",{class:"text-gray-300"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})])],-1))])],8,Ie))),128))])):b("",!0)]),p.value?(o(),l("div",Ue,[e("div",Oe,[I(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>x.value=r),type:"text",placeholder:"Ketik nama / kode (atau hasil scan)...",class:"w-full py-3 pl-4 pr-10 bg-gray-100 border-none dark:bg-gray-800 rounded-xl focus:ring-2 focus:ring-lime-500 dark:text-white",autoFocus:""},null,512),[[$,x.value]]),e("button",{onClick:t[5]||(t[5]=r=>p.value=!1),class:"absolute text-gray-400 -translate-y-1/2 right-3 top-1/2"},[...t[27]||(t[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Re,[x.value.length<2?(o(),l("p",Ee," Ketik minimal 2 huruf... ")):M.value.length===0?(o(),l("div",Qe," Produk tidak ditemukan di database. ")):b("",!0),(o(!0),l(q,null,j(M.value,r=>(o(),l("div",{key:r.id,onClick:y=>g(r,!1),class:"flex items-center justify-between p-3 transition bg-white border border-gray-100 dark:bg-gray-800 rounded-xl dark:border-gray-700 active:bg-lime-50 dark:active:bg-lime-900/20"},[e("div",null,[e("h4",Ge,i(r.name),1),e("p",Je,i(r.code),1)]),d.unlinkedItems.find(y=>y.product_id===r.id)?(o(),l("span",We," MATCH PO ")):b("",!0)],8,Ke))),128))])])):b("",!0),c.value?(o(),U(Y,{key:1,onResult:L,onClose:t[6]||(t[6]=r=>c.value=!1)})):b("",!0),!p.value&&!c.value?(o(),l("div",Xe,[e("div",Ye,[e("button",{onClick:t[7]||(t[7]=r=>p.value=!0),class:"flex-1 py-4 font-bold text-gray-800 bg-white border border-gray-100 rounded-full shadow-lg dark:bg-gray-800 dark:text-white dark:border-gray-700"}," CARI "),e("button",{onClick:t[8]||(t[8]=r=>c.value=!0),class:"flex-[2] flex items-center justify-center gap-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 py-4 rounded-full shadow-xl font-bold text-lg active:scale-95 transition"},[...t[28]||(t[28]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),_(" SCAN ",-1)])])])])):b("",!0),A(E,{show:v.value,onClose:t[12]||(t[12]=r=>v.value=!1),title:"Verifikasi Barang"},{footer:B(()=>[e("div",ht,[a.value.mode==="edit"?(o(),l("button",{key:0,onClick:P,class:"p-3.5 bg-red-50 text-red-600 rounded-xl border border-red-100 hover:bg-red-100 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"},[...t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])):b("",!0),e("button",{onClick:t[11]||(t[11]=r=>v.value=!1),class:"flex-1 py-3.5 bg-gray-100 text-gray-600 font-bold rounded-xl dark:bg-gray-800 dark:text-gray-300"}," Batal "),e("button",{onClick:S,class:"flex-[2] py-3.5 bg-lime-500 text-white font-bold rounded-xl shadow-lg shadow-lime-500/30 active:scale-[0.98] transition"},i(a.value.mode==="edit"?"Simpan Perubahan":"Tautkan Barang"),1)])]),default:B(()=>[e("div",Ze,[e("div",De,[e("div",et,i(a.value.name.substring(0,2).toUpperCase()),1),e("div",tt,[e("span",{class:k(["text-[10px] px-2 py-0.5 rounded border font-bold uppercase inline-block mb-1",a.value.is_po_match?"bg-lime-50 text-lime-700 border-lime-200 dark:bg-lime-900/20 dark:text-lime-400":"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400"])},i(a.value.is_po_match?"Sesuai Purchase Order":"Produk Tambahan / Baru"),3),e("h3",rt,i(a.value.name),1),e("p",st,i(a.value.sku),1)])]),e("div",at,[t[31]||(t[31]=e("div",{class:"grid grid-cols-2 text-center text-[10px] font-bold text-gray-400 border-b border-gray-200 dark:border-gray-700 pb-1 mb-2 tracking-wider"},[e("div",null,"DATA PO"),e("div",{class:"text-lime-600 dark:text-lime-400"}," INPUT FISIK ")],-1)),e("div",ot,[e("div",lt,[a.value.is_po_match?(o(),l("span",it,i(a.value.po_qty),1)):(o(),l("span",nt,"-")),e("span",dt,i(a.value.unit),1)]),e("div",ut,[I(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>a.value.quantity=r),type:"number",class:"w-full py-2 text-2xl font-bold text-center text-gray-900 bg-white border rounded-lg dark:bg-gray-900 border-lime-300 dark:border-lime-700 focus:ring-2 focus:ring-lime-500 dark:text-white"},null,512),[[$,a.value.quantity,void 0,{number:!0}]])])]),e("div",ct,[e("div",gt,[a.value.is_po_match?(o(),l("span",bt,i(w(a.value.po_price)),1)):(o(),l("span",vt,"-")),t[29]||(t[29]=e("span",{class:"text-[9px] text-gray-400 block uppercase"},"Harga Satuan",-1))]),e("div",pt,[e("div",mt,[t[30]||(t[30]=e("span",{class:"absolute text-xs font-bold text-gray-400 -translate-y-1/2 left-3 top-1/2"},"Rp",-1)),I(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>a.value.price=r),type:"number",class:"w-full py-2 pl-8 pr-3 text-sm font-bold text-right text-gray-900 bg-white border border-gray-300 rounded-lg dark:bg-gray-900 dark:border-gray-600 focus:ring-lime-500 focus:border-lime-500 dark:text-white"},null,512),[[$,a.value.price,void 0,{number:!0}]])])])])]),a.value.mode!=="edit"?(o(),l("p",xt," * Perubahan Qty/Harga untuk link baru akan disimpan sebagai default. Anda bisa mengeditnya kembali di tab 'Sudah Masuk'. ")):b("",!0)])]),_:1},8,["show"])]))}},Ct=K(yt,[["__scopeId","data-v-26895e22"]]);export{Ct as default};
