import{u as V,v as f,l as r,o,e as v,g as y,i as M,w as h,f as t,C as K,k as u,z as _,A as k,t as a,n as p,p as $,F as w,I as z,J as L}from"./vendor-core-By7Plnkm.js";import{_ as B}from"./AuthenticatedLayout-BlgKae2S.js";import{_ as F}from"./ReportPagination-CJ0WNI_F.js";import{u as H}from"./useExport-ZWbXSJP4.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-CpEDRVzi.js";import"./useActionLoading-BREuot5v.js";const N={class:"space-y-6 pb-20"},O={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},D={class:"flex items-center gap-2"},E={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},q={class:"flex items-center gap-4 p-4 bg-white border border-gray-200 shadow-sm md:col-span-2 dark:bg-gray-800 rounded-2xl dark:border-gray-700"},I={class:"flex items-center justify-between p-4 text-white shadow-lg bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl"},R={class:"text-2xl font-black"},S={class:"text-right"},A={class:"text-xl font-bold"},U={class:"bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700 relative"},G={class:"overflow-x-auto"},J={class:"w-full text-sm text-left"},Q={class:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700/50"},W={class:"flex items-center gap-1"},X={key:0},Y={key:1},Z={class:"flex items-center justify-center gap-1"},tt={key:0},et={key:1},st={class:"flex items-center justify-end gap-1"},rt={key:0},ot={key:1},at={class:"flex items-center justify-end gap-1"},lt={key:0},nt={key:1},dt={class:"flex items-center justify-end gap-1"},it={key:0},ut={key:1},gt={class:"flex items-center justify-center gap-1"},pt={key:0},xt={key:1},ct={class:"divide-y divide-gray-100 dark:divide-gray-700"},yt={class:"px-6 py-3"},bt={class:"font-bold text-gray-800 dark:text-white"},vt={class:"text-[10px] text-gray-500"},mt={class:"px-6 py-3 font-bold text-center text-gray-600"},ft={class:"px-6 py-3 text-right text-gray-500"},ht={class:"px-6 py-3 text-xs text-right text-red-400"},_t={class:"px-6 py-3 font-black text-right text-emerald-600 bg-emerald-50/30 dark:text-emerald-400 dark:bg-emerald-900/10"},kt={class:"px-6 py-3 text-center"},wt={key:0},jt={class:"p-4 border-t border-gray-100 dark:border-gray-700 flex justify-center md:justify-end"},Lt={__name:"GrossProfit",props:{filters:Object,data:Object,summary:Object},setup(x){const g=x,{exportToCsv:j}=H(),C=()=>{const n=g.data.data.map(e=>({Nama:e.name,Kategori:e.category,"Total Terjual":e.total_sold,Omzet:e.revenue,"HPP Total":e.cogs,"Laba Kotor":e.profit,"Margin (%)":e.margin}));j("Laporan_Laba_Kotor",n)},d=V({start_date:g.filters.start_date,end_date:g.filters.end_date,sort:g.filters.sort||"profit",direction:g.filters.direction||"desc"}),m=()=>{L.get(route("reports.gross-profit"),{start_date:d.start_date,end_date:d.end_date,sort:d.sort,direction:d.direction},{preserveScroll:!0})},b=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),P=n=>n>=25?"text-emerald-600 bg-emerald-50 border-emerald-200":n>=10?"text-yellow-600 bg-yellow-50 border-yellow-200":n>0?"text-red-600 bg-red-50 border-red-200":"text-gray-600 bg-gray-100",l=f(g.filters.sort||"profit"),i=f(g.filters.direction||"desc"),c=n=>{l.value===n?i.value=i.value==="asc"?"desc":"asc":(l.value=n,i.value="desc"),d.sort=l.value,d.direction=i.value,m()};return(n,e)=>(o(),r(w,null,[v(y(M),{title:"Analisa Laba Kotor"}),v(B,{headerTitle:"Laba Kotor Per Produk"},{default:h(()=>[t("div",N,[t("div",O,[t("div",D,[v(y(K),{href:n.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:h(()=>[...e[8]||(e[8]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),u(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",{class:"flex gap-2"},[t("button",{onClick:C,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" Export CSV ",-1)])]),e[10]||(e[10]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),u(" Print ")],-1))])]),t("div",E,[t("div",q,[e[11]||(e[11]=t("span",{class:"text-sm font-bold text-gray-500"},"Periode:",-1)),_(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>y(d).start_date=s),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[k,y(d).start_date]]),e[12]||(e[12]=t("span",{class:"text-gray-400"},"-",-1)),_(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>y(d).end_date=s),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[k,y(d).end_date]]),t("button",{onClick:m,class:"px-4 py-2 text-sm font-bold text-white bg-blue-600 rounded-lg shadow hover:bg-blue-700"}," Analisa ")]),t("div",I,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-xs font-bold tracking-widest uppercase text-emerald-100"}," Total Laba Kotor ",-1)),t("h3",R,a(b(x.summary.total_profit)),1)]),t("div",S,[e[14]||(e[14]=t("p",{class:"text-xs text-emerald-100"},"Rata-rata Margin",-1)),t("p",A,a(x.summary.avg_margin)+"% ",1)])])]),t("div",U,[t("div",G,[t("table",J,[t("thead",Q,[t("tr",null,[t("th",{class:"px-6 py-3 cursor-pointer hover:text-blue-600 group",onClick:e[2]||(e[2]=s=>c("name"))},[t("div",W,[e[15]||(e[15]=u(" Produk ",-1)),t("span",{class:p(["text-gray-300 group-hover:text-blue-500",{"text-blue-600":l.value==="name"}])},[l.value==="name"?(o(),r("span",X,a(i.value==="asc"?"↑":"↓"),1)):(o(),r("span",Y,"↕"))],2)])]),t("th",{class:"px-6 py-3 text-center cursor-pointer hover:text-blue-600 group",onClick:e[3]||(e[3]=s=>c("total_qty"))},[t("div",Z,[e[16]||(e[16]=u(" Terjual ",-1)),t("span",{class:p(["text-gray-300 group-hover:text-blue-500",{"text-blue-600":l.value==="total_qty"}])},[l.value==="total_qty"?(o(),r("span",tt,a(i.value==="asc"?"↑":"↓"),1)):(o(),r("span",et,"↕"))],2)])]),t("th",{class:"px-6 py-3 text-right cursor-pointer hover:text-blue-600 group",onClick:e[4]||(e[4]=s=>c("total_revenue"))},[t("div",st,[e[17]||(e[17]=u(" Omzet ",-1)),t("span",{class:p(["text-gray-300 group-hover:text-blue-500",{"text-blue-600":l.value==="total_revenue"}])},[l.value==="total_revenue"?(o(),r("span",rt,a(i.value==="asc"?"↑":"↓"),1)):(o(),r("span",ot,"↕"))],2)])]),t("th",{class:"px-6 py-3 text-right cursor-pointer hover:text-blue-600 group",onClick:e[5]||(e[5]=s=>c("total_cogs"))},[t("div",at,[e[18]||(e[18]=u(" Modal (HPP) ",-1)),t("span",{class:p(["text-gray-300 group-hover:text-blue-500",{"text-blue-600":l.value==="total_cogs"}])},[l.value==="total_cogs"?(o(),r("span",lt,a(i.value==="asc"?"↑":"↓"),1)):(o(),r("span",nt,"↕"))],2)])]),t("th",{class:"px-6 py-3 text-right cursor-pointer hover:text-blue-600 bg-emerald-50/50 dark:bg-emerald-900/10 group",onClick:e[6]||(e[6]=s=>c("profit"))},[t("div",dt,[e[19]||(e[19]=u(" Profit (Rp) ",-1)),t("span",{class:p(["text-gray-300 group-hover:text-blue-500",{"text-blue-600":l.value==="profit"}])},[l.value==="profit"?(o(),r("span",it,a(i.value==="asc"?"↑":"↓"),1)):(o(),r("span",ut,"↕"))],2)])]),t("th",{class:"px-6 py-3 text-center cursor-pointer hover:text-blue-600 group",onClick:e[7]||(e[7]=s=>c("margin"))},[t("div",gt,[e[20]||(e[20]=u(" Margin (%) ",-1)),t("span",{class:p(["text-gray-300 group-hover:text-blue-500",{"text-blue-600":l.value==="margin"}])},[l.value==="margin"?(o(),r("span",pt,a(i.value==="asc"?"↑":"↓"),1)):(o(),r("span",xt,"↕"))],2)])])])]),t("tbody",ct,[(o(!0),r(w,null,z(x.data.data,(s,T)=>(o(),r("tr",{key:T,class:"transition hover:bg-gray-50 dark:hover:bg-gray-700/30"},[t("td",yt,[t("div",bt,a(s.name),1),t("div",vt,a(s.code)+" • "+a(s.category),1)]),t("td",mt,a(s.qty),1),t("td",ft,a(b(s.revenue)),1),t("td",ht," -"+a(b(s.cogs)),1),t("td",_t,a(b(s.profit)),1),t("td",kt,[t("span",{class:p(["px-2 py-1 text-xs font-bold border rounded",P(s.margin)])},a(s.margin)+"% ",3)])]))),128)),x.data.data.length===0?(o(),r("tr",wt,[...e[21]||(e[21]=[t("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-400"}," Tidak ada data penjualan pada periode ini. ",-1)])])):$("",!0)])])]),t("div",jt,[v(F,{links:x.data.links},null,8,["links"])])])])]),_:1})],64))}};export{Lt as default};
