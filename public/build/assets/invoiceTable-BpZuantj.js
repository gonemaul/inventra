import{_}from"./DataTable-DdkiKaOx.js";import{x as r,g as u,o as n,a as d,b as s,w as l,i as c,c as w,d as x,l as h,f as v,n as y,t as p,F as C}from"./app-OOVJa1pD.js";import{_ as N}from"./ImageModal-BA0uP4VU.js";import"./Modal-CeAPgi98.js";const $={class:"p-4 space-y-5 bg-white border rounded-lg shadow-md dark:bg-gray-900 dark:border-lime-500"},B=["onClick"],I={class:"flex flex-wrap justify-center gap-2"},D=["onClick"],E=["onClick"],A={__name:"invoiceTable",props:{purchase:{type:Array,required:!0},isCheckingMode:{type:Boolean,default:!1},canEditDelete:Boolean},emits:["edit-invoice","delete-invoice"],setup(i,{emit:T}){const o=r(!1),m=r(null),b=r(null),f=(a,t)=>{m.value=a,b.value="Invoice-#"+t,o.value=!0},k=[{key:"invoice_number",label:"No Nota",sortable:!0,width:"100px",slot:"invoice"},{key:"invoice_date",label:"Tanggal Nota",sortable:!0,width:"150px",format:"tanggal"},{key:"due_date",label:"Jatuh Tempo",sortable:!0,width:"150px",format:"tanggal"},{key:"total_amount",label:"Nominal Total",sortable:!0,width:"200px",format:"rupiah"},{key:"payment_status",label:"Status Pembayaran",sortable:!0,width:"100px",slot:"status_payment",class:"text-center"},{key:"status",label:"Status",sortable:!0,width:"100px",slot:"status",class:"text-center"},{key:"aksi",label:"Aksi",width:"180px",slot:"aksi",class:"text-right"}];return(a,t)=>(n(),u(C,null,[d(N,{show:o.value,imageUrl:m.value,productName:b.value,onClose:t[0]||(t[0]=e=>o.value=!1)},null,8,["show","imageUrl","productName"]),s("div",$,[t[3]||(t[3]=s("h3",{class:"text-lg font-bold dark:text-white"},"Daftar Nota Keuangan",-1)),d(_,{columns:k,data:i.purchase.invoices,serverSide:!1,perPageOptions:[5,10,20]},{invoice:l(({row:e})=>[s("span",{class:"text-blue-500 cursor-pointer",onClick:g=>f(e.invoice_image,e.invoice_number)},p(e.invoice_number),9,B)]),status_payment:l(({row:e})=>[s("span",{class:y([{"px-2 py-1 text-white rounded":!0,"bg-green-600":e.payment_status==="paid","bg-yellow-600":e.payment_status==="partial","bg-red-600":e.payment_status==="unpaid"},"text-xs text-center uppercase"])},p(e.payment_status),3)]),status:l(({row:e})=>[s("span",{class:y([{"px-2 py-1 rounded":!0,"bg-green-300":e.status==="validated","bg-yellow-300 text-yellow-900":e.status==="uploaded"},"text-xs font-medium text-center uppercase"])},p(e.status),3)]),aksi:l(({row:e})=>[s("div",I,[d(x(h),{href:a.route("purchases.linkInvoiceItems",{purchase:i.purchase.id,invoice:e.id}),class:"px-2 py-1 text-xs text-white bg-orange-500 rounded hover:bg-orange-600"},{default:l(()=>[...t[1]||(t[1]=[v(" Detail ",-1)])]),_:2},1032,["href"]),i.canEditDelete?(n(),u("button",{key:0,onClick:g=>a.$emit("edit-invoice",e),class:"px-2 py-1 text-xs text-white bg-blue-500 rounded hover:bg-blue-600"}," Edit ",8,D)):c("",!0),i.canEditDelete?(n(),u("button",{key:1,onClick:g=>a.$emit("delete-invoice",e),class:"px-2 py-1 text-xs text-white bg-red-500 rounded hover:bg-red-600"}," Hapus ",8,E)):c("",!0),e.payment_status!=="paid"&&i.purchase.status==="selesai"?(n(),w(x(h),{key:2,href:a.route("finance.detail",e.id),class:"px-2 py-1 text-xs text-white rounded bg-lime-600 hover:bg-lime-700"},{default:l(()=>[...t[2]||(t[2]=[v(" Bayar ",-1)])]),_:2},1032,["href"])):c("",!0)])]),_:1},8,["data"])])],64))}};export{A as default};
