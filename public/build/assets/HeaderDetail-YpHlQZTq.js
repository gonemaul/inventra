import{j as x,K as T,L as S,g as B,o as I,b as e,a,w as h,f as K,d as i,l as O,t as k}from"./app-DwOZ8O7W.js";import t from"./InfoCard-DOJLceaz.js";function P(s){const d=x(()=>T(s)?s.value:s),c=p=>parseFloat(p)||0,g=x(()=>{const p=d.value||[];let l={kosong:0,baru_pengganti:0,total_macam_dipesan:0,total_macam_diterima:0,total_qty_dipesan:0,total_qty_diterima:0,total_rupiah_dipesan:0,total_rupiah_diterima:0,total_barang_sesuai:0,macam_harga_naik:0,macam_harga_turun:0,produk_qty_lebih:0,produk_qty_kurang:0};return p.forEach(y=>{const v=y.product_snapshot||{},r=c(v.quantity),m=c(v.purchase_price),n=c(y.quantity),_=c(y.purchase_price);l.total_qty_dipesan+=r,l.total_qty_diterima+=n,l.total_rupiah_dipesan+=r*m,l.total_rupiah_diterima+=n*_,r===0&&n>0&&(l.baru_pengganti+=1),r>0&&(l.total_macam_dipesan+=1,n===0&&(l.kosong+=1)),n>0&&(l.total_macam_diterima+=1),n>r?l.produk_qty_lebih+=n-r:n<r&&(l.produk_qty_kurang+=r-n);const b=n===r&&r>0,f=_===m;b&&(_>m?l.macam_harga_naik+=1:_<m&&(l.macam_harga_turun+=1)),b&&f&&(l.total_barang_sesuai+=1)}),console.log(d),l});return{...S(g.value),analytics:g}}const Q={class:"space-y-8 dark:bg-gray-800"},C={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},F={class:"space-y-6"},R={class:"p-4 border shadow-lg rounded-xl border-lime-400 bg-gray-50 dark:bg-gray-900"},A={class:"flex justify-between"},M={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},j={class:"flex flex-col"},H={class:"font-medium"},V={class:"text-sm text-gray-500"},E={class:"p-4 border shadow-lg rounded-xl border-lime-400 bg-gray-50 dark:bg-gray-900"},L={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},U={class:"flex flex-col h-full gap-6"},J={class:"p-4 border shadow-lg rounded-xl border-lime-400 bg-gray-50 dark:bg-gray-900"},$={class:"grid grid-cols-2 gap-4 sm:grid-cols-3"},W={__name:"HeaderDetail",props:{data:{type:Object,required:!0},mode:{type:String,default:"detail"}},setup(s){const d=s;function c(o){return o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"numeric",year:"numeric"}):"-"}function g(o){return!o&&o!==0?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o)}const p=(d.data.shipping_cost||0)+(d.data.other_costs||0);(d.data.invoices_sum_total_amount||0)+p;const{kosong:l,baru_pengganti:y,total_macam_dipesan:v,total_macam_diterima:r,total_qty_dipesan:m,total_qty_diterima:n,total_rupiah_dipesan:_,total_rupiah_diterima:b,total_barang_sesuai:f,macam_harga_naik:q,macam_harga_turun:D,produk_qty_lebih:w,produk_qty_kurang:N}=P(d.data.items);return(o,u)=>(I(),B("div",Q,[e("div",C,[e("div",F,[e("div",R,[e("div",A,[u[1]||(u[1]=e("h3",{class:"mb-4 text-sm font-semibold text-gray-600 dark:text-gray-300"}," Info Transaksi ",-1)),a(i(O),{href:o.route("purchases.index"),class:"mb-4 text-sm font-semibold text-gray-600 dark:hover:text-gray-100 hover:text-gray-800 dark:text-gray-300"},{default:h(()=>[...u[0]||(u[0]=[K("â† Kembali",-1)])]),_:1},8,["href"])]),e("div",M,[a(t,{label:"Supplier"},{default:h(()=>[e("div",j,[e("span",H,k(s.data.supplier?s.data.supplier.name:"Umum/Cash"),1),e("span",V,k(s.data.supplier?s.data.supplier.address+" | "+s.data.supplier.phone:"-"),1)])]),_:1}),a(t,{label:"Status"},{default:h(()=>[e("span",null,k(s.data.status.toUpperCase()),1)]),_:1}),a(t,{label:"Tanggal Order",value:c(s.data.transaction_date)},null,8,["value"]),a(t,{label:"Tanggal Datang",value:c(s.data.received_at)},null,8,["value"])])]),e("div",E,[u[2]||(u[2]=e("h3",{class:"mb-4 text-sm font-semibold text-gray-600 dark:text-gray-300"}," Ringkasan Keuangan ",-1)),e("div",L,[a(t,{label:"Jumlah Nota",value:s.data.invoices.length+" Nota"},null,8,["value"]),a(t,{label:"Nilai PO Awal",value:g(i(_)),"format-value":g},null,8,["value"]),a(t,{label:"Nilai Fisik Diterima",value:g(i(b)),"format-value":g,highlight:""},null,8,["value"])])])]),e("div",U,[e("div",J,[u[3]||(u[3]=e("h3",{class:"mb-4 text-sm font-semibold text-gray-600 dark:text-gray-300"}," Analisis Discrepancy (PO vs Fisik Nota) ",-1)),e("div",$,[a(t,{label:"Barang Sesuai Total",value:i(f),type:"success"},null,8,["value"]),a(t,{label:"Macam Dipesan",value:i(v)},null,8,["value"]),a(t,{label:"Macam Diterima",value:i(r)},null,8,["value"]),a(t,{label:"Qty Total Dipesan",value:i(m)},null,8,["value"]),a(t,{label:"Qty Total Diterima",value:i(n)},null,8,["value"]),a(t,{label:"Qty Kekurangan",value:i(N),type:"danger"},null,8,["value"]),a(t,{label:"Qty Kelebihan",value:i(w),type:"warning"},null,8,["value"]),a(t,{label:"Item Kosong (Qty 0)",value:i(l),type:"danger"},null,8,["value"]),a(t,{label:"Harga Naik (Macam)",value:i(q),type:"warning"},null,8,["value"]),a(t,{label:"Harga Turun (Macam)",value:i(D),type:"info"},null,8,["value"]),a(t,{label:"Barang Baru/Substitusi",value:i(y),type:"info"},null,8,["value"]),a(t,{label:"Catatan",value:s.data.notes||"-"},null,8,["value"])])])])])]))}};export{W as default};
