import{_ as w}from"./AuthenticatedLayout-9yD8UcND.js";import{v as u,J as k,K as b,D as _,l as p,o as m,e as o,g as $,i as C,w as j,f as t,p as S,F as h,I as T,n as B,t as d,W as D}from"./vendor-core-B46KUNyc.js";import{_ as P}from"./Filter-BCoPa6F1.js";import V from"./modalFilter-DyG_sZlj.js";import{d as F}from"./vendor-common-GpUWqhKr.js";import N from"./PurchaseStatsGrid-DjJ_QQkK.js";import O from"./PurchaseTransactionList-ar6f3dve.js";import E from"./SalesChart-Bk4Jj4gr.js";import"./useSidebar-DSTl-7Rw.js";import"./useActionLoading-pomD9vky.js";import"./vendor-charts-Bw6UNgWf.js";import"./TextInput-DDwApxbn.js";import"./PrimaryButton-H-fN45pr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BottomSheetFilter-BbzoWbU-.js";const R={class:"w-full min-h-screen space-y-6 pb-20"},q={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},z={class:"lg:col-span-2"},A={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col justify-center items-center text-center"},G={class:"flex flex-wrap gap-2 justify-center"},H={class:"flex flex-col gap-4 mt-4"},J={class:"flex flex-col md:flex-row justify-between items-center gap-4"},K={class:"flex p-1 space-x-1 bg-gray-100 dark:bg-gray-800 rounded-xl overflow-x-auto w-full md:w-auto"},L=["onClick"],M={class:"w-full md:w-auto flex gap-2"},U={class:"mb-4 flex items-center justify-between"},W={class:"text-xs font-semibold py-1 px-3 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-full border border-gray-200 dark:border-gray-700"},Q={class:"text-xs text-gray-500"},X={key:0,class:"flex justify-center mt-8 gap-2"},Y=["disabled"],Z={class:"px-4 py-2 text-gray-500 text-sm flex items-center"},I=["disabled"],be={__name:"index",props:{dropdowns:Object,filters:Object,purchases:Object,summary:Object},setup(s){const i=s,c=u(i.filters.search||""),n=u(!1),g=u("all"),f=[{id:"all",label:"Semua"},{id:"process",label:"Dalam Proses",status:["draft","dipesan","dikirim","checking"]},{id:"completed",label:"Selesai",status:["selesai"]}],x=r=>{if(g.value=r,l.value.page=1,r==="all")delete l.value.status_in;else{const e=f.find(a=>a.id===r);e&&e.status&&(l.value.status_in=e.status)}},l=u({search:i.filters.search||"",sort:i.filters.sort||"transaction_date",order:i.filters.order||"desc",page:i.purchases.current_page||1}),y=F.throttle(()=>{const r={...l.value};r.search||delete r.search,k.get(route("purchases.index"),r,{preserveState:!0,preserveScroll:!0,replace:!0,only:["purchases","filters","summary"]})},300);b(l,y,{deep:!0}),b(c,r=>{l.value.search=r,l.value.page=1});const v=_(()=>i.summary?.chart||{labels:[],values:[]});return(r,e)=>(m(),p(h,null,[o($(C),{title:"Pembelian"}),o(w,{headerTitle:"Dashboard Procurement"},{default:j(()=>[t("div",R,[o(N,{summary:s.summary},null,8,["summary"]),t("div",q,[t("div",z,[o(E,{data:v.value,title:"Grafik Belanja 12 Bulan Terakhir",color:"#84cc16"},null,8,["data"])]),t("div",A,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 font-bold uppercase mb-2"},"Shortcut Filter",-1)),t("div",G,[t("button",{onClick:e[0]||(e[0]=a=>n.value=!0),class:"px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold hover:bg-indigo-100 transition"}," ðŸ” Cari per Supplier ")])])]),t("div",H,[t("div",J,[t("div",K,[(m(),p(h,null,T(f,a=>t("button",{key:a.id,onClick:ee=>x(a.id),class:B(["px-4 py-2 text-sm font-bold rounded-lg transition-all whitespace-nowrap flex-1",g.value===a.id?"bg-white dark:bg-gray-700 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400"])},d(a.label),11,L)),64))]),t("div",M,[o(P,{class:"w-full",filters:s.filters,modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),onShowFilter:e[2]||(e[2]=a=>n.value=!0),filterCount:0,actions:[{route:r.route("purchases.create"),buttonText:"+ RAB Baru"}]},null,8,["filters","modelValue","actions"])])])]),o(V,{show:n.value,onClose:e[3]||(e[3]=a=>n.value=!1),filters:s.filters,dropdowns:s.dropdowns},null,8,["show","filters","dropdowns"]),t("div",null,[t("div",U,[e[7]||(e[7]=t("h2",{class:"text-xl font-black text-gray-800 dark:text-white tracking-tight"}," Riwayat Transaksi & Pembelian ",-1)),t("span",W," Total "+d(s.purchases.total)+" Data ",1)]),t("span",Q," Total "+d(s.purchases.total)+" Data ",1)]),o(O,{purchases:s.purchases.data},null,8,["purchases"]),s.purchases.last_page>1?(m(),p("div",X,[t("button",D(s.purchases.links[0],{disabled:!s.purchases.prev_page_url,onClick:e[4]||(e[4]=a=>l.value.page--),class:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700"})," Prev ",16,Y),t("span",Z," Hal "+d(s.purchases.current_page)+" / "+d(s.purchases.last_page),1),t("button",{disabled:!s.purchases.next_page_url,onClick:e[5]||(e[5]=a=>l.value.page++),class:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700"}," Next ",8,I)])):S("",!0)])]),_:1})],64))}};export{be as default};
