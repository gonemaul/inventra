import{j as k,N as T,O,g as S,o as B,b as e,a,w as x,t as f,d as i}from"./app-C_cXePOB.js";import t from"./InfoCard-WCdMJXbR.js";function I(s){const o=k(()=>T(s)?s.value:s),u=p=>parseFloat(p)||0,d=k(()=>{const p=o.value||[];let l={kosong:0,baru_pengganti:0,total_macam_dipesan:0,total_macam_diterima:0,total_qty_dipesan:0,total_qty_diterima:0,total_rupiah_dipesan:0,total_rupiah_diterima:0,total_barang_sesuai:0,macam_harga_naik:0,macam_harga_turun:0,produk_qty_lebih:0,produk_qty_kurang:0};return p.forEach(y=>{const v=y.product_snapshot||{},r=u(v.quantity),g=u(v.purchase_price),n=u(y.quantity),m=u(y.purchase_price);l.total_qty_dipesan+=r,l.total_qty_diterima+=n,l.total_rupiah_dipesan+=r*g,l.total_rupiah_diterima+=n*m,r===0&&n>0&&(l.baru_pengganti+=1),r>0&&(l.total_macam_dipesan+=1,n===0&&(l.kosong+=1)),n>0&&(l.total_macam_diterima+=1),n>r?l.produk_qty_lebih+=n-r:n<r&&(l.produk_qty_kurang+=r-n);const b=n===r&&r>0,h=m===g;b&&(m>g?l.macam_harga_naik+=1:m<g&&(l.macam_harga_turun+=1)),b&&h&&(l.total_barang_sesuai+=1)}),console.log(o),l});return{...O(d.value),analytics:d}}const P={class:"space-y-8 dark:bg-gray-800"},Q={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},C={class:"space-y-6"},F={class:"p-4 border shadow-lg rounded-xl border-lime-400 bg-gray-50 dark:bg-gray-900"},R={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},A={class:"flex flex-col"},K={class:"font-medium"},M={class:"text-sm text-gray-500"},j={class:"p-4 border shadow-lg rounded-xl border-lime-400 bg-gray-50 dark:bg-gray-900"},H={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},E={class:"flex flex-col h-full gap-6"},U={class:"p-4 border shadow-lg rounded-xl border-lime-400 bg-gray-50 dark:bg-gray-900"},V={class:"grid grid-cols-2 gap-4 sm:grid-cols-3"},$={__name:"HeaderDetail",props:{data:{type:Object,required:!0},mode:{type:String,default:"detail"}},setup(s){const o=s;function u(c){return c?new Date(c).toLocaleDateString("id-ID",{day:"2-digit",month:"numeric",year:"numeric"}):"-"}function d(c){return!c&&c!==0?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(c)}const p=(o.data.shipping_cost||0)+(o.data.other_costs||0);(o.data.invoices_sum_total_amount||0)+p;const{kosong:l,baru_pengganti:y,total_macam_dipesan:v,total_macam_diterima:r,total_qty_dipesan:g,total_qty_diterima:n,total_rupiah_dipesan:m,total_rupiah_diterima:b,total_barang_sesuai:h,macam_harga_naik:q,macam_harga_turun:D,produk_qty_lebih:w,produk_qty_kurang:N}=I(o.data.items);return(c,_)=>(B(),S("div",P,[e("div",Q,[e("div",C,[e("div",F,[_[0]||(_[0]=e("div",{class:"flex justify-between"},[e("h3",{class:"mb-4 text-sm font-semibold text-gray-600 dark:text-gray-300"}," Info Transaksi ")],-1)),e("div",R,[a(t,{label:"Supplier"},{default:x(()=>[e("div",A,[e("span",K,f(s.data.supplier?s.data.supplier.name:"Umum/Cash"),1),e("span",M,f(s.data.supplier?s.data.supplier.address+" | "+s.data.supplier.phone:"-"),1)])]),_:1}),a(t,{label:"Status"},{default:x(()=>[e("span",null,f(s.data.status.toUpperCase()),1)]),_:1}),a(t,{label:"Tanggal Order",value:u(s.data.transaction_date)},null,8,["value"]),a(t,{label:"Tanggal Datang",value:u(s.data.received_at)},null,8,["value"])])]),e("div",j,[_[1]||(_[1]=e("h3",{class:"mb-4 text-sm font-semibold text-gray-600 dark:text-gray-300"}," Ringkasan Keuangan ",-1)),e("div",H,[a(t,{label:"Jumlah Nota",value:s.data.invoices.length+" Nota"},null,8,["value"]),a(t,{label:"Nilai PO Awal",value:d(i(m)),"format-value":d},null,8,["value"]),a(t,{label:"Nilai Fisik Diterima",value:d(i(b)),"format-value":d,highlight:""},null,8,["value"])])])]),e("div",E,[e("div",U,[_[2]||(_[2]=e("h3",{class:"mb-4 text-sm font-semibold text-gray-600 dark:text-gray-300"}," Analisis Discrepancy (PO vs Fisik Nota) ",-1)),e("div",V,[a(t,{label:"Barang Sesuai Total",value:i(h),type:"success"},null,8,["value"]),a(t,{label:"Macam Dipesan",value:i(v)},null,8,["value"]),a(t,{label:"Macam Diterima",value:i(r)},null,8,["value"]),a(t,{label:"Qty Total Dipesan",value:i(g)},null,8,["value"]),a(t,{label:"Qty Total Diterima",value:i(n)},null,8,["value"]),a(t,{label:"Qty Kekurangan",value:i(N),type:"danger"},null,8,["value"]),a(t,{label:"Qty Kelebihan",value:i(w),type:"warning"},null,8,["value"]),a(t,{label:"Item Kosong (Qty 0)",value:i(l),type:"danger"},null,8,["value"]),a(t,{label:"Harga Naik (Macam)",value:i(q),type:"warning"},null,8,["value"]),a(t,{label:"Harga Turun (Macam)",value:i(D),type:"info"},null,8,["value"]),a(t,{label:"Barang Baru/Substitusi",value:i(y),type:"info"},null,8,["value"]),a(t,{label:"Catatan",value:s.data.notes||"-"},null,8,["value"])])])])])]))}};export{$ as default};
