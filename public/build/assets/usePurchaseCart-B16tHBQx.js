import{m as I,j as s,s as q,H as S}from"./app-DwOZ8O7W.js";const r="inventra_purchase_cart_temp";function C(){const a=I([]);function d(){const e=localStorage.getItem(r);if(e)try{a.value=JSON.parse(e)}catch{localStorage.removeItem(r)}}function i(e,t,c){const l=e.id,u=parseInt(t),o=parseFloat(c),n=a.value.find(h=>h.product_id===l);n?(n.quantity+=u,n.purchase_price=o,n.subtotal=n.quantity*o):a.value.push({product_id:l,name:e.name,code:e.code,category:e.category?.name||"-",unit:e.unit?.name||"-",size:e.size?.name||"-",current_stock:e.stock,quantity:u,purchase_price:o,subtotal:u*o})}function p(e){const t=a.value.findIndex(c=>c.product_id===e.product_id);t!==-1&&(a.value[t].quantity=parseInt(e.quantity),a.value[t].purchase_price=parseFloat(e.purchase_price),a.value[t].subtotal=a.value[t].quantity*a.value[t].purchase_price)}function v(e){a.value=a.value.filter(t=>t.product_id!==e)}function _(){a.value=[],localStorage.removeItem(r)}function f(e){e.forEach(t=>{const c={id:t.product_id,name:t.name,code:t.code,unit:t.unit,size:t.size,category:t.category,stock:t.current_stock};i(c,t.quantity,t.purchase_price)})}const y=s(()=>a.value.reduce((e,t)=>e+t.quantity,0)),m=s(()=>a.value.reduce((e,t)=>e+t.subtotal,0)),g=s(()=>a.value.length);return q(a,e=>{localStorage.setItem(r,JSON.stringify(e))},{deep:!0}),S(()=>{d()}),{cartItems:a,addToCart:i,updateCartItem:p,removeItem:v,clearCart:_,totalUnit:y,totalBelanja:m,totalMacam:g,addMultipleItems:f}}export{C as u};
