const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BarcodeScanner-D-4995_2.js","assets/vendor-scanner-DjT4WSI1.js","assets/vendor-common-BBegFRNv.js","assets/vendor-core-PGoj2oEu.js","assets/vendor-charts-Bw6UNgWf.js","assets/vendor-core-DnojJsHo.css","assets/BarcodeScanner-D58Opl3T.css"])))=>i.map(i=>d[i]);
import{_ as D}from"./app-X2KXb4KG.js";import{E as h,u as I,K as j,l as a,o as l,d as N,m as d,f as r,g as o,L as R,n as L,t as n,e as p,k as m,q as g,J as b,F as x,C as _,I as A,w,x as H,j as z}from"./vendor-core-PGoj2oEu.js";import{_ as y}from"./TextInput-Cx1r1_3q.js";import{P as K}from"./PrimaryButton-BQIPPo6w.js";import{_ as E}from"./SecondaryButton-Df-NQyYG.js";import{u as T}from"./useActionLoading-Ch10BqBo.js";import"./vendor-common-BBegFRNv.js";import"./vendor-charts-Bw6UNgWf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"flex flex-col gap-4 md:flex-row"},$={class:"flex flex-col lg:w-2/5"},J=["src"],q={key:0,class:"mt-1 text-sm text-red-500"},G={class:"flex flex-col justify-center flex-1 gap-3"},W={class:"relative flex-1"},Q={key:0,class:"mt-1 text-sm text-red-500"},X={key:0,class:"mt-1 text-sm text-red-500"},Y={class:"grid grid-cols-1 gap-3 mt-5 md:grid-cols-3"},Z={key:0,value:null},ee=["value"],te={key:0,class:"mt-1 text-sm text-red-500"},re={key:0,value:null},se=["value"],oe={key:0,class:"mt-1 text-sm text-red-500"},le={key:0,value:null},ae=["value"],ne={key:0,class:"mt-1 text-sm text-red-500"},ie={key:0,value:null},de=["value"],ue={key:0,class:"mt-1 text-sm text-red-500"},me={key:0,value:null},pe=["value"],ce={key:0,class:"mt-1 text-sm text-red-500"},ge={key:0,value:null},xe=["value"],ye={key:0,class:"mt-1 text-sm text-red-500"},be={class:"mt-4"},_e={key:0,class:"mt-1 text-sm text-red-500"},ke={class:"flex flex-col gap-3 mt-4 md:flex-row"},fe={class:"flex-1"},ve={class:"relative"},we={class:"flex justify-between"},he={class:"ml-2 text-sm text-gray-500"},Ve={key:0,class:"mt-1 text-sm text-red-500"},Fe={class:"flex-1"},Me={class:"relative"},Ue={class:"flex justify-between"},Se={class:"ml-2 text-sm text-gray-500"},Pe={key:0,class:"mt-1 text-sm text-red-500"},Be={class:"grid grid-cols-1 gap-3 mt-4 md:grid-cols-5"},Ce={key:0,class:"mt-1 text-sm text-red-500"},De={key:0,class:"mt-1 text-sm text-red-500"},Ie={class:"relative"},je={class:"ml-2 text-sm text-gray-500"},Ne={class:"relative"},Re={key:0,class:"mt-1 text-sm text-red-500"},Le=["value"],Ae={key:0,class:"mt-1 text-sm text-red-500"},He={class:"flex justify-end gap-3 mt-6"},We={__name:"form-create-edit",props:{dropdowns:Object,product:{type:Object,default:null},mode:String},setup(c){const V=R(()=>D(()=>import("./BarcodeScanner-D-4995_2.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),i=c,{isActionLoading:f}=T(),v=h(!1),t=I({category_id:i.product?.category_id||null,unit_id:i.product?.unit_id||null,size_id:i.product?.size_id||null,supplier_id:i.product?.supplier_id||null,brand_id:i.product?.brand_id||null,product_type_id:i.product?.product_type_id||null,name:i.product?.name||"",code:i.product?.code||"",description:i.product?.description||"",status:i.product?.status||"active",purchase_price:i.product?.purchase_price||0,selling_price:i.product?.selling_price||0,stock:i.product?.stock||0,min_stock:i.product?.min_stock||0,target_margin_percent:i.product?.target_margin_percent||20,margin_nominal:0,image:null}),k=h(i.product?.image_url??null);j(async()=>{const u=parseFloat(t.purchase_price)||0,e=parseFloat(t.target_margin_percent)||0,s=u*(e/100);t.margin_nominal=Math.round(s)});const F=()=>{const u=parseFloat(t.purchase_price)||0,e=parseFloat(t.target_margin_percent)||0,s=u*(e/100);t.margin_nominal=Math.round(s),t.selling_price=Math.round(u+s)},M=()=>{const u=parseFloat(t.purchase_price)||0,s=(parseFloat(t.selling_price)||0)-u;t.margin_nominal=s,u>0?t.target_margin_percent=parseFloat((s/u*100).toFixed(2)):t.target_margin_percent=100},U=()=>{const u=parseFloat(t.purchase_price)||0,e=parseFloat(t.target_margin_percent)||0,s=u*(e/100);t.margin_nominal=Math.round(s),t.selling_price=Math.round(u+s)},S=()=>{const u=parseFloat(t.purchase_price)||0,e=parseFloat(t.margin_nominal)||0;t.selling_price=Math.round(u+e),u>0&&(t.target_margin_percent=parseFloat((e/u*100).toFixed(2)))};function P(u){const e=u.target.files[0];e&&(t.image=e,k.value=URL.createObjectURL(e))}const B=()=>{f.value=!0,i.mode==="create"?t.post(route("products.store"),{onFinish:()=>f.value=!1}):t.transform(u=>({...u,_method:"put"})).post(route("products.update",{product:i.product.id}),{onFinish:()=>f.value=!1})},C=u=>{showScanner.value=!1,t.code=u};return(u,e)=>(l(),a(x,null,[v.value?(l(),N(o(V),{key:0,onResult:C,onClose:e[0]||(e[0]=s=>v.value=!1)})):d("",!0),r("form",{class:"p-6 bg-gray-100 rounded-lg shadow dark:bg-customBg-tableDark",onSubmit:z(B,["prevent"])},[r("div",O,[r("div",$,[r("label",{for:"image-upload",class:L(["flex flex-col items-center justify-center w-40 mt-2 rounded-lg cursor-pointer aspect-square bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600",{"border-2 border-gray-300 border-dashed":!k.value}])},[k.value?(l(),a("img",{key:0,src:k.value,onload:"this.classList.remove('opacity-0')",onerror:"this.style.display='none'",alt:"Preview",class:"object-cover w-full h-full rounded-lg opacity-0"},null,8,J)):d("",!0),e[18]||(e[18]=r("div",{class:"flex flex-col items-center justify-center w-full h-full pt-5 pb-6"},[r("p",{class:"mb-2 text-sm text-gray-500 dark:text-gray-200"},[r("span",{class:"font-semibold"},"Klik untuk Upload")]),r("p",{class:"text-xs text-gray-500 dark:text-gray-200"}," WEBP, PNG (max. 1MB) ")],-1)),r("input",{id:"image-upload",type:"file",name:"image",class:"hidden",onChange:P},null,32)],2),o(t).errors.image?(l(),a("p",q,n(o(t).errors.image),1)):d("",!0)]),r("div",G,[r("div",W,[e[20]||(e[20]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},"Kode Barang",-1)),p(y,{class:"w-full max-h-10",id:"kode",type:"text",name:"kode",placeholder:"Kode Barang",modelValue:o(t).code,"onUpdate:modelValue":e[1]||(e[1]=s=>o(t).code=s)},null,8,["modelValue"]),o(t).errors.code?(l(),a("p",Q,n(o(t).errors.code),1)):d("",!0),r("button",{type:"button",onClick:e[2]||(e[2]=s=>v.value=!0),class:"absolute right-1.5 top-7 p-1 bg-white dark:bg-gray-700 rounded-lg shadow-sm text-gray-600 dark:text-gray-200 hover:text-lime-600 hover:bg-lime-50 transition border border-gray-200 dark:border-gray-600",title:"Scan Produk"},[...e[19]||(e[19]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])]),r("div",null,[e[21]||(e[21]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Nama Barang"),r("span",{class:"text-red-500"},"*")],-1)),p(y,{class:"w-full max-h-10",id:"nama",type:"text",name:"nama",placeholder:"Nama Barang",modelValue:o(t).name,"onUpdate:modelValue":e[3]||(e[3]=s=>o(t).name=s)},null,8,["modelValue"]),o(t).errors.name?(l(),a("p",X,n(o(t).errors.name),1)):d("",!0)])])]),r("div",Y,[r("div",null,[e[22]||(e[22]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Kategori"),r("span",{class:"text-red-500"},"*")],-1)),g(r("select",{class:"w-full px-3 py-2 text-sm border border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":e[4]||(e[4]=s=>o(t).category_id=s)},[i.mode=="create"?(l(),a("option",Z," Pilih Kategori ")):d("",!0),(l(!0),a(x,null,_(c.dropdowns.categories,s=>(l(),a("option",{key:s.id,value:s.id},n(s.name),9,ee))),128))],512),[[b,o(t).category_id]]),o(t).errors.category_id?(l(),a("p",te,n(o(t).errors.category_id),1)):d("",!0)]),r("div",null,[e[23]||(e[23]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Type"),r("span",{class:"text-red-500"},"*")],-1)),g(r("select",{class:"w-full px-3 py-2 text-sm border border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":e[5]||(e[5]=s=>o(t).product_type_id=s)},[i.mode=="create"?(l(),a("option",re," Pilih Type ")):d("",!0),(l(!0),a(x,null,_(c.dropdowns.types,s=>(l(),a("option",{key:s.id,value:s.id},n(s.name),9,se))),128))],512),[[b,o(t).product_type_id]]),o(t).errors.product_type_id?(l(),a("p",oe,n(o(t).errors.product_type_id),1)):d("",!0)]),r("div",null,[e[24]||(e[24]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Satuan"),r("span",{class:"text-red-500"},"*")],-1)),g(r("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>o(t).unit_id=s),class:"w-full px-3 py-2 text-sm border border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(l(),a("option",le," Pilih Satuan ")):d("",!0),(l(!0),a(x,null,_(c.dropdowns.units,s=>(l(),a("option",{key:s.id,value:s.id},n(s.name),9,ae))),128))],512),[[b,o(t).unit_id]]),o(t).errors.unit_id?(l(),a("p",ne,n(o(t).errors.unit_id),1)):d("",!0)]),r("div",null,[e[25]||(e[25]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Ukuran"),r("span",{class:"text-red-500"},"*")],-1)),g(r("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>o(t).size_id=s),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(l(),a("option",ie," Pilih Ukuran ")):d("",!0),(l(!0),a(x,null,_(c.dropdowns.sizes,s=>(l(),a("option",{key:s.id,value:s.id},n(s.name),9,de))),128))],512),[[b,o(t).size_id]]),o(t).errors.size_id?(l(),a("p",ue,n(o(t).errors.size_id),1)):d("",!0)]),r("div",null,[e[26]||(e[26]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Merk"),r("span",{class:"text-red-500"},"*")],-1)),g(r("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>o(t).brand_id=s),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(l(),a("option",me," Pilih Merk ")):d("",!0),(l(!0),a(x,null,_(c.dropdowns.brands,s=>(l(),a("option",{key:s.id,value:s.id},n(s.name),9,pe))),128))],512),[[b,o(t).brand_id]]),o(t).errors.brand_id?(l(),a("p",ce,n(o(t).errors.brand_id),1)):d("",!0)]),r("div",null,[e[27]||(e[27]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Supplier"),r("span",{class:"text-red-500"},"*")],-1)),g(r("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>o(t).supplier_id=s),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(l(),a("option",ge," Pilih Supplier ")):d("",!0),(l(!0),a(x,null,_(c.dropdowns.suppliers,s=>(l(),a("option",{key:s.id,value:s.id},n(s.name),9,xe))),128))],512),[[b,o(t).supplier_id]]),o(t).errors.supplier_id?(l(),a("p",ye,n(o(t).errors.supplier_id),1)):d("",!0)])]),r("div",be,[e[28]||(e[28]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Deskripsi"),r("span",{class:"text-red-500"},"*")],-1)),g(r("textarea",{"onUpdate:modelValue":e[10]||(e[10]=s=>o(t).description=s),name:"description",id:"description",rows:"3",placeholder:"Deskripsi Barang",class:"w-full px-3 py-2 border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},null,512),[[A,o(t).description]]),o(t).errors.description?(l(),a("p",_e,n(o(t).errors.description),1)):d("",!0)]),r("div",ke,[r("div",fe,[e[30]||(e[30]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Harga Beli (HPP)"),r("span",{class:"text-red-500"},"*")],-1)),r("div",ve,[e[29]||(e[29]=r("span",{class:"absolute text-sm text-gray-500 left-3 top-2"},"Rp",-1)),p(y,{modelValue:o(t).purchase_price,"onUpdate:modelValue":e[11]||(e[11]=s=>o(t).purchase_price=s),class:"w-full py-2 pr-3 max-h-10 pl-9",onInput:F,id:"price_buy",type:"number",min:"0",name:"price_buy",placeholder:"Harga Beli"},null,8,["modelValue"])]),r("span",we,[r("p",he,n(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o(t).purchase_price)||0),1),o(t).errors.purchase_price?(l(),a("p",Ve,n(o(t).errors.purchase_price),1)):d("",!0)])]),r("div",Fe,[e[32]||(e[32]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Harga Jual"),r("span",{class:"text-red-500"},"*")],-1)),r("div",Me,[e[31]||(e[31]=r("span",{class:"absolute text-sm text-gray-500 left-3 top-2"},"Rp",-1)),p(y,{modelValue:o(t).selling_price,"onUpdate:modelValue":e[12]||(e[12]=s=>o(t).selling_price=s),class:"w-full py-2 pr-3 max-h-10 pl-9",id:"price_sell",type:"number",min:"0",onInput:M,name:"price_sell",placeholder:"Harga Jual"},null,8,["modelValue"])]),r("span",Ue,[r("p",Se,n(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o(t).selling_price)||0),1),o(t).errors.selling_price?(l(),a("p",Pe,n(o(t).errors.selling_price),1)):d("",!0)])])]),r("div",Be,[r("div",null,[e[33]||(e[33]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 border-gray-400 dark:text-gray-100"},[m("Stock"),r("span",{class:"text-red-500"},"*")],-1)),p(y,{class:"w-full max-h-10",id:"stock",type:"number",name:"stock",min:"0",placeholder:"Stock",modelValue:o(t).stock,"onUpdate:modelValue":e[13]||(e[13]=s=>o(t).stock=s)},null,8,["modelValue"]),o(t).errors.stock?(l(),a("p",Ce,n(o(t).errors.stock),1)):d("",!0)]),r("div",null,[e[34]||(e[34]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 border-gray-400 dark:text-gray-100"},[m("Min Stock"),r("span",{class:"text-red-500"},"*")],-1)),p(y,{modelValue:o(t).min_stock,"onUpdate:modelValue":e[14]||(e[14]=s=>o(t).min_stock=s),class:"w-full max-h-10",id:"min_stock",min:"0",type:"number",name:"min_stock",placeholder:"Min Stock"},null,8,["modelValue"]),o(t).errors.min_stock?(l(),a("p",De,n(o(t).errors.min_stock),1)):d("",!0)]),r("div",null,[e[36]||(e[36]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 border-gray-400 dark:text-gray-100"},[m("Margin (Rp)"),r("span",{class:"text-red-500"},"*")],-1)),r("div",Ie,[e[35]||(e[35]=r("span",{class:"absolute text-sm text-gray-500 left-3 top-2"},"Rp",-1)),p(y,{modelValue:o(t).margin_nominal,"onUpdate:modelValue":e[15]||(e[15]=s=>o(t).margin_nominal=s),class:"w-full py-2 pr-3 pl-9 max-h-10",id:"margin_nominal",type:"number",min:"0",onInput:S,name:"margin_nominal",placeholder:"Margin Nominal"},null,8,["modelValue"]),r("p",je,n(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o(t).margin_nominal)||0),1)])]),r("div",null,[e[38]||(e[38]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 border-gray-400 dark:text-gray-100"},[m("Margin (%)"),r("span",{class:"text-red-500"},"*")],-1)),r("div",Ne,[p(y,{modelValue:o(t).target_margin_percent,"onUpdate:modelValue":e[16]||(e[16]=s=>o(t).target_margin_percent=s),class:"w-full py-2 pl-3 pr-8 max-h-10",id:"target_margin_percent",type:"text",min:"0",onInput:U,name:"target_margin_percent",placeholder:"Margin Percent"},null,8,["modelValue"]),e[37]||(e[37]=r("span",{class:"absolute text-sm font-bold text-gray-500 right-3 top-2"},"%",-1)),o(t).errors.target_margin_percent?(l(),a("p",Re,n(o(t).errors.target_margin_percent),1)):d("",!0)])]),r("div",null,[e[39]||(e[39]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[m("Status"),r("span",{class:"text-red-500"},"*")],-1)),g(r("select",{"onUpdate:modelValue":e[17]||(e[17]=s=>o(t).status=s),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg focus:border-lime-500 focus:ring-lime-500 dark:bg-gray-700 dark:text-white"},[(l(!0),a(x,null,_(c.dropdowns.productStatuses,s=>(l(),a("option",{key:s,value:s},n(s.charAt(0).toUpperCase()+s.slice(1)),9,Le))),128))],512),[[b,o(t).status]]),o(t).errors.status?(l(),a("p",Ae,n(o(t).errors.status),1)):d("",!0)])]),r("div",He,[p(o(H),{href:u.route("products.index")},{default:w(()=>[p(E,null,{default:w(()=>[...e[40]||(e[40]=[m("Batal",-1)])]),_:1})]),_:1},8,["href"]),p(K,{type:"submit",disabled:o(t).processing},{default:w(()=>[m(n(o(t).processing?"Menyimpan...":"Simpan"),1)]),_:1},8,["disabled"])])],32)],64))}};export{We as default};
