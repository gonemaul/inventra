import{q as ue,v as u,D as M,u as ce,K as ae,x as ge,a as me,Z as pe,l as p,o as m,e as z,d as ye,p as x,f as a,g as l,i as fe,F as le,I as be,n as J,t as g,j as ie,k as te,y as ve,w as de,z as he,A as xe}from"./vendor-core-By7Plnkm.js";import{j as ke}from"./vendor-common-GpUWqhKr.js";import{B as we}from"./BottomSheet-WceNnWH3.js";import _e from"./ConfirmSubmit-BkKO_Odt.js";import Ce from"./Cart-C8tBiRgZ.js";import{_ as Se}from"./BarcodeScanner-DKRXhBOH.js";import Me from"./FilterProduct-DQhx_vVS.js";import qe from"./ProductDetailModal-BqI2Y1FV.js";import je from"./ProductComparisonModal-BgsiD6p4.js";import"./vendor-charts-Bw6UNgWf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CAUBCNUq.js";import"./InputRupiah-BV5Iw5HO.js";import"./MoneyInput-DMVledyj.js";import"./vendor-scanner-og__AIM6.js";function Fe(_){const k=ue(),q="POS_REALTIME_DRAFT_V3",f=u([]),c=u(!1),I=u(20),b=u(!0),v=u({search:"",category:"all",subCategory:"all",brand:"all",sort:"default",hideEmptyStock:!0}),C=u([]),N=u(""),E=u([]),j=u(null),F=M(()=>_.mode==="edit"),y=_.sale||null,s=ce({id:y?.id||null,input_type:y?.input_type||"realtime",report_date:y?.transaction_date||(()=>{const e=new Date,o=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${o}-${n}-${r}`})(),items:y?.items?.map(e=>({product_id:e.product_id,code:e.product?.code,name:e.product?.name,unit:e.product?.unit,size:e.product?.size,stock_max:parseFloat(e.product?.stock||0)+parseFloat(e.quantity),selling_price:parseFloat(e.selling_price),original_price:parseFloat(e.selling_price),quantity:parseFloat(e.quantity),original_quantity:parseFloat(e.quantity),subtotal:parseFloat(e.subtotal)}))||[],customer_id:y?.customer_id||null,payment_amount:y?parseFloat(y.total_payment):0,change_amount:y?parseFloat(y.change_amount):0,payment_method:y?.payment_method||"cash",discount_type:y?.discount_type||"fixed",discount_value:y?.discount_value||0,notes:y?.notes||""}),$=M(()=>s.items.reduce((e,o)=>e+(parseFloat(o.subtotal)||0),0)),Y=M(()=>{const e=parseFloat(s.discount_value)||0;if(e<=0)return 0;if(s.discount_type==="percent"){const o=e>100?100:e;return Math.round($.value*o/100)}return e>$.value?$.value:e}),S=M(()=>{const e=$.value-Y.value,o=e>0?e:0;return o===0&&s.payment_amount>0,o}),U=M(()=>(parseFloat(s.payment_amount)||0)-S.value),W=M(()=>s.payment_method!=="cash"&&s.payment_method!==""?!0:(parseFloat(s.payment_amount)||0)>=S.value),Z=M(()=>s.items.some(e=>e.quantity<=0||isNaN(e.quantity))),O=M(()=>{const e=S.value;if(e<=0)return[];const o=[{label:"Uang Pas",value:e}];if([2e3,5e3,1e4,2e4,5e4,1e5].forEach(r=>{r>e&&!o.find(h=>h.value===r)&&o.push({label:R(r),value:r})}),e>5e4){const r=Math.ceil(e/5e4)*5e4;o.find(h=>h.value===r)||o.push({label:R(r),value:r})}return o.slice(0,4)}),w=e=>{e.unit?.is_decimal===1||(e.quantity=Math.round(e.quantity),e.quantity<1&&(e.quantity=1)),e.quantity>e.stock_max&&(e.quantity=e.stock_max,k.warning(`Stok sisa ${e.stock_max}`)),e.subtotal=Math.round(e.quantity*e.selling_price)},A=e=>{const o=parseFloat(e.subtotal)||0,n=parseFloat(e.selling_price)||0;if(!(n<=0))if(e.unit?.is_decimal===1){let r=o/n;r>e.stock_max&&(r=e.stock_max,e.subtotal=Math.round(r*n),k.warning("Melebihi sisa stok!")),e.quantity=parseFloat(r.toFixed(4))}else confirm(`⚠️ Ubah harga satuan agar sesuai total ${R(o)}?`)?e.quantity>0&&(e.selling_price=Math.round(o/e.quantity)):e.subtotal=Math.round(e.quantity*e.selling_price)},B=e=>{e.subtotal=Math.round(e.quantity*e.selling_price)},H=e=>{if(parseFloat(e.stock)<=0){k.error("Stok habis!");return}const o=s.items.find(n=>n.product_id===e.id);if(o){if(o.quantity+1>e.stock){k.warning("Stok maksimal!");return}o.quantity++,w(o)}else{const n=parseFloat(e.selling_price||e.price);s.items.push({product_id:e.id,code:e.code,name:e.name,unit:e.unit,size:e.size,stock_max:parseFloat(e.stock),selling_price:n,original_price:n,quantity:1,original_quantity:0,subtotal:n})}},P=e=>s.items.splice(e,1),G=(e,o)=>{const n=s.items[e],r=parseFloat(n.quantity)+o;if(r>n.stock_max){k.warning(`Stok sisa ${n.stock_max}`);return}if(r<=0){confirm("Hapus item ini?")&&P(e);return}n.quantity=r,w(n)},Q=e=>{s.payment_amount=e.value},T=()=>{s.payment_amount=0},L=()=>{f.value.length&&s.items.forEach(e=>{const o=f.value.find(n=>n.id===e.product_id);if(o){const n=e.original_quantity||0,r=parseFloat(o.stock);e.stock_max=r+n,e.quantity>e.stock_max&&(k.warning(`Stok ${e.name} berubah! Disesuaikan ke max: ${e.stock_max}`),e.quantity=e.stock_max,w(e))}})},D=u(new Map),d=async(e={})=>{const o=I.value,n={query:e.search||v.value.search,limit:o,category_id:v.value.category,product_type_id:v.value.subCategory,brand_id:v.value.brand,sort:v.value.sort,hide_empty_stock:v.value.hideEmptyStock?1:0},r=JSON.stringify(n);if(D.value.has(r)){const h=D.value.get(r);f.value=h,h.length<o?b.value=!1:b.value=!0,L()}else c.value=!0;try{const h=await me.get(route("sales.products.lite"),{params:n});f.value=h.data,h.data.length<o?b.value=!1:b.value=!0,D.value.set(r,h.data),L()}catch(h){console.error("Gagal load produk:",h),D.value.has(r)||k.error("Gagal memuat database produk")}finally{c.value=!1}},K=ke(()=>{I.value=20,b.value=!0,d()},400);ae(()=>v.value,(e,o)=>{e.search!==o.search?(c.value=!0,K()):((e.category!==o.category||e.subCategory!==o.subCategory||e.brand!==o.brand)&&(I.value=20,b.value=!0,f.value=[]),d())},{deep:!0});const oe=M(()=>{let e=f.value;const{sort:o}=v.value;return o==="cheapest"?e.sort((n,r)=>n.selling_price-r.selling_price):o==="bestseller"?e.sort((n,r)=>(r.total_sold||0)-(n.total_sold||0)):e.sort((n,r)=>n.name.localeCompare(r.name)),e}),se=()=>{!b.value||c.value||(I.value+=12,d())},X=e=>{j.value=e,s.customer_id=e.id,E.value=[],N.value=""};ae(N,e=>{if(!e||!_.customers){E.value=[];return}const o=e.toLowerCase(),n=_.customers.filter(r=>r.name.toLowerCase().includes(o)||r.code.toLowerCase().includes(o));E.value=n.slice(0,5)});const re=e=>{const o=_.customers.find(n=>n.member_code==e||n.phone==e);o?X(o):k.warning("Member tidak ditemukan")},ne=()=>{if(F.value)return;const e=localStorage.getItem(q);if(e)try{const o=JSON.parse(e);o.items&&(s.items=o.items),s.payment_amount=o.payment_amount||0,s.payment_method=o.payment_method||"cash",s.notes=o.notes||"",s.discount_type=o.discount_type||"fixed",s.discount_value=o.discount_value||0,o.selectedMember&&(j.value=o.selectedMember,s.customer_id=o.selectedMember.id)}catch{localStorage.removeItem(q)}};ae([()=>s.items,()=>s.customer_id,()=>s.payment_amount,()=>s.discount_value,()=>s.notes],()=>{localStorage.setItem(q,JSON.stringify({items:s.items,customer_id:s.customer_id,payment_amount:s.payment_amount,payment_method:s.payment_method,notes:s.notes,discount_type:s.discount_type,discount_value:s.discount_value,selectedMember:j.value}))},{deep:!0});const ee=(e=!1,o={})=>{s.change_amount=U.value,s.payment_amount=parseFloat(s.payment_amount);const n={onStart:o.onStart,onFinish:o.onFinish,onSuccess:r=>{F.value||(d(),localStorage.removeItem(q),s.reset(),s.items=[],j.value=null),o.onSuccess&&o.onSuccess(r)},onError:r=>{console.error(r),k.error("Gagal memproses transaksi")}};F.value?s.transform(r=>({...r})).put(route("sales.update",s.id),n):s.transform(r=>({...r,print_invoice:e})).post(route("sales.pos.store"),n)},R=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),V=e=>{const o=C.value.findIndex(n=>n.id===e.id);if(o!==-1)C.value.splice(o,1);else{if(C.value.length>=5){k.warning("Maksimal 5 produk untuk perbandingan.");return}C.value.push(e)}},i=()=>{C.value=[]},t=e=>C.value.some(o=>o.id===e);return ge(()=>{if(d(),ne(),F.value){const e=new Date().toISOString().slice(0,10);s.report_date=e}}),{form:s,filterState:v,allProducts:f,filteredProducts:oe,isFetchingData:c,compareList:C,memberSearch:N,memberSearchResults:E,selectedMember:j,subTotal:$,discountAmount:Y,grandTotal:S,changeAmount:U,isPaymentSufficient:W,hasInvalidQty:Z,moneySuggestions:O,loadMoreProducts:se,queryMember:re,addItem:H,removeItem:P,updateQty:G,resetPayment:T,handleMoneyClick:Q,recalcFromQty:w,recalcFromSubtotal:A,recalcFromPrice:B,toggleCompare:V,clearCompare:i,isInCompare:t,submitTransaction:ee,rp:R}}const $e={class:"flex flex-col lg:flex-row h-[100dvh] w-full bg-gray-100 dark:bg-gray-900 overflow-hidden font-sans transition-colors duration-300"},Be={class:"relative flex flex-col flex-1 h-full overflow-hidden"},Pe={class:"grid grid-cols-2 gap-3 pb-10 md:grid-cols-3 lg:grid-cols-4"},Te=["onClick"],De={class:"relative w-full overflow-hidden bg-gray-100 border-b border-gray-100 aspect-square dark:border-gray-700 dark:bg-gray-700"},ze={class:"absolute z-20 flex flex-col items-start gap-1 top-2 left-2"},Ie={key:0,class:"text-[10px] font-bold px-2 py-0.5 rounded shadow-sm backdrop-blur text-gray-700 bg-white/90 dark:text-gray-200 dark:bg-gray-900/80 border border-gray-200 dark:border-gray-600"},Ee={key:1,class:"text-[10px] font-bold text-white px-2 py-0.5 rounded shadow-sm backdrop-blur bg-gray-800/90 dark:bg-gray-600/90 border border-gray-700"},Ae=["src"],He={key:1,class:"flex items-center justify-center w-full h-full text-gray-400 dark:text-gray-600"},Le={key:2,class:"absolute inset-0 z-20 flex items-center justify-center bg-gray-900/60 backdrop-blur-[1px]"},Re={class:"flex flex-col flex-1 p-3"},Ne={class:"mb-1 flex justify-between items-start"},Ue={class:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide"},Oe=["title"],Ge={class:"flex items-center justify-between mb-2"},Qe={class:"flex items-center gap-1.5"},Ke={key:0,class:"text-[9px] font-bold text-gray-400 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded"},Ve={class:"flex items-center justify-between pt-2 mt-auto border-t border-gray-100 dark:border-gray-700"},Je={class:"text-sm font-black text-lime-600 dark:text-lime-400"},Ye={key:0,class:"flex items-center justify-center text-xs font-bold text-white bg-orange-500 rounded-full shadow-md w-7 h-7 animate-bounce-short"},We={key:1,class:"p-1.5 rounded-lg text-lime-600 bg-lime-50 dark:text-lime-400 dark:bg-lime-500/10"},Ze={class:"grid grid-cols-2 border-t border-gray-100 dark:border-gray-700 divide-x divide-gray-100 dark:divide-gray-700 bg-gray-50 dark:bg-gray-800/50"},Xe=["onClick"],et=["onClick"],tt={key:0,class:"py-10 text-center"},at={key:1,class:"flex flex-col items-center justify-center px-4 py-16 text-center animate-fade-in"},ot={key:2,class:"py-4 text-center text-[10px] text-gray-400"},st={key:0,class:"absolute z-40 bottom-24 lg:bottom-8 right-4 flex items-center bg-gray-900 dark:bg-gray-800 text-white pl-4 pr-1 py-1.5 gap-4 rounded-full shadow-xl animate-bounce-subtle border border-gray-700"},rt={class:"text-xs font-bold whitespace-nowrap"},nt={class:"flex items-center gap-1"},lt={key:1,class:"absolute z-30 lg:hidden bottom-4 left-4 right-4"},it={class:"flex items-center gap-3"},dt={class:"flex items-center justify-center text-xs font-bold text-white rounded-full shadow-sm bg-lime-500 dark:bg-white dark:text-lime-700 w-7 h-7"},ut={class:"flex flex-col items-start leading-none gap-0.5"},ct={class:"text-lg font-bold"},gt={class:"space-y-6"},mt={class:"flex items-center gap-4 pb-4 border-b border-gray-100 dark:border-gray-800"},pt={class:"flex items-center justify-center text-lg font-bold text-gray-400 bg-gray-100 border border-gray-200 w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-700 shrink-0"},yt={class:"flex-1 min-w-0"},ft={class:"text-lg font-bold leading-tight text-gray-800 truncate dark:text-white"},bt={class:"flex items-center justify-between mt-1"},vt={class:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"},ht={class:"bg-gray-50 dark:bg-gray-800/50 p-1.5 rounded-2xl border border-gray-200 dark:border-gray-700"},xt={class:"flex items-center justify-between"},kt=["disabled"],wt={class:"flex-1 px-2 text-center"},_t={class:"flex items-center justify-between p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 dark:border-gray-800 rounded-xl"},Ct={class:"font-bold text-gray-600 dark:text-gray-300"},St={class:"text-right"},Mt={class:"text-2xl font-black text-gray-900 dark:text-white"},qt={key:0,class:"px-3 py-2 text-xs font-bold text-center text-red-600 border border-red-100 rounded-lg bg-red-50"},jt={class:"flex gap-3 h-14"},Ot={__name:"index",props:{categories:Array,customers:Array,brands:Array,sale:Object,mode:String},setup(_){const q=Fe(_),{form:f,filterState:c,allProducts:I,filteredProducts:b,isFetchingData:v,grandTotal:C,changeAmount:N,isPaymentSufficient:E,hasInvalidQty:j,addItem:F,loadMoreProducts:y,queryProduk:s,queryMember:$,submitTransaction:Y,rp:S,toggleCompare:U,clearCompare:W,isInCompare:Z,compareList:O}=q,w=ue(),A=u(!1),B=u(!1),H=u(!1),P=u(!1),G=u(!1),Q=u(!1),T=u("product"),L=u(null),D=u(null);ae(c,async()=>{await pe(),L.value&&L.value.scrollTo({top:0,behavior:"smooth"})},{deep:!0});const d=u({id:null,name:"",code:"",price:0,quantity:1,stock:0,unit:"Pcs",image:null}),K=i=>{d.value={id:i.id,name:i.name,code:i.code,image_url:i.image_url,price:parseFloat(i.selling_price||i.price||0),quantity:1,stock:parseInt(i.stock||0),unit:i.unit?.name||"Pcs"},P.value=!0},oe=i=>{const{scrollTop:t,clientHeight:e,scrollHeight:o}=i.target;t+e>=o-50&&y()},se=i=>{D.value=i,G.value=!0},X=()=>{T.value="product",B.value=!0},re=()=>{T.value="member",B.value=!0},ne=async i=>{if(B.value=!1,alert("scan berhasil "+T.value+" | "+i),T.value=="product")try{const t=await s(i);t?(i=t,K(i)):alert("Produk tidak ditemukan di database.")}catch(t){console.error("Terjadi kesalahan saat query produk:",t),alert("Gagal mengambil data produk.")}else T.value=="member"&&(i=$(i))},ee=(i=!1)=>{F(d.value),P.value=!1,i&&X()},R=i=>{if(f.items.length===0)return w.error("Keranjang kosong!");if(j.value)return w.error("Qty tidak valid!");if(f.payment_method==="cash"&&!E.value)return w.error("Uang kurang!");Y(i,{onSuccess:t=>{if(t.props.flash.error){w.error(t.props.flash.error);return}H.value=!1,A.value=!1;const e=t.props.flash?.print_url;i&&e?setTimeout(()=>{window.open(e,"_blank","width=300,height=600")},50):i&&!e?w.error("Gagal mendapatkan URL Print dari server."):w.success("Transaksi berhasil disimpan.")}})},V=i=>{const t=f.items.find(e=>e.product_id===i);return t?t.quantity:0};return(i,t)=>(m(),p(le,null,[z(l(fe),{title:"Kasir POS"}),z(_e,{showConfirmModal:H.value,changeAmount:l(N),onClose:t[0]||(t[0]=e=>H.value=!1),onConfirmTransaction:R},null,8,["showConfirmModal","changeAmount"]),z(qe,{show:G.value,product:D.value,onClose:t[1]||(t[1]=e=>G.value=!1),onAddToCart:t[2]||(t[2]=e=>{K(e)})},null,8,["show","product"]),z(je,{show:Q.value,products:l(O),onClose:t[3]||(t[3]=e=>Q.value=!1),onRemove:l(U),onAddToCart:t[4]||(t[4]=e=>{K(e)})},null,8,["show","products","onRemove"]),B.value?(m(),ye(Se,{key:0,onResult:ne,onClose:t[5]||(t[5]=e=>B.value=!1)})):x("",!0),a("div",$e,[a("div",Be,[z(Me,{categories:_.categories,brands:_.brands,"is-fetching":l(v),search:l(c).search,"onUpdate:search":t[6]||(t[6]=e=>l(c).search=e),category:l(c).category,"onUpdate:category":t[7]||(t[7]=e=>l(c).category=e),"sub-category":l(c).subCategory,"onUpdate:subCategory":t[8]||(t[8]=e=>l(c).subCategory=e),brand:l(c).brand,"onUpdate:brand":t[9]||(t[9]=e=>l(c).brand=e),sort:l(c).sort,"onUpdate:sort":t[10]||(t[10]=e=>l(c).sort=e),hideEmptyStock:l(c).hideEmptyStock,"onUpdate:hideEmptyStock":t[11]||(t[11]=e=>l(c).hideEmptyStock=e),onScan:X},null,8,["categories","brands","is-fetching","search","category","sub-category","brand","sort","hideEmptyStock"]),a("div",{ref_key:"productGridRef",ref:L,class:"h-[calc(100vh-220px)] flex-1 p-4 overflow-y-auto bg-gray-100 custom-scroll scroll-smooth pb-28 lg:pb-4 dark:bg-gray-900",onScroll:oe},[a("div",Pe,[(m(!0),p(le,null,be(l(b),e=>(m(),p("div",{key:e.id,class:J(["relative flex flex-col justify-between overflow-hidden transition-all duration-200 border shadow-sm group rounded-xl bg-white dark:bg-gray-800",[e.stock==0?"opacity-75 grayscale-[0.5]":"",V(e.id)>0?"border-lime-500 ring-1 ring-lime-500 bg-lime-50/30 dark:bg-lime-900/10":"border-gray-200 dark:border-gray-700 hover:shadow-md"]])},[a("div",{class:"flex-1 flex flex-col cursor-pointer active:scale-[0.98] transition-transform",onClick:o=>l(F)(e)},[a("div",De,[a("div",ze,[e.unit?(m(),p("span",Ie,g(e.unit.name),1)):x("",!0),e.size?(m(),p("span",Ee,g(e.size.name),1)):x("",!0)]),e.image_url?(m(),p("img",{key:0,src:e.image_url,loading:"lazy",class:"absolute inset-0 z-10 object-cover w-full h-full transition-transform duration-500 group-hover:scale-105",alt:"",onerror:"this.style.display='none'"},null,8,Ae)):x("",!0),e.image_url?x("",!0):(m(),p("div",He,[...t[24]||(t[24]=[a("svg",{class:"w-10 h-10 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),e.stock<=0?(m(),p("div",Le,[...t[25]||(t[25]=[a("span",{class:"px-2 py-1 text-xs font-bold text-white transform border-2 border-white rounded -rotate-12"},"KOSONG",-1)])])):x("",!0)]),a("div",Re,[a("div",Ne,[a("span",Ue,g(e.brand?.name||"No Brand"),1)]),a("h3",{class:"text-xs font-bold leading-snug text-gray-800 dark:text-gray-100 line-clamp-2 min-h-[2.5em] mb-2",title:e.name},g(e.name),9,Oe),a("div",Ge,[a("div",Qe,[a("div",{class:J(["w-1.5 h-1.5 rounded-full",e.stock<=5?"bg-red-500 animate-pulse":"bg-green-500 dark:bg-green-400"])},null,2),a("span",{class:J(["text-[10px] font-medium",e.stock<=5?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"])},g(e.stock<=5?`Sisa ${parseFloat(e.stock)}`:`Stok ${parseFloat(e.stock)}`),3)]),e.total_sold>0?(m(),p("span",Ke,g(e.total_sold)+" Terjual ",1)):x("",!0)]),a("div",Ve,[a("span",Je,g(l(S)(e.selling_price||e.price)),1),V(e.id)>0?(m(),p("div",Ye,g(V(e.id)),1)):(m(),p("div",We,[...t[26]||(t[26]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]))])])],8,Te),a("div",Ze,[a("button",{onClick:ie(o=>se(e),["stop"]),class:"py-2.5 flex items-center justify-center gap-1.5 text-xs font-semibold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition"},[...t[27]||(t[27]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),te(" Detail ",-1)])],8,Xe),a("button",{onClick:ie(o=>l(U)(e),["stop"]),class:J(["py-2.5 flex items-center justify-center gap-1.5 text-xs font-semibold transition",l(Z)(e.id)?"bg-lime-100 text-lime-700 dark:bg-lime-900/30 dark:text-lime-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},[t[28]||(t[28]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),te(" "+g(l(Z)(e.id)?"Batal":"Bandingkan"),1)],10,et)])],2))),128))]),l(v)?(m(),p("div",tt,[...t[29]||(t[29]=[a("div",{class:"w-8 h-8 mx-auto mb-2 border-b-2 rounded-full animate-spin border-lime-500"},null,-1),a("span",{class:"text-xs text-gray-400"},"Memuat database produk...",-1)])])):l(b).length===0?(m(),p("div",at,[t[31]||(t[31]=ve('<div class="relative mb-6"><div class="flex items-center justify-center w-24 h-24 rounded-full shadow-inner bg-gray-50 dark:bg-gray-800"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div class="absolute -top-2 -right-2 bg-white dark:bg-gray-700 rounded-full p-1.5 shadow-md border border-gray-100 dark:border-gray-600"><div class="p-1 rounded-full bg-lime-100 dark:bg-lime-900/50"><svg class="w-5 h-5 text-lime-500 dark:text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"></path></svg></div></div></div><h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white"> Produk tidak ditemukan </h3><p class="max-w-xs mx-auto mb-6 text-sm leading-relaxed text-gray-500 dark:text-gray-400"> Kami tidak dapat menemukan produk dengan kata kunci atau kategori tersebut. </p>',3)),a("button",{onClick:t[12]||(t[12]=e=>{i.search="",i.selectedCategory="all"}),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:border-lime-500 hover:text-lime-600 dark:hover:border-lime-500 dark:hover:text-lime-400 shadow-sm hover:shadow-md"},[...t[30]||(t[30]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),te(" Reset Pencarian ",-1)])])])):x("",!0),l(b).length>0&&l(I).length>l(b).length?(m(),p("div",ot," Scroll untuk memuat lebih banyak... ")):x("",!0)],544),l(O)?.length>0?(m(),p("div",st,[a("div",rt,g(l(O).length)+" Banding ",1),a("div",nt,[a("button",{onClick:t[13]||(t[13]=e=>Q.value=!0),class:"px-3 py-1.5 bg-lime-500 hover:bg-lime-400 text-black text-xs font-bold rounded-full transition"}," Buka "),a("button",{onClick:t[14]||(t[14]=(...e)=>l(W)&&l(W)(...e)),class:"p-1.5 hover:bg-gray-700 rounded-full text-gray-400 hover:text-white transition"},[...t[32]||(t[32]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):x("",!0),l(f).items.length>0?(m(),p("div",lt,[a("button",{onClick:t[15]||(t[15]=e=>A.value=!0),class:"w-full bg-gray-900 dark:bg-lime-600 text-white p-3.5 rounded-2xl shadow-xl shadow-gray-900/20 flex justify-between items-center animate-bounce-subtle"},[a("div",it,[a("span",dt,g(l(f).items.reduce((e,o)=>e+parseFloat(o.quantity),0)),1),a("div",ut,[t[33]||(t[33]=a("span",{class:"text-[9px] text-gray-400 dark:text-lime-100 uppercase font-bold tracking-wider"},"Total Belanja",-1)),a("span",ct,g(l(S)(l(C))),1)])]),t[34]||(t[34]=a("span",{class:"flex items-center gap-1 px-4 py-2 text-xs font-bold bg-gray-700 dark:bg-lime-800/30 rounded-xl"},[te(" Bayar "),a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})])],-1))])])):x("",!0)]),z(Ce,{showMobileCart:A.value,reprops:l(q),onOpenScanMember:re,onShowBayar:t[16]||(t[16]=e=>H.value=!0),onShowDesktop:t[17]||(t[17]=e=>A.value=!1)},null,8,["showMobileCart","reprops"])]),z(we,{show:P.value,onClose:t[23]||(t[23]=e=>P.value=!1),title:"Tambah Pesanan"},{footer:de(()=>[a("div",jt,[a("button",{onClick:t[21]||(t[21]=e=>ee(!1)),class:"flex-1 font-bold transition border text-lime-700 bg-lime-100 border-lime-200 rounded-xl active:bg-lime-200 dark:bg-lime-800 dark:text-lime-300 dark:border-lime-700"}," Masuk Keranjang "),a("button",{onClick:t[22]||(t[22]=e=>ee(!0)),class:"flex-[1.3] bg-gray-900 text-white font-bold rounded-xl shadow-xl flex items-center justify-center gap-2 active:scale-[0.98] transition hover:bg-gray-800 dark:bg-white dark:text-gray-900"},[...t[40]||(t[40]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),a("span",null,"Scan Lagi",-1)])])])]),default:de(()=>[a("div",gt,[a("div",mt,[a("div",pt,g(d.value.name?.substring(0,2).toUpperCase()),1),a("div",yt,[a("h3",ft,g(d.value.name),1),a("div",bt,[a("p",vt,g(d.value.code),1),a("p",{class:J(["text-xs font-medium",3>d.value.stock?"text-red-500":"text-gray-400"])}," Stok: "+g(d.value.stock),3)])])]),a("div",ht,[a("div",xt,[a("button",{onClick:t[18]||(t[18]=e=>d.value.quantity>1?d.value.quantity--:null),class:"flex items-center justify-center text-gray-500 transition bg-white border border-gray-200 shadow-sm w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-600 active:scale-95 hover:text-red-500 disabled:opacity-50",disabled:d.value.quantity<=1},[...t[35]||(t[35]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,kt),a("div",wt,[t[36]||(t[36]=a("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-0.5"},"Jumlah Beli",-1)),he(a("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>d.value.quantity=e),type:"number",class:"w-full p-0 text-3xl font-black text-center text-gray-800 bg-transparent border-none dark:text-white focus:ring-0"},null,512),[[xe,d.value.quantity,void 0,{number:!0}]])]),a("button",{onClick:t[20]||(t[20]=e=>d.value.quantity++),class:"flex items-center justify-center text-white transition shadow-lg w-14 h-14 bg-lime-500 rounded-xl shadow-lime-500/30 active:scale-95"},[...t[37]||(t[37]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),a("div",_t,[a("div",null,[t[38]||(t[38]=a("p",{class:"text-xs text-gray-400"},"Harga Satuan",-1)),a("p",Ct,g(l(S)(d.value.price)),1)]),a("div",St,[t[39]||(t[39]=a("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Subtotal ",-1)),a("p",Mt,g(l(S)(d.value.price*d.value.quantity)),1)])]),d.value.quantity>d.value.stock?(m(),p("div",qt," ⚠️ Jumlah melebihi sisa stok ("+g(d.value.stock)+") ",1)):x("",!0)])]),_:1},8,["show"])],64))}};export{Ot as default};
