import{_ as N}from"./AuthenticatedLayout-DqzYp9rK.js";import{s as d,j as $,q as V,y as z,g as n,o as s,a as i,d as A,h as I,w as T,b as o,c as k,i as c,n as p,F as w,m as D}from"./app-C_cXePOB.js";import H from"./modalFilter-BcFEQ9a_.js";import O from"./ProductCardList-DSUAPCbE.js";import U from"./ProductCardGrid-ybfQjWQg.js";import E from"./ProductKanbanBoard-CDLMzbjv.js";import B from"./pagination-MyUNVduz.js";import{_ as K}from"./Filter-BjaKAa1Z.js";import{l as L}from"./lodash-B17NO2GL.js";import{u as R}from"./useActionLoading-Bvh_DZn-.js";import{_ as q}from"./DeleteConfirm-4y6wL8wG.js";import{_ as G}from"./ImageModal-DbaHFI2H.js";import"./Modal-DR4Qf9lZ.js";import"./ProductKanbanCard-BeFpUQkp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-PROtXgwY.js";import"./PrimaryButton-D5q8Vryj.js";const J={class:"w-full min-h-screen"},Q={class:"flex p-1 my-3 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},W={key:1,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},X={key:2,class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-1 lg:grid-cols-2"},Y={key:0,class:"col-span-full text-center ..."},Z={key:3},he={__name:"index",props:{products:Object,filters:Object,dropdowns:Object},setup(r){const u=r,l=d("grid"),m=d(u.filters.search||""),f=d(!1),{isActionLoading:y}=R(),b=d(null),g=d(!1),x=d(null),M=d(null),F=$(()=>u.filters.trashed===!0||u.filters.trashed==="true"),P=$(()=>{const a=Object.keys(u.filters),e=["search","page","per_page"];return a.filter(t=>!e.includes(t)).length}),C=a=>{x.value=a.path,M.value=a.name,g.value=!0},v=(a,e=!1)=>{let t={};e?t={title:"Hapus Permanen Produk",message:"Produk ini akan dihapus selamanya. Anda yakin menghapus",itemName:a.name,url:route("products.destroy",{id:a.id,permanen:!0})}:t={title:"Pindahkan ke Sampah",message:"Anda yakin ingin memindahkan produk",itemName:a.name,url:route("products.destroy",{id:a.id})},b.value.open(t)},S=a=>{y.value=!0,V.put(route("products.restoreProduct",{id:a.id}),{},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error(e)},onFinish:()=>{y.value=!1}})},j=L.throttle(()=>{const a={...u.filters};a.search=m.value,a.search||delete a.search,V.get(route("products.index"),a,{preserveState:!0,replace:!0})},300);return z(m,j),(a,e)=>(s(),n(w,null,[i(G,{show:g.value,imageUrl:x.value,productName:M.value,onClose:e[0]||(e[0]=t=>g.value=!1)},null,8,["show","imageUrl","productName"]),i(q,{ref_key:"showConfirmModal",ref:b,onSuccess:e[1]||(e[1]=()=>{})},null,512),i(A(I),{title:"Data Barang"}),i(N,{headerTitle:"Data Barang"},{default:T(()=>[o("div",J,[i(H,{show:f.value,onClose:e[2]||(e[2]=t=>f.value=!1),filters:r.filters,dropdowns:r.dropdowns},null,8,["show","filters","dropdowns"]),i(K,{filters:r.filters,modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),onShowFilter:e[4]||(e[4]=t=>f.value=!0),filterCount:P.value,actions:[{route:a.route("products.create"),buttonText:"Tambah Produk"}]},null,8,["filters","modelValue","filterCount","actions"]),o("div",Q,[o("button",{onClick:e[5]||(e[5]=t=>l.value="grid"),class:p([l.value==="grid"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100","p-2 transition rounded"]),title:"Mode Grid"},[...e[8]||(e[8]=[o("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),o("button",{onClick:e[6]||(e[6]=t=>l.value="list"),class:p([l.value==="list"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100","p-2 transition rounded"]),title:"Mode Daftar"},[...e[9]||(e[9]=[o("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2),o("button",{onClick:e[7]||(e[7]=t=>l.value="kanban"),class:p([l.value==="kanban"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100","p-2 transition rounded"]),title:"Mode Analisa DSS"},[...e[10]||(e[10]=[o("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1)])],2)]),r.products.data.length>10?(s(),k(B,{key:0,metadata:r.products,filters:r.filters},null,8,["metadata","filters"])):c("",!0),l.value==="grid"?(s(),n("div",W,[(s(!0),n(w,null,D(r.products.data,t=>(s(),n("div",{key:t.id,class:"h-full"},[i(U,{data:t,onDelete:h=>v(t,!1),onImageClick:C},null,8,["data","onDelete"])]))),128))])):l.value==="list"?(s(),n("div",X,[r.products.data.length===0?(s(),n("div",Y,[...e[11]||(e[11]=[o("p",{class:"text-gray-500 ..."}," Tidak ada produk yang ditemukan. ",-1)])])):c("",!0),(s(!0),n(w,null,D(r.products.data,t=>(s(),k(O,{"is-trash-view":F.value,key:t.id,data:t,onDelete:h=>v(t,!1),onForceDelete:h=>v(t,!0),onRestore:h=>S(t),onImageClick:C},null,8,["is-trash-view","data","onDelete","onForceDelete","onRestore"]))),128))])):l.value==="kanban"?(s(),n("div",Z,[i(E,{products:r.products.data},null,8,["products"])])):c("",!0),r.products.data.length>8?(s(),k(B,{key:4,metadata:r.products,filters:r.filters},null,8,["metadata","filters"])):c("",!0)])]),_:1})],64))}};export{he as default};
