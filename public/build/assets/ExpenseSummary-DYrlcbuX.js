import{u as j,D as B,l as d,o as l,e as x,g as i,i as z,w as f,f as t,C as M,k as p,z as k,A as v,t as s,p as u,F as m,I as w,H as P,n as R,J as S}from"./vendor-core-By7Plnkm.js";import{_ as E}from"./AuthenticatedLayout-BlgKae2S.js";import{_ as F}from"./ReportPagination-CJ0WNI_F.js";import{u as H}from"./useExport-ZWbXSJP4.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-CpEDRVzi.js";import"./useActionLoading-BREuot5v.js";const K={class:"space-y-6 pb-20"},I={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},N={class:"flex items-center gap-2"},L={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},$={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm dark:bg-gray-800 dark:border-gray-700"},J={class:"space-y-3"},O={class:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4"},A={class:"p-6 text-white bg-gradient-to-br from-red-600 to-red-800 rounded-2xl shadow-lg relative overflow-hidden print:shadow-none print:border print:border-red-800 print:text-black"},U={class:"relative z-10"},W={class:"mt-2 text-3xl font-black"},q={class:"p-6 bg-white border border-gray-200 rounded-2xl shadow-sm dark:bg-gray-800 dark:border-gray-700 flex flex-col justify-center"},G={class:"mt-2 text-2xl font-bold text-gray-800 dark:text-white"},Q={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},X={class:"lg:col-span-1 bg-white border border-gray-200 rounded-2xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700"},Y={class:"space-y-4"},Z={class:"flex justify-between text-xs mb-1"},tt={class:"font-bold text-gray-700 dark:text-gray-300"},et={class:"text-gray-500"},at={class:"w-full bg-gray-100 rounded-full h-2.5 dark:bg-gray-700 overflow-hidden"},rt={key:0,class:"text-center text-gray-400 py-8 text-sm"},st={class:"lg:col-span-2 bg-white border border-gray-200 rounded-2xl shadow-sm dark:bg-gray-800 dark:border-gray-700 relative flex flex-col"},ot={class:"overflow-x-auto flex-1"},dt={class:"w-full text-sm text-left"},lt={class:"divide-y divide-gray-100 dark:divide-gray-700"},nt={class:"px-6 py-3 whitespace-nowrap text-gray-500"},it={class:"px-6 py-3 font-medium text-gray-800 dark:text-white"},gt={key:0,class:"text-[10px] text-gray-400 font-normal"},ct={class:"px-6 py-3"},xt={class:"px-2 py-1 text-xs font-bold bg-gray-100 rounded text-gray-600 dark:bg-gray-700 dark:text-gray-300"},pt={class:"px-6 py-3 text-right font-bold text-red-600"},ut={key:0},mt={class:"p-4 border-t border-gray-100 dark:border-gray-700 flex justify-end"},Ct={__name:"ExpenseSummary",props:{filters:Object,summary:Object,chart_data:Array,expenses:Object},setup(o){const g=o,{exportToCsv:_}=H(),C=()=>{const r=g.expenses.data.map(e=>({Tanggal:e.date,Keterangan:e.name+(e.description?` (${e.description})`:""),Kategori:e.category,Jumlah:e.amount}));_("Laporan_Pengeluaran",r)},n=j({start_date:g.filters.start_date,end_date:g.filters.end_date}),T=()=>{S.get(route("reports.expense-summary"),{start_date:n.start_date,end_date:n.end_date},{preserveScroll:!0})},c=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),D=r=>new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),b=B(()=>g.chart_data.length?Math.max(...g.chart_data.map(r=>r.total)):0),V=r=>b.value===0?"0%":`${r/b.value*100}%`,y=["bg-blue-500","bg-red-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"];return(r,e)=>(l(),d(m,null,[x(i(z),{title:"Rincian Pengeluaran"}),x(E,{headerTitle:"Rincian Pengeluaran"},{default:f(()=>[t("div",K,[t("div",I,[t("div",N,[x(i(M),{href:r.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:f(()=>[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),p(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",{class:"flex gap-2"},[t("button",{onClick:C,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),p(" Export CSV ",-1)])]),e[4]||(e[4]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),p(" Print ")],-1))])]),t("div",L,[t("div",$,[e[7]||(e[7]=t("h3",{class:"mb-4 text-sm font-bold text-gray-500 uppercase tracking-widest"},"Periode Laporan",-1)),t("div",J,[t("div",null,[e[5]||(e[5]=t("label",{class:"block mb-1 text-xs font-medium text-gray-400"},"Dari Tanggal",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>i(n).start_date=a),class:"w-full text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-red-500 focus:border-red-500"},null,512),[[v,i(n).start_date]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block mb-1 text-xs font-medium text-gray-400"},"Sampai Tanggal",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>i(n).end_date=a),class:"w-full text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white focus:ring-red-500 focus:border-red-500"},null,512),[[v,i(n).end_date]])]),t("button",{onClick:T,class:"w-full px-4 py-2 text-sm font-bold text-white bg-red-600 rounded-lg shadow hover:bg-red-700 transition"}," Tampilkan Data ")])]),t("div",O,[t("div",A,[t("div",U,[e[8]||(e[8]=t("p",{class:"text-xs font-bold tracking-widest text-red-100 uppercase"},"Total Pengeluaran",-1)),t("h2",W,s(c(o.summary.total_expense)),1),e[9]||(e[9]=t("p",{class:"mt-2 text-xs text-red-200"},"Total biaya operasional pada periode terpilih.",-1))]),e[10]||(e[10]=t("div",{class:"absolute bottom-0 right-0 p-4 opacity-10"},[t("svg",{class:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),t("div",q,[e[11]||(e[11]=t("p",{class:"text-xs font-bold tracking-widest text-gray-500 uppercase"},"Rata-Rata Harian",-1)),t("h2",G,s(c(o.summary.avg_daily)),1),e[12]||(e[12]=t("p",{class:"mt-1 text-xs text-gray-400"},"Burn rate harian.",-1))])])]),t("div",Q,[t("div",X,[e[13]||(e[13]=t("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"},"Komposisi Pengeluaran",-1)),t("div",Y,[(l(!0),d(m,null,w(o.chart_data,(a,h)=>(l(),d("div",{key:h},[t("div",Z,[t("span",tt,s(a.category),1),t("span",et,s(c(a.total)),1)]),t("div",at,[t("div",{class:R(["h-2.5 rounded-full transition-all duration-500",y[h%y.length]]),style:P({width:V(a.total)})},null,6)])]))),128)),o.chart_data.length===0?(l(),d("div",rt," Tidak ada data untuk ditampilkan grafik. ")):u("",!0)])]),t("div",st,[e[16]||(e[16]=t("div",{class:"p-4 border-b border-gray-100 dark:border-gray-700"},[t("h3",{class:"text-lg font-bold text-gray-800 dark:text-white"},"Rincian Transaksi")],-1)),t("div",ot,[t("table",dt,[e[15]||(e[15]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700/50"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Tanggal"),t("th",{class:"px-6 py-3"},"Keterangan"),t("th",{class:"px-6 py-3"},"Kategori"),t("th",{class:"px-6 py-3 text-right"},"Jumlah")])],-1)),t("tbody",lt,[(l(!0),d(m,null,w(o.expenses.data,a=>(l(),d("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition"},[t("td",nt,s(D(a.date)),1),t("td",it,[p(s(a.name)+" ",1),a.description?(l(),d("div",gt,s(a.description),1)):u("",!0)]),t("td",ct,[t("span",xt,s(a.category),1)]),t("td",pt,s(c(a.amount)),1)]))),128)),o.expenses.data.length===0?(l(),d("tr",ut,[...e[14]||(e[14]=[t("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-400"}," Data pengeluaran kosong. ",-1)])])):u("",!0)])])]),t("div",mt,[x(F,{links:o.expenses.links},null,8,["links"])])])])])]),_:1})],64))}};export{Ct as default};
