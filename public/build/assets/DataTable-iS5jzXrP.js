import{x as g,j as v,z as w,C as q,g as s,o,b as r,F as b,q as m,n as B,m as F,f as E,i as _,t as p,r as K,k as U,B as G,R as H}from"./app-CHQSHO3f.js";const J={class:"w-full p-5 border-2 rounded-md border-lime-300 text-customText-secondaryLight bg-customBg-light dark:text-customText-secondaryDark dark:border-borderc-dark dark:bg-customBg-dark"},Q={class:"overflow-x-auto"},W={class:"min-w-full border-2 rounded-lg table-fixed"},X={class:"bg-gray-100 dark:bg-gray-800"},Y={class:"border-b border-gray-400"},Z=["onClick"],ee={class:"flex items-center justify-center gap-2"},te={key:0,class:"w-4 h-3 lg:w-5 lg:h-4"},ae={key:0,viewBox:"0 0 23 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re={key:1,viewBox:"0 0 23 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se={key:2,viewBox:"0 0 23 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe=["onClick"],ne={key:1},le={key:1},ie=["colspan"],de={key:2},ue=["colspan"],ce={class:"flex flex-col items-center justify-center gap-4 mt-6 text-center sm:flex-row sm:justify-between"},ge={class:"flex items-center gap-2 text-gray-500 dark:text-gray-300"},ve=["value"],pe={class:"text-sm text-gray-500 lg:text-base dark:text-gray-300"},ye={class:"flex flex-wrap justify-center gap-2"},ke=["disabled"],he=["onClick"],be=["disabled"],fe={__name:"DataTable",props:{data:{type:Array,default:()=>[]},columns:{type:Array,required:!0},perPageOptions:{type:Array,default:()=>[5,10,25,50]},serverSide:{type:Boolean,default:!1},endpoint:{type:String,default:""},params:{type:Object,default:()=>({})},pagination:Object},emits:["row-click","update:params","change"],setup(y,{emit:I}){const n=y,M=I,d=g(n.perPageOptions[0]),l=g(1),L=g(1),u=g(null),c=g("asc"),h=g(!1),C=g(0),S=g([]),f=v(()=>n.serverSide&&n.pagination),k=v(()=>n.serverSide&&!n.pagination),O=v(()=>!n.serverSide),$=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);function T(a,t){return a==null||a===""?"-":t.format==="rupiah"?$(a):t.format==="tanggal"?new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):a}function A(a,t){return!a||!t?null:t.split(".").reduce((e,i)=>e&&typeof e=="object"&&i in e?e[i]:null,a)}function z(a,t){const e=A(a,t.key);return T(e,t)}async function D(){if(!(!k.value||!n.endpoint)){h.value=!0;try{const t=(await H.get(n.endpoint,{params:{...n.params,page:l.value,per_page:d.value,sort:u.value,order:c.value}})).data;S.value=t.data||[],C.value=t.total?parseInt(t.total):0,L.value=t.last_page?parseInt(t.last_page):1}catch(a){console.error("Fetch error:",a)}finally{h.value=!1}}}function R(){M("change",{page:l.value,per_page:d.value,sort:u.value,order:c.value}),M("update:params",{...n.params,page:l.value,per_page:d.value,sort:u.value,order:c.value})}const j=v(()=>{if(!O.value)return[];let a=[...n.data];return u.value&&a.sort((t,e)=>{const i=t[u.value],N=e[u.value];return i<N?c.value==="asc"?-1:1:i>N?c.value==="asc"?1:-1:0}),a}),P=v(()=>{if(k.value)return S.value;if(f.value)return n.data;const a=(l.value-1)*d.value;return j.value.slice(a,a+d.value)}),x=v(()=>k.value?C.value:f.value?n.pagination?.total||0:j.value.length),V=v(()=>k.value?L.value:f.value?n.pagination?.last_page||1:Math.ceil(x.value/d.value)||1);return w([()=>n.params,l,u,c],async()=>{k.value&&D()},{deep:!0}),w([l,d,u,c],()=>{f.value&&R()}),w(d,()=>{l.value=1}),q(()=>{k.value&&D()}),w(()=>n.pagination,a=>{a&&(l.value=a.current_page,d.value=a.per_page)},{deep:!0,immediate:!0}),(a,t)=>(o(),s("div",J,[r("div",Q,[r("table",W,[r("thead",X,[r("tr",Y,[(o(!0),s(b,null,m(y.columns,e=>(o(),s("th",{key:e.key,onClick:i=>e.sortable?(u.value=e.key,c.value=u.value===e.key&&c.value==="asc"?"desc":"asc"):null,style:F({width:e.width||"150px"}),class:B(["px-4 text-sm md:text-base py-2 border-b dark:border-gray-700 select-none",e.sortable?"cursor-pointer":"",e.class])},[r("div",ee,[E(p(e.label)+" ",1),e.sortable?(o(),s("span",te,[u.value!==e.key?(o(),s("svg",ae,[...t[3]||(t[3]=[r("path",{d:"M15.5 15.75V2.25M15.5 2.25L12.375 6M15.5 2.25L18.625 6",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{d:"M7.5 2.25L7.5 15.75M7.5 15.75L10.625 12M7.5 15.75L4.375 12",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):c.value==="asc"?(o(),s("svg",re,[...t[4]||(t[4]=[r("path",{d:"M15.5 15.75V2.25M15.5 2.25L12.375 6M15.5 2.25L18.625 6",stroke:"#84CC16","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{d:"M7.5 2.25L7.5 15.75M7.5 15.75L10.625 12M7.5 15.75L4.375 12",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(o(),s("svg",se,[...t[5]||(t[5]=[r("path",{d:"M7.5 2.25L7.5 15.75M7.5 15.75L10.625 12M7.5 15.75L4.375 12",stroke:"#84CC16","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{d:"M15.5 15.75L15.5 2.25M15.5 2.25L12.375 6M15.5 2.25L18.625 6",stroke:"#6B7280","stroke-opacity":"0.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])):_("",!0)])],14,Z))),128))])]),r("tbody",null,[h.value?_("",!0):(o(!0),s(b,{key:0},m(P.value,e=>(o(),s("tr",{key:e.id,onClick:i=>M("row-click",e),class:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700"},[(o(!0),s(b,null,m(y.columns,i=>(o(),s("td",{key:i.key,style:F({width:i.width||"150px"}),class:B(["px-4 py-2 border-b text-sm md:text-base dark:border-gray-700 truncate",i.class])},[i.slot?K(a.$slots,i.slot,{key:0,row:e}):(o(),s("span",ne,p(z(e,i)),1))],6))),128))],8,oe))),128)),!h.value&&P.value.length===0?(o(),s("tr",le,[r("td",{colspan:y.columns.length,class:"py-4 text-center text-gray-500"}," No data available ",8,ie)])):_("",!0),h.value?(o(),s("tr",de,[r("td",{colspan:y.columns.length,class:"py-4 text-center text-gray-500 dark:text-gray-300"}," Loading... ",8,ue)])):_("",!0)])])]),r("div",ce,[r("div",ge,[t[6]||(t[6]=r("label",{class:"text-sm lg:text-base"},"Show",-1)),U(r("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),class:"px-5 py-1 border rounded dark:bg-gray-800 dark:text-white"},[(o(!0),s(b,null,m(y.perPageOptions,e=>(o(),s("option",{key:e,value:e},p(e),9,ve))),128))],512),[[G,d.value]]),t[7]||(t[7]=r("span",{class:"text-sm lg:text-base"},"entries",-1))]),r("div",pe," Menampilkan "+p(x.value===0?0:(l.value-1)*d.value+1)+" - "+p(Math.min(l.value*d.value,x.value))+" dari total "+p(x.value)+" entri ",1),r("div",ye,[r("button",{onClick:t[1]||(t[1]=e=>l.value--),disabled:l.value===1,class:"px-3 py-1 border border-gray-300 rounded shadow disabled:opacity-50 disabled:hover:bg-gray-300 dark:bg-gray-800 disabled:dark:hover:bg-gray-800 dark:hover:bg-primary-hover hover:bg-customBg-dark hover:text-white hover:bg-opacity-80 dark:border-gray-600"}," Prev ",8,ke),(o(!0),s(b,null,m(V.value,e=>(o(),s("button",{key:e,onClick:i=>l.value=e,class:B(["px-3 py-1 rounded border shadow border-gray-300 dark:bg-gray-800 dark:border-gray-600",e===l.value?"dark:bg-primary-light bg-customBg-tableDark text-white dark:text-customBg-dark":"dark:hover:bg-primary-hover hover:bg-customBg-dark hover:text-white hover:bg-opacity-80"])},p(e),11,he))),128)),r("button",{onClick:t[2]||(t[2]=e=>l.value++),disabled:l.value===V.value,class:"px-3 py-1 border border-gray-300 rounded shadow disabled:opacity-50 disabled:hover:bg-gray-300 dark:bg-gray-800 disabled:dark:hover:bg-gray-800 dark:hover:bg-primary-hover hover:bg-customBg-dark hover:text-white hover:bg-opacity-80 dark:border-gray-600"}," Next ",8,be)])])]))}};export{fe as _};
