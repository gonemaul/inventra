import{x as B,j as P,g as l,o as d,a as u,d as m,h as S,w as y,b as t,l as k,f as a,t as s,F as f,q as v}from"./app-CjEDMysI.js";import{_ as F}from"./DeleteConfirm-EbEkobQa.js";import{_ as H}from"./AuthenticatedLayout-DzmprZiX.js";import"./Modal-CY7QT8xJ.js";import"./useActionLoading-CKYbla82.js";const M={class:"w-full min-h-screen px-4 py-2 print:h-fit print:bg-white print:p-0 sm:px-6 lg:px-8 bg-customBg-light text-customText-light dark:bg-customBg-dark dark:text-customText-dark"},I={class:"flex flex-col items-start justify-between gap-4 mx-auto mb-8 print:hidden md:flex-row"},N={class:"flex items-center gap-2 mb-1 text-sm text-gray-500 dark:text-gray-300"},T={class:"items-center w-full gap-2 text-lg font-bold text-gray-800 md:text-2xl dark:text-gray-300"},V={class:"px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 rounded shadow md:text-sm dark:text-gray-800"},q={class:"flex flex-col w-full gap-2"},R={class:"flex items-center gap-3 p-2 pr-4 ml-auto mr-auto bg-white border border-gray-100 rounded-full shadow-sm md:mr-0 md:ml-auto w-fit"},z={class:"flex items-center justify-center w-8 h-8 text-xs font-bold text-indigo-600 bg-indigo-100 rounded-full"},O={class:"text-sm"},U={class:"font-medium text-gray-800 leading-none mt-0.5"},$={class:"flex items-center justify-center gap-3 md:justify-end"},E={class:"hidden pb-4 mb-6 border-b border-gray-300 print:block"},Q={class:"flex justify-between mt-2 text-sm text-gray-600"},Z={class:"grid grid-cols-1 gap-6 mx-auto max-w-[87rem] lg:grid-cols-3 print:block"},A={class:"space-y-6 lg:col-span-2"},J={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},K={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},Y={class:"text-2xl font-black text-indigo-600"},G={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},W={class:"flex items-center justify-between mb-2"},X={class:"bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-full"},tt={class:"text-2xl font-black text-green-600"},et={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},st={class:"flex items-baseline justify-between"},ot={class:"flex items-baseline gap-1"},nt={class:"text-xl font-black text-gray-800 md:text-2xl"},rt={class:"flex items-baseline gap-1"},at={class:"text-xl font-black text-gray-800 md:text-2xl"},it={class:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl"},lt={class:"overflow-x-auto"},dt={class:"w-full text-sm text-left"},ct={class:"divide-y divide-gray-100"},xt={class:"px-6 py-3 font-medium text-gray-900"},ut={class:"font-mono text-xs font-normal text-gray-400"},gt={class:"px-4 py-3 font-mono text-center text-gray-500"},mt={class:"px-4 py-3 font-bold text-center text-gray-400"},ft={class:"text-xs font-normal text-gray-400"},pt={class:"px-4 py-3 font-mono font-bold text-right text-gray-800"},bt={class:"px-6 py-3 font-mono font-bold text-right text-green-600 md:text-center"},ht={class:"space-y-6 print:space-y-3"},yt={class:"p-5 bg-white border border-gray-200 shadow-sm print:mt-3 rounded-xl"},vt={class:"space-y-4"},wt={class:"flex items-center gap-3 overflow-hidden"},_t={class:"flex items-center justify-center flex-shrink-0 w-6 h-6 text-xs font-bold text-orange-600 bg-orange-100 rounded"},kt=["title"],Ct={class:"flex-shrink-0 text-sm font-bold text-gray-900"},jt={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},Dt={class:"space-y-4"},Lt={class:"flex items-center gap-3 overflow-hidden"},Bt={class:"flex items-center justify-center flex-shrink-0 w-6 h-6 text-xs font-bold text-green-600 bg-green-100 rounded"},Pt={class:"text-sm font-medium text-gray-700 truncate"},St={class:"flex-shrink-0 font-mono text-sm font-bold text-green-600"},Ft={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},Ht={class:"bg-gray-100 rounded-lg p-3 text-sm text-gray-600 italic border border-gray-200 min-h-[60px]"},Mt={class:"pt-4 mt-4 text-xs text-gray-400 border-t border-gray-200"},It={class:"flex justify-between"},Nt={class:"hidden print:block"},Ot={__name:"Show",props:{sale:Object},setup(r){const c=r,C=()=>window.print(),w=B(null),x=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),_=n=>new Date(n).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),g=n=>n.product_snapshot?.name||n.product?.name||"Unknown",j=n=>n.product_snapshot?.code||n.product?.code||"-",D=new Date().toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),L=()=>{const n={title:"Hapus rekap penjualan?",message:"Yakin ingin menghapus rekap penjualan ini? Stok produk akan dikembalikan otomatis.",itemName:c.sale.reference_no,url:route("sales.destroy",c.sale.id)};w.value.open(n)},p=P(()=>{const n=c.sale.items,e=[...n].sort((b,h)=>parseFloat(h.quantity)-parseFloat(b.quantity)).slice(0,5),o=[...n].sort((b,h)=>parseFloat(h.profit)-parseFloat(b.profit)).slice(0,5),i=c.sale.total_revenue>0?(c.sale.total_profit/c.sale.total_revenue*100).toFixed(1):0;return{topSelling:e,topProfit:o,margin:i}});return(n,e)=>(d(),l(f,null,[u(m(S),{title:`Penjualan - ${r.sale.reference_no}`},null,8,["title"]),u(F,{ref_key:"showConfirmDelete",ref:w,onSuccess:e[0]||(e[0]=()=>{})},null,512),u(H,{showSidebar:!1,showHeader:!1},{default:y(()=>[t("div",M,[t("div",I,[t("div",null,[t("div",N,[u(m(k),{href:n.route("sales.index"),class:"flex items-center transition hover:text-indigo-600"},{default:y(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),a(" Riwayat ",-1)])]),_:1},8,["href"]),e[2]||(e[2]=t("span",null,"/",-1)),e[3]||(e[3]=t("span",null,"Detail Penjualan",-1))]),t("h1",T,[a(s(_(r.sale.transaction_date))+" ",1),t("span",V,s(r.sale.reference_no),1)])]),t("div",q,[t("div",R,[t("div",z,s(r.sale.user.name.substring(0,2).toUpperCase()),1),t("div",O,[e[4]||(e[4]=t("div",{class:"text-gray-500 text-[10px] uppercase font-bold leading-none"}," Diinput Oleh ",-1)),t("div",U,s(r.sale.user.name),1)])]),t("div",$,[t("button",{onClick:C,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 transition bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),a(" Cetak ",-1)])]),u(m(k),{href:n.route("sales.edit",r.sale.id),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-yellow-700 transition bg-yellow-100 border border-yellow-300 rounded-lg shadow-sm hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500"},{default:y(()=>[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4 mr-2 text-yellow-800",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M19.9902 18.9531C20.5471 18.9534 21 19.4124 21 19.9766C21 20.5418 20.5471 20.9998 19.9902 21H14.2793C13.7224 20.9998 13.2695 20.5419 13.2695 19.9766C13.2696 19.4124 13.7224 18.9533 14.2793 18.9531H19.9902ZM12.2412 3.95703C13.1538 2.78531 14.7463 2.67799 16.0303 3.69922L17.5049 4.87109C18.1097 5.34407 18.5134 5.96737 18.6514 6.62305C18.8105 7.34415 18.6403 8.05244 18.1631 8.66504L9.37598 20.0283C8.97274 20.544 8.37869 20.834 7.74219 20.8447L4.24023 20.8877C4.0493 20.8876 3.89009 20.7589 3.84766 20.5762L3.05176 17.125C2.91398 16.4909 3.05194 15.8352 3.45508 15.3301L9.68457 7.26758C9.79068 7.13908 9.98121 7.11856 10.1084 7.21387L12.7295 9.2998C12.8993 9.43955 13.1329 9.51467 13.377 9.48242C13.8969 9.41792 14.2474 8.94469 14.1943 8.43945C14.1625 8.18164 14.0349 7.96685 13.8652 7.80566C13.8122 7.76267 11.3184 5.7627 11.3184 5.7627C11.1593 5.63368 11.1276 5.39743 11.2549 5.2373L12.2412 3.95703Z",fill:"currentColor"})],-1),a(" Edit ",-1)])]),_:1},8,["href"]),t("button",{onClick:L,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-700 transition border border-red-200 rounded-lg shadow-sm bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),a(" Hapus ",-1)])])])])]),t("div",E,[e[8]||(e[8]=t("h1",{class:"text-2xl font-bold text-gray-900"}," Laporan Penjualan Harian ",-1)),t("div",Q,[t("div",null,"Tanggal: "+s(_(r.sale.transaction_date)),1),t("div",null,"No. Ref: "+s(r.sale.reference_no),1)])]),t("div",Z,[t("div",A,[t("div",J,[t("div",K,[e[9]||(e[9]=t("div",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Total Omset ",-1)),t("div",Y,s(x(r.sale.total_revenue)),1)]),t("div",G,[t("div",W,[e[10]||(e[10]=t("div",{class:"text-xs font-bold tracking-wider text-gray-400 uppercase"}," Laba Bersih ",-1)),t("span",X,s(p.value.margin)+"% Margin ",1)]),t("div",tt," + "+s(x(r.sale.total_profit)),1)]),t("div",et,[e[14]||(e[14]=t("div",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Volume Penjualan ",-1)),t("div",st,[t("div",ot,[t("span",nt,s(r.sale.financial_summary.item_count),1),e[11]||(e[11]=t("span",{class:"text-sm font-medium text-gray-500"},"Jenis Barang",-1))]),e[13]||(e[13]=a(" | ",-1)),t("div",rt,[t("span",at,s(r.sale.financial_summary.total_qty),1),e[12]||(e[12]=t("span",{class:"text-sm font-medium text-gray-500"},"Unit",-1))])])])]),t("div",it,[e[16]||(e[16]=t("div",{class:"flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[t("h3",{class:"font-bold text-gray-700"}," Rincian Barang Keluar ")],-1)),t("div",lt,[t("table",dt,[e[15]||(e[15]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-200 border-b border-gray-100"},[t("tr",null,[t("th",{class:"px-6 py-3 min-w-[200px]"}," Produk "),t("th",{class:"px-4 py-3 text-center"}," Harga "),t("th",{class:"px-4 py-3 text-center"}," Qty "),t("th",{class:"px-4 py-3 text-right"}," Subtotal "),t("th",{class:"px-6 py-3 text-center text-green-600"}," Laba ")])],-1)),t("tbody",ct,[(d(!0),l(f,null,v(r.sale.items,o=>(d(),l("tr",{key:o.id,class:"hover:bg-gray-50/50"},[t("td",xt,[a(s(g(o))+" ",1),t("div",ut,s(j(o)),1)]),t("td",gt,s(x(o.selling_price)),1),t("td",mt,[a(s(parseFloat(o.quantity))+" ",1),t("span",ft,s(o.product_snapshot?.unit),1)]),t("td",pt,s(x(o.subtotal)),1),t("td",bt,s(x(o.profit)),1)]))),128))])])])])]),t("div",ht,[t("div",yt,[e[17]||(e[17]=t("h3",{class:"flex items-center gap-2 mb-4 text-sm font-bold tracking-wide text-gray-700 uppercase"},[t("svg",{class:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),a(" Produk Terlaris (Qty) ")],-1)),t("div",vt,[(d(!0),l(f,null,v(p.value.topSelling,(o,i)=>(d(),l("div",{key:i,class:"flex items-center justify-between"},[t("div",wt,[t("div",_t,s(i+1),1),t("div",{class:"text-sm font-medium text-gray-700 truncate",title:g(o)},s(g(o)),9,kt)]),t("div",Ct,s(parseFloat(o.quantity))+" "+s(o.product_snapshot?.unit),1)]))),128))])]),t("div",jt,[e[18]||(e[18]=t("h3",{class:"flex items-center gap-2 mb-4 text-sm font-bold tracking-wide text-gray-700 uppercase"},[t("svg",{class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),a(" Penyumbang Profit ")],-1)),t("div",Dt,[(d(!0),l(f,null,v(p.value.topProfit,(o,i)=>(d(),l("div",{key:i,class:"flex items-center justify-between"},[t("div",Lt,[t("div",Bt,s(i+1),1),t("div",Pt,s(g(o)),1)]),t("div",St,s(x(o.profit)),1)]))),128))])]),t("div",Ft,[e[20]||(e[20]=t("h3",{class:"mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase"}," Catatan Shift ",-1)),t("div",Ht,' "'+s(r.sale.notes||"Tidak ada catatan khusus.")+'" ',1),t("div",Mt,[e[19]||(e[19]=t("h4",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-3"}," Informasi Dokumen ",-1)),t("div",It,[t("div",null," Dibuat: "+s(new Date(r.sale.created_at).toLocaleString("id-ID")),1),t("div",Nt," Dicetak: "+s(m(D)),1)])])])])])])]),_:1})],64))}};export{Ot as default};
