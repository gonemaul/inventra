import{u as T,D as b,l as d,o as l,e as c,g as n,i as H,w as h,f as t,C as V,k as m,p as D,z as y,F as x,I as f,t as o,L as P,A as k,n as S,m as M}from"./vendor-core-By7Plnkm.js";import{_ as N}from"./AuthenticatedLayout-BlgKae2S.js";import{u as z}from"./useExport-ZWbXSJP4.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-CpEDRVzi.js";import"./useActionLoading-BREuot5v.js";const I={class:"space-y-6"},F={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},A={class:"flex items-center gap-2"},R={class:"flex gap-2"},E={class:"p-6 bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},L={class:"grid items-end grid-cols-1 gap-4 md:grid-cols-4"},U={class:"md:col-span-2"},O=["value"],W={class:"flex gap-2 md:col-span-2"},q={key:0,class:"space-y-6"},K={class:"grid grid-cols-1 gap-4 md:grid-cols-4"},Q={class:"mt-1 text-2xl font-black"},G={class:"mt-1 text-sm font-medium"},$={class:"absolute right-2 bottom-2 opacity-20"},J={key:0,class:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X={key:1,class:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Y={key:2,class:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Z={class:"p-5 bg-white border border-gray-200 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},tt={class:"text-xl font-bold text-green-600"},et={class:"p-5 bg-white border border-gray-200 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},rt={class:"text-xl font-bold text-red-600"},at={class:"p-5 bg-white border border-gray-200 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},st={class:"text-xl font-bold text-blue-600"},ot={class:"p-6 bg-white border border-gray-200 shadow-lg rounded-2xl dark:bg-gray-800 dark:border-gray-700"},dt={class:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},lt={class:"w-full text-sm text-left"},it={class:"divide-y divide-gray-100 dark:divide-gray-700"},nt={class:"px-6 py-3 text-gray-500"},gt={class:"px-6 py-3 font-medium text-gray-800 dark:text-white"},ut={class:"px-6 py-3 text-blue-500"},ct={class:"px-6 py-3 text-center"},pt={class:"px-6 py-3 font-bold text-right text-purple-600"},mt={key:1,class:"flex flex-col items-center justify-center h-64 border-2 border-gray-200 border-dashed bg-gray-50 rounded-2xl"},yt={key:2,class:"flex flex-col items-center justify-center h-64 border-2 border-gray-200 border-dashed bg-gray-50 rounded-2xl"},_t={__name:"PriceWatch",props:{products:Array,filters:Object,data:Array,product:Object,summary:Object},setup(r){const i=r,g=T({product_id:i.filters.product_id||"",start_date:i.filters.start_date,end_date:i.filters.end_date}),v=()=>{g.get(route("reports.price-watch"),{preserveScroll:!0})},u=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),p=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"2-digit"}),{exportToCsv:w}=z(),_=()=>{if(!i.data||!i.data.length)return alert("Tidak ada data untuk diekspor");const s=i.data.map(e=>({Tanggal:p(e.transaction_date),Supplier:e.supplier_name,"No Ref":e.reference_no,Qty:e.quantity,"Harga Beli":e.purchase_price}));w("Laporan_Price_Watch",s)},B=b(()=>({chart:{type:"line",height:350,toolbar:{show:!1},animations:{enabled:!0}},stroke:{curve:"step",width:3},colors:["#8b5cf6"],markers:{size:5,hover:{size:7}},xaxis:{categories:i.data?i.data.map(s=>p(s.transaction_date)):[],tooltip:{enabled:!1}},yaxis:{labels:{formatter:s=>u(s)}},tooltip:{y:{formatter:s=>u(s)}},grid:{borderColor:"#f3f4f6"}})),C=b(()=>[{name:"Harga Beli",data:i.data?i.data.map(s=>s.purchase_price):[]}]);return(s,e)=>(l(),d(x,null,[c(n(H),{title:"Price Watch"}),c(N,{headerTitle:"Analisa Harga Beli (Price Watch)"},{default:h(()=>[t("div",I,[t("div",F,[t("div",A,[c(n(V),{href:s.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:h(()=>[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),m(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",R,[r.data&&r.data.length?(l(),d("button",{key:0,onClick:_,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),m(" Export CSV ",-1)])])):D("",!0),e[5]||(e[5]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),m(" Print ")],-1))])]),t("div",E,[e[7]||(e[7]=t("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"}," ðŸ” Pilih Produk untuk Dianalisa ",-1)),t("div",L,[t("div",U,[y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n(g).product_id=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700 focus:ring-purple-500"},[e[6]||(e[6]=t("option",{value:"",disabled:""}," -- Pilih Barang -- ",-1)),(l(!0),d(x,null,f(r.products,a=>(l(),d("option",{key:a.id,value:a.id},o(a.code)+" - "+o(a.name),9,O))),128))],512),[[P,n(g).product_id]])]),t("div",W,[y(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>n(g).start_date=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700"},null,512),[[k,n(g).start_date]]),y(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>n(g).end_date=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700"},null,512),[[k,n(g).end_date]]),t("button",{onClick:v,class:"px-4 font-bold text-white transition bg-purple-600 rounded-lg shadow hover:bg-purple-700"}," Cek ")])])]),r.product&&r.data.length>0?(l(),d("div",q,[t("div",K,[t("div",{class:S(["relative flex flex-col justify-between p-5 overflow-hidden text-white shadow-lg rounded-2xl",r.summary.trend>0?"bg-red-500":r.summary.trend<0?"bg-green-500":"bg-gray-500"])},[t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs font-bold tracking-widest uppercase opacity-80"}," Tren Harga ",-1)),t("h3",Q,o(r.summary.trend>0?"NAIK":r.summary.trend<0?"TURUN":"STABIL"),1),t("p",G,o(r.summary.trend>0?"+":"")+o(u(r.summary.trend)),1)]),t("div",$,[r.summary.trend>0?(l(),d("svg",J,[...e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)])])):r.summary.trend<0?(l(),d("svg",X,[...e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)])])):(l(),d("svg",Y,[...e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14"},null,-1)])]))])],2),t("div",Z,[e[12]||(e[12]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Harga Terendah ",-1)),t("p",tt,o(u(r.summary.min)),1)]),t("div",et,[e[13]||(e[13]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Harga Tertinggi ",-1)),t("p",rt,o(u(r.summary.max)),1)]),t("div",at,[e[14]||(e[14]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Harga Rata-rata ",-1)),t("p",st,o(u(r.summary.avg)),1)])]),t("div",ot,[e[15]||(e[15]=t("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"}," Grafik Fluktuasi Harga Beli ",-1)),c(n(M),{type:"line",height:"350",options:B.value,series:C.value},null,8,["options","series"])]),t("div",dt,[e[17]||(e[17]=t("div",{class:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},[t("h3",{class:"font-bold text-gray-800 dark:text-white"}," Riwayat Transaksi Pembelian ")],-1)),t("table",lt,[e[16]||(e[16]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Tanggal"),t("th",{class:"px-6 py-3"},"Supplier"),t("th",{class:"px-6 py-3"},"No. Invoice"),t("th",{class:"px-6 py-3 text-center"},"Qty Beli"),t("th",{class:"px-6 py-3 text-right"}," Harga Satuan ")])],-1)),t("tbody",it,[(l(!0),d(x,null,f(r.data,(a,j)=>(l(),d("tr",{key:j,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",nt,o(p(a.transaction_date)),1),t("td",gt,o(a.supplier_name),1),t("td",ut,o(a.reference_no),1),t("td",ct,o(a.quantity),1),t("td",pt,o(u(a.purchase_price)),1)]))),128))])])])])):r.product&&r.data.length===0?(l(),d("div",mt,[...e[18]||(e[18]=[t("p",{class:"text-gray-500"}," Belum ada riwayat pembelian untuk produk ini dalam periode tersebut. ",-1)])])):(l(),d("div",yt,[...e[19]||(e[19]=[t("div",{class:"flex items-center justify-center w-16 h-16 mb-4 bg-gray-200 rounded-full"},[t("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),t("p",{class:"text-gray-500"}," Pilih produk di atas untuk melihat analisa harga. ",-1)])]))])]),_:1})],64))}};export{_t as default};
