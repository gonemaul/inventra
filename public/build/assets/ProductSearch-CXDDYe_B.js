import{x as h,z as p,E as b,g as s,o,b as e,i as d,k,A as w,F as _,q as C,t as l,n as B,P as I}from"./app-CGM16V_A.js";const z={class:"relative z-30 w-full"},F={class:"relative rounded-lg shadow-sm"},M={class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},j={key:0,class:"w-6 h-6 text-indigo-500 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},D={key:1,class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},L={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},R={key:0,class:"absolute w-full mt-2 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-2xl max-h-80 ring-1 ring-black ring-opacity-5"},N=["onClick"],P={class:"flex gap-2"},S={class:"flex items-center justify-center flex-shrink-0 w-12 h-12 overflow-hidden bg-gray-100 border border-gray-200 rounded-md shadow-sm group-hover:border-indigo-200"},V=["src"],A={key:1,class:"text-sm font-bold text-gray-400 group-hover:text-indigo-500"},q={class:"flex-1 min-w-0"},E={class:"text-sm font-bold text-gray-800 truncate group-hover:text-indigo-700"},H={class:"flex items-center mt-0.5 space-x-2"},T={class:"bg-gray-100 text-gray-600 text-[10px] font-mono px-1.5 py-0.5 rounded border border-gray-200"},U={class:"flex justify-between"},$={class:"text-right"},K={class:"font-mono text-sm font-bold text-indigo-600"},G={key:0,class:"text-[10px] text-red-600 font-bold uppercase mt-1"},J={key:1,class:"absolute w-full p-4 mt-2 text-sm text-center text-gray-500 bg-white border border-gray-200 rounded-lg shadow-lg"},W={__name:"ProductSearch",props:{searchResults:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},emits:["search","add"],setup(i,{expose:m,emit:x}){const u=x,a=h(""),c=h(null);p(a,n=>{u("search",n)});const f=n=>{u("add",n),a.value=""},g=()=>{I(()=>{c.value&&c.value.focus()})};m({focusInput:g});const y=n=>n?n.substring(0,2).toUpperCase():"??",v=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n);return b(()=>{g()}),(n,r)=>(o(),s("div",z,[e("div",F,[e("div",M,[i.isLoading?(o(),s("svg",j,[...r[2]||(r[2]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(o(),s("svg",D,[...r[3]||(r[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])]))]),k(e("input",{ref_key:"searchInput",ref:c,type:"text","onUpdate:modelValue":r[0]||(r[0]=t=>a.value=t),class:"w-full py-4 pl-12 pr-4 text-lg placeholder-gray-400 transition duration-150 ease-in-out border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Scan Barcode atau Ketik Nama Produk...",autocomplete:"off"},null,512),[[w,a.value]]),a.value?(o(),s("div",L,[e("button",{onClick:r[1]||(r[1]=t=>a.value=""),class:"text-gray-400 hover:text-gray-600 focus:outline-none"},[...r[4]||(r[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):d("",!0)]),i.searchResults.length>0&&a.value?(o(),s("div",R,[e("ul",null,[(o(!0),s(_,null,C(i.searchResults,t=>(o(),s("li",{key:t.id,onClick:O=>f(t),class:"items-center px-4 py-3 space-y-2 transition duration-150 ease-in-out border-b border-gray-100 cursor-pointer group hover:bg-indigo-50 last:border-b-0"},[e("div",P,[e("div",S,[t.image?(o(),s("img",{key:0,src:t.image,class:"object-cover w-full h-full"},null,8,V)):(o(),s("span",A,l(y(t.name)),1))]),e("div",q,[e("div",E,l(t.name),1),e("div",H,[e("span",T,l(t.code),1)])])]),e("div",U,[e("span",{class:B(["text-xs text-gray-500",parseFloat(t.stock)<=0?"text-red-500 font-bold":""])}," Stok: "+l(t.stock)+" "+l(t.unit),3),e("div",$,[e("div",K,l(v(t.price)),1),parseFloat(t.stock)<=0?(o(),s("div",G," Habis ")):d("",!0)])])],8,N))),128))])])):d("",!0),a.value&&i.searchResults.length===0&&!i.isLoading?(o(),s("div",J," Produk tidak ditemukan. ")):d("",!0)]))}};export{W as default};
