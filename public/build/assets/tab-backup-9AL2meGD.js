import{x as p,u as x,g as s,o as a,b as e,i as b,k,B as w,F as g,q as m,t as n,f as h,d as i,m as _}from"./app-Bgy6qXfz.js";const D={class:"p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700"},I={class:"grid grid-cols-1 gap-8 md:grid-cols-2"},T={class:"space-y-4"},S=["value"],B=["disabled"],M={class:"pl-8 space-y-4 border-l border-gray-200 dark:border-gray-700"},P={key:0,class:"w-full bg-gray-200 rounded-full h-2.5"},V=["disabled"],j={key:0,class:"p-4 mt-6 border border-red-200 rounded-lg bg-red-50"},C={class:"overflow-y-auto text-xs text-red-600 list-disc list-inside max-h-32"},N={__name:"tab-backup",props:{errors:Object},setup(F){const f=[{label:"Kategori Produk",value:"categories"},{label:"Data Produk",value:"products"}],l=p(""),d=p(null),r=x({type:"",file:null}),c=()=>{if(!l.value)return alert("Pilih jenis data dulu!");window.location.href=route("import.template",{type:l.value})},y=()=>{!l.value||!d.value.files[0]||(r.type=l.value,r.file=d.value.files[0],r.post(route("import.store"),{onSuccess:()=>{r.reset(),d.value.value=null},onError:()=>{}}))};return(u,t)=>(a(),s("div",D,[t[8]||(t[8]=e("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"}," Import Data Masal ",-1)),e("div",I,[e("div",T,[e("div",null,[t[2]||(t[2]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700 dark:text-gray-300"},"1. Pilih Data Target",-1)),k(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700"},[t[1]||(t[1]=e("option",{value:"",disabled:""},"-- Pilih Data --",-1)),(a(),s(g,null,m(f,o=>e("option",{key:o.value,value:o.value},n(o.label),9,S)),64))],512),[[w,l.value]])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700 dark:text-gray-300"},"2. Unduh Template",-1)),e("button",{onClick:c,disabled:!l.value,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-700 transition bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 disabled:opacity-50"},[...t[3]||(t[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),h(" Download Template Excel ",-1)])],8,B),t[5]||(t[5]=e("p",{class:"mt-1 text-xs text-gray-500"}," Isi data sesuai kolom di template. Jangan ubah judul kolom. ",-1))])]),e("div",M,[e("div",null,[t[6]||(t[6]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700 dark:text-gray-300"},"3. Upload File (.xlsx)",-1)),e("input",{type:"file",ref_key:"fileInput",ref:d,accept:".xlsx, .xls, .csv",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-lime-50 file:text-lime-700 hover:file:bg-lime-100"},null,512)]),i(r).progress?(a(),s("div",P,[e("div",{class:"bg-lime-600 h-2.5 rounded-full",style:_({width:i(r).progress.percentage+"%"})},null,4)])):b("",!0),e("button",{onClick:y,disabled:i(r).processing||!l.value,class:"w-full py-2 font-bold text-white transition rounded-lg shadow bg-lime-600 hover:bg-lime-700 disabled:opacity-50"},n(i(r).processing?"Sedang Memproses...":"Mulai Import"),9,V)])]),u.$page.props.errors.import_errors?(a(),s("div",j,[t[7]||(t[7]=e("h4",{class:"mb-2 text-sm font-bold text-red-700"}," ⚠️ Gagal Import (Semua data dibatalkan): ",-1)),e("ul",C,[(a(!0),s(g,null,m(u.$page.props.errors.import_errors,(o,v)=>(a(),s("li",{key:v},n(o),1))),128))])])):b("",!0)]))}};export{N as default};
