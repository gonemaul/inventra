import{u as S,c as C,o as i,w as V,b as t,g as n,i as B,k as u,d as l,F as b,q as y,t as p,B as f,A as x,s as w}from"./app-CKedD50u.js";import{_ as D}from"./Modal-gP53gBdn.js";import{u as M}from"./useActionLoading-BwM9d4Sa.js";const U={class:"w-full p-6 bg-white shadow-xl rounded-2xl dark:bg-gray-800"},$={class:"flex items-center justify-between pb-4 mb-6 border-b border-gray-100 dark:border-gray-700"},j={class:"space-y-4"},A={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},T=["value"],R={key:0},L=["value"],N=["value"],O={class:"flex items-center gap-2"},I={class:"relative w-full"},q={class:"relative w-full"},E={class:"flex gap-3"},G={class:"flex-1"},P={class:"relative"},W={class:"text-[10px] text-gray-400 mt-1 text-left"},z={class:"flex-1"},H={class:"relative"},J={class:"text-[10px] text-gray-400 mt-1 text-left"},K={class:"flex items-center justify-between pt-4 mt-8 border-t border-gray-100 dark:border-gray-700"},Q={class:"flex gap-2"},X=["disabled"],te={__name:"modalFilter",props:{show:{type:Boolean,default:!1},filters:Object,dropdowns:Object},emits:["close"],setup(m,{emit:h}){const d=m,c=h,s=S({status:d.filters.status||"",supplier_id:d.filters.supplier_id||"",user_id:d.filters.user_id||"",min_date:d.filters.min_date||"",max_date:d.filters.max_date||"",min_total:d.filters.min_total||"",max_total:d.filters.max_total||""}),{isActionLoading:g}=M();function k(a){return Object.entries(a).reduce((e,[r,o])=>(typeof o=="boolean"&&o===!1||o!=null&&o!==""&&(Array.isArray(o)&&o.length===0||(e[r]=o)),e),{})}function _(){const a=s.data(),r={...{search:d.filters.search||""},...a},o=k(r);g.value=!0,w.get(route("purchases.index"),o,{preserveState:!0,replace:!0,only:["purchases","filters"],onFinish:()=>{g.value=!1,c("close")}})}function F(){const a=k({search:d.filters.search||""});g.value=!0,w.get(route("purchases.index"),a,{preserveState:!0,replace:!0,onFinish:()=>{g.value=!1,c("close"),s.reset("status","supplier_id","user_id","min_date","max_date","min_total","max_total")}})}const v=a=>a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a):"0";return(a,e)=>(i(),C(D,{show:m.show,onClose:e[9]||(e[9]=r=>a.$emit("close")),maxWidth:"lg"},{default:V(()=>[t("div",U,[t("div",$,[e[11]||(e[11]=t("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"}," Filter Data Pembelian ",-1)),t("button",{onClick:e[0]||(e[0]=r=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",j,[t("div",A,[t("div",null,[e[13]||(e[13]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Status",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>l(s).status=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[e[12]||(e[12]=t("option",{value:""},"Semua Status",-1)),(i(!0),n(b,null,y(m.dropdowns.purchaseStatuses,r=>(i(),n("option",{key:r,value:r},p(r.charAt(0).toUpperCase()+r.slice(1)),9,T))),128))],512),[[f,l(s).status]])]),m.dropdowns.users?(i(),n("div",R,[e[15]||(e[15]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Dibuat Oleh",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>l(s).user_id=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[e[14]||(e[14]=t("option",{value:""},"Semua Staff",-1)),(i(!0),n(b,null,y(m.dropdowns.users,r=>(i(),n("option",{key:r.id,value:r.id},p(r.name),9,L))),128))],512),[[f,l(s).user_id]])])):B("",!0)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Supplier",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>l(s).supplier_id=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[e[16]||(e[16]=t("option",{value:""},"Semua Supplier",-1)),(i(!0),n(b,null,y(m.dropdowns.suppliers,r=>(i(),n("option",{key:r.id,value:r.id},p(r.name),9,N))),128))],512),[[f,l(s).supplier_id]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Tanggal Transaksi",-1)),t("div",O,[t("div",I,[u(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=r=>l(s).min_date=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Dari"},null,512),[[x,l(s).min_date]])]),e[18]||(e[18]=t("span",{class:"text-gray-400"},"-",-1)),t("div",q,[u(t("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=r=>l(s).max_date=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Sampai"},null,512),[[x,l(s).max_date]])])])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Total Nominal (Grand Total)",-1)),t("div",E,[t("div",G,[t("div",P,[e[20]||(e[20]=t("span",{class:"absolute text-xs text-gray-500 left-3 top-2"},"Rp",-1)),u(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=r=>l(s).min_total=r),class:"w-full py-2 pl-8 pr-3 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Min"},null,512),[[x,l(s).min_total,void 0,{number:!0}]])]),t("p",W,p(v(l(s).min_total)),1)]),e[22]||(e[22]=t("span",{class:"self-start mt-2 text-gray-400"},"-",-1)),t("div",z,[t("div",H,[e[21]||(e[21]=t("span",{class:"absolute text-xs text-gray-500 left-3 top-2"},"Rp",-1)),u(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=r=>l(s).max_total=r),class:"w-full py-2 pl-8 pr-3 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Max"},null,512),[[x,l(s).max_total,void 0,{number:!0}]])]),t("p",J,p(v(l(s).max_total)),1)])])])]),t("div",K,[t("button",{type:"button",onClick:F,class:"text-sm font-medium text-gray-500 transition hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}," Reset Filter "),t("div",Q,[t("button",{onClick:e[8]||(e[8]=r=>a.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600"}," Batal "),t("button",{onClick:_,disabled:l(s).processing,class:"px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm bg-lime-600 hover:bg-lime-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lime-200 dark:shadow-none"},p(l(s).processing?"Memuat...":"Terapkan Filter"),9,X)])])])]),_:1},8,["show"]))}};export{te as default};
