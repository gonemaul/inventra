import{u as V,C as x,l as d,o as i,f as e,m as g,t as o,k as I,e as y,g as l,F as j,H as F,n as b,j as P}from"./vendor-core-ConwodqI.js";import{u as B}from"./useActionLoading-BVuW09Mi.js";import{_ as f}from"./InputRupiah-C3RpmbGD.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";const M={class:"flex-1 p-4 space-y-6 overflow-y-auto custom-scrollbar"},N={class:"flex items-center gap-3 pb-3 border-b border-gray-100 dark:border-gray-700"},D={class:"relative flex-shrink-0 w-20 h-20 overflow-hidden bg-gray-100 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600"},S=["src"],A={class:"flex-1 min-w-0"},H={class:"flex items-center mb-1"},z={class:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-1.5 py-0.5 rounded text-[10px] font-mono font-bold"},L={class:"text-[10px] font-medium text-gray-500 dark:text-gray-400 mb-1"},$={key:0},R={class:"text-sm font-bold leading-snug text-gray-900 dark:text-white line-clamp-2"},U={class:"space-y-5"},E={class:"relative p-3 border border-yellow-100 bg-yellow-50 dark:bg-yellow-900/10 rounded-xl dark:border-yellow-900/30"},O={class:"block text-[10px] font-bold text-yellow-700 dark:text-yellow-500 uppercase tracking-wider mb-1"},T={key:0,class:"text-[10px] text-red-500 mt-1"},G={class:"relative p-3 border bg-lime-50 dark:bg-lime-900/10 rounded-xl border-lime-100 dark:border-lime-900/30"},J={class:"block text-[10px] font-bold text-lime-700 dark:text-lime-500 uppercase tracking-wider mb-1"},q={key:0,class:"text-[10px] text-red-500 mt-1"},K={class:"flex gap-2 pb-2 overflow-x-auto no-scrollbar"},Q=["onClick"],W={class:"flex flex-col"},X={class:"text-right"},Y={class:"text-[10px] text-gray-400 uppercase font-bold block mb-0.5"},Z={class:"flex gap-3 p-4 bg-white border-t border-gray-200 dark:border-gray-700 dark:bg-customBg-tableDark"},ee=["disabled"],te={key:0},re={key:1},oe={__name:"PriceAdjustmentSheet",props:{product:Object},emits:["close","success"],setup(s,{emit:h}){const u=s;console.log(u.product);const k=h,{isActionLoading:m}=B(),t=V({id:u.product?.id,type:"price",purchase_price:u.product?.purchase_price||0,selling_price:u.product?.selling_price||0}),p=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n||0),c=x(()=>(parseInt(t.selling_price)||0)-(parseInt(t.purchase_price)||0)),_=x(()=>{const n=parseInt(t.selling_price)||0;return n<=0?0:(c.value/n*100).toFixed(1)}),v=n=>{const r=parseInt(t.purchase_price)||0;if(r<=0)return;const a=r*(n/100);t.selling_price=Math.ceil(r+a)},w=()=>{m.value=!0,t.put(route("products.update",u.product?.id),{onSuccess:()=>k("success"),onFinish:()=>m.value=!1,preserveScroll:!0})};return(n,r)=>(i(),d("form",{onSubmit:P(w,["prevent"]),class:"flex flex-col h-full bg-white dark:bg-customBg-tableDark"},[e("div",M,[e("div",N,[e("div",D,[s.product.image_url?(i(),d("img",{key:0,src:s.product.image_url,loading:"lazy",decoding:"async",onerror:"this.style.display='none'",onload:"this.classList.remove('opacity-0')",class:"absolute inset-0 z-10 object-cover w-full h-full opacity-0"},null,8,S)):g("",!0),r[3]||(r[3]=e("div",{class:"absolute inset-0 z-0 w-full h-full flex items-center justify-center text-[10px] text-gray-400"}," NO IMG ",-1))]),e("div",A,[e("div",H,[e("span",z,o(s.product.code),1)]),e("div",L,[I(o(s.product.category?.name)+" ",1),s.product.product_type?(i(),d("span",$," | "+o(s.product.product_type?.name),1)):g("",!0)]),e("h2",R,o(s.product.name),1)])]),e("div",U,[e("div",E,[e("label",O," Harga Beli (HPP) | "+o(p(s.product?.purchase_price)),1),y(f,{modelValue:l(t).purchase_price,"onUpdate:modelValue":r[0]||(r[0]=a=>l(t).purchase_price=a),placeholder:"0",class:"w-full p-0 text-xl font-black text-left text-gray-800 placeholder-gray-300 bg-transparent border-none dark:text-white focus:ring-0"},null,8,["modelValue"]),l(t).errors.purchase_price?(i(),d("p",T,o(l(t).errors.purchase_price),1)):g("",!0)]),e("div",G,[e("label",J," Harga Jual | "+o(p(s.product?.selling_price)),1),y(f,{modelValue:l(t).selling_price,"onUpdate:modelValue":r[1]||(r[1]=a=>l(t).selling_price=a),placeholder:"0",class:"w-full p-0 text-xl font-black text-left text-gray-800 placeholder-gray-300 bg-transparent border-none dark:text-white focus:ring-0"},null,8,["modelValue"]),l(t).errors.selling_price?(i(),d("p",q,o(l(t).errors.selling_price),1)):g("",!0)])]),e("div",null,[r[4]||(r[4]=e("label",{class:"text-[10px] text-gray-400 font-bold uppercase mb-2 block"},"Set Profit Cepat (%) | Markup",-1)),e("div",K,[(i(),d(j,null,F([10,20,30,50,100],a=>e("button",{key:a,type:"button",onClick:se=>v(a),class:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-600 text-xs font-bold text-gray-600 dark:text-gray-300 hover:bg-lime-50 hover:border-lime-200 hover:text-lime-600 transition whitespace-nowrap"}," +"+o(a)+"% ",9,Q)),64))])]),e("div",{class:b(["flex items-center justify-between p-4 transition-colors duration-300 border rounded-xl",c.value<0?"bg-red-50 border-red-100 dark:bg-red-900/20 dark:border-red-800":"bg-gray-50 border-gray-100 dark:bg-gray-700/50 dark:border-gray-600"])},[e("div",W,[e("span",{class:b(["text-[10px] font-bold uppercase tracking-wider",c.value<0?"text-red-500":"text-gray-400"])},o(c.value<0?"Potensi Rugi":"Estimasi Profit"),3),e("span",{class:b(["text-xl font-black",c.value<0?"text-red-600":"text-gray-800 dark:text-white"])},o(p(c.value)),3)]),e("div",X,[e("span",Y,"Target Margin | "+o(s.product.current_margin.percent)+" % ("+o(p(s.product.current_margin.nominal))+") ",1),e("span",{class:b(["inline-block px-2 py-1 text-sm font-bold rounded",c.value<0?"bg-red-200 text-red-700":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300"])},o(_.value)+"% ",3)])],2)]),e("div",Z,[e("button",{type:"button",onClick:r[2]||(r[2]=a=>n.$emit("close")),class:"w-1/3 px-4 py-3 text-sm font-bold text-gray-700 transition bg-gray-100 rounded-xl hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"}," Batal "),e("button",{type:"submit",disabled:l(t).processing,class:"flex justify-center w-2/3 px-4 py-3 text-sm font-bold text-white transition transform shadow-lg bg-lime-600 rounded-xl hover:bg-lime-700 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed"},[l(t).processing?(i(),d("span",te,"Menyimpan...")):(i(),d("span",re,"Update Harga"))],8,ee)])],32))}},ue=C(oe,[["__scopeId","data-v-7fa513a6"]]);export{ue as default};
