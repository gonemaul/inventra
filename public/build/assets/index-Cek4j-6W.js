import{_ as w}from"./AuthenticatedLayout-BlgKae2S.js";import{v as d,J as k,K as h,D as _,l as p,o as m,e as o,g as $,i as C,w as j,f as t,F as b,I as S,n as B,t as u,p as D,W as T}from"./vendor-core-By7Plnkm.js";import{_ as V}from"./Filter-D5RrVPYj.js";import F from"./modalFilter-Bvlv84N0.js";import{d as P}from"./vendor-common-GpUWqhKr.js";import N from"./PurchaseStatsGrid-DV6l_Xfc.js";import O from"./PurchaseTransactionList-DCpwze6A.js";import E from"./SalesChart-C5bNf5GX.js";import"./useSidebar-CpEDRVzi.js";import"./useActionLoading-BREuot5v.js";import"./vendor-charts-Bw6UNgWf.js";import"./TextInput-B-__nwMf.js";import"./PrimaryButton-BZrDt8zt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BottomSheetFilter-BLYHt_YO.js";const q={class:"w-full min-h-screen space-y-6 pb-20"},z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},A={class:"lg:col-span-2"},G={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col justify-center items-center text-center"},H={class:"flex flex-wrap gap-2 justify-center"},J={class:"flex flex-col gap-4 mt-4"},K={class:"flex flex-col md:flex-row justify-between items-center gap-4"},L={class:"flex p-1 space-x-1 bg-gray-100 dark:bg-gray-800 rounded-xl overflow-x-auto w-full md:w-auto"},M=["onClick"],R={class:"w-full md:w-auto flex gap-2"},U={class:"mb-4 flex items-center justify-between"},W={class:"text-xs text-gray-500"},Q={key:0,class:"flex justify-center mt-8 gap-2"},X=["disabled"],Y={class:"px-4 py-2 text-gray-500 text-sm flex items-center"},Z=["disabled"],ge={__name:"index",props:{dropdowns:Object,filters:Object,purchases:Object,summary:Object},setup(s){const i=s,c=d(i.filters.search||""),n=d(!1),f=d("all"),g=[{id:"all",label:"Semua"},{id:"process",label:"Dalam Proses",status:["draft","dipesan","dikirim","checking"]},{id:"completed",label:"Selesai",status:["selesai"]}],x=r=>{if(f.value=r,l.value.page=1,r==="all")delete l.value.status_in;else{const e=g.find(a=>a.id===r);e&&e.status&&(l.value.status_in=e.status)}},l=d({search:i.filters.search||"",sort:i.filters.sort||"transaction_date",order:i.filters.order||"desc",page:i.purchases.current_page||1}),v=P.throttle(()=>{const r={...l.value};r.search||delete r.search,k.get(route("purchases.index"),r,{preserveState:!0,preserveScroll:!0,replace:!0,only:["purchases","filters","summary"]})},300);h(l,v,{deep:!0}),h(c,r=>{l.value.search=r,l.value.page=1});const y=_(()=>i.summary?.chart||{labels:[],values:[]});return(r,e)=>(m(),p(b,null,[o($(C),{title:"Pembelian"}),o(w,{headerTitle:"Dashboard Procurement"},{default:j(()=>[t("div",q,[o(N,{summary:s.summary},null,8,["summary"]),t("div",z,[t("div",A,[o(E,{data:y.value,title:"Grafik Belanja 12 Bulan Terakhir",color:"#84cc16"},null,8,["data"])]),t("div",G,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 font-bold uppercase mb-2"},"Shortcut Filter",-1)),t("div",H,[t("button",{onClick:e[0]||(e[0]=a=>n.value=!0),class:"px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold hover:bg-indigo-100 transition"}," ðŸ” Cari per Supplier ")])])]),t("div",J,[t("div",K,[t("div",L,[(m(),p(b,null,S(g,a=>t("button",{key:a.id,onClick:I=>x(a.id),class:B(["px-4 py-2 text-sm font-bold rounded-lg transition-all whitespace-nowrap flex-1",f.value===a.id?"bg-white dark:bg-gray-700 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400"])},u(a.label),11,M)),64))]),t("div",R,[o(V,{class:"w-full",filters:s.filters,modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),onShowFilter:e[2]||(e[2]=a=>n.value=!0),filterCount:0,actions:[{route:r.route("purchases.create"),buttonText:"+ RAB Baru"}]},null,8,["filters","modelValue","actions"])])])]),o(F,{show:n.value,onClose:e[3]||(e[3]=a=>n.value=!1),filters:s.filters,dropdowns:s.dropdowns},null,8,["show","filters","dropdowns"]),t("div",null,[t("div",U,[e[7]||(e[7]=t("h2",{class:"text-lg font-bold text-gray-800 dark:text-white"}," Daftar Transaksi ",-1)),t("span",W," Total "+u(s.purchases.total)+" Data ",1)]),o(O,{purchases:s.purchases.data},null,8,["purchases"]),s.purchases.last_page>1?(m(),p("div",Q,[t("button",T(s.purchases.links[0],{disabled:!s.purchases.prev_page_url,onClick:e[4]||(e[4]=a=>l.value.page--),class:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700"})," Prev ",16,X),t("span",Y," Hal "+u(s.purchases.current_page)+" / "+u(s.purchases.last_page),1),t("button",{disabled:!s.purchases.next_page_url,onClick:e[5]||(e[5]=a=>l.value.page++),class:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700"}," Next ",8,Z)])):D("",!0)])])]),_:1})],64))}};export{ge as default};
