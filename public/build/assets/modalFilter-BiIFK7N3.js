import{u as z,C as B,d as M,o as a,w as T,f as e,y as i,g as l,l as d,F as x,H as b,t as u,K as p,z as c,n as _,m as h,I as w}from"./vendor-core-CJbEklrS.js";import{u as D}from"./useActionLoading-FfnGJtHr.js";import{B as A}from"./BottomSheetFilter-DCuDmFac.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";const j={class:"flex-1 space-y-8 o custom-scrollbar"},N={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-x-6 gap-y-4"},$=["value"],I=["disabled"],P={value:""},R=["value"],J=["value"],K=["value"],O={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},L=["value"],Z=["value"],E={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},q={class:"col-span-2"},G={class:"flex gap-2"},Q={class:"flex gap-2"},W={class:""},X={class:"text-[10px] text-gray-400 mt-1 text-left"},Y={class:"text-[10px] text-gray-400 mt-1 text-left"},tt={class:"flex gap-2"},et={class:""},rt={class:"text-[10px] text-gray-400 mt-1 text-left"},st={class:""},lt={class:"text-[10px] text-gray-400 mt-1 text-left"},ot={class:"p-4 border border-gray-100 bg-gray-50 dark:bg-gray-700/30 rounded-xl dark:border-gray-600"},at={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},it={class:"sm:col-span-2"},dt={class:"flex gap-2"},nt=["value"],ut={class:"flex overflow-hidden bg-white border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600"},pt={class:"flex flex-col-reverse items-center justify-between gap-4 px-5 py-3 mt-3 border-t border-gray-100 rounded-xl sm:flex-row dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800 sm:gap-0"},mt={class:"flex w-full gap-3 sm:w-auto"},xt=["disabled"],bt={key:0,class:"w-4 h-4 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},gt={__name:"modalFilter",props:{show:{type:Boolean,default:!1},filters:Object,dropdowns:Object},emits:["close"],setup(m,{emit:S}){const o=m,v=S,U=[{value:"created_at",label:"Tanggal Dibuat"},{value:"name",label:"Nama Produk"},{value:"stock",label:"Jumlah Stok"},{value:"selling_price",label:"Harga Jual"},{value:"purchase_price",label:"Harga Beli"},{value:"total_sold_all_time",label:"Terjual"}],s=z({category_id:o.filters.category_id||"",brand_id:o.filters.brand_id||"",supplier_id:o.filters.supplier_id||"",product_type_id:o.filters.product_type_id||"",unit_id:o.filters.unit_id||"",size_id:o.filters.size_id||"",min_stock:o.filters.stock_min||"",max_stock:o.filters.stock_max||"",min_price:o.filters.price_min||"",max_price:o.filters.price_max||"",min_cost:o.filters.cost_min||"",max_cost:o.filters.cost_max||"",status:o.filters.status||"",trashed:o.filters.trashed||"",sort:o.filters.sort||"created_at",order:o.filters.order||"desc"}),{isActionLoading:g}=D(),k=B(()=>o.dropdowns.types.filter(n=>n.category_id===s.category_id));function V(n){return Object.entries(n).reduce((t,[r,f])=>(f!=null&&f!==""&&(t[r]=f),t),{})}function F(){const t={...o.filters.search?{search:o.filters.search}:{},category_id:s.category_id,brand_id:s.brand_id,supplier_id:s.supplier_id,product_type_id:s.product_type_id,unit_id:s.unit_id,size_id:s.size_id,status:s.status,trashed:s.trashed,sort:s.sort,order:s.order,stock_min:s.min_stock,stock_max:s.max_stock,price_min:s.min_price,price_max:s.max_price,cost_min:s.min_cost,cost_max:s.max_cost},r=V(t);g.value=!0,w.get(route("products.index"),r,{preserveState:!0,replace:!0,onFinish:()=>{g.value=!1,v("close")}})}function C(){const n=o.filters.search?{search:o.filters.search}:{};g.value=!0,w.get(route("products.index"),n,{preserveState:!0,replace:!0,onFinish:()=>{g.value=!1,s.reset(),s.defaults(),v("close")}})}const y=n=>n?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n):"0";return(n,t)=>(a(),M(A,{show:m.show,title:"produk",onClose:t[18]||(t[18]=r=>n.$emit("close"))},{default:T(()=>[e("div",j,[e("section",null,[t[26]||(t[26]=e("h3",{class:"pb-1 mb-3 text-xs font-bold tracking-wider text-gray-400 uppercase border-b border-gray-100 dark:border-gray-700"}," Klasifikasi Produk ",-1)),e("div",N,[e("div",null,[t[20]||(t[20]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Kategori",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>l(s).category_id=r),class:"form-select"},[t[19]||(t[19]=e("option",{value:""},"Semua Kategori",-1)),(a(!0),d(x,null,b(m.dropdowns.categories,r=>(a(),d("option",{key:r.id,value:r.id},u(r.name),9,$))),128))],512),[[p,l(s).category_id]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Tipe Produk",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>l(s).product_type_id=r),class:"form-select",disabled:k.value.length===0},[e("option",P,u(k.value.length===0?"Tidak Ada Tipe":"Semua Tipe"),1),(a(!0),d(x,null,b(k.value,r=>(a(),d("option",{key:r.id,value:r.id},u(r.name),9,R))),128))],8,I),[[p,l(s).product_type_id]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Merk / Brand",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>l(s).brand_id=r),class:"form-select"},[t[22]||(t[22]=e("option",{value:""},"Semua Merk",-1)),(a(!0),d(x,null,b(m.dropdowns.brands,r=>(a(),d("option",{key:r.id,value:r.id},u(r.name),9,J))),128))],512),[[p,l(s).brand_id]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Supplier",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>l(s).supplier_id=r),class:"form-select"},[t[24]||(t[24]=e("option",{value:""},"Semua Supplier",-1)),(a(!0),d(x,null,b(m.dropdowns.suppliers,r=>(a(),d("option",{key:r.id,value:r.id},u(r.name),9,K))),128))],512),[[p,l(s).supplier_id]])])])]),e("section",null,[t[31]||(t[31]=e("h3",{class:"pb-1 mb-3 text-xs font-bold tracking-wider text-gray-400 uppercase border-b border-gray-100 dark:border-gray-700"}," Spesifikasi Fisik ",-1)),e("div",O,[e("div",null,[t[28]||(t[28]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Satuan (Unit)",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>l(s).unit_id=r),class:"form-select"},[t[27]||(t[27]=e("option",{value:""},"Semua Satuan",-1)),(a(!0),d(x,null,b(m.dropdowns.units,r=>(a(),d("option",{key:r.id,value:r.id},u(r.name),9,L))),128))],512),[[p,l(s).unit_id]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Ukuran (Size)",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>l(s).size_id=r),class:"form-select"},[t[29]||(t[29]=e("option",{value:""},"Semua Ukuran",-1)),(a(!0),d(x,null,b(m.dropdowns.sizes,r=>(a(),d("option",{key:r.id,value:r.id},u(r.name),9,Z))),128))],512),[[p,l(s).size_id]])])])]),e("section",null,[t[38]||(t[38]=e("h3",{class:"pb-1 mb-3 text-xs font-bold tracking-wider text-gray-400 uppercase border-b border-gray-100 dark:border-gray-700"}," Rentang Nilai ",-1)),e("div",E,[e("div",q,[t[33]||(t[33]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Jumlah Stok",-1)),e("div",G,[i(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=r=>l(s).min_stock=r),placeholder:"Min",class:"px-1 text-center form-input"},null,512),[[c,l(s).min_stock]]),t[32]||(t[32]=e("span",{class:"self-center text-gray-400"},"-",-1)),i(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=r=>l(s).max_stock=r),placeholder:"Max",class:"px-1 text-center form-input"},null,512),[[c,l(s).max_stock]])])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Harga Jual",-1)),e("div",Q,[e("div",W,[i(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=r=>l(s).min_price=r),placeholder:"Min",class:"px-1 text-center form-input"},null,512),[[c,l(s).min_price]]),e("p",X,u(y(l(s).min_price)),1)]),t[34]||(t[34]=e("span",{class:"self-start mt-2 text-gray-400"},"-",-1)),e("div",null,[i(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=r=>l(s).max_price=r),placeholder:"Max",class:"px-1 text-center form-input"},null,512),[[c,l(s).max_price]]),e("p",Y,u(y(l(s).max_price)),1)])])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Harga Beli",-1)),e("div",tt,[e("div",et,[i(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=r=>l(s).min_cost=r),placeholder:"Min",class:"px-1 text-center form-input"},null,512),[[c,l(s).min_cost]]),e("p",rt,u(y(l(s).min_cost)),1)]),t[36]||(t[36]=e("span",{class:"self-start mt-2 text-gray-400"},"-",-1)),e("div",st,[i(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=r=>l(s).max_cost=r),placeholder:"Max",class:"px-1 text-center form-input"},null,512),[[c,l(s).max_cost]]),e("p",lt,u(y(l(s).max_cost)),1)])])])])]),e("section",ot,[e("div",at,[e("div",null,[t[40]||(t[40]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Status Produk",-1)),i(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>l(s).status=r),class:"form-select"},[...t[39]||(t[39]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"active"},"Aktif (Tampil)",-1),e("option",{value:"inactive"}," Non-Aktif (Disembunyikan) ",-1)])],512),[[p,l(s).status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Data Terhapus",-1)),i(e("select",{"onUpdate:modelValue":t[13]||(t[13]=r=>l(s).trashed=r),class:"font-medium text-red-600 form-select"},[...t[41]||(t[41]=[e("option",{value:""},"Sembunyikan Sampah",-1),e("option",{value:"with"},"Tampilkan Arsip Sampah",-1),e("option",{value:"only"}," Hanya Sampah (Recovery) ",-1)])],512),[[p,l(s).trashed]])]),e("div",it,[t[44]||(t[44]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Urutkan Data",-1)),e("div",dt,[i(e("select",{"onUpdate:modelValue":t[14]||(t[14]=r=>l(s).sort=r),class:"flex-1 form-select"},[(a(),d(x,null,b(U,r=>e("option",{key:r.value,value:r.value},u(r.label),9,nt)),64))],512),[[p,l(s).sort]]),e("div",ut,[e("button",{type:"button",onClick:t[15]||(t[15]=r=>l(s).order="asc"),class:_(["px-3 py-2 text-xs font-bold transition hover:bg-lime-50 dark:hover:bg-gray-600",l(s).order==="asc"?"bg-lime-500 text-white hover:bg-lime-600":"text-gray-600 dark:text-gray-300"])}," A-Z ",2),t[43]||(t[43]=e("div",{class:"w-px bg-gray-300 dark:bg-gray-600"},null,-1)),e("button",{type:"button",onClick:t[16]||(t[16]=r=>l(s).order="desc"),class:_(["px-3 py-2 text-xs font-bold transition hover:bg-lime-50 dark:hover:bg-gray-600",l(s).order==="desc"?"bg-lime-500 text-white hover:bg-lime-600":"text-gray-600 dark:text-gray-300"])}," Z-A ",2)])])])])])]),e("div",pt,[e("button",{onClick:C,class:"text-xs font-bold text-gray-500 transition border-b border-gray-400 border-dashed dark:text-gray-400 hover:text-red-500 hover:border-red-500"}," Reset ke Default "),e("div",mt,[e("button",{onClick:t[17]||(t[17]=r=>n.$emit("close")),class:"flex-1 sm:flex-none px-5 py-2.5 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-bold text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition"}," Batal "),e("button",{onClick:F,class:"flex-1 sm:flex-none px-8 py-2.5 rounded-xl bg-lime-500 hover:bg-lime-600 text-white font-bold text-sm shadow-md shadow-lime-200 dark:shadow-none transition flex items-center justify-center gap-2",disabled:l(g)},[l(g)?(a(),d("svg",bt,[...t[45]||(t[45]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):h("",!0),t[46]||(t[46]=e("span",null,"Terapkan Filter",-1))],8,xt)])])]),_:1},8,["show"]))}},wt=H(gt,[["__scopeId","data-v-31187993"]]);export{wt as default};
