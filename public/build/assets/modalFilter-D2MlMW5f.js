import{u as S,d as V,o as i,w as B,f as t,l as n,m as U,y as u,g as l,F as b,H as f,t as p,K as y,z as x,I as w}from"./vendor-core-BC1dSzkC.js";import{u as C}from"./useActionLoading-BNGSEwHo.js";import{B as D}from"./BottomSheetFilter-Df-ynfYe.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"w-full p-6 bg-white shadow-xl rounded-2xl dark:bg-gray-800"},T={class:"space-y-4"},A={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},R=["value"],j={key:0},I=["value"],N=["value"],O={class:"flex items-center gap-2"},$={class:"relative w-full"},L={class:"relative w-full"},z={class:"flex gap-3"},E={class:"flex-1"},G={class:"relative"},H={class:"text-[10px] text-gray-400 mt-1 text-left"},K={class:"flex-1"},q={class:"relative"},J={class:"text-[10px] text-gray-400 mt-1 text-left"},P={class:"flex items-center justify-between pt-4 mt-8 border-t border-gray-100 dark:border-gray-700"},Q={class:"flex gap-2"},W=["disabled"],se={__name:"modalFilter",props:{show:{type:Boolean,default:!1},filters:Object,dropdowns:Object},emits:["close"],setup(m,{emit:h}){const d=m,c=h,s=S({status:d.filters.status||"",supplier_id:d.filters.supplier_id||"",user_id:d.filters.user_id||"",min_date:d.filters.min_date||"",max_date:d.filters.max_date||"",min_total:d.filters.min_total||"",max_total:d.filters.max_total||""}),{isActionLoading:g}=C();function k(a){return Object.entries(a).reduce((e,[r,o])=>(typeof o=="boolean"&&o===!1||o!=null&&o!==""&&(Array.isArray(o)&&o.length===0||(e[r]=o)),e),{})}function _(){const a=s.data(),r={...{search:d.filters.search||""},...a},o=k(r);g.value=!0,w.get(route("purchases.index"),o,{preserveState:!0,replace:!0,only:["purchases","filters"],onFinish:()=>{g.value=!1,c("close")}})}function F(){const a=k({search:d.filters.search||""});g.value=!0,w.get(route("purchases.index"),a,{preserveState:!0,replace:!0,onFinish:()=>{g.value=!1,c("close"),s.reset("status","supplier_id","user_id","min_date","max_date","min_total","max_total")}})}const v=a=>a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a):"0";return(a,e)=>(i(),V(D,{show:m.show,onClose:e[8]||(e[8]=r=>a.$emit("close")),title:"pembelian"},{default:B(()=>[t("div",M,[t("div",T,[t("div",A,[t("div",null,[e[10]||(e[10]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Status",-1)),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>l(s).status=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[e[9]||(e[9]=t("option",{value:""},"Semua Status",-1)),(i(!0),n(b,null,f(m.dropdowns.purchaseStatuses,r=>(i(),n("option",{key:r,value:r},p(r.charAt(0).toUpperCase()+r.slice(1)),9,R))),128))],512),[[y,l(s).status]])]),m.dropdowns.users?(i(),n("div",j,[e[12]||(e[12]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Dibuat Oleh",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>l(s).user_id=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[e[11]||(e[11]=t("option",{value:""},"Semua Staff",-1)),(i(!0),n(b,null,f(m.dropdowns.users,r=>(i(),n("option",{key:r.id,value:r.id},p(r.name),9,I))),128))],512),[[y,l(s).user_id]])])):U("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Supplier",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>l(s).supplier_id=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500"},[e[13]||(e[13]=t("option",{value:""},"Semua Supplier",-1)),(i(!0),n(b,null,f(m.dropdowns.suppliers,r=>(i(),n("option",{key:r.id,value:r.id},p(r.name),9,N))),128))],512),[[y,l(s).supplier_id]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Tanggal Transaksi",-1)),t("div",O,[t("div",$,[u(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=r=>l(s).min_date=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Dari"},null,512),[[x,l(s).min_date]])]),e[15]||(e[15]=t("span",{class:"text-gray-400"},"-",-1)),t("div",L,[u(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=r=>l(s).max_date=r),class:"w-full px-3 py-2 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Sampai"},null,512),[[x,l(s).max_date]])])])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block mb-1.5 text-xs font-bold text-gray-500 uppercase dark:text-gray-400"},"Total Nominal (Grand Total)",-1)),t("div",z,[t("div",E,[t("div",G,[e[17]||(e[17]=t("span",{class:"absolute text-xs text-gray-500 left-3 top-2"},"Rp",-1)),u(t("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=r=>l(s).min_total=r),class:"w-full py-2 pl-8 pr-3 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Min"},null,512),[[x,l(s).min_total,void 0,{number:!0}]])]),t("p",H,p(v(l(s).min_total)),1)]),e[19]||(e[19]=t("span",{class:"self-start mt-2 text-gray-400"},"-",-1)),t("div",K,[t("div",q,[e[18]||(e[18]=t("span",{class:"absolute text-xs text-gray-500 left-3 top-2"},"Rp",-1)),u(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=r=>l(s).max_total=r),class:"w-full py-2 pl-8 pr-3 text-sm border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-lime-500 focus:border-lime-500",placeholder:"Max"},null,512),[[x,l(s).max_total,void 0,{number:!0}]])]),t("p",J,p(v(l(s).max_total)),1)])])])]),t("div",P,[t("button",{type:"button",onClick:F,class:"text-xs font-bold text-gray-500 transition border-b border-gray-400 border-dashed dark:text-gray-400 hover:text-red-500 hover:border-red-500"}," Reset Filter "),t("div",Q,[t("button",{onClick:e[7]||(e[7]=r=>a.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600"}," Batal "),t("button",{onClick:_,disabled:l(s).processing,class:"px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm bg-lime-600 hover:bg-lime-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lime-200 dark:shadow-none"},p(l(s).processing?"Memuat...":"Terapkan Filter"),9,W)])])])]),_:1},8,["show"]))}};export{se as default};
