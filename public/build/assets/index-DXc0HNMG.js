import{q as s,C as w,I as F,J as W,v as q,N as J,l as v,o,e as c,g as T,i as Q,w as $,f as r,d as i,m as C,L as X,n as A,F as M,H as B}from"./vendor-core-BC1dSzkC.js";import{d as Y}from"./vendor-common-GpUWqhKr.js";import{u as Z}from"./useActionLoading-BNGSEwHo.js";import{_}from"./AuthenticatedLayout-BqVghQ4K.js";import ee from"./modalFilter-DvuoS5sK.js";import E from"./pagination-CRcCNabH.js";import{_ as te}from"./Filter-CK_f7lh7.js";import{_ as ae}from"./DeleteConfirm-Cbh1lRoe.js";import{_ as oe}from"./ImageModal-Htnhwuyn.js";import{B as re}from"./BottomSheet-fL7Cjms_.js";import le from"./ProductCardList-C3E-fU5P.js";import se from"./ProductCardGrid-CADHCWjr.js";import ne from"./ProductKanbanBoard-BTiK70rP.js";import H from"./EmptyState-Dxth3DCA.js";import ie from"./StockAdjustmentSheet-t0Aatqul.js";import ue from"./PriceAdjustmentSheet-By9wyjTf.js";import de from"./ProductDetailSheet-m55sPeql.js";import me from"./MobileCardGrid-B8sv7yGa.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-B3W3eSlW.js";import"./BottomSheetFilter-Df-ynfYe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-DkXQDXNC.js";import"./PrimaryButton-DmXwG_T0.js";import"./Modal-C34EPCsE.js";import"./ProductKanbanCard-42WXZdjr.js";import"./InputRupiah-BktbFODK.js";const ve={class:"w-full pb-10"},ce={class:"flex gap-1 p-1 my-3 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},fe={key:1,class:""},pe={key:0,class:"grid grid-cols-2 gap-6 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},ge={key:1,class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-2 lg:grid-cols-3"},ke={key:2},he={key:2,class:"mt-8"},We={__name:"index",props:{products:Object,filters:Object,dropdowns:Object},setup(l){const u=l,{isActionLoading:b}=Z(),d=s({title:"Detail Produk",data:{}}),m=s("grid"),p=s("detail"),S=s(!1),D=s(null),f=s(!1),g=s(u.filters.search||""),L=w(()=>u.filters.trashed===!0||u.filters.trashed==="true"),O=w(()=>{const a=Object.keys(u.filters),e=["search","page","per_page"];return a.filter(t=>!e.includes(t)).length}),x=s(!1),j=s(null),V=s(null),N=s(window.innerWidth<1024),z=()=>{N.value=window.innerWidth<1024},R={restock:{label:"ðŸš¨ Stok",class:"bg-red-500 animate-pulse",priority:1},margin_alert:{label:"âš ï¸ Margin",class:"bg-yellow-400",priority:2},dead_stock:{label:"ðŸ¢ Slow",class:"bg-gray-600",priority:3},trend:{label:"ðŸ”¥ Trending",class:"bg-purple-600 animate-pulse",priority:4},new:{label:"âœ¨ New",class:"bg-lime-500",priority:5},high_margin:{label:"ðŸ’° Cuan",class:"bg-emerald-600",priority:6},promo:{label:"% Promo",class:"bg-blue-500",priority:7}},y=w(()=>(console.log(u.products),u.products.data.map(a=>{const e=(a.insights||[]).map(t=>({...R[t.type],type:t.type})).filter(t=>t.label).sort((t,n)=>t.priority-n.priority).slice(0,2);return{...a,active_badges:e}}))),k=(a,e=null)=>{p.value=a,e!=null&&(d.value={},d.value.data=e),a=="detail"?d.value.title="Detail Produk":a=="stock"?d.value.title="Penyesuaian Stock":a=="price"&&(d.value.title="Penyesuaian Harga"),f.value=!0},P=a=>{j.value=a.path,V.value=a.name,x.value=!0},h=(a,e=!1)=>{let t={};e?t={title:"Hapus Permanen Produk",message:"Produk ini akan dihapus selamanya. Anda yakin menghapus",itemName:a.name,url:route("products.destroy",{id:a.slug,permanen:!0})}:t={title:"Pindahkan ke Sampah",message:"Anda yakin ingin memindahkan produk",itemName:a.name,url:route("products.destroy",{id:a.slug})},D.value.open(t)},I=a=>{b.value=!0,F.put(route("products.restoreProduct",{id:a.slug}),{},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error(e)},onFinish:()=>{b.value=!1}})},U=Y.throttle(()=>{const a={...u.filters};a.search=g.value,(!a.search||g.value=="")&&delete a.search,F.get(route("products.index"),a,{preserveState:!0,replace:!0})},300);W(g,U);const G=w(()=>u.filters),K=()=>{b.value=!0,F.get(route("products.index"),{per_page:u.filters.per_page||10},{preserveState:!0,replace:!0,onFinish:()=>{b.value=!1}})};return q(()=>window.addEventListener("resize",z)),J(()=>window.removeEventListener("resize",z)),(a,e)=>(o(),v(M,null,[c(oe,{show:x.value,imageUrl:j.value,productName:V.value,onClose:e[0]||(e[0]=t=>x.value=!1)},null,8,["show","imageUrl","productName"]),c(ae,{ref_key:"showConfirmModal",ref:D,onSuccess:e[1]||(e[1]=()=>{})},null,512),c(T(Q),{title:"Data Barang"}),c(_,{headerTitle:"Data Barang"},{default:$(()=>[r("div",ve,[c(T(X),{data:"dropdowns"},{fallback:$(()=>[...e[15]||(e[15]=[r("div",{class:""},null,-1)])]),default:$(()=>[c(ee,{show:S.value,onClose:e[2]||(e[2]=t=>S.value=!1),filters:l.filters,dropdowns:l.dropdowns},null,8,["show","filters","dropdowns"])]),_:1}),c(te,{filters:l.filters,modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),onShowFilter:e[4]||(e[4]=t=>S.value=!0),filterCount:O.value,actions:[{route:a.route("products.create"),buttonText:"Tambah Produk"}]},null,8,["filters","modelValue","filterCount","actions"]),r("div",ce,[r("button",{onClick:e[5]||(e[5]=t=>m.value="grid"),class:A([m.value==="grid"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Grid"},[...e[16]||(e[16]=[r("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),r("button",{onClick:e[6]||(e[6]=t=>m.value="list"),class:A([m.value==="list"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Daftar"},[...e[17]||(e[17]=[r("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2),r("button",{onClick:e[7]||(e[7]=t=>m.value="kanban"),class:A([m.value==="kanban"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Analisa DSS"},[...e[18]||(e[18]=[r("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1)])],2)]),l.products.data.length>10?(o(),i(E,{key:0,metadata:l.products,filters:l.filters,class:"mb-3"},null,8,["metadata","filters"])):C("",!0),l.products.data.length>0?(o(),v("div",fe,[m.value==="grid"?(o(),v("div",pe,[N.value?(o(!0),v(M,{key:0},B(y.value,t=>(o(),i(me,{key:"mobile"+t.id,data:t,onClick:n=>k("detail",t),onImageClick:P},null,8,["data","onClick"]))),128)):(o(!0),v(M,{key:1},B(y.value,t=>(o(),i(se,{key:"desktop"+t.id,data:t,onDelete:n=>h(t),onForceDelete:n=>h(t,!0),onRestore:n=>I(t),onImageClick:P,onAdjustStock:n=>k("stock",t),onAdjustPrice:n=>k("price",t)},null,8,["data","onDelete","onForceDelete","onRestore","onAdjustStock","onAdjustPrice"]))),128))])):m.value==="list"?(o(),v("div",ge,[(o(!0),v(M,null,B(y.value,t=>(o(),i(le,{"is-trash-view":L.value,key:t.id,data:t,onDelete:n=>h(t,!1),onForceDelete:n=>h(t,!0),onRestore:n=>I(t),onImageClick:P},null,8,["is-trash-view","data","onDelete","onForceDelete","onRestore"]))),128))])):m.value==="kanban"?(o(),v("div",ke,[c(ne,{products:y.value},null,8,["products"])])):C("",!0)])):(o(),v("div",he,[G.value?(o(),i(H,{key:0,title:"Tidak ditemukan",message:"Maaf, tidak ada produk yang cocok dengan pencarian atau filter Anda. Coba atur ulang.",icon:"search","action-label":"Reset Filter","action-type":"button",onAction:K})):(o(),i(H,{key:1,title:"Belum ada Produk",message:"Toko Anda masih kosong. Mulai tambahkan produk pertama Anda sekarang!",icon:"box","action-label":"Tambah Produk Baru","action-url":a.route("products.create"),"action-type":"link"},null,8,["action-url"]))])),l.products.total>8?(o(),i(E,{key:3,metadata:l.products,filters:l.filters},null,8,["metadata","filters"])):C("",!0)])]),_:1}),c(re,{show:f.value,onClose:e[14]||(e[14]=t=>f.value=!1),title:d.value.title},{default:$(()=>[p.value=="detail"?(o(),i(de,{key:0,data:d.value.data,onAdjustStock:e[8]||(e[8]=t=>k("stock")),onAdjustPrice:e[9]||(e[9]=t=>k("price")),onDelete:h},null,8,["data"])):p.value=="stock"?(o(),i(ie,{key:1,product:d.value.data,onClose:e[10]||(e[10]=t=>f.value=!1),onSuccess:e[11]||(e[11]=t=>{f.value=!1,p.value="detail"})},null,8,["product"])):p.value=="price"?(o(),i(ue,{key:2,product:d.value.data,onClose:e[12]||(e[12]=t=>f.value=!1),onSuccess:e[13]||(e[13]=t=>{f.value=!1,p.value="detail"})},null,8,["product"])):C("",!0)]),_:1},8,["show","title"])],64))}};export{We as default};
