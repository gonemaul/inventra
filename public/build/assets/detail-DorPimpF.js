import{x as u,j as p,g as n,o as l,a as d,d as M,h as S,w as B,b as t,l as P,f as D,t as a,n as m,m as T,F as f,q as C,i as y}from"./app-Bgy6qXfz.js";import $ from"./PaymentModal-Bq8JiC9U.js";import{_ as j}from"./ImageModal-DutWfj5F.js";import{_ as V}from"./AuthenticatedLayout-2TC9EZAp.js";import"./lodash-CShghVOu.js";import"./useActionLoading-C6Q8Ko1z.js";import"./Modal-BzJdgquI.js";const z={class:"w-full min-h-screen px-4 py-2 sm:px-6 lg:px-8 bg-customBg-light text-customText-light dark:bg-customBg-dark dark:text-customText-dark"},A={class:"flex items-center gap-2 mb-4 text-sm text-gray-500"},F={class:"font-semibold text-gray-700"},L={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},R={class:"space-y-6 lg:col-span-2"},U={class:"flex items-start justify-between"},q={class:"text-2xl font-bold text-gray-800"},H={class:"mt-1 text-gray-500"},O={class:"font-semibold text-blue-600"},E={class:"mt-2 text-sm text-gray-400"},J={class:"text-right"},K={class:"my-1 text-xs text-gray-400"},Q={class:"w-full bg-gray-200 h-2.5 rounded-full overflow-hidden"},G={class:"flex items-center justify-between mt-1 text-xs text-gray-400"},W={class:"ml-1"},X={key:0,class:"flex gap-3 pt-6 mt-6 border-t"},Y={key:1,class:"p-3 pt-6 mt-6 font-bold text-center text-green-700 border-t rounded bg-green-50"},Z={class:"overflow-hidden bg-white shadow rounded-xl"},tt={class:"w-full text-sm text-left"},et={class:"flex flex-col ml-3"},st={class:"font-bold text-gray-800 dark:text-white"},at={class:"text-xs text-gray-500"},ot={class:"text-xs text-gray-400"},nt={class:"p-3 text-right"},lt={class:"p-3 text-right text-gray-500"},it={class:"p-3 font-semibold text-right"},rt={class:"lg:col-span-1"},dt={class:"h-full bg-white shadow rounded-xl"},ct={class:"flex items-center justify-between p-4 font-bold text-gray-700 border-b"},ut={class:"px-2 py-1 text-xs text-gray-600 bg-gray-100 rounded-full"},mt={class:"p-4 space-y-6"},gt={class:"mb-1 text-sm text-gray-500"},ht={class:"text-lg font-bold text-gray-800"},xt={class:"inline-block px-2 py-1 mt-1 text-xs text-gray-600 capitalize bg-gray-100 rounded"},vt={key:0,class:"p-2 mt-2 text-sm italic text-gray-600 border border-yellow-100 rounded bg-yellow-50"},bt={key:1,class:"mt-2"},pt=["onClick"],ft={key:0,class:"py-8 text-sm italic text-center text-gray-400"},It={__name:"detail",props:{invoice:Object,paymentMethods:Array},setup(o){const g=o,r=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i),h=i=>new Date(i).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),x=u(!1),_=u(null),w=u(null),I=(i,e)=>{_.value=i,w.value=e,x.value=!0},v=p(()=>g.invoice.amount_paid),k=p(()=>g.invoice.total_amount-g.invoice.amount_paid),c=p(()=>k.value<=0),b=u(!1);return(i,e)=>(l(),n(f,null,[d(M(S),{title:"Bayar Tagihan"}),d(j,{show:x.value,imageUrl:_.value,productName:w.value,onClose:e[0]||(e[0]=s=>x.value=!1)},null,8,["show","imageUrl","productName"]),d(V,{showSidebar:!1,showHeader:!1},{default:B(()=>[t("div",z,[t("div",A,[d(M(P),{href:i.route("finance.index"),class:"flex items-center transition hover:text-blue-600"},{default:B(()=>[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),D(" Keuangan",-1)])]),_:1},8,["href"]),e[4]||(e[4]=t("span",null,"/",-1)),t("span",F,"#"+a(o.invoice.invoice_number),1)]),t("div",L,[t("div",R,[t("div",{class:m(["p-6 bg-white border-l-8 shadow rounded-xl",c.value?"border-green-500":"border-red-500"])},[t("div",U,[t("div",null,[t("h1",q," Invoice #"+a(o.invoice.invoice_number),1),t("p",H,[e[5]||(e[5]=D(" Supplier: ",-1)),t("span",O,a(o.invoice.purchase?.supplier?.name),1)]),t("div",E," Jatuh Tempo: "+a(h(o.invoice.due_date)),1)]),t("div",J,[e[6]||(e[6]=t("p",{class:"text-sm font-medium tracking-wider text-gray-500 uppercase"}," Sisa Tagihan ",-1)),t("div",{class:m(["mt-1 text-4xl font-bold",c.value?"text-green-600":"text-red-600"])},a(r(k.value)),3),t("p",K," Terbayar: "+a(r(v.value))+" dari "+a(r(o.invoice.total_amount)),1),t("div",Q,[t("div",{class:m(["h-full transition-all duration-500 rounded-full",c.value?"bg-green-500":"bg-blue-500"]),style:T({width:Math.min(100,Math.round(v.value/o.invoice.total_amount*100))+"%"})},null,6)]),t("div",G,[t("span",W,a(Math.min(100,Math.round(v.value/o.invoice.total_amount*100)))+" % ",1)])])]),c.value?(l(),n("div",Y," âœ… LUNAS PADA "+a(h(o.invoice.paid_at)),1)):(l(),n("div",X,[t("button",{onClick:e[1]||(e[1]=s=>b.value=!0),class:"flex items-center gap-2 px-6 py-3 font-bold text-white transition transform bg-blue-600 rounded-lg shadow-lg hover:bg-blue-700 active:scale-95"}," ðŸ’³ Input Pembayaran ")]))],2),t("div",Z,[e[8]||(e[8]=t("div",{class:"p-4 font-bold text-gray-700 border-b bg-gray-50"}," Rincian Pembelian ",-1)),t("table",tt,[e[7]||(e[7]=t("thead",{class:"text-gray-500 border-b"},[t("tr",null,[t("th",{class:"p-3"},"Produk"),t("th",{class:"p-3 text-right"},"Qty"),t("th",{class:"p-3 text-right"},"Harga Satuan"),t("th",{class:"p-3 text-right"},"Subtotal")])],-1)),t("tbody",null,[(l(!0),n(f,null,C(o.invoice.items,s=>(l(),n("tr",{key:s.id,class:"border-b last:border-0"},[t("td",null,[t("div",et,[t("span",st,a(s.product_snapshot.name),1),t("span",at,a(s.product_snapshot.code)+" | "+a(s.product_snapshot.category),1),t("span",ot,a(s.product_snapshot.size)+" - "+a(s.product_snapshot.unit),1)])]),t("td",nt,a(s.quantity),1),t("td",lt,a(r(s.purchase_price)),1),t("td",it,a(r(s.subtotal)),1)]))),128))])])])]),t("div",rt,[t("div",dt,[t("div",ct,[e[9]||(e[9]=t("span",null,"Riwayat Pembayaran",-1)),t("span",ut,a(o.invoice.payments.length)+"x Bayar",1)]),t("div",mt,[(l(!0),n(f,null,C(o.invoice.payments,(s,N)=>(l(),n("div",{key:s.id,class:"relative pl-6 border-l-2 border-gray-200 last:border-0"},[t("div",{class:m(["absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white",N===0?"bg-green-500":"bg-gray-300"])},null,2),t("div",gt,a(h(s.payment_date)),1),t("div",ht,a(r(s.amount)),1),t("div",xt," Via "+a(s.payment_method),1),s.notes?(l(),n("div",vt,' "'+a(s.notes)+'" ',1)):y("",!0),s.proof_image?(l(),n("div",bt,[t("span",{class:"flex items-center gap-1 text-xs text-blue-500 hover:underline",onClick:yt=>I(s.proof_image,s.payment_date)}," ðŸ“„ Lihat Bukti ",8,pt)])):y("",!0)]))),128)),o.invoice.payments.length===0?(l(),n("div",ft," Belum ada pembayaran yang tercatat. ")):y("",!0)])])])]),d($,{show:b.value,invoice:o.invoice,paymentMethods:o.paymentMethods,onClose:e[2]||(e[2]=s=>b.value=!1)},null,8,["show","invoice","paymentMethods"])])]),_:1})],64))}};export{It as default};
