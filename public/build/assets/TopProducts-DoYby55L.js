import{u as V,D as y,l as n,o as i,e as u,g as a,i as C,w as m,f as t,C as z,k as p,z as c,A as f,L as h,t as d,m as q,p as B,F as _,I as F}from"./vendor-core-B46KUNyc.js";import{_ as D}from"./AuthenticatedLayout-9yD8UcND.js";import{u as N}from"./useExport-ZWbXSJP4.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-DSTl-7Rw.js";import"./useActionLoading-pomD9vky.js";const O={class:"space-y-6"},P={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},R={class:"flex items-center gap-2"},U={class:"flex flex-col items-end justify-between gap-4 p-5 bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700 md:flex-row"},A={class:"flex flex-col w-full gap-4 md:flex-row md:w-auto"},E={class:"flex items-center gap-2"},H={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},I={class:"p-6 bg-white border border-gray-200 shadow-lg lg:col-span-2 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},L={class:"flex items-center gap-2 mb-4 text-lg font-bold text-gray-800 dark:text-white"},M={key:0},S={key:1,class:"flex items-center justify-center h-64 text-gray-400"},K={class:"flex flex-col overflow-hidden bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},Q={class:"flex-1 overflow-y-auto max-h-[450px] custom-scrollbar"},G={class:"w-full text-sm text-left"},J={class:"divide-y divide-gray-100 dark:divide-gray-700"},X={class:"w-10 px-4 py-3 text-lg italic font-black text-center text-gray-300 group-hover:text-blue-500"},$={class:"px-2 py-3"},W=["title"],Y={class:"text-[10px] text-gray-500 uppercase tracking-wider"},Z={class:"px-4 py-3 text-right"},tt={class:"font-black text-gray-800 dark:text-white"},et={class:"text-[10px] text-gray-400"},rt={key:0},gt={__name:"TopProducts",props:{filters:Object,data:Array},setup(g){const s=g,l=V({start_date:s.filters.start_date,end_date:s.filters.end_date,limit:s.filters.limit,sort_by:s.filters.sort_by}),{exportToCsv:k}=N(),v=()=>{const r=s.data.map((e,o)=>({Rank:o+1,Nama:e.name,Kode:e.code,Kategori:e.category_name,"Terjual (Qty)":e.total_qty,"Omzet (Rp)":e.total_revenue}));k("Laporan_Top_Produk",r)},w=()=>{l.get(route("reports.top-products"),{preserveScroll:!0})},b=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),T=y(()=>({chart:{type:"bar",height:400,fontFamily:"Inter, sans-serif",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%",distributed:!0}},colors:["#84cc16","#3b82f6","#f59e0b","#ef4444","#8b5cf6"],dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(r,e){return s.filters.sort_by==="total_revenue"?b(r):r+" Pcs"},offsetX:0},xaxis:{categories:s.data.map(r=>r.name.length>20?r.name.substring(0,20)+"...":r.name),labels:{formatter:r=>s.filters.sort_by==="total_revenue"?(r/1e6).toFixed(1)+"jt":r}},tooltip:{y:{formatter:r=>s.filters.sort_by==="total_revenue"?b(r):r+" Unit"}},grid:{show:!1}})),j=y(()=>[{name:s.filters.sort_by==="total_qty"?"Terjual (Qty)":"Omzet (Rp)",data:s.data.map(r=>s.filters.sort_by==="total_qty"?r.total_qty:r.total_revenue)}]);return(r,e)=>(i(),n(_,null,[u(a(C),{title:"Produk Terlaris"}),u(D,{headerTitle:"Analisa Produk Terlaris"},{default:m(()=>[t("div",O,[t("div",P,[t("div",R,[u(a(z),{href:r.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:m(()=>[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),p(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",{class:"flex gap-2"},[t("button",{onClick:v,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),p(" Export CSV ",-1)])]),e[6]||(e[6]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),p(" Print ")],-1))])]),t("div",U,[t("div",A,[t("div",E,[c(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=o=>a(l).start_date=o),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[f,a(l).start_date]]),e[7]||(e[7]=t("span",{class:"text-gray-400"},"-",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=o=>a(l).end_date=o),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[f,a(l).end_date]])]),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).sort_by=o),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},[...e[8]||(e[8]=[t("option",{value:"total_qty"}," Berdasarkan Jumlah Terjual (Qty) ",-1),t("option",{value:"total_revenue"}," Berdasarkan Total Uang (Omzet) ",-1)])],512),[[h,a(l).sort_by]]),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).limit=o),class:"w-24 text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},[...e[9]||(e[9]=[t("option",{value:"5"},"Top 5",-1),t("option",{value:"10"},"Top 10",-1),t("option",{value:"20"},"Top 20",-1)])],512),[[h,a(l).limit]])]),t("button",{onClick:w,class:"w-full px-6 py-2 font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700 md:w-auto"}," Analisa ")]),t("div",H,[t("div",I,[t("h3",L,[e[10]||(e[10]=t("span",{class:"text-2xl"},"ðŸ†",-1)),p(" Grafik Top "+d(a(l).limit)+" Produk ",1)]),g.data.length>0?(i(),n("div",M,[u(a(q),{type:"bar",height:"400",options:T.value,series:j.value},null,8,["options","series"])])):(i(),n("div",S," Tidak ada data penjualan. "))]),t("div",K,[e[12]||(e[12]=t("div",{class:"p-4 border-b border-gray-100 bg-gray-50/50 dark:bg-gray-800 dark:border-gray-700"},[t("h3",{class:"font-bold text-gray-800 dark:text-white"}," Leaderboard ")],-1)),t("div",Q,[t("table",G,[t("tbody",J,[(i(!0),n(_,null,F(g.data,(o,x)=>(i(),n("tr",{key:x,class:"transition hover:bg-gray-50 dark:hover:bg-gray-700/30 group"},[t("td",X," #"+d(x+1),1),t("td",$,[t("div",{class:"font-bold text-gray-800 dark:text-white line-clamp-1",title:o.name},d(o.name),9,W),t("div",Y,d(o.code)+" â€¢ "+d(o.category_name||"No Cat"),1)]),t("td",Z,[t("div",tt,d(a(l).sort_by==="total_qty"?o.total_qty:b(o.total_revenue)),1),t("div",et,d(a(l).sort_by==="total_qty"?"Terjual":"Omzet"),1)])]))),128)),g.data.length===0?(i(),n("tr",rt,[...e[11]||(e[11]=[t("td",{colspan:"3",class:"px-4 py-8 text-xs text-center text-gray-400"}," Data kosong ",-1)])])):B("",!0)])])])])])])]),_:1})],64))}};export{gt as default};
