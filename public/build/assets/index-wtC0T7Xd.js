import{p as se,q as y,u as oe,C as _,J as E,v as re,a as ne,Z as le,l as g,o as c,e as L,d as ie,m as k,f as a,g as d,i as de,F as ee,H as ue,n as Q,t as m,x as ce,k as te,w as ae,y as me,z as ge}from"./vendor-core-CJbEklrS.js";import{j as ye}from"./vendor-common-GpUWqhKr.js";import{B as pe}from"./BottomSheet-BK4YJI0j.js";import fe from"./ConfirmSubmit-BXXpCwTi.js";import be from"./Cart-D3PSK-Lk.js";import{_ as ve}from"./BarcodeScanner-C0eHeYNj.js";import he from"./FilterProduct-C3d-1UNU.js";import"./vendor-charts-Bw6UNgWf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CSrVmq0b.js";import"./InputRupiah-LTaplENR.js";import"./MoneyInput-Cx9NPdkp.js";import"./vendor-scanner-og__AIM6.js";function xe(F){const v=se(),S="POS_REALTIME_DRAFT_V3",b=y([]),p=y(!1),O=y(20),f=y({search:"",category:"all",subCategory:"all",sort:"default"}),P=y(""),T=y([]),w=y(null),r=oe({input_type:"realtime",report_date:new Date().toISOString().slice(0,10),items:[],customer_id:null,payment_amount:0,change_amount:0,payment_method:"cash",discount_type:"fixed",discount_value:0,notes:""}),C=_(()=>r.items.reduce((e,s)=>e+(parseFloat(s.subtotal)||0),0)),N=_(()=>{const e=parseFloat(r.discount_value)||0;if(e<=0)return 0;if(r.discount_type==="percent"){const s=e>100?100:e;return Math.round(C.value*s/100)}return e>C.value?C.value:e}),$=_(()=>{const e=C.value-N.value,s=e>0?e:0;return s===0&&r.payment_amount>0,s}),V=_(()=>(parseFloat(r.payment_amount)||0)-$.value),K=_(()=>r.payment_method!=="cash"&&r.payment_method!==""?!0:(parseFloat(r.payment_amount)||0)>=$.value),J=_(()=>r.items.some(e=>e.quantity<=0||isNaN(e.quantity))),B=_(()=>{const e=$.value;if(e<=0)return[];const s=[{label:"Uang Pas",value:e}];if([2e3,5e3,1e4,2e4,5e4,1e5].forEach(l=>{l>e&&!s.find(X=>X.value===l)&&s.push({label:x(l),value:l})}),e>5e4){const l=Math.ceil(e/5e4)*5e4;s.find(X=>X.value===l)||s.push({label:x(l),value:l})}return s.slice(0,4)}),h=e=>{e.unit?.is_decimal===1||(e.quantity=Math.round(e.quantity),e.quantity<1&&(e.quantity=1)),e.quantity>e.stock_max&&(e.quantity=e.stock_max,v.warning(`Stok sisa ${e.stock_max}`)),e.subtotal=Math.round(e.quantity*e.selling_price)},z=e=>{const s=parseFloat(e.subtotal)||0,n=parseFloat(e.selling_price)||0;if(!(n<=0))if(e.unit?.is_decimal===1){let l=s/n;l>e.stock_max&&(l=e.stock_max,e.subtotal=Math.round(l*n),v.warning("Melebihi sisa stok!")),e.quantity=parseFloat(l.toFixed(4))}else confirm(`⚠️ Ubah harga satuan agar sesuai total ${x(s)}?`)?e.quantity>0&&(e.selling_price=Math.round(s/e.quantity)):e.subtotal=Math.round(e.quantity*e.selling_price)},M=e=>{e.subtotal=Math.round(e.quantity*e.selling_price)},I=e=>{if(parseFloat(e.stock)<=0){v.error("Stok habis!");return}const s=r.items.find(n=>n.product_id===e.id);if(s){if(s.quantity+1>e.stock){v.warning("Stok maksimal!");return}s.quantity++,h(s)}else{const n=parseFloat(e.selling_price||e.price);r.items.push({product_id:e.id,code:e.code,name:e.name,unit:e.unit,size:e.size,stock_max:parseFloat(e.stock),selling_price:n,original_price:n,quantity:1,subtotal:n})}},D=e=>r.items.splice(e,1),q=(e,s)=>{const n=r.items[e],l=parseFloat(n.quantity)+s;if(l>n.stock_max){v.warning(`Stok sisa ${n.stock_max}`);return}if(l<=0){confirm("Hapus item ini?")&&D(e);return}n.quantity=l,h(n)},R=e=>{r.payment_amount=e.value},u=()=>{r.payment_amount=0},H=y(new Map),j=async(e={})=>{const s={query:e.search||f.value.search,limit:O.value,category_id:f.value.category,product_type_id:f.value.subCategory,sort:f.value.sort},n=JSON.stringify(s);H.value.has(n)?b.value=H.value.get(n):p.value=!0;try{const l=await ne.get(route("sales.products.lite"),{params:s});b.value=l.data,H.value.set(n,l.data)}catch(l){console.error("Gagal load produk:",l),H.value.has(n)||v.error("Gagal memuat database produk")}finally{p.value=!1}},G=ye(()=>{j()},400);E(()=>f.value,(e,s)=>{e.search!==s.search?(p.value=!0,G()):j()},{deep:!0});const Y=_(()=>{let e=b.value;const{sort:s}=f.value;return s==="cheapest"?e.sort((n,l)=>n.selling_price-l.selling_price):s==="bestseller"?e.sort((n,l)=>(l.total_sold||0)-(n.total_sold||0)):e.sort((n,l)=>n.name.localeCompare(l.name)),e}),Z=()=>{O.value+=20,j()},A=e=>{w.value=e,r.customer_id=e.id,T.value=[],P.value=""},W=()=>{w.value=null,r.customer_id=null};E(P,e=>{if(!e||!F.customers){T.value=[];return}const s=e.toLowerCase(),n=F.customers.filter(l=>l.name.toLowerCase().includes(s)||l.code.toLowerCase().includes(s));T.value=n.slice(0,5)});const U=e=>{const s=b.value.find(n=>n.code==e);return s?s.stock<=0?(v.warning(`Stok produk "${s.name}" habis!`),null):s:null},i=e=>{const s=F.customers.find(n=>n.member_code==e||n.phone==e);s?A(s):v.warning("Member tidak ditemukan")},t=()=>{const e=localStorage.getItem(S);if(e)try{const s=JSON.parse(e);s.items&&(r.items=s.items),r.payment_amount=s.payment_amount||0,r.payment_method=s.payment_method||"cash",r.notes=s.notes||"",r.discount_type=s.discount_type||"fixed",r.discount_value=s.discount_value||0,s.selectedMember&&(w.value=s.selectedMember,r.customer_id=s.selectedMember.id)}catch{localStorage.removeItem(S)}};E([()=>r.items,()=>r.customer_id,()=>r.payment_amount,()=>r.discount_value,()=>r.notes],()=>{localStorage.setItem(S,JSON.stringify({items:r.items,customer_id:r.customer_id,payment_amount:r.payment_amount,payment_method:r.payment_method,notes:r.notes,discount_type:r.discount_type,discount_value:r.discount_value,selectedMember:w.value}))},{deep:!0});const o=(e=!1,s={})=>{r.change_amount=V.value,r.payment_amount=parseFloat(r.payment_amount),r.transform(n=>({...n,print_invoice:e})).post(route("sales.pos.store"),{onStart:s.onStart,onFinish:s.onFinish,onSuccess:n=>{j(),localStorage.removeItem(S),r.reset(),r.items=[],w.value=null,s.onSuccess&&s.onSuccess(n)},onError:n=>{console.error(n),v.error("Gagal memproses transaksi")}})},x=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e);return re(()=>{j(),t()}),{form:r,filterState:f,allProducts:b,filteredProducts:Y,isFetchingData:p,memberSearch:P,memberSearchResults:T,selectedMember:w,subTotal:C,discountAmount:N,grandTotal:$,changeAmount:V,isPaymentSufficient:K,hasInvalidQty:J,moneySuggestions:B,addItem:I,removeItem:D,updateQty:q,recalcFromQty:h,recalcFromSubtotal:z,recalcFromPrice:M,resetPayment:u,handleMoneyClick:R,loadMoreProducts:Z,selectMember:A,removeMember:W,queryProduk:U,queryMember:i,submitTransaction:o,rp:x}}const ke={class:"flex flex-col lg:flex-row h-[100dvh] w-full bg-gray-100 dark:bg-gray-900 overflow-hidden font-sans transition-colors duration-300"},we={class:"relative flex flex-col flex-1 h-full overflow-hidden"},_e={class:"grid grid-cols-2 gap-3 pb-10 md:grid-cols-3 lg:grid-cols-4"},Se=["disabled","onClick"],Ce={class:"relative w-full overflow-hidden bg-gray-100 border-b border-gray-100 aspect-square dark:border-gray-700 dark:bg-gray-700"},Me={key:0,class:"absolute z-20 flex flex-col items-start gap-1 top-2 left-2"},qe={key:0,class:"text-[9px] font-bold px-1.5 py-0.5 rounded shadow-sm backdrop-blur text-gray-700 bg-white/90 dark:text-gray-200 dark:bg-gray-900/80"},je={key:1,class:"text-[9px] font-bold text-white px-1.5 py-0.5 rounded shadow-sm backdrop-blur bg-gray-800/80 dark:bg-gray-600/80"},Fe=["src"],Pe={key:2,class:"flex items-center justify-center w-full h-full text-gray-400 dark:text-gray-600"},Te={key:3,class:"absolute inset-0 z-20 flex items-center justify-center bg-gray-900/60 backdrop-blur-[1px]"},$e={class:"flex flex-col flex-1 p-3"},Be={class:"mb-1"},ze={class:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide"},Ie=["title"],De={class:"flex items-center justify-between mb-3"},He={class:"flex items-center gap-1.5"},Ne={class:"flex items-center gap-0.5 text-[10px] text-gray-400 dark:text-gray-500"},Re={class:"flex items-center justify-between pt-2 mt-auto border-t border-gray-100 dark:border-gray-700"},Ae={class:"text-sm font-black text-lime-600 dark:text-lime-400"},Ue={key:0,class:"flex items-center justify-center text-xs font-bold text-white bg-orange-500 rounded-full shadow-md w-7 h-7 animate-bounce-short"},Le={key:1,class:"p-1.5 rounded-lg border transition-colors text-lime-600 bg-lime-50 border-lime-100 dark:text-lime-400 dark:bg-lime-500/10 dark:border-lime-500/20 hover:bg-lime-500 hover:text-white hover:border-lime-500 dark:hover:bg-lime-500 dark:hover:text-white"},Oe={key:0,class:"py-10 text-center"},Ve={key:1,class:"flex flex-col items-center justify-center px-4 py-16 text-center animate-fade-in"},Ge={key:2,class:"py-4 text-center text-[10px] text-gray-400"},Qe={key:0,class:"absolute z-30 lg:hidden bottom-4 left-4 right-4"},Ee={class:"flex items-center gap-3"},Ke={class:"flex items-center justify-center text-xs font-bold text-white rounded-full shadow-sm bg-lime-500 dark:bg-white dark:text-lime-700 w-7 h-7"},Je={class:"flex flex-col items-start leading-none gap-0.5"},Ye={class:"text-lg font-bold"},Ze={class:"space-y-6"},We={class:"flex items-center gap-4 pb-4 border-b border-gray-100 dark:border-gray-800"},Xe={class:"flex items-center justify-center text-lg font-bold text-gray-400 bg-gray-100 border border-gray-200 w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-700 shrink-0"},et={class:"flex-1 min-w-0"},tt={class:"text-lg font-bold leading-tight text-gray-800 truncate dark:text-white"},at={class:"flex items-center justify-between mt-1"},st={class:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"},ot={class:"bg-gray-50 dark:bg-gray-800/50 p-1.5 rounded-2xl border border-gray-200 dark:border-gray-700"},rt={class:"flex items-center justify-between"},nt=["disabled"],lt={class:"flex-1 px-2 text-center"},it={class:"flex items-center justify-between p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 dark:border-gray-800 rounded-xl"},dt={class:"font-bold text-gray-600 dark:text-gray-300"},ut={class:"text-right"},ct={class:"text-2xl font-black text-gray-900 dark:text-white"},mt={key:0,class:"px-3 py-2 text-xs font-bold text-center text-red-600 border border-red-100 rounded-lg bg-red-50"},gt={class:"flex gap-3 h-14"},qt={__name:"index",props:{categories:Array,customers:Array},setup(F){const S=xe(F),{form:b,filterState:p,allProducts:O,filteredProducts:f,isFetchingData:P,grandTotal:T,changeAmount:w,isPaymentSufficient:r,hasInvalidQty:C,addItem:N,loadMoreProducts:$,queryProduk:V,queryMember:K,submitTransaction:J,rp:B}=S,h=se(),z=y(!1),M=y(!1),I=y(!1),D=y(!1),q=y("product"),R=y(null);E(p,async()=>{await le(),R.value&&R.value.scrollTo({top:0,behavior:"smooth"})},{deep:!0});const u=y({id:null,name:"",code:"",price:0,quantity:1,stock:0,unit:"Pcs",image:null}),H=i=>{u.value={id:i.id,name:i.name,code:i.code,image_url:i.image_url,price:parseFloat(i.selling_price||i.price||0),quantity:1,stock:parseInt(i.stock||0),unit:i.unit?.name||"Pcs"},D.value=!0},j=i=>{const{scrollTop:t,clientHeight:o,scrollHeight:x}=i.target;t+o>=x-50&&$()},G=()=>{q.value="product",M.value=!0},Y=()=>{q.value="member",M.value=!0},Z=async i=>{if(M.value=!1,alert("scan berhasil "+q.value+" | "+i),q.value=="product")try{const t=await V(i);t?(i=t,H(i)):alert("Produk tidak ditemukan di database.")}catch(t){console.error("Terjadi kesalahan saat query produk:",t),alert("Gagal mengambil data produk.")}else q.value=="member"&&(i=K(i))},A=(i=!1)=>{N(u),i&&G()},W=i=>{if(b.items.length===0)return h.error("Keranjang kosong!");if(C.value)return h.error("Qty tidak valid!");if(b.payment_method==="cash"&&!r.value)return h.error("Uang kurang!");J(i,{onSuccess:t=>{I.value=!1,z.value=!1;const o=t.props.flash?.print_url;i&&o?setTimeout(()=>{window.open(o,"_blank","width=300,height=600")},50):i&&!o?h.error("Gagal mendapatkan URL Print dari server."):h.success("Transaksi berhasil disimpan.")}})},U=i=>{const t=b.items.find(o=>o.product_id===i);return t?t.quantity:0};return(i,t)=>(c(),g(ee,null,[L(d(de),{title:"Kasir POS"}),L(fe,{showConfirmModal:I.value,changeAmount:d(w),onClose:t[0]||(t[0]=o=>I.value=!1),onConfirmTransaction:W},null,8,["showConfirmModal","changeAmount"]),M.value?(c(),ie(ve,{key:0,onResult:Z,onClose:t[1]||(t[1]=o=>M.value=!1)})):k("",!0),a("div",ke,[a("div",we,[L(he,{categories:F.categories,"is-fetching":d(P),search:d(p).search,"onUpdate:search":t[2]||(t[2]=o=>d(p).search=o),category:d(p).category,"onUpdate:category":t[3]||(t[3]=o=>d(p).category=o),"sub-category":d(p).subCategory,"onUpdate:subCategory":t[4]||(t[4]=o=>d(p).subCategory=o),sort:d(p).sort,"onUpdate:sort":t[5]||(t[5]=o=>d(p).sort=o),onScan:G},null,8,["categories","is-fetching","search","category","sub-category","sort"]),a("div",{ref_key:"productGridRef",ref:R,class:"h-[calc(100vh-220px)] flex-1 p-4 overflow-y-auto bg-gray-100 custom-scroll scroll-smooth pb-28 lg:pb-4 dark:bg-gray-900",onScroll:j},[a("div",_e,[(c(!0),g(ee,null,ue(d(f),o=>(c(),g("div",{key:o.id,disabled:o.stock==0,onClick:x=>d(N)(o),class:Q(["relative flex flex-col justify-between overflow-hidden transition-all duration-200 border shadow-sm cursor-pointer group rounded-xl active:scale-95",["bg-white dark:bg-gray-800",U(o.id)>0?"border-lime-500 ring-1 ring-lime-500 bg-lime-50/30 dark:bg-lime-900/10":"border-gray-200 dark:border-gray-700 hover:border-lime-500 dark:hover:border-lime-500 hover:shadow-md"]])},[a("div",Ce,[o.unit||o.size?(c(),g("div",Me,[o.unit?(c(),g("span",qe,m(o.unit.name),1)):k("",!0),o.size?(c(),g("span",je,m(o.size.name),1)):k("",!0)])):k("",!0),o.image_url?(c(),g("img",{key:1,src:o.image_url,loading:"lazy",class:"absolute inset-0 z-10 object-cover w-full h-full transition-transform duration-500 group-hover:scale-105",alt:"",onerror:"this.style.display='none'"},null,8,Fe)):(c(),g("div",Pe,[...t[16]||(t[16]=[a("svg",{class:"w-10 h-10 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),o.stock<=0?(c(),g("div",Te,[...t[17]||(t[17]=[a("span",{class:"px-2 py-1 text-xs font-bold text-white transform border-2 border-white rounded -rotate-12"},"KOSONG",-1)])])):k("",!0)]),a("div",$e,[a("div",Be,[a("span",ze,m(o.brand?.name||"No Brand"),1)]),a("h3",{class:"text-xs font-bold leading-snug text-gray-800 dark:text-gray-100 line-clamp-2 min-h-[2.5em] mb-2",title:o.name},m(o.name),9,Ie),a("div",De,[a("div",He,[a("div",{class:Q(["w-1.5 h-1.5 rounded-full",o.stock<=5?"bg-red-500 animate-pulse":"bg-green-500 dark:bg-green-400"])},null,2),a("span",{class:Q(["text-[10px] font-medium",o.stock<=5?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"])},m(o.stock<=5?`Sisa ${parseFloat(o.stock)}`:`Stok ${parseFloat(o.stock)}`),3)]),a("div",Ne,[t[18]||(t[18]=a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1)),a("span",null,m(o.total_sold||0),1)])]),a("div",Re,[a("span",Ae,m(d(B)(o.selling_price||o.price)),1),U(o.id)>0?(c(),g("div",Ue,m(U(o.id)),1)):(c(),g("div",Le,[...t[19]||(t[19]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]))])])],10,Se))),128))]),d(P)&&d(f).length===0?(c(),g("div",Oe,[...t[20]||(t[20]=[a("div",{class:"w-8 h-8 mx-auto mb-2 border-b-2 rounded-full animate-spin border-lime-500"},null,-1),a("span",{class:"text-xs text-gray-400"},"Memuat database produk...",-1)])])):d(f).length===0?(c(),g("div",Ve,[t[22]||(t[22]=ce('<div class="relative mb-6"><div class="flex items-center justify-center w-24 h-24 rounded-full shadow-inner bg-gray-50 dark:bg-gray-800"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div class="absolute -top-2 -right-2 bg-white dark:bg-gray-700 rounded-full p-1.5 shadow-md border border-gray-100 dark:border-gray-600"><div class="p-1 rounded-full bg-lime-100 dark:bg-lime-900/50"><svg class="w-5 h-5 text-lime-500 dark:text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"></path></svg></div></div></div><h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white"> Produk tidak ditemukan </h3><p class="max-w-xs mx-auto mb-6 text-sm leading-relaxed text-gray-500 dark:text-gray-400"> Kami tidak dapat menemukan produk dengan kata kunci atau kategori tersebut. </p>',3)),a("button",{onClick:t[6]||(t[6]=o=>{i.search="",i.selectedCategory="all"}),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:border-lime-500 hover:text-lime-600 dark:hover:border-lime-500 dark:hover:text-lime-400 shadow-sm hover:shadow-md"},[...t[21]||(t[21]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),te(" Reset Pencarian ",-1)])])])):k("",!0),d(f).length>0&&d(O).length>d(f).length?(c(),g("div",Ge," Scroll untuk memuat lebih banyak... ")):k("",!0)],544),d(b).items.length>0?(c(),g("div",Qe,[a("button",{onClick:t[7]||(t[7]=o=>z.value=!0),class:"w-full bg-gray-900 dark:bg-lime-600 text-white p-3.5 rounded-2xl shadow-xl shadow-gray-900/20 flex justify-between items-center animate-bounce-subtle"},[a("div",Ee,[a("span",Ke,m(d(b).items.reduce((o,x)=>o+parseFloat(x.quantity),0)),1),a("div",Je,[t[23]||(t[23]=a("span",{class:"text-[9px] text-gray-400 dark:text-lime-100 uppercase font-bold tracking-wider"},"Total Belanja",-1)),a("span",Ye,m(d(B)(d(T))),1)])]),t[24]||(t[24]=a("span",{class:"flex items-center gap-1 px-4 py-2 text-xs font-bold bg-gray-700 dark:bg-lime-800/30 rounded-xl"},[te(" Bayar "),a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})])],-1))])])):k("",!0)]),L(be,{showMobileCart:z.value,reprops:d(S),onOpenScanMember:Y,onShowBayar:t[8]||(t[8]=o=>I.value=!0),onShowDesktop:t[9]||(t[9]=o=>z.value=!1)},null,8,["showMobileCart","reprops"])]),L(pe,{show:D.value,onClose:t[15]||(t[15]=o=>D.value=!1),title:"Tambah Pesanan"},{footer:ae(()=>[a("div",gt,[a("button",{onClick:t[13]||(t[13]=o=>A(!1)),class:"flex-1 font-bold transition border text-lime-700 bg-lime-100 border-lime-200 rounded-xl active:bg-lime-200 dark:bg-lime-800 dark:text-lime-300 dark:border-lime-700"}," Masuk Keranjang "),a("button",{onClick:t[14]||(t[14]=o=>A(!0)),class:"flex-[1.3] bg-gray-900 text-white font-bold rounded-xl shadow-xl flex items-center justify-center gap-2 active:scale-[0.98] transition hover:bg-gray-800 dark:bg-white dark:text-gray-900"},[...t[30]||(t[30]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),a("span",null,"Scan Lagi",-1)])])])]),default:ae(()=>[a("div",Ze,[a("div",We,[a("div",Xe,m(u.value.name?.substring(0,2).toUpperCase()),1),a("div",et,[a("h3",tt,m(u.value.name),1),a("div",at,[a("p",st,m(u.value.code),1),a("p",{class:Q(["text-xs font-medium",3>u.value.stock?"text-red-500":"text-gray-400"])}," Stok: "+m(u.value.stock),3)])])]),a("div",ot,[a("div",rt,[a("button",{onClick:t[10]||(t[10]=o=>u.value.quantity>1?u.value.quantity--:null),class:"flex items-center justify-center text-gray-500 transition bg-white border border-gray-200 shadow-sm w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-600 active:scale-95 hover:text-red-500 disabled:opacity-50",disabled:u.value.quantity<=1},[...t[25]||(t[25]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,nt),a("div",lt,[t[26]||(t[26]=a("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-0.5"},"Jumlah Beli",-1)),me(a("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>u.value.quantity=o),type:"number",class:"w-full p-0 text-3xl font-black text-center text-gray-800 bg-transparent border-none dark:text-white focus:ring-0"},null,512),[[ge,u.value.quantity,void 0,{number:!0}]])]),a("button",{onClick:t[12]||(t[12]=o=>u.value.quantity++),class:"flex items-center justify-center text-white transition shadow-lg w-14 h-14 bg-lime-500 rounded-xl shadow-lime-500/30 active:scale-95"},[...t[27]||(t[27]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),a("div",it,[a("div",null,[t[28]||(t[28]=a("p",{class:"text-xs text-gray-400"},"Harga Satuan",-1)),a("p",dt,m(d(B)(u.value.price)),1)]),a("div",ut,[t[29]||(t[29]=a("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Subtotal ",-1)),a("p",ct,m(d(B)(u.value.price*u.value.quantity)),1)])]),u.value.quantity>u.value.stock?(c(),g("div",mt," ⚠️ Jumlah melebihi sisa stok ("+m(u.value.stock)+") ",1)):k("",!0)])]),_:1},8,["show"])],64))}};export{qt as default};
