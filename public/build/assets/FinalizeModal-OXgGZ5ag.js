import{y as _,u as y,x as w,z as B,c as x,o as d,w as m,b as e,a as i,d as o,k as V,A as S,f as $,g as k}from"./app-XPyOtybP.js";import{P as C}from"./PrimaryButton-DnqBiT7c.js";import{_ as P}from"./SecondaryButton-DpO6SxuF.js";import{_ as u}from"./InputLabel-CM-57pdF.js";import{_ as f}from"./TextInput-ZaNQ8XGg.js";import{u as T}from"./useActionLoading-HgSkmBE-.js";import{B as A}from"./BottomSheet-sV61yNof.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"p-6"},j={class:"mt-6 space-y-4"},z={class:"flex justify-end gap-3 mt-6"},F={key:0},M={key:1},G={__name:"FinalizeModal",props:{show:Boolean,purchase:Object},emits:["close"],setup(p,{emit:g}){const{isActionLoading:r}=T(),h=_(),c=p,b=g,s=y({shipping_cost:0,other_costs:0,notes:""}),l=w(!1);B(()=>c.show,n=>{n&&(s.shipping_cost=0,s.other_costs=0,s.notes="")});const v=()=>{l.value=!0,r.value=!0,s.put(route("purchases.finalize",c.purchase.id),{preserveScroll:!0,onSuccess:()=>{b("close"),l.value=!1},onError:()=>{r.value=!1,l.value=!1,h.error(errors.message||"Terjadi kesalahan saat menghapus data.")},onFinish:()=>{r.value=!1,l.value=!1}})};return(n,a)=>(d(),x(A,{show:p.show,onClose:a[4]||(a[4]=t=>n.$emit("close")),title:"Selesaikan & Masukkan Stok"},{default:m(()=>[e("div",O,[a[6]||(a[6]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Pastikan semua data valid. Aksi ini akan menambah stok dan tidak dapat dibatalkan. Silakan masukkan biaya tambahan jika ada (akan dibebankan ke HPP produk). ",-1)),e("div",j,[e("div",null,[i(u,{for:"shipping",value:"Biaya Ongkos Kirim (Opsional)"}),i(f,{id:"shipping",modelValue:o(s).shipping_cost,"onUpdate:modelValue":a[0]||(a[0]=t=>o(s).shipping_cost=t),type:"number",class:"block w-full mt-1",min:"0"},null,8,["modelValue"])]),e("div",null,[i(u,{for:"other",value:"Biaya Lain-lain / Admin (Opsional)"}),i(f,{id:"other",modelValue:o(s).other_costs,"onUpdate:modelValue":a[1]||(a[1]=t=>o(s).other_costs=t),type:"number",class:"block w-full mt-1",min:"0"},null,8,["modelValue"])]),e("div",null,[i(u,{for:"notes",value:"Catatan Tambahan (Opsional)"}),V(e("textarea",{id:"notes","onUpdate:modelValue":a[2]||(a[2]=t=>o(s).notes=t),rows:"3",class:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-lime-500 focus:ring-lime-500 dark:bg-gray-900 dark:border-gray-700 dark:text-gray-300",placeholder:"Contoh: Barang diterima lengkap, bonus 2 pcs..."},null,512),[[S,o(s).notes]])])]),e("div",z,[i(P,{onClick:a[3]||(a[3]=t=>n.$emit("close"))},{default:m(()=>[...a[5]||(a[5]=[$(" Batal ",-1)])]),_:1}),i(C,{class:"bg-lime-600 hover:bg-lime-700",disabled:l.value||o(s).processing,onClick:v},{default:m(()=>[o(s).processing?(d(),k("span",F,"Memproses...")):(d(),k("span",M,"Selesaikan Transaksi"))]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}};export{G as default};
