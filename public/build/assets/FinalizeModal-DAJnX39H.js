import{x as y,u as _,s as w,y as x,c as B,o as d,w as m,b as e,a as i,d as o,k as V,z as $,f as C,g as f}from"./app-C_cXePOB.js";import{_ as P}from"./Modal-DR4Qf9lZ.js";import{P as S}from"./PrimaryButton-D5q8Vryj.js";import{_ as T}from"./SecondaryButton-ClbDvNQj.js";import{_ as u}from"./InputLabel-DZfIyXla.js";import{_ as k}from"./TextInput-PROtXgwY.js";import{u as O}from"./useActionLoading-Bvh_DZn-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"p-6"},z={class:"mt-6 space-y-4"},A={class:"flex justify-end gap-3 mt-6"},F={key:0},M={key:1},q={__name:"FinalizeModal",props:{show:Boolean,purchase:Object},emits:["close"],setup(p,{emit:g}){const{isActionLoading:r}=O(),h=y(),c=p,b=g,s=_({shipping_cost:0,other_costs:0,notes:""}),n=w(!1);x(()=>c.show,l=>{l&&(s.shipping_cost=0,s.other_costs=0,s.notes="")});const v=()=>{n.value=!0,r.value=!0,s.put(route("purchases.finalize",c.purchase.id),{preserveScroll:!0,onSuccess:()=>{b("close"),n.value=!1},onError:()=>{r.value=!1,n.value=!1,h.error(errors.message||"Terjadi kesalahan saat menghapus data.")},onFinish:()=>{r.value=!1,n.value=!1}})};return(l,a)=>(d(),B(P,{show:p.show,onClose:a[4]||(a[4]=t=>l.$emit("close")),maxWidth:"md"},{default:m(()=>[e("div",j,[a[6]||(a[6]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Selesaikan & Masukkan Stok ",-1)),a[7]||(a[7]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Pastikan semua data valid. Aksi ini akan menambah stok dan tidak dapat dibatalkan. Silakan masukkan biaya tambahan jika ada (akan dibebankan ke HPP produk). ",-1)),e("div",z,[e("div",null,[i(u,{for:"shipping",value:"Biaya Ongkos Kirim (Opsional)"}),i(k,{id:"shipping",modelValue:o(s).shipping_cost,"onUpdate:modelValue":a[0]||(a[0]=t=>o(s).shipping_cost=t),type:"number",class:"block w-full mt-1",min:"0"},null,8,["modelValue"])]),e("div",null,[i(u,{for:"other",value:"Biaya Lain-lain / Admin (Opsional)"}),i(k,{id:"other",modelValue:o(s).other_costs,"onUpdate:modelValue":a[1]||(a[1]=t=>o(s).other_costs=t),type:"number",class:"block w-full mt-1",min:"0"},null,8,["modelValue"])]),e("div",null,[i(u,{for:"notes",value:"Catatan Tambahan (Opsional)"}),V(e("textarea",{id:"notes","onUpdate:modelValue":a[2]||(a[2]=t=>o(s).notes=t),rows:"3",class:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-lime-500 focus:ring-lime-500 dark:bg-gray-900 dark:border-gray-700 dark:text-gray-300",placeholder:"Contoh: Barang diterima lengkap, bonus 2 pcs..."},null,512),[[$,o(s).notes]])])]),e("div",A,[i(T,{onClick:a[3]||(a[3]=t=>l.$emit("close"))},{default:m(()=>[...a[5]||(a[5]=[C(" Batal ",-1)])]),_:1}),i(S,{class:"bg-lime-600 hover:bg-lime-700",disabled:n.value||o(s).processing,onClick:v},{default:m(()=>[o(s).processing?(d(),f("span",F,"Memproses...")):(d(),f("span",M,"Selesaikan Transaksi"))]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}};export{q as default};
