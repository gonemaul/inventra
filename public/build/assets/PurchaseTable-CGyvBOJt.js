import{D as v,v as k,K as $,l,o as n,f as t,e as H,p as c,z as V,B as z,t as o,k as f,F as b,I as w,j as u,n as h,w as D,T}from"./vendor-core-B46KUNyc.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";const A={class:"space-y-4"},I={class:"flex flex-col sm:flex-row justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm sticky top-0 z-20"},S={class:"flex items-center gap-4 w-full sm:w-auto"},q={class:"flex items-center gap-2 cursor-pointer select-none"},N={class:"font-bold text-gray-700 dark:text-gray-200"},F={class:"text-right mt-2 sm:mt-0 w-full sm:w-auto border-t sm:border-t-0 pt-2 sm:pt-0 flex justify-between sm:block"},P={class:"text-xl font-black text-lime-600 dark:text-lime-400"},R={class:"hidden md:block overflow-hidden border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 shadow-sm"},E={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},K={class:"divide-y divide-gray-200 dark:divide-gray-700"},O={key:0},Q=["onClick"],U=["checked","onChange"],G={class:"px-6 py-4 whitespace-nowrap"},J={class:"flex items-center"},W={class:"flex-shrink-0 h-10 w-10 rounded bg-gray-100 border border-gray-200 overflow-hidden relative"},X=["src"],Y={key:1,class:"absolute inset-0 flex items-center justify-center text-gray-300"},Z={class:"ml-4"},tt=["title"],et={class:"text-xs text-gray-500 font-mono"},st={class:"text-[10px] text-gray-400"},ot={class:"px-6 py-4 whitespace-nowrap"},rt={class:"text-xs text-gray-400 flex items-center gap-1"},at={key:0,class:"w-2 h-2 rounded-full bg-red-500 animate-pulse",title:"Stok Kritis"},lt=["onClick"],nt={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500 dark:text-gray-400"},it={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-gray-900 dark:text-white"},dt=["onClick"],ct={class:"md:hidden space-y-3 pb-20"},ut={key:0,class:"text-center py-10 text-gray-500 bg-gray-50 rounded-xl border border-dashed border-gray-300"},pt=["onClick"],xt={key:0,class:"absolute top-3 left-3 z-10"},gt={class:"flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg border border-gray-100 flex items-center justify-center relative overflow-hidden"},ht=["src"],yt={key:1,class:"text-gray-300 opacity-50"},vt={class:"flex-1 min-w-0 pl-1"},mt={class:"flex justify-between items-start"},kt=["title"],ft={class:"text-[10px] text-gray-500 font-mono mb-2 flex items-center gap-1"},bt={class:"flex items-end justify-between"},wt={class:"text-xs text-gray-500"},_t=["onClick"],Ct={class:"text-right"},jt={class:"font-bold text-gray-900 dark:text-white"},Bt={class:"bg-white dark:bg-gray-800 rounded-xl max-w-sm w-full p-6 shadow-xl border border-gray-100 dark:border-gray-700 transform transition-all"},Mt={class:"text-lg font-bold text-center text-gray-900 dark:text-white mb-2"},Lt={class:"flex gap-3"},zt={__name:"PurchaseTable",props:{items:{type:Array,default:()=>[]},isDraft:Boolean},emits:["remove","edit","remove-multiple"],setup(_,{emit:C}){const d=_,j=C,p=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),g=v(()=>[...d.items].sort((a,s)=>{const e=a.name?.toLowerCase()||"",i=s.name?.toLowerCase()||"";return e<i?-1:e>i?1:0})),B=v(()=>d.items.reduce((a,s)=>a+s.purchase_price*s.quantity,0)),r=k([]),m=v({get(){return d.items.length>0&&r.value.length===d.items.length},set(a){a?r.value=d.items.map(s=>s.product_id||s.id):r.value=[]}}),x=k(!1),y=a=>{const s=r.value.indexOf(a);s===-1?r.value.push(a):r.value.splice(s,1)},M=()=>{x.value=!0},L=()=>{j("remove-multiple",r.value),r.value=[],x.value=!1};return $(()=>d.items,a=>{const s=a.map(e=>e.product_id||e.id);r.value=r.value.filter(e=>s.includes(e))},{deep:!0}),(a,s)=>(n(),l("div",A,[t("div",I,[t("div",S,[t("label",q,[V(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),class:"w-5 h-5 rounded border-gray-300 text-lime-600 focus:ring-lime-500 transition"},null,512),[[z,m.value]]),t("span",N,o(r.value.length>0?`${r.value.length} Terpilih`:"Pilih Semua"),1)]),r.value.length>0?(n(),l("button",{key:0,onClick:M,class:"ml-auto sm:ml-0 px-3 py-1.5 text-xs font-bold text-white bg-red-600 rounded-lg hover:bg-red-700 transition flex items-center gap-1 shadow-sm"},[...s[7]||(s[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),f(" Hapus ",-1)])])):c("",!0)]),t("div",F,[s[8]||(s[8]=t("span",{class:"text-xs text-gray-500 uppercase font-bold tracking-wider"},"Total Est.",-1)),t("div",P,o(p(B.value)),1)])]),t("div",R,[t("table",E,[s[13]||(s[13]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 w-10"}),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[40%]"},"Produk"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Stok"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty"),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Harga @"),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total"),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",K,[g.value.length===0?(n(),l("tr",O,[...s[9]||(s[9]=[t("td",{colspan:"7",class:"px-6 py-10 text-center text-gray-500"},"Belum ada item dipilih.",-1)])])):c("",!0),(n(!0),l(b,null,w(g.value,e=>(n(),l("tr",{key:e.product_id||e.id,class:h(["hover:bg-gray-50 dark:hover:bg-gray-700/50 transition cursor-pointer",r.value.includes(e.product_id||e.id)?"bg-lime-50/50 dark:bg-lime-900/10":""]),onClick:u(i=>y(e.product_id||e.id),["stop"])},[t("td",{class:"px-6 py-4 whitespace-nowrap",onClick:s[1]||(s[1]=u(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:r.value.includes(e.product_id||e.id),onChange:i=>y(e.product_id||e.id),class:"w-4 h-4 rounded border-gray-300 text-lime-600 focus:ring-lime-500"},null,40,U)]),t("td",G,[t("div",J,[t("div",W,[e.image_url||e.image_path?(n(),l("img",{key:0,src:e.image_url||e.image_path,class:"h-10 w-10 object-contain p-0.5 mix-blend-multiply",alt:""},null,8,X)):(n(),l("div",Y,[...s[10]||(s[10]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]))]),t("div",Z,[t("div",{class:"text-sm font-bold text-gray-900 dark:text-white line-clamp-1 max-w-[200px]",title:e.name},o(e.name),9,tt),t("div",et,o(e.code),1),t("div",st,o(e.brand)+" â€¢ "+o(e.category),1)])])]),t("td",ot,[t("div",{class:h(["text-sm font-bold",(e.current_stock||0)<=(e.min_stock||0)?"text-red-600":"text-gray-900 dark:text-gray-300"])},o(e.current_stock||e.stock||0),3),t("div",rt,[t("span",null,"Min: "+o(e.min_stock||0),1),(e.current_stock||0)<=(e.min_stock||0)?(n(),l("span",at)):c("",!0)])]),t("td",{class:"px-6 py-4 whitespace-nowrap",onClick:s[2]||(s[2]=u(()=>{},["stop"]))},[t("button",{onClick:i=>a.$emit("edit",e),class:"px-2.5 py-1 rounded-md bg-white border border-gray-300 text-gray-700 text-sm font-bold hover:bg-gray-50 flex items-center gap-2 shadow-sm"},[f(o(e.quantity)+" "+o(e.unit_name||e.unit)+" ",1),s[11]||(s[11]=t("svg",{class:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1))],8,lt)]),t("td",nt,o(p(e.purchase_price)),1),t("td",it,o(p(e.purchase_price*e.quantity)),1),t("td",{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:s[3]||(s[3]=u(()=>{},["stop"]))},[t("button",{onClick:i=>a.$emit("remove",e),class:"text-gray-400 hover:text-red-600 transition p-1 rounded-full hover:bg-red-50"},[...s[12]||(s[12]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,dt)])],10,Q))),128))])])]),t("div",ct,[g.value.length===0?(n(),l("div",ut," Belum ada item dipilih. ")):c("",!0),(n(!0),l(b,null,w(g.value,e=>(n(),l("div",{key:e.product_id||e.id,class:h(["bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm p-3 flex gap-3 relative overflow-hidden transition-all",r.value.includes(e.product_id||e.id)?"ring-2 ring-lime-500 bg-lime-50/20":""]),onClick:i=>y(e.product_id||e.id)},[r.value.includes(e.product_id||e.id)?(n(),l("div",xt,[...s[14]||(s[14]=[t("div",{class:"w-5 h-5 bg-lime-500 rounded-full flex items-center justify-center shadow-sm"},[t("svg",{class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})])],-1)])])):c("",!0),t("div",gt,[e.image_url||e.image_path?(n(),l("img",{key:0,src:e.image_url||e.image_path,class:"w-full h-full object-contain p-1 mix-blend-multiply",alt:""},null,8,ht)):(n(),l("div",yt,[...s[15]||(s[15]=[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]))]),t("div",vt,[t("div",mt,[t("h4",{class:"text-sm font-bold text-gray-900 dark:text-white line-clamp-2 leading-tight mb-1",title:e.name},o(e.name),9,kt)]),t("div",ft,[t("span",null,o(e.brand),1),s[16]||(s[16]=t("span",{class:"text-gray-300"},"|",-1)),t("span",{class:h((e.current_stock||0)<=(e.min_stock||0)?"text-red-600 font-bold":"")}," Stok: "+o(e.current_stock||0)+" (Min: "+o(e.min_stock||0)+") ",3)]),t("div",bt,[t("div",{class:"flex flex-col gap-0.5",onClick:s[4]||(s[4]=u(()=>{},["stop"]))},[t("div",wt," @ "+o(p(e.purchase_price)),1),t("button",{onClick:i=>a.$emit("edit",e),class:"text-xs font-bold text-lime-600 bg-lime-50 border border-lime-200 px-2 py-0.5 rounded flex items-center gap-1 mt-1 active:scale-95 transition"},[t("span",null,"qty: "+o(e.quantity),1),s[17]||(s[17]=t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1))],8,_t)]),t("div",Ct,[s[18]||(s[18]=t("span",{class:"text-[10px] text-gray-400 uppercase"},"Subtotal",-1)),t("div",jt,o(p(e.purchase_price*e.quantity)),1)])])])],10,pt))),128))]),H(T,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:D(()=>[x.value?(n(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:s[6]||(s[6]=u(e=>x.value=!1,["self"]))},[t("div",Bt,[s[19]||(s[19]=t("div",{class:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4"},[t("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1)),t("h3",Mt,"Hapus "+o(r.value.length)+" Item Terpilih?",1),s[20]||(s[20]=t("p",{class:"text-center text-gray-500 text-sm mb-6"},"Tindakan ini akan menghapus item dari daftar RAB. Lanjutkan?",-1)),t("div",Lt,[t("button",{onClick:s[5]||(s[5]=e=>x.value=!1),class:"flex-1 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-bold hover:bg-gray-50 transition"},"Batal"),t("button",{onClick:L,class:"flex-1 py-2.5 rounded-lg bg-red-600 text-white font-bold hover:bg-red-700 shadow-lg shadow-red-500/30 transition"},"Hapus")])])])):c("",!0)]),_:1})]))}};export{zt as default};
