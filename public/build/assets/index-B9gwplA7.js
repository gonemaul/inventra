import{G as ae,E as d,u as oe,K as se,a as re,H as ne,p as w,l as m,o as c,e as L,d as le,m as y,f as t,g as l,i as ie,w as Y,x as de,q as X,I as Z,V as ue,n as A,F as W,C as ee,t as g,B as ce,k as te}from"./vendor-core-xEzA64kz.js";import"./vendor-scanner-WiLeg4yL.js";import"./vendor-common-BBegFRNv.js";import me from"./ConfirmSubmit-DgXzjLHJ.js";import{B as ge}from"./BottomSheet-BOB-4AAE.js";import pe from"./Cart-nUXbOTyC.js";import{_ as ye}from"./BarcodeScanner-DtCY_0Af.js";import"./vendor-charts-Bw6UNgWf.js";import"./Modal-Brc7AhdV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MoneyInput-B5fCytim.js";function be(T){const b=ae(),C="POS_REALTIME_DRAFT_V3",h=d(""),f=d("all"),_=d([]),S=d(!1),v=d(8),q=d(""),F=d([]),V=d(!1),x=d(null);d(null),d(!1),d("single"),d(null);const s=oe({input_type:"realtime",report_date:new Date().toISOString().slice(0,10),items:[],customer_id:null,payment_amount:0,change_amount:0,payment_method:"cash",discount_type:"fixed",discount_value:0,notes:""});se(async()=>{S.value=!0;try{const o=await re.get(route("sales.products.lite"));_.value=o.data}catch(o){console.error("Gagal load produk:",o),b.error("Gagal memuat database produk")}finally{S.value=!1}const e=localStorage.getItem(C);if(e)try{const o=JSON.parse(e);o.items&&(s.items=o.items),s.payment_amount=o.payment_amount||0,s.payment_method=o.payment_method||"cash",s.notes=o.notes||"",s.discount_type=o.discount_type||"fixed",s.discount_value=o.discount_value||0,o.selectedMember&&(x.value=o.selectedMember,s.customer_id=o.selectedMember.id)}catch{localStorage.removeItem(C)}}),ne([()=>s.items,()=>s.customer_id,()=>s.payment_amount,()=>s.discount_value,()=>s.notes],()=>{localStorage.setItem(C,JSON.stringify({items:s.items,customer_id:s.customer_id,payment_amount:s.payment_amount,payment_method:s.payment_method,notes:s.notes,discount_type:s.discount_type,discount_value:s.discount_value,selectedMember:x.value}))},{deep:!0});const N=e=>{try{const o=_.value.find(n=>n.code==e);if(o){if(o.stock<=0){b.warning(`Stok produk "${o.name}" habis!`);return}return o}}catch{return null}},R=e=>{const o=T.customers.find(n=>n.member_code==code||n.phone==code);o?$(o):alert("member tidak ada")},Q=w(()=>{let e=_.value;if(f.value!=="all"&&(e=e.filter(o=>o.category_id===f.value)),h.value){const o=h.value.toLowerCase();e=e.filter(n=>n.name.toLowerCase().includes(o)||n.code.toLowerCase().includes(o))}return e.slice(0,v.value)}),E=()=>{v.value<_.value.length&&(v.value+=20)};w(()=>{if(!q){F.value=[];return}if(q.value){const e=q.value.toLowerCase();result=T.customers.filter(o=>o.name.toLowerCase().includes(e)||o.code.toLowerCase().includes(e))}F.value=result.slice(0,5)});const p=w(()=>s.items.reduce((e,o)=>e+(parseFloat(o.subtotal)||0),0)),B=w(()=>{const e=parseFloat(s.discount_value)||0;if(e<=0)return 0;if(s.discount_type==="percent"){const o=e>100?100:e;return Math.round(p.value*o/100)}return e>p.value?p.value:e}),k=w(()=>{const e=p.value-B.value,o=e>0?e:0;return o===0&&(s.payment_amount=0,s.discount_value=0),o}),M=w(()=>(parseFloat(s.payment_amount)||0)-k.value),P=w(()=>s.payment_method!=="cash"&&s.payment_method!==""?!0:(parseFloat(s.payment_amount)||0)>=k.value),I=w(()=>s.items.some(e=>e.quantity<=0||isNaN(e.quantity))),j=w(()=>{const e=k.value;if(e<=0)return[];const o=[{label:"Uang Pas",value:e}];if([2e3,5e3,1e4,2e4,5e4,1e5].forEach(u=>{u>e&&!o.find(J=>J.value===u)&&o.push({label:a(u),value:u})}),e>5e4){const u=Math.ceil(e/5e4)*5e4;o.find(J=>J.value===u)||o.push({label:a(u),value:u})}return o.slice(0,4)}),i=e=>{s.payment_amount=e.value},G=()=>{s.payment_amount=0},O=e=>{if(parseFloat(e.stock)<=0){b.error("Stok habis!");return}const o=s.items.find(n=>n.product_id===e.id);if(o){if(o.quantity+1>e.stock){b.warning("Stok maksimal!");return}o.quantity++,H(o)}else{const n=parseFloat(e.selling_price||e.price);s.items.push({product_id:e.id,code:e.code,name:e.name,unit:e.unit,stock_max:parseFloat(e.stock),image:e.image_path,selling_price:n,original_price:n,quantity:1,subtotal:n})}},z=e=>s.items.splice(e,1),U=(e,o)=>{const n=s.items[e],u=parseFloat(n.quantity)+o;if(u>n.stock_max){b.warning(`Stok sisa ${n.stock_max}`);return}if(u<=0){confirm("Hapus item ini?")&&z(e);return}n.quantity=u,H(n)},H=e=>{e.unit?.is_decimal===1||(e.quantity=Math.round(e.quantity),e.quantity<1&&(e.quantity=1)),e.quantity>e.stock_max&&(e.quantity=e.stock_max,b.warning(`Stok sisa ${e.stock_max}`)),e.subtotal=Math.round(e.quantity*e.selling_price)},D=e=>{const o=parseFloat(e.subtotal)||0,n=parseFloat(e.selling_price)||0;if(!(n<=0))if(e.unit?.is_decimal===1){let u=o/n;u>e.stock_max&&(u=e.stock_max,e.subtotal=Math.round(u*n),b.warning("Melebihi sisa stok!")),e.quantity=parseFloat(u.toFixed(4))}else confirm(`‚ö†Ô∏è Ubah harga satuan agar sesuai total Rp ${a(o)}?`)?e.quantity>0&&(e.selling_price=Math.round(o/e.quantity)):e.subtotal=Math.round(e.quantity*e.selling_price)},K=e=>{e.subtotal=Math.round(e.quantity*e.selling_price)},$=e=>{x.value=e,s.customer_id=e.id,F.value=[],q.value=""},r=(e=!1,o={})=>{s.change_amount=M.value,s.payment_amount=parseFloat(s.payment_amount),s.transform(n=>({...n,print_invoice:e})).post(route("sales.pos.store"),{onStart:o.onStart,onFinish:o.onFinish,onSuccess:n=>{localStorage.removeItem(C),s.reset(),s.items=[],x.value=null,o.onSuccess&&o.onSuccess(n)},onError:n=>{console.error(n),b.error("Gagal memproses transaksi")}})},a=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e);return{form:s,allProducts:_,filteredProducts:Q,isFetchingData:S,queryProduk:N,queryMember:R,searchQuery:h,selectedCategory:f,loadMoreProducts:E,memberSearch:q,memberSearchResults:F,isLoadingMember:V,selectedMember:x,selectMember:$,removeMember:()=>{x.value=null,s.customer_id=null},subTotal:p,discountAmount:B,grandTotal:k,changeAmount:M,isPaymentSufficient:P,hasInvalidQty:I,moneySuggestions:j,addItem:O,removeItem:z,updateQty:U,recalcFromQty:H,recalcFromSubtotal:D,recalcFromPrice:K,handleMoneyClick:i,resetPayment:G,submitTransaction:r,rp:a}}const he={class:"flex flex-col lg:flex-row h-[100dvh] w-full bg-gray-100 dark:bg-gray-900 overflow-hidden font-sans transition-colors duration-300"},fe={class:"relative flex flex-col flex-1 h-full overflow-hidden"},ve={class:"z-10 flex items-center gap-3 px-4 py-3 bg-white border-b shadow-sm shrink-0 dark:bg-gray-800 dark:border-gray-700"},xe={class:"relative flex-1"},ke={key:0,class:"absolute right-11 top-3.5 flex items-center gap-2"},we={class:"px-4 py-2 overflow-x-auto bg-white border-b shadow-sm shrink-0 dark:bg-gray-800 dark:border-gray-700 whitespace-nowrap scrollbar-hide"},_e=["onClick"],Me={class:"grid grid-cols-2 gap-3 pb-20 md:grid-cols-3 lg:grid-cols-4"},Ce=["onClick"],Se={key:0,class:"absolute z-10 flex items-center justify-center w-8 h-8 text-xs font-bold text-white border-2 border-white rounded-full shadow-lg bottom-1 right-1 bg-lime-600 animate-bounce-short"},qe={class:"relative w-full overflow-hidden bg-gray-100 aspect-square dark:bg-gray-700"},je=["src"],Fe={key:1,class:"absolute z-10 top-2 right-2"},Be={class:"bg-gray-900/70 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm"},Pe={key:2,class:"absolute z-10 top-2 left-2"},$e={class:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-lg shadow-sm animate-pulse"},Te={class:"p-3 flex flex-col h-[85px] justify-between"},Ie={class:"text-xs font-bold leading-snug text-gray-800 sm:text-sm dark:text-gray-100 line-clamp-2"},ze={class:"flex items-end justify-between mt-1"},He={class:"flex flex-col"},Le={class:"text-[13px] sm:text-[15px] font-black text-lime-600 dark:text-lime-400 leading-none"},De={key:0,class:"py-10 text-center"},Ae={key:1,class:"flex flex-col items-center justify-center px-4 py-16 text-center animate-fade-in"},Ve={key:2,class:"py-4 text-center text-[10px] text-gray-400"},Ne={key:0,class:"absolute z-30 lg:hidden bottom-4 left-4 right-4"},Re={class:"flex items-center gap-3"},Qe={class:"flex items-center justify-center text-xs font-bold text-white rounded-full shadow-sm bg-lime-500 dark:bg-white dark:text-lime-700 w-7 h-7"},Ee={class:"flex flex-col items-start leading-none gap-0.5"},Ge={class:"text-lg font-bold"},Oe={class:"space-y-6"},Ue={class:"flex items-center gap-4 pb-4 border-b border-gray-100 dark:border-gray-800"},Ke={class:"flex items-center justify-center text-lg font-bold text-gray-400 bg-gray-100 border border-gray-200 w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-700 shrink-0"},Je={class:"flex-1 min-w-0"},Ye={class:"text-lg font-bold leading-tight text-gray-800 truncate dark:text-white"},We={class:"flex items-center justify-between mt-1"},Xe={class:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"},Ze={class:"bg-gray-50 dark:bg-gray-800/50 p-1.5 rounded-2xl border border-gray-200 dark:border-gray-700"},et={class:"flex items-center justify-between"},tt=["disabled"],at={class:"flex-1 px-2 text-center"},ot={class:"flex items-center justify-between p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 dark:border-gray-800 rounded-xl"},st={class:"font-bold text-gray-600 dark:text-gray-300"},rt={class:"text-right"},nt={class:"text-2xl font-black text-gray-900 dark:text-white"},lt={key:0,class:"px-3 py-2 text-xs font-bold text-center text-red-600 border border-red-100 rounded-lg bg-red-50"},it={class:"flex gap-3 h-14"},xt={__name:"index",props:{categories:Array,customers:Array},setup(T){const C=be(T),{form:h,filteredProducts:f,isFetchingData:_,searchQuery:S,selectedCategory:v,loadMoreProducts:q,queryMember:F,queryProduk:V,addItem:x,grandTotal:s,changeAmount:N,isPaymentSufficient:R,hasInvalidQty:Q,submitTransaction:E,rp:p}=C,B=ae(),k=d(!1),M=d(!1),P=d(!1),I=d(!1),j=d("product"),i=d({id:null,name:"",code:"",price:0,quantity:1,stock:0,unit:"Pcs",image:null}),G=r=>{console.log(r),i.value={id:r.id,name:r.name,code:r.code,image_url:r.image_url,price:parseFloat(r.selling_price||r.price||0),quantity:1,stock:parseInt(r.stock||0),unit:r.unit?.name||"Pcs"},I.value=!0},O=r=>{const{scrollTop:a,clientHeight:e,scrollHeight:o}=r.target;a+e>=o-50&&q()},z=()=>{j.value="product",M.value=!0},U=()=>{j.value="member",M.value=!0},H=async r=>{if(M.value=!1,alert("scan berhasil "+j.value+"|"+r),j.value=="product")try{const a=await V(r);a?(r=a,G(r)):alert("Produk tidak ditemukan di database.")}catch(a){console.error("Terjadi kesalahan saat query produk:",a),alert("Gagal mengambil data produk.")}else j.value=="member"&&(r=F(r))},D=(r=!1)=>{x(i),r&&z()},K=r=>{if(h.items.length===0)return B.error("Keranjang kosong!");if(Q.value)return B.error("Qty tidak valid!");if(h.payment_method==="cash"&&!R.value)return B.error("Uang kurang!");E(r,{onSuccess:a=>{P.value=!1,k.value=!1;const e=a.props.flash?.print_url;r&&e?setTimeout(()=>{window.open(e,"_blank","width=300,height=600")},50):r&&!e&&alert("Gagal mendapatkan URL Print dari server.")}})},$=r=>{const a=h.items.find(e=>e.product_id===r);return a?a.quantity:0};return(r,a)=>(c(),m(W,null,[L(l(ie),{title:"Kasir POS"}),L(me,{showConfirmModal:P.value,changeAmount:l(N),onClose:a[0]||(a[0]=e=>P.value=!1),onConfirmTransaction:K},null,8,["showConfirmModal","changeAmount"]),M.value?(c(),le(ye,{key:0,onResult:H,onClose:a[1]||(a[1]=e=>M.value=!1)})):y("",!0),t("div",he,[t("div",fe,[t("div",ve,[L(l(de),{href:r.route("dashboard"),class:"p-2 rounded-lg bg-lime-50 dark:bg-gray-700 text-lime-700 dark:text-lime-400"},{default:Y(()=>[...a[15]||(a[15]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t("div",xe,[X(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>ue(S)?S.value=e:null),type:"text",placeholder:"Cari Nama / Kode...",class:"w-full pl-9 pr-10 py-2.5 bg-gray-100 dark:bg-gray-900 border-none rounded-xl focus:ring-2 focus:ring-lime-500 text-sm dark:text-white transition-all shadow-inner"},null,512),[[Z,l(S)]]),a[18]||(a[18]=t("span",{class:"absolute text-gray-400 left-3 top-3"},"üîç",-1)),l(_)?(c(),m("div",ke,[...a[16]||(a[16]=[t("span",{class:"text-[10px] text-gray-400 italic"},"Syncing...",-1),t("span",{class:"relative flex w-2 h-2"},[t("span",{class:"absolute inline-flex w-full h-full rounded-full opacity-75 animate-ping bg-lime-400"}),t("span",{class:"relative inline-flex w-2 h-2 rounded-full bg-lime-500"})],-1)])])):y("",!0),t("button",{onClick:a[3]||(a[3]=e=>z()),class:"absolute right-1.5 top-1.5 p-1 bg-white dark:bg-gray-700 rounded-lg shadow-sm text-gray-600 dark:text-gray-200 hover:text-lime-600 hover:bg-lime-50 transition border border-gray-200 dark:border-gray-600",title:"Scan Produk"},[...a[17]||(a[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])])]),t("div",we,[t("button",{onClick:a[4]||(a[4]=e=>v.value="all"),class:A([l(v)==="all"?"bg-lime-500 text-white shadow-lime-500/40":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600","px-5 py-2 mr-2 text-xs font-bold transition-all rounded-full active:scale-95"])}," Semua ",2),(c(!0),m(W,null,ee(T.categories,e=>(c(),m("button",{key:e.id,onClick:o=>v.value=e.id,class:A([l(v)===e.id?"bg-lime-500 text-white shadow-lime-500/40":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600","px-5 py-2 mr-2 text-xs font-bold transition-all rounded-full active:scale-95"])},g(e.name),11,_e))),128))]),t("div",{class:"h-[calc(100vh-220px)] flex-1 p-4 overflow-y-auto bg-gray-100 custom-scroll pb-28 lg:pb-4 dark:bg-gray-900",onScroll:O},[t("div",Me,[(c(!0),m(W,null,ee(l(f),e=>(c(),m("div",{key:e.id,onClick:o=>l(x)(e),class:A(["relative overflow-hidden transition-all bg-white border border-gray-200 shadow-sm cursor-pointer group dark:bg-gray-800 rounded-xl dark:border-gray-700 hover:shadow-md hover:border-lime-500 active:scale-95",$(e.id)>0?"border-lime-500 shadow-md bg-lime-50 ring-1 ring-lime-500":"border-gray-200 shadow-sm bg-white hover:border-lime-300"])},[$(e.id)>0?(c(),m("div",Se,g($(e.id))+"x ",1)):y("",!0),t("div",qe,[e.image_path?(c(),m("img",{key:0,src:e.image_url,loading:"lazy",decoding:"async",alt:"",class:"absolute inset-0 z-10 object-cover w-full h-full transition-opacity duration-500 opacity-0",onload:"this.classList.remove('opacity-0')",onerror:"this.style.display='none'"},null,8,je)):y("",!0),a[19]||(a[19]=t("div",{class:"flex flex-col items-center justify-center w-full h-full text-gray-500 bg-gray-300 dark:text-gray-700 dark:bg-gray-400"},[t("svg",{class:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",{class:"text-[9px] font-bold mt-1 opacity-50"},"NO IMG")],-1)),e.unit?(c(),m("div",Fe,[t("span",Be,g(e.unit.name),1)])):y("",!0),e.stock<=5?(c(),m("div",Pe,[t("span",$e," Sisa "+g(parseFloat(e.stock)),1)])):y("",!0),a[20]||(a[20]=t("div",{class:"absolute inset-0 z-20 flex items-center justify-center transition-opacity opacity-0 bg-lime-500/20 group-hover:opacity-100"},[t("div",{class:"p-2 text-white transition-transform duration-300 scale-0 rounded-full shadow-lg bg-lime-500 group-hover:scale-110"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])])],-1))]),t("div",Te,[t("h3",Ie,g(e.name),1),t("div",ze,[t("div",He,[t("span",Le,g(l(p)(e.selling_price||e.price)),1)]),a[21]||(a[21]=t("div",{class:"text-gray-300 transition-colors group-hover:text-lime-500"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])])],10,Ce))),128))]),l(_)&&l(f).length===0?(c(),m("div",De,[...a[22]||(a[22]=[t("div",{class:"w-8 h-8 mx-auto mb-2 border-b-2 rounded-full animate-spin border-lime-500"},null,-1),t("span",{class:"text-xs text-gray-400"},"Memuat database produk...",-1)])])):l(f).length===0?(c(),m("div",Ae,[a[24]||(a[24]=ce('<div class="relative mb-6"><div class="flex items-center justify-center w-24 h-24 rounded-full shadow-inner bg-gray-50 dark:bg-gray-800"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div class="absolute -top-2 -right-2 bg-white dark:bg-gray-700 rounded-full p-1.5 shadow-md border border-gray-100 dark:border-gray-600"><div class="p-1 rounded-full bg-lime-100 dark:bg-lime-900/50"><svg class="w-5 h-5 text-lime-500 dark:text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"></path></svg></div></div></div><h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white"> Produk tidak ditemukan </h3><p class="max-w-xs mx-auto mb-6 text-sm leading-relaxed text-gray-500 dark:text-gray-400"> Kami tidak dapat menemukan produk dengan kata kunci atau kategori tersebut. </p>',3)),t("button",{onClick:a[5]||(a[5]=e=>{r.search="",v.value="all"}),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:border-lime-500 hover:text-lime-600 dark:hover:border-lime-500 dark:hover:text-lime-400 shadow-sm hover:shadow-md"},[...a[23]||(a[23]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),te(" Reset Pencarian ",-1)])])])):y("",!0),l(f).length>0&&l(f).length%20===0?(c(),m("div",Ve," Scroll untuk memuat lebih banyak... ")):y("",!0)],32),l(h).items.length>0?(c(),m("div",Ne,[t("button",{onClick:a[6]||(a[6]=e=>k.value=!0),class:"w-full bg-gray-900 dark:bg-lime-600 text-white p-3.5 rounded-2xl shadow-xl shadow-gray-900/20 flex justify-between items-center animate-bounce-subtle"},[t("div",Re,[t("span",Qe,g(l(h).items.reduce((e,o)=>e+parseFloat(o.quantity),0)),1),t("div",Ee,[a[25]||(a[25]=t("span",{class:"text-[9px] text-gray-400 dark:text-lime-100 uppercase font-bold tracking-wider"},"Total Belanja",-1)),t("span",Ge,g(l(p)(l(s))),1)])]),a[26]||(a[26]=t("span",{class:"flex items-center gap-1 px-4 py-2 text-xs font-bold bg-gray-700 dark:bg-lime-800/30 rounded-xl"},[te(" Bayar "),t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})])],-1))])])):y("",!0)]),L(pe,{showMobileCart:k.value,reprops:l(C),onOpenScanMember:U,onShowBayar:a[7]||(a[7]=e=>P.value=!0),onShowDesktop:a[8]||(a[8]=e=>k.value=!1)},null,8,["showMobileCart","reprops"])]),L(ge,{show:I.value,onClose:a[14]||(a[14]=e=>I.value=!1),title:"Tambah Pesanan"},{footer:Y(()=>[t("div",it,[t("button",{onClick:a[12]||(a[12]=e=>D(!1)),class:"flex-1 font-bold transition border text-lime-700 bg-lime-100 border-lime-200 rounded-xl active:bg-lime-200 dark:bg-lime-800 dark:text-lime-300 dark:border-lime-700"}," Masuk Keranjang "),t("button",{onClick:a[13]||(a[13]=e=>D(!0)),class:"flex-[1.3] bg-gray-900 text-white font-bold rounded-xl shadow-xl flex items-center justify-center gap-2 active:scale-[0.98] transition hover:bg-gray-800 dark:bg-white dark:text-gray-900"},[...a[32]||(a[32]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),t("span",null,"Scan Lagi",-1)])])])]),default:Y(()=>[t("div",Oe,[t("div",Ue,[t("div",Ke,g(i.value.name?.substring(0,2).toUpperCase()),1),t("div",Je,[t("h3",Ye,g(i.value.name),1),t("div",We,[t("p",Xe,g(i.value.code),1),t("p",{class:A(["text-xs font-medium",3>i.value.stock?"text-red-500":"text-gray-400"])}," Stok: "+g(i.value.stock),3)])])]),t("div",Ze,[t("div",et,[t("button",{onClick:a[9]||(a[9]=e=>i.value.quantity>1?i.value.quantity--:null),class:"flex items-center justify-center text-gray-500 transition bg-white border border-gray-200 shadow-sm w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-600 active:scale-95 hover:text-red-500 disabled:opacity-50",disabled:i.value.quantity<=1},[...a[27]||(a[27]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,tt),t("div",at,[a[28]||(a[28]=t("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-0.5"},"Jumlah Beli",-1)),X(t("input",{"onUpdate:modelValue":a[10]||(a[10]=e=>i.value.quantity=e),type:"number",class:"w-full p-0 text-3xl font-black text-center text-gray-800 bg-transparent border-none dark:text-white focus:ring-0"},null,512),[[Z,i.value.quantity,void 0,{number:!0}]])]),t("button",{onClick:a[11]||(a[11]=e=>i.value.quantity++),class:"flex items-center justify-center text-white transition shadow-lg w-14 h-14 bg-lime-500 rounded-xl shadow-lime-500/30 active:scale-95"},[...a[29]||(a[29]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),t("div",ot,[t("div",null,[a[30]||(a[30]=t("p",{class:"text-xs text-gray-400"},"Harga Satuan",-1)),t("p",st,g(l(p)(i.value.price)),1)]),t("div",rt,[a[31]||(a[31]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Subtotal ",-1)),t("p",nt,g(l(p)(i.value.price*i.value.quantity)),1)])]),i.value.quantity>i.value.stock?(c(),m("div",lt," ‚ö†Ô∏è Jumlah melebihi sisa stok ("+g(i.value.stock)+") ",1)):y("",!0)])]),_:1},8,["show"])],64))}};export{xt as default};
