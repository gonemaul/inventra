import{u as _,p as b,l as o,o as l,e as c,g as i,i as B,w as j,f as t,q as y,F as m,C as x,t as s,J as C,I as h,n as D,z as T}from"./vendor-core-D38XQ_w0.js";import{_ as H}from"./AuthenticatedLayout-DnsbiX89.js";import"./vendor-common-BBegFRNv.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-BzR847ej.js";import"./useActionLoading-s7e1gqkt.js";const I={class:"space-y-6"},P={class:"p-6 bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},S={class:"grid items-end grid-cols-1 gap-4 md:grid-cols-4"},F={class:"md:col-span-2"},M=["value"],N={class:"flex gap-2 md:col-span-2"},V={key:0,class:"space-y-6"},z={class:"grid grid-cols-1 gap-4 md:grid-cols-4"},A={class:"mt-1 text-2xl font-black"},R={class:"mt-1 text-sm font-medium"},U={class:"absolute right-2 bottom-2 opacity-20"},O={key:0,class:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},L={key:1,class:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:2,class:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},q={class:"p-5 bg-white border border-gray-200 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},E={class:"text-xl font-bold text-green-600"},G={class:"p-5 bg-white border border-gray-200 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},J={class:"text-xl font-bold text-red-600"},K={class:"p-5 bg-white border border-gray-200 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},Q={class:"text-xl font-bold text-blue-600"},$={class:"p-6 bg-white border border-gray-200 shadow-lg rounded-2xl dark:bg-gray-800 dark:border-gray-700"},X={class:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},Y={class:"w-full text-sm text-left"},Z={class:"divide-y divide-gray-100 dark:divide-gray-700"},tt={class:"px-6 py-3 text-gray-500"},et={class:"px-6 py-3 font-medium text-gray-800 dark:text-white"},rt={class:"px-6 py-3 text-blue-500"},at={class:"px-6 py-3 text-center"},st={class:"px-6 py-3 font-bold text-right text-purple-600"},dt={key:1,class:"flex flex-col items-center justify-center h-64 border-2 border-gray-200 border-dashed bg-gray-50 rounded-2xl"},ot={key:2,class:"flex flex-col items-center justify-center h-64 border-2 border-gray-200 border-dashed bg-gray-50 rounded-2xl"},yt={__name:"PriceWatch",props:{products:Array,filters:Object,data:Array,product:Object,summary:Object},setup(r){const n=r,g=_({product_id:n.filters.product_id||"",start_date:n.filters.start_date,end_date:n.filters.end_date}),f=()=>{g.get(route("reports.price-watch"),{preserveScroll:!0})},u=d=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(d),p=d=>new Date(d).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"2-digit"}),k=b(()=>({chart:{type:"line",height:350,toolbar:{show:!1},animations:{enabled:!0}},stroke:{curve:"step",width:3},colors:["#8b5cf6"],markers:{size:5,hover:{size:7}},xaxis:{categories:n.data?n.data.map(d=>p(d.transaction_date)):[],tooltip:{enabled:!1}},yaxis:{labels:{formatter:d=>u(d)}},tooltip:{y:{formatter:d=>u(d)}},grid:{borderColor:"#f3f4f6"}})),v=b(()=>[{name:"Harga Beli",data:n.data?n.data.map(d=>d.purchase_price):[]}]);return(d,e)=>(l(),o(m,null,[c(i(B),{title:"Price Watch"}),c(H,{headerTitle:"Analisa Harga Beli (Price Watch)"},{default:j(()=>[t("div",I,[t("div",P,[e[4]||(e[4]=t("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"}," ðŸ” Pilih Produk untuk Dianalisa ",-1)),t("div",S,[t("div",F,[y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>i(g).product_id=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700 focus:ring-purple-500"},[e[3]||(e[3]=t("option",{value:"",disabled:""}," -- Pilih Barang -- ",-1)),(l(!0),o(m,null,x(r.products,a=>(l(),o("option",{key:a.id,value:a.id},s(a.code)+" - "+s(a.name),9,M))),128))],512),[[C,i(g).product_id]])]),t("div",N,[y(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>i(g).start_date=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700"},null,512),[[h,i(g).start_date]]),y(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>i(g).end_date=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700"},null,512),[[h,i(g).end_date]]),t("button",{onClick:f,class:"px-4 font-bold text-white transition bg-purple-600 rounded-lg shadow hover:bg-purple-700"}," Cek ")])])]),r.product&&r.data.length>0?(l(),o("div",V,[t("div",z,[t("div",{class:D(["relative flex flex-col justify-between p-5 overflow-hidden text-white shadow-lg rounded-2xl",r.summary.trend>0?"bg-red-500":r.summary.trend<0?"bg-green-500":"bg-gray-500"])},[t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs font-bold tracking-widest uppercase opacity-80"}," Tren Harga ",-1)),t("h3",A,s(r.summary.trend>0?"NAIK":r.summary.trend<0?"TURUN":"STABIL"),1),t("p",R,s(r.summary.trend>0?"+":"")+s(u(r.summary.trend)),1)]),t("div",U,[r.summary.trend>0?(l(),o("svg",O,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)])])):r.summary.trend<0?(l(),o("svg",L,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)])])):(l(),o("svg",W,[...e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14"},null,-1)])]))])],2),t("div",q,[e[9]||(e[9]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Harga Terendah ",-1)),t("p",E,s(u(r.summary.min)),1)]),t("div",G,[e[10]||(e[10]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Harga Tertinggi ",-1)),t("p",J,s(u(r.summary.max)),1)]),t("div",K,[e[11]||(e[11]=t("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Harga Rata-rata ",-1)),t("p",Q,s(u(r.summary.avg)),1)])]),t("div",$,[e[12]||(e[12]=t("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"}," Grafik Fluktuasi Harga Beli ",-1)),c(i(T),{type:"line",height:"350",options:k.value,series:v.value},null,8,["options","series"])]),t("div",X,[e[14]||(e[14]=t("div",{class:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},[t("h3",{class:"font-bold text-gray-800 dark:text-white"}," Riwayat Transaksi Pembelian ")],-1)),t("table",Y,[e[13]||(e[13]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Tanggal"),t("th",{class:"px-6 py-3"},"Supplier"),t("th",{class:"px-6 py-3"},"No. Invoice"),t("th",{class:"px-6 py-3 text-center"},"Qty Beli"),t("th",{class:"px-6 py-3 text-right"}," Harga Satuan ")])],-1)),t("tbody",Z,[(l(!0),o(m,null,x(r.data,(a,w)=>(l(),o("tr",{key:w,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",tt,s(p(a.transaction_date)),1),t("td",et,s(a.supplier_name),1),t("td",rt,s(a.reference_no),1),t("td",at,s(a.quantity),1),t("td",st,s(u(a.purchase_price)),1)]))),128))])])])])):r.product&&r.data.length===0?(l(),o("div",dt,[...e[15]||(e[15]=[t("p",{class:"text-gray-500"}," Belum ada riwayat pembelian untuk produk ini dalam periode tersebut. ",-1)])])):(l(),o("div",ot,[...e[16]||(e[16]=[t("div",{class:"flex items-center justify-center w-16 h-16 mb-4 bg-gray-200 rounded-full"},[t("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),t("p",{class:"text-gray-500"}," Pilih produk di atas untuk melihat analisa harga. ",-1)])]))])]),_:1})],64))}};export{yt as default};
