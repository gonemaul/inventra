import{u as _,j as v,g as r,o,a as b,d as n,h as w,w as D,b as t,k as p,F as u,q as h,t as s,B as S,A as m,f as j,i as T,n as B}from"./app-B5O1DEgc.js";import{_ as V}from"./AuthenticatedLayout-C7OteFIt.js";import{u as A}from"./useActionLoading-f6xSxY_f.js";import"./useSidebar-DQ6TO2e-.js";const C={class:"space-y-6"},M={class:"p-6 bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},q={class:"grid items-end grid-cols-1 gap-4 md:grid-cols-4"},F={class:"md:col-span-2"},L=["value"],P={class:"flex gap-2"},K={class:"flex-1"},N=["disabled"],U={key:0,class:"overflow-hidden bg-white border border-gray-200 shadow-lg rounded-2xl dark:bg-gray-800 dark:border-gray-700"},O={class:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-700/50"},R={class:"text-2xl font-black text-gray-800 dark:text-white"},z={class:"text-sm text-gray-500"},E={class:"text-right"},H={class:"text-3xl font-black text-lime-600 dark:text-lime-400"},I={class:"text-sm font-normal text-gray-400"},W={class:"overflow-x-auto"},$={class:"w-full text-sm text-left"},G={class:"divide-y divide-gray-100 dark:divide-gray-700"},J={class:"font-medium bg-yellow-50 dark:bg-yellow-900/10"},Q={class:"px-6 py-3 text-yellow-700",colspan:"3"},X={class:"px-6 py-3 font-bold text-right text-yellow-700"},Y={class:"px-6 py-3 text-xs text-gray-500 whitespace-nowrap"},Z={class:"px-6 py-3"},tt={class:"flex flex-col gap-1"},et={class:"font-mono text-xs font-bold text-gray-700 dark:text-gray-300"},at={class:"px-6 py-3 italic text-gray-600 dark:text-gray-400"},st={class:"px-6 py-3 text-center"},rt={key:0,class:"px-2 py-1 font-bold text-green-600 rounded bg-green-50"},ot={key:1,class:"text-gray-300"},dt={class:"px-6 py-3 text-center"},lt={key:0,class:"px-2 py-1 font-bold text-red-600 rounded bg-red-50"},nt={key:1,class:"text-gray-300"},it={class:"px-6 py-3 font-bold text-right text-gray-900 dark:text-white"},ct={key:0},gt={key:1,class:"flex flex-col items-center justify-center border-2 border-gray-300 border-dashed h-96 bg-gray-50 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},bt={__name:"StockCard",props:{filters:Object,products:Array,reportData:Object},setup(d){const c=d,{isActionLoading:x}=A(),l=_({product_id:c.filters.product_id||"",start_date:c.filters.start_date,end_date:c.filters.end_date}),k=()=>{x.value=!0,l.get(route("reports.stock-card"),{preserveScroll:!0,preserveState:!0,onFinish:()=>{x.value=!1}})},g=v(()=>{if(!c.reportData)return[];let i=c.reportData.opening_stock;return c.reportData.movements.map(e=>(i+=e.quantity,{...e,balance_after:i}))}),y=i=>new Date(i).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),f=i=>({initial:"bg-gray-100 text-gray-600",purchase:"bg-green-100 text-green-700",sale:"bg-blue-100 text-blue-700",adjustment_in:"bg-yellow-100 text-yellow-700",adjustment_out:"bg-red-100 text-red-700",return_in:"bg-purple-100 text-purple-700"})[i]||"bg-gray-100";return(i,e)=>(o(),r(u,null,[b(n(w),{title:"Kartu Stok"}),b(V,{headerTitle:"Laporan & Audit"},{default:D(()=>[t("div",C,[t("div",M,[e[7]||(e[7]=t("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"}," ðŸ” Filter Kartu Stok ",-1)),t("div",q,[t("div",F,[e[4]||(e[4]=t("label",{class:"block mb-1 text-xs font-bold text-gray-500 uppercase"},"Pilih Produk",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n(l).product_id=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700 focus:ring-lime-500 dark:text-white"},[e[3]||(e[3]=t("option",{value:"",disabled:""},"-- Cari Barang --",-1)),(o(!0),r(u,null,h(d.products,a=>(o(),r("option",{key:a.id,value:a.id},s(a.code)+" - "+s(a.name),9,L))),128))],512),[[S,n(l).product_id]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block mb-1 text-xs font-bold text-gray-500 uppercase"},"Dari Tanggal",-1)),p(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>n(l).start_date=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[m,n(l).start_date]])]),t("div",P,[t("div",K,[e[6]||(e[6]=t("label",{class:"block mb-1 text-xs font-bold text-gray-500 uppercase"},"Sampai",-1)),p(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>n(l).end_date=a),class:"w-full border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[m,n(l).end_date]])]),t("button",{onClick:k,disabled:n(l).processing,class:"flex items-center justify-center px-4 py-2 mt-auto font-bold text-white transition rounded-lg shadow-md bg-lime-500 hover:bg-lime-600"}," Tampilkan ",8,N)])])]),d.reportData?(o(),r("div",U,[t("div",O,[t("div",null,[t("h2",R,s(d.reportData.product.name),1),t("p",z,s(d.reportData.product.code)+" â€¢ "+s(d.reportData.product.category?.name),1)]),t("div",E,[e[8]||(e[8]=t("p",{class:"text-xs font-bold tracking-widest text-gray-400 uppercase"}," Saldo Akhir Periode ",-1)),t("p",H,[j(s(g.value.length>0?g.value[g.value.length-1].balance_after:d.reportData.opening_stock)+" ",1),t("span",I,s(d.reportData.product.unit?.name),1)])])]),t("div",W,[t("table",$,[e[11]||(e[11]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-100 dark:bg-gray-900/50"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Waktu"),t("th",{class:"px-6 py-3"},"Tipe & Ref"),t("th",{class:"px-6 py-3"},"Keterangan"),t("th",{class:"px-6 py-3 text-center text-green-600"}," Masuk "),t("th",{class:"px-6 py-3 text-center text-red-600"}," Keluar "),t("th",{class:"px-6 py-3 font-black text-right"}," Saldo ")])],-1)),t("tbody",G,[t("tr",J,[t("td",Q," âž¡ï¸ Saldo Awal (Sebelum "+s(y(n(l).start_date).split(",")[0])+") ",1),e[9]||(e[9]=t("td",{colspan:"2"},null,-1)),t("td",X,s(d.reportData.opening_stock),1)]),(o(!0),r(u,null,h(g.value,a=>(o(),r("tr",{key:a.id,class:"transition hover:bg-gray-50 dark:hover:bg-gray-700/30"},[t("td",Y,s(y(a.created_at)),1),t("td",Z,[t("div",tt,[t("span",{class:B(["px-2 py-0.5 rounded text-[10px] font-bold uppercase w-fit border",f(a.type)])},s(a.type),3),t("span",et,s(a.reference_number||"-"),1)])]),t("td",at,s(a.description),1),t("td",st,[a.quantity>0?(o(),r("span",rt," +"+s(a.quantity),1)):(o(),r("span",ot,"-"))]),t("td",dt,[a.quantity<0?(o(),r("span",lt,s(a.quantity),1)):(o(),r("span",nt,"-"))]),t("td",it,s(a.balance_after),1)]))),128)),g.value.length===0?(o(),r("tr",ct,[...e[10]||(e[10]=[t("td",{colspan:"6",class:"px-6 py-10 italic text-center text-gray-400"}," Tidak ada aktivitas transaksi pada rentang tanggal ini. ",-1)])])):T("",!0)])])])])):(o(),r("div",gt,[...e[12]||(e[12]=[t("div",{class:"flex items-center justify-center w-20 h-20 mb-4 bg-gray-200 rounded-full dark:bg-gray-700 animate-pulse"},[t("svg",{class:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])],-1),t("h3",{class:"text-lg font-bold text-gray-700 dark:text-gray-300"}," Pilih Produk Terlebih Dahulu ",-1),t("p",{class:"text-sm text-gray-500"}," Silakan pilih produk di atas untuk melihat mutasi stok. ",-1)])]))])]),_:1})],64))}};export{bt as default};
