import{G as _,u as y,E as w,H as B,d as V,o as m,w as d,f as e,e as i,g as o,q as x,I as S,k as $,l as k}from"./vendor-core-D38XQ_w0.js";import{P as C}from"./PrimaryButton-BaxuxEfe.js";import{_ as P}from"./SecondaryButton-CyauSiwY.js";import{_ as u}from"./InputLabel-CNHad_nB.js";import{_ as f}from"./TextInput-lw9tkZ28.js";import{u as T}from"./useActionLoading-s7e1gqkt.js";import{B as O}from"./BottomSheet-CCD1ZQZl.js";import"./vendor-common-BBegFRNv.js";import"./vendor-charts-Bw6UNgWf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"p-6"},A={class:"mt-6 space-y-4"},F={class:"flex justify-end gap-3 mt-6"},M={key:0},z={key:1},J={__name:"FinalizeModal",props:{show:Boolean,purchase:Object},emits:["close"],setup(p,{emit:g}){const{isActionLoading:r}=T(),h=_(),c=p,v=g,s=y({shipping_cost:0,other_costs:0,notes:""}),l=w(!1);B(()=>c.show,n=>{n&&(s.shipping_cost=0,s.other_costs=0,s.notes="")});const b=()=>{l.value=!0,r.value=!0,s.put(route("purchases.finalize",c.purchase.id),{preserveScroll:!0,onSuccess:()=>{v("close"),l.value=!1},onError:()=>{r.value=!1,l.value=!1,h.error(errors.message||"Terjadi kesalahan saat menghapus data.")},onFinish:()=>{r.value=!1,l.value=!1}})};return(n,a)=>(m(),V(O,{show:p.show,onClose:a[4]||(a[4]=t=>n.$emit("close")),title:"Selesaikan & Masukkan Stok"},{default:d(()=>[e("div",j,[a[6]||(a[6]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Pastikan semua data valid. Aksi ini akan menambah stok dan tidak dapat dibatalkan. Silakan masukkan biaya tambahan jika ada (akan dibebankan ke HPP produk). ",-1)),e("div",A,[e("div",null,[i(u,{for:"shipping",value:"Biaya Ongkos Kirim (Opsional)"}),i(f,{id:"shipping",modelValue:o(s).shipping_cost,"onUpdate:modelValue":a[0]||(a[0]=t=>o(s).shipping_cost=t),type:"number",class:"block w-full mt-1",min:"0"},null,8,["modelValue"])]),e("div",null,[i(u,{for:"other",value:"Biaya Lain-lain / Admin (Opsional)"}),i(f,{id:"other",modelValue:o(s).other_costs,"onUpdate:modelValue":a[1]||(a[1]=t=>o(s).other_costs=t),type:"number",class:"block w-full mt-1",min:"0"},null,8,["modelValue"])]),e("div",null,[i(u,{for:"notes",value:"Catatan Tambahan (Opsional)"}),x(e("textarea",{id:"notes","onUpdate:modelValue":a[2]||(a[2]=t=>o(s).notes=t),rows:"3",class:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-lime-500 focus:ring-lime-500 dark:bg-gray-900 dark:border-gray-700 dark:text-gray-300",placeholder:"Contoh: Barang diterima lengkap, bonus 2 pcs..."},null,512),[[S,o(s).notes]])])]),e("div",F,[i(P,{onClick:a[3]||(a[3]=t=>n.$emit("close"))},{default:d(()=>[...a[5]||(a[5]=[$(" Batal ",-1)])]),_:1}),i(C,{class:"bg-lime-600 hover:bg-lime-700",disabled:l.value||o(s).processing,onClick:b},{default:d(()=>[o(s).processing?(m(),k("span",M,"Memproses...")):(m(),k("span",z,"Selesaikan Transaksi"))]),_:1},8,["disabled"])])])]),_:1},8,["show"]))}};export{J as default};
