import{u as B,D as b,l as g,o as x,e as n,g as o,i as T,w as c,f as t,C as j,k as u,z as m,A as h,t as i,m as S,F as y,I as C}from"./vendor-core-B46KUNyc.js";import{_ as F}from"./AuthenticatedLayout-9yD8UcND.js";import{u as D}from"./useExport-ZWbXSJP4.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-DSTl-7Rw.js";import"./useActionLoading-pomD9vky.js";const N={class:"space-y-6"},P={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},z={class:"flex items-center gap-2"},E={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},H={class:"flex items-center gap-4 p-4 bg-white border border-gray-200 shadow-sm md:col-span-2 dark:bg-gray-800 rounded-2xl dark:border-gray-700"},L={class:"p-4 text-white shadow-lg bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl"},A={class:"mt-1 text-2xl font-black"},I={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},M={class:"p-6 bg-white border border-gray-200 shadow-lg rounded-2xl dark:bg-gray-800 dark:border-gray-700"},R={class:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},O={class:"overflow-x-auto"},U={class:"w-full text-sm text-left"},q={class:"divide-y divide-gray-100 dark:divide-gray-700"},K={class:"px-6 py-3 font-bold text-gray-800 dark:text-white"},X={class:"px-6 py-3 text-center text-gray-500"},$={class:"px-6 py-3 font-black text-right text-orange-600"},et={__name:"PurchaseBySupplier",props:{filters:Object,data:Array,total_all_spend:Number},setup(p){const s=p,d=B({start_date:s.filters.start_date,end_date:s.filters.end_date}),f=()=>{d.get(route("reports.purchase-supplier"),{preserveScroll:!0})},l=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),{exportToCsv:k}=D(),v=()=>{const r=s.data.map(e=>({Supplier:e.name,Frequency:e.total_trx,"Total Belanja":e.total_spend}));k("Laporan_Pembelian_Supplier",r)},w=b(()=>({chart:{type:"bar",height:350,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"50%",distributed:!0}},colors:["#f97316","#eab308","#84cc16","#22c55e","#06b6d4"],dataLabels:{enabled:!0,textAnchor:"start",formatter:(r,e)=>l(r),offsetX:0},xaxis:{categories:s.data.map(r=>r.name),labels:{formatter:r=>(r/1e6).toFixed(0)+"jt"}},grid:{show:!1},tooltip:{y:{formatter:r=>l(r)}}})),_=b(()=>[{name:"Total Belanja",data:s.data.map(r=>r.total_spend)}]);return(r,e)=>(x(),g(y,null,[n(o(T),{title:"Laporan Pembelian Supplier"}),n(F,{headerTitle:"Analisa Supplier"},{default:c(()=>[t("div",N,[t("div",P,[t("div",z,[n(o(j),{href:r.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:c(()=>[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),u(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",{class:"flex gap-2"},[t("button",{onClick:v,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" Export CSV ",-1)])]),e[4]||(e[4]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),u(" Print ")],-1))])]),t("div",E,[t("div",H,[e[5]||(e[5]=t("span",{class:"text-sm font-bold text-gray-500"},"Periode:",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>o(d).start_date=a),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[h,o(d).start_date]]),e[6]||(e[6]=t("span",{class:"text-gray-400"},"-",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>o(d).end_date=a),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[h,o(d).end_date]]),t("button",{onClick:f,class:"px-4 py-2 text-sm font-bold text-white transition bg-orange-500 rounded-lg shadow hover:bg-orange-600"}," Lihat ")]),t("div",L,[e[7]||(e[7]=t("p",{class:"text-xs font-bold tracking-widest text-orange-100 uppercase"}," Total Belanja (Procurement) ",-1)),t("h3",A,i(l(p.total_all_spend)),1)])]),t("div",I,[t("div",M,[e[8]||(e[8]=t("h3",{class:"mb-4 text-lg font-bold text-gray-800 dark:text-white"}," Top Vendor by Value ",-1)),n(o(S),{type:"bar",height:"350",options:w.value,series:_.value},null,8,["options","series"])]),t("div",R,[e[10]||(e[10]=t("div",{class:"p-4 border-b bg-gray-50/50 dark:border-gray-700 dark:bg-gray-800"},[t("h3",{class:"font-bold text-gray-800 dark:text-white"}," Rincian Vendor ")],-1)),t("div",O,[t("table",U,[e[9]||(e[9]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Nama Supplier"),t("th",{class:"px-6 py-3 text-center"}," Frekuensi "),t("th",{class:"px-6 py-3 text-right"}," Total Belanja ")])],-1)),t("tbody",q,[(x(!0),g(y,null,C(p.data,(a,V)=>(x(),g("tr",{key:V,class:"transition hover:bg-orange-50/30 dark:hover:bg-gray-700/50"},[t("td",K,i(a.name),1),t("td",X,i(a.total_trx)+"x Transaksi ",1),t("td",$,i(l(a.total_spend)),1)]))),128))])])])])])])]),_:1})],64))}};export{et as default};
