import{q as c,C as k,l,o as s,e as v,f as e,m as d,k as y,F as w,H,t as n,n as m,d as z,w as f,g as C,B,x as M}from"./vendor-core-BC1dSzkC.js";import{_ as L}from"./ImageModal-Htnhwuyn.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./BottomSheet-fL7Cjms_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"space-y-4"},E={class:"flex items-start justify-between"},U={class:"px-2 py-1 text-xs font-bold text-gray-800 bg-gray-100 rounded dark:text-white dark:bg-gray-800"},_={class:"text-[10px] text-gray-400 mt-1"},A={class:"text-[10px] text-gray-500 mt-1 font-medium"},F={class:"text-red-400"},S={class:"text-right items-end gap-1.5"},T={class:"flex gap-1"},q={class:"text-sm font-bold text-gray-800 dark:text-gray-200 mt-0.5"},J={class:"flex items-center justify-between"},O={class:"flex gap-2"},P=["onClick"],R=["onClick"],G=["onClick"],K={key:0,class:"text-center"},Q={key:1,class:"text-center opacity-60"},re={__name:"InvoiceMobile",props:{purchase:{type:Array,required:!0},isCheckingMode:{type:Boolean,default:!1},canEditDelete:Boolean,actions:Object},setup(o){const i=o,u=c(!1),b=c(null),p=c(null),I=(a,t)=>{b.value=a,p.value="Invoice-#"+t,u.value=!0},D=k(()=>i.purchase.status!=="diterima"&&i.purchase.status!=="checking"),x=a=>a?new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-",j=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a||0),N=a=>a==="validated"?"bg-teal-50 text-teal-700 border-teal-200":"bg-blue-50 text-blue-700 border-blue-200",V=a=>{switch(a){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";default:return"bg-orange-100 text-orange-800"}},g=k(()=>i.purchase.status=="diterima"||i.purchase.status=="checking");return(a,t)=>(s(),l(w,null,[v(L,{show:u.value,imageUrl:b.value,productName:p.value,onClose:t[0]||(t[0]=r=>u.value=!1)},null,8,["show","imageUrl","productName"]),e("div",$,[g.value&&o.purchase.invoices.length>0?(s(),l("button",{key:0,onClick:t[1]||(t[1]=r=>o.actions.openCreateInvoiceModal()),class:"flex items-center justify-center w-full gap-2 py-3 font-bold transition border-2 border-dashed border-lime-300 dark:border-lime-800 bg-lime-50 dark:bg-lime-900/10 text-lime-700 dark:text-lime-400 rounded-xl hover:bg-lime-100"},[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),y(" Buat Nota Baru ",-1)])])):d("",!0),(s(!0),l(w,null,H(o.purchase.invoices,r=>(s(),l("div",{key:r.id,class:"relative p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 rounded-xl dark:border-gray-800"},[e("div",E,[e("div",null,[e("span",U,"#"+n(r.invoice_number),1),e("p",_," Terbit : "+n(x(r.invoice_date)),1),e("p",A,[t[4]||(t[4]=y(" Jatuh Tempo : ",-1)),e("span",F,n(r.due_date?x(r.due_date):"Tunai"),1)])]),e("div",S,[e("div",T,[e("span",{class:m(["text-[9px] px-2 py-0.5 rounded font-bold uppercase border tracking-wider",N(r.status)])},n(r.status),3),e("span",{class:m(["text-[9px] px-2 py-0.5 rounded font-bold uppercase",V(r.payment_status)])},n(r.payment_status),3)]),e("p",q,n(j(r.total_amount)),1)])]),t[10]||(t[10]=e("div",{class:"h-px my-2 bg-gray-100 dark:bg-gray-800"},null,-1)),e("div",J,[e("div",O,[o.canEditDelete?(s(),l("button",{key:0,onClick:h=>o.actions.handleEditInvoice(r),class:"p-2 text-blue-600 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-700"},[...t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,P)):d("",!0),o.canEditDelete?(s(),l("button",{key:1,onClick:h=>o.actions.handleDeleteInvoice(r),class:"p-2 text-red-600 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-700"},[...t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,R)):d("",!0),r.invoice_image?(s(),l("button",{key:2,onClick:h=>I(r.invoice_url,r.invoice_number),class:"p-2 text-gray-600 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-700"},[...t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],8,G)):d("",!0),r.status==="validated"&&r.payment_status!=="paid"&&o.purchase.status==="selesai"?(s(),z(C(B),{key:3,href:a.route("finance.show",{id:r.id}),class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wide bg-blue-50 text-blue-600 border border-blue-200 hover:bg-blue-100 hover:border-blue-300 transition-all active:scale-95"},{default:f(()=>[...t[8]||(t[8]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("span",null,"Bayar",-1)])]),_:2},1032,["href"])):d("",!0)]),v(C(B),{href:a.route("purchases.linkInvoiceItems",{purchase:o.purchase.id,invoice:r.id}),class:"flex items-center gap-1 px-4 py-2 text-xs font-bold text-white rounded-lg shadow-sm bg-lime-500 hover:bg-lime-600"},{default:f(()=>[e("span",null,n(D.value||r.status=="validated"?"Detail":"Checking"),1),t[9]||(t[9]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:2},1032,["href"])])]))),128)),o.purchase.invoices.length===0?(s(),l("div",{key:1,class:m(["flex flex-col items-center justify-center py-10 border-2 border-dashed rounded-xl",g.value?"border-lime-300 bg-lime-50 dark:bg-lime-900/10 dark:border-lime-700/50":"border-gray-200 bg-gray-50 dark:bg-gray-800/50 dark:border-gray-700"])},[g.value?(s(),l("div",K,[t[11]||(t[11]=M('<div class="p-3 mx-auto mb-3 rounded-full bg-lime-100 w-fit dark:bg-lime-900/30"><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-lime-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg></div><h3 class="mb-1 text-sm font-bold text-gray-800 dark:text-gray-200"> Belum Ada Nota </h3><p class="max-w-xs mx-auto mb-4 text-xs text-gray-500 dark:text-gray-400"> Barang sudah diterima, jangan lupa upload foto nota asli dari supplier untuk arsip. </p>',3)),e("button",{onClick:t[2]||(t[2]=r=>o.actions.openCreateInvoiceModal()),class:"px-4 py-2 text-xs font-bold transition bg-white border rounded-lg shadow-sm text-lime-600 border-lime-200 hover:bg-lime-50 dark:bg-gray-800 dark:border-gray-700 dark:text-lime-400 hover:shadow-md"}," + Upload Nota Sekarang ")])):(s(),l("div",Q,[...t[12]||(t[12]=[M('<div class="p-3 mx-auto mb-3 bg-gray-100 rounded-full w-fit dark:bg-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="mb-1 text-sm font-semibold text-gray-600 dark:text-gray-300"> Menunggu Barang </h3><p class="max-w-xs mx-auto text-xs text-gray-400"> Upload nota tersedia setelah status barang <b>Diterima</b>. </p>',3)])]))],2)):d("",!0)])],64))}};export{re as default};
