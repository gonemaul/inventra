import{u as w,p as b,l as n,o as d,f as e,t as a,m as g,q as x,I as m,g as o,F as I,C as j,n as p,j as P}from"./vendor-core-n0E2YlDl.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-common-BBegFRNv.js";import"./vendor-charts-Bw6UNgWf.js";const C={class:"flex-1 p-4 space-y-6 overflow-y-auto custom-scrollbar"},D={class:"flex items-center gap-3 pb-3 border-b border-gray-100 dark:border-gray-700"},F={class:"flex-shrink-0 w-12 h-12 overflow-hidden bg-gray-100 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600"},M=["src"],S={key:1,class:"w-full h-full flex items-center justify-center text-[10px] text-gray-400"},N={class:"flex-1 min-w-0"},R={class:"flex items-center gap-2 mb-0.5"},H={class:"text-[10px] font-bold bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-gray-600 dark:text-gray-300"},V={class:"text-[10px] text-gray-400"},A={class:"text-sm font-bold leading-tight text-gray-800 truncate dark:text-white"},U={class:"space-y-5"},$={class:"relative p-3 border border-yellow-100 bg-yellow-50 dark:bg-yellow-900/10 rounded-xl dark:border-yellow-900/30"},E={class:"relative"},O={key:0,class:"text-[10px] text-red-500 mt-1"},q={class:"relative p-3 border bg-lime-50 dark:bg-lime-900/10 rounded-xl border-lime-100 dark:border-lime-900/30"},z={class:"relative"},G={key:0,class:"text-[10px] text-red-500 mt-1"},J={class:"flex gap-2 pb-2 overflow-x-auto no-scrollbar"},L=["onClick"],T={class:"flex flex-col"},K={class:"text-right"},Q={class:"flex gap-3 p-4 bg-white border-t border-gray-200 dark:border-gray-700 dark:bg-customBg-tableDark"},W=["disabled"],X={key:0},Y={key:1},Z={__name:"PriceAdjustmentSheet",props:{product:Object},emits:["close","success"],setup(c,{emit:y}){const u=c,f=y,r=w({id:u.product?.id,purchase_price:u.product?.purchase_price||0,selling_price:u.product?.selling_price||0}),k=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l||0),i=b(()=>(parseInt(r.selling_price)||0)-(parseInt(r.purchase_price)||0)),_=b(()=>{const l=parseInt(r.purchase_price)||0;return l<=0?0:(i.value/l*100).toFixed(1)}),h=l=>{const t=parseInt(r.purchase_price)||0;if(t<=0)return;const s=t*(l/100);r.selling_price=Math.ceil(t+s)},v=()=>{r.put(route("products.update-price",r.id),{onSuccess:()=>f("success"),preserveScroll:!0})};return(l,t)=>(d(),n("form",{onSubmit:P(v,["prevent"]),class:"flex flex-col h-full bg-white dark:bg-customBg-tableDark"},[e("div",C,[e("div",D,[e("div",F,[c.product?.image_url?(d(),n("img",{key:0,src:c.product.image_url,class:"object-cover w-full h-full"},null,8,M)):(d(),n("div",S," NO IMG "))]),e("div",N,[e("div",R,[e("span",H,a(c.product?.code),1),e("span",V,a(c.product?.category?.name),1)]),e("h3",A,a(c.product?.name),1)])]),e("div",U,[e("div",$,[t[4]||(t[4]=e("label",{class:"block text-[10px] font-bold text-yellow-700 dark:text-yellow-500 uppercase tracking-wider mb-1"}," Harga Beli (HPP) ",-1)),e("div",E,[t[3]||(t[3]=e("span",{class:"absolute left-0 top-1.5 text-sm font-bold text-yellow-600/50"},"Rp",-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(r).purchase_price=s),type:"number",placeholder:"0",class:"w-full p-0 text-xl font-black text-gray-800 placeholder-gray-300 bg-transparent border-none pl-7 dark:text-white focus:ring-0"},null,512),[[m,o(r).purchase_price]])]),o(r).errors.purchase_price?(d(),n("p",O,a(o(r).errors.purchase_price),1)):g("",!0)]),e("div",q,[t[6]||(t[6]=e("label",{class:"block text-[10px] font-bold text-lime-700 dark:text-lime-500 uppercase tracking-wider mb-1"}," Harga Jual ",-1)),e("div",z,[t[5]||(t[5]=e("span",{class:"absolute left-0 top-1.5 text-sm font-bold text-lime-600/50"},"Rp",-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(r).selling_price=s),type:"number",placeholder:"0",class:"w-full p-0 text-xl font-black text-gray-800 placeholder-gray-300 bg-transparent border-none pl-7 dark:text-white focus:ring-0"},null,512),[[m,o(r).selling_price]])]),o(r).errors.selling_price?(d(),n("p",G,a(o(r).errors.selling_price),1)):g("",!0)])]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-[10px] text-gray-400 font-bold uppercase mb-2 block"},"Set Profit Cepat (%)",-1)),e("div",J,[(d(),n(I,null,j([10,20,30,50,100],s=>e("button",{key:s,type:"button",onClick:ee=>h(s),class:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-600 text-xs font-bold text-gray-600 dark:text-gray-300 hover:bg-lime-50 hover:border-lime-200 hover:text-lime-600 transition whitespace-nowrap"}," +"+a(s)+"% ",9,L)),64))])]),e("div",{class:p(["flex items-center justify-between p-4 transition-colors duration-300 border rounded-xl",i.value<0?"bg-red-50 border-red-100 dark:bg-red-900/20 dark:border-red-800":"bg-gray-50 border-gray-100 dark:bg-gray-700/50 dark:border-gray-600"])},[e("div",T,[e("span",{class:p(["text-[10px] font-bold uppercase tracking-wider",i.value<0?"text-red-500":"text-gray-400"])},a(i.value<0?"Potensi Rugi":"Estimasi Profit"),3),e("span",{class:p(["text-xl font-black",i.value<0?"text-red-600":"text-gray-800 dark:text-white"])},a(k(i.value)),3)]),e("div",K,[t[8]||(t[8]=e("span",{class:"text-[10px] text-gray-400 uppercase font-bold block mb-0.5"},"Margin",-1)),e("span",{class:p(["inline-block px-2 py-1 text-sm font-bold rounded",i.value<0?"bg-red-200 text-red-700":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300"])},a(_.value)+"% ",3)])],2)]),e("div",Q,[e("button",{type:"button",onClick:t[2]||(t[2]=s=>l.$emit("close")),class:"w-1/3 px-4 py-3 text-sm font-bold text-gray-700 transition bg-gray-100 rounded-xl hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"}," Batal "),e("button",{type:"submit",disabled:o(r).processing,class:"flex justify-center w-2/3 px-4 py-3 text-sm font-bold text-white transition transform shadow-lg bg-lime-600 rounded-xl hover:bg-lime-700 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed"},[o(r).processing?(d(),n("span",X,"Menyimpan...")):(d(),n("span",Y,"Update Harga"))],8,W)])],32))}},ae=B(Z,[["__scopeId","data-v-7f745c7e"]]);export{ae as default};
