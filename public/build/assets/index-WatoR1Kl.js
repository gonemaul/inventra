import{p as le,q as d,u as ie,C as w,J as W,v as de,a as ue,Z as ce,l as g,o as m,e as P,d as me,m as b,f as a,g as l,i as ge,F as se,H as ye,n as U,t as c,j as re,k as Z,x as pe,w as ne,y as be,z as fe}from"./vendor-core-CJbEklrS.js";import{j as ve}from"./vendor-common-GpUWqhKr.js";import{B as he}from"./BottomSheet-BK4YJI0j.js";import xe from"./ConfirmSubmit-BXXpCwTi.js";import ke from"./Cart-CjoO1r-R.js";import{_ as we}from"./BarcodeScanner-C0eHeYNj.js";import _e from"./FilterProduct-DiSV5ClJ.js";import Ce from"./ProductDetailModal-C2Fkk-fg.js";import Se from"./ProductComparisonModal-9TzjE4Zy.js";import"./vendor-charts-Bw6UNgWf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CSrVmq0b.js";import"./InputRupiah-LTaplENR.js";import"./MoneyInput-Cx9NPdkp.js";import"./vendor-scanner-og__AIM6.js";function Me(_){const f=le(),C="POS_REALTIME_DRAFT_V3",p=d([]),u=d(!1),O=d(20),y=d({search:"",category:"all",subCategory:"all",brand:"all",sort:"default",hideEmptyStock:!1}),v=d([]),E=d(""),$=d([]),S=d(null),n=ie({input_type:"realtime",report_date:new Date().toISOString().slice(0,10),items:[],customer_id:null,payment_amount:0,change_amount:0,payment_method:"cash",discount_type:"fixed",discount_value:0,notes:""}),x=w(()=>n.items.reduce((t,r)=>t+(parseFloat(r.subtotal)||0),0)),V=w(()=>{const t=parseFloat(n.discount_value)||0;if(t<=0)return 0;if(n.discount_type==="percent"){const r=t>100?100:t;return Math.round(x.value*r/100)}return t>x.value?x.value:t}),T=w(()=>{const t=x.value-V.value,r=t>0?t:0;return r===0&&n.payment_amount>0,r}),G=w(()=>(parseFloat(n.payment_amount)||0)-T.value),X=w(()=>n.payment_method!=="cash"&&n.payment_method!==""?!0:(parseFloat(n.payment_amount)||0)>=T.value),z=w(()=>n.items.some(t=>t.quantity<=0||isNaN(t.quantity))),Q=w(()=>{const t=T.value;if(t<=0)return[];const r=[{label:"Uang Pas",value:t}];if([2e3,5e3,1e4,2e4,5e4,1e5].forEach(e=>{e>t&&!r.find(o=>o.value===e)&&r.push({label:B(e),value:e})}),t>5e4){const e=Math.ceil(t/5e4)*5e4;r.find(o=>o.value===e)||r.push({label:B(e),value:e})}return r.slice(0,4)}),D=t=>{t.unit?.is_decimal===1||(t.quantity=Math.round(t.quantity),t.quantity<1&&(t.quantity=1)),t.quantity>t.stock_max&&(t.quantity=t.stock_max,f.warning(`Stok sisa ${t.stock_max}`)),t.subtotal=Math.round(t.quantity*t.selling_price)},K=t=>{const r=parseFloat(t.subtotal)||0,s=parseFloat(t.selling_price)||0;if(!(s<=0))if(t.unit?.is_decimal===1){let e=r/s;e>t.stock_max&&(e=t.stock_max,t.subtotal=Math.round(e*s),f.warning("Melebihi sisa stok!")),t.quantity=parseFloat(e.toFixed(4))}else confirm(`⚠️ Ubah harga satuan agar sesuai total ${B(r)}?`)?t.quantity>0&&(t.selling_price=Math.round(r/t.quantity)):t.subtotal=Math.round(t.quantity*t.selling_price)},R=t=>{t.subtotal=Math.round(t.quantity*t.selling_price)},M=t=>{if(parseFloat(t.stock)<=0){f.error("Stok habis!");return}const r=n.items.find(s=>s.product_id===t.id);if(r){if(r.quantity+1>t.stock){f.warning("Stok maksimal!");return}r.quantity++,D(r)}else{const s=parseFloat(t.selling_price||t.price);n.items.push({product_id:t.id,code:t.code,name:t.name,unit:t.unit,size:t.size,stock_max:parseFloat(t.stock),selling_price:s,original_price:s,quantity:1,subtotal:s})}},j=t=>n.items.splice(t,1),q=(t,r)=>{const s=n.items[t],e=parseFloat(s.quantity)+r;if(e>s.stock_max){f.warning(`Stok sisa ${s.stock_max}`);return}if(e<=0){confirm("Hapus item ini?")&&j(t);return}s.quantity=e,D(s)},I=t=>{n.payment_amount=t.value},H=()=>{n.payment_amount=0},k=d(new Map),h=async(t={})=>{const r={query:t.search||y.value.search,limit:O.value,category_id:y.value.category,product_type_id:y.value.subCategory,brand_id:y.value.brand,sort:y.value.sort,hide_empty_stock:y.value.hideEmptyStock?1:0},s=JSON.stringify(r);k.value.has(s)?p.value=k.value.get(s):u.value=!0;try{const e=await ue.get(route("sales.products.lite"),{params:r});p.value=e.data,k.value.set(s,e.data)}catch(e){console.error("Gagal load produk:",e),k.value.has(s)||f.error("Gagal memuat database produk")}finally{u.value=!1}},F=ve(()=>{h()},400);W(()=>y.value,(t,r)=>{t.search!==r.search?(u.value=!0,F()):(t.category!==r.category&&(p.value=[]),h())},{deep:!0});const L=w(()=>{let t=p.value;const{sort:r}=y.value;return r==="cheapest"?t.sort((s,e)=>s.selling_price-e.selling_price):r==="bestseller"?t.sort((s,e)=>(e.total_sold||0)-(s.total_sold||0)):t.sort((s,e)=>s.name.localeCompare(e.name)),t}),J=()=>{O.value+=20,h()},i=t=>{S.value=t,n.customer_id=t.id,$.value=[],E.value=""};W(E,t=>{if(!t||!_.customers){$.value=[];return}const r=t.toLowerCase(),s=_.customers.filter(e=>e.name.toLowerCase().includes(r)||e.code.toLowerCase().includes(r));$.value=s.slice(0,5)});const N=t=>{const r=_.customers.find(s=>s.member_code==t||s.phone==t);r?i(r):f.warning("Member tidak ditemukan")},ee=()=>{const t=localStorage.getItem(C);if(t)try{const r=JSON.parse(t);r.items&&(n.items=r.items),n.payment_amount=r.payment_amount||0,n.payment_method=r.payment_method||"cash",n.notes=r.notes||"",n.discount_type=r.discount_type||"fixed",n.discount_value=r.discount_value||0,r.selectedMember&&(S.value=r.selectedMember,n.customer_id=r.selectedMember.id)}catch{localStorage.removeItem(C)}};W([()=>n.items,()=>n.customer_id,()=>n.payment_amount,()=>n.discount_value,()=>n.notes],()=>{localStorage.setItem(C,JSON.stringify({items:n.items,customer_id:n.customer_id,payment_amount:n.payment_amount,payment_method:n.payment_method,notes:n.notes,discount_type:n.discount_type,discount_value:n.discount_value,selectedMember:S.value}))},{deep:!0});const te=(t=!1,r={})=>{n.change_amount=G.value,n.payment_amount=parseFloat(n.payment_amount),n.transform(s=>({...s,print_invoice:t})).post(route("sales.pos.store"),{onStart:r.onStart,onFinish:r.onFinish,onSuccess:s=>{h(),localStorage.removeItem(C),n.reset(),n.items=[],S.value=null,r.onSuccess&&r.onSuccess(s)},onError:s=>{console.error(s),f.error("Gagal memproses transaksi")}})},B=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),ae=t=>{const r=v.value.findIndex(s=>s.id===t.id);if(r!==-1)v.value.splice(r,1);else{if(v.value.length>=5){f.warning("Maksimal 5 produk untuk perbandingan.");return}v.value.push(t)}},oe=()=>{v.value=[]},Y=t=>v.value.some(r=>r.id===t);return de(()=>{h(),ee()}),{form:n,filterState:y,allProducts:p,filteredProducts:L,isFetchingData:u,compareList:v,memberSearch:E,memberSearchResults:$,selectedMember:S,subTotal:x,discountAmount:V,grandTotal:T,changeAmount:G,isPaymentSufficient:X,hasInvalidQty:z,moneySuggestions:Q,loadMoreProducts:J,queryMember:N,addItem:M,removeItem:j,updateQty:q,resetPayment:H,handleMoneyClick:I,recalcFromQty:D,recalcFromSubtotal:K,recalcFromPrice:R,toggleCompare:ae,clearCompare:oe,isInCompare:Y,submitTransaction:te,rp:B}}const je={class:"flex flex-col lg:flex-row h-[100dvh] w-full bg-gray-100 dark:bg-gray-900 overflow-hidden font-sans transition-colors duration-300"},qe={class:"relative flex flex-col flex-1 h-full overflow-hidden"},Fe={class:"grid grid-cols-2 gap-3 pb-10 md:grid-cols-3 lg:grid-cols-4"},Be=["onClick"],Pe={class:"relative w-full overflow-hidden bg-gray-100 border-b border-gray-100 aspect-square dark:border-gray-700 dark:bg-gray-700"},$e={class:"absolute z-20 flex flex-col items-start gap-1 top-2 left-2"},Te={key:0,class:"text-[10px] font-bold px-2 py-0.5 rounded shadow-sm backdrop-blur text-gray-700 bg-white/90 dark:text-gray-200 dark:bg-gray-900/80 border border-gray-200 dark:border-gray-600"},ze={key:1,class:"text-[10px] font-bold text-white px-2 py-0.5 rounded shadow-sm backdrop-blur bg-gray-800/90 dark:bg-gray-600/90 border border-gray-700"},De=["src"],Ie={key:1,class:"flex items-center justify-center w-full h-full text-gray-400 dark:text-gray-600"},He={key:2,class:"absolute inset-0 z-20 flex items-center justify-center bg-gray-900/60 backdrop-blur-[1px]"},Ae={class:"flex flex-col flex-1 p-3"},Ee={class:"mb-1 flex justify-between items-start"},Re={class:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide"},Le=["title"],Ne={class:"flex items-center justify-between mb-2"},Ue={class:"flex items-center gap-1.5"},Oe={class:"flex items-center justify-between pt-2 mt-auto border-t border-gray-100 dark:border-gray-700"},Ve={class:"text-sm font-black text-lime-600 dark:text-lime-400"},Ge={key:0,class:"flex items-center justify-center text-xs font-bold text-white bg-orange-500 rounded-full shadow-md w-7 h-7 animate-bounce-short"},Qe={key:1,class:"p-1.5 rounded-lg text-lime-600 bg-lime-50 dark:text-lime-400 dark:bg-lime-500/10"},Ke={class:"grid grid-cols-2 border-t border-gray-100 dark:border-gray-700 divide-x divide-gray-100 dark:divide-gray-700 bg-gray-50 dark:bg-gray-800/50"},Je=["onClick"],Ye=["onClick"],Ze={key:0,class:"py-10 text-center"},We={key:1,class:"flex flex-col items-center justify-center px-4 py-16 text-center animate-fade-in"},Xe={key:2,class:"py-4 text-center text-[10px] text-gray-400"},et={key:0,class:"absolute z-40 bottom-24 lg:bottom-8 right-4 flex items-center bg-gray-900 dark:bg-gray-800 text-white pl-4 pr-1 py-1.5 gap-4 rounded-full shadow-xl animate-bounce-subtle border border-gray-700"},tt={class:"text-xs font-bold whitespace-nowrap"},at={class:"flex items-center gap-1"},ot={key:1,class:"absolute z-30 lg:hidden bottom-4 left-4 right-4"},st={class:"flex items-center gap-3"},rt={class:"flex items-center justify-center text-xs font-bold text-white rounded-full shadow-sm bg-lime-500 dark:bg-white dark:text-lime-700 w-7 h-7"},nt={class:"flex flex-col items-start leading-none gap-0.5"},lt={class:"text-lg font-bold"},it={class:"space-y-6"},dt={class:"flex items-center gap-4 pb-4 border-b border-gray-100 dark:border-gray-800"},ut={class:"flex items-center justify-center text-lg font-bold text-gray-400 bg-gray-100 border border-gray-200 w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-700 shrink-0"},ct={class:"flex-1 min-w-0"},mt={class:"text-lg font-bold leading-tight text-gray-800 truncate dark:text-white"},gt={class:"flex items-center justify-between mt-1"},yt={class:"text-xs text-gray-500 font-mono bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"},pt={class:"bg-gray-50 dark:bg-gray-800/50 p-1.5 rounded-2xl border border-gray-200 dark:border-gray-700"},bt={class:"flex items-center justify-between"},ft=["disabled"],vt={class:"flex-1 px-2 text-center"},ht={class:"flex items-center justify-between p-4 bg-white border border-gray-100 shadow-sm dark:bg-gray-900 dark:border-gray-800 rounded-xl"},xt={class:"font-bold text-gray-600 dark:text-gray-300"},kt={class:"text-right"},wt={class:"text-2xl font-black text-gray-900 dark:text-white"},_t={key:0,class:"px-3 py-2 text-xs font-bold text-center text-red-600 border border-red-100 rounded-lg bg-red-50"},Ct={class:"flex gap-3 h-14"},Rt={__name:"index",props:{categories:Array,customers:Array,brands:Array},setup(_){const C=Me(_),{form:p,filterState:u,allProducts:O,filteredProducts:y,isFetchingData:v,grandTotal:E,changeAmount:$,isPaymentSufficient:S,hasInvalidQty:n,addItem:x,loadMoreProducts:V,queryProduk:T,queryMember:G,submitTransaction:X,rp:z,toggleCompare:Q,clearCompare:D,isInCompare:K,compareList:R}=C,M=le(),j=d(!1),q=d(!1),I=d(!1),H=d(!1),k=d(!1),h=d(!1),F=d("product"),L=d(null),J=d(null);W(u,async()=>{await ce(),L.value&&L.value.scrollTo({top:0,behavior:"smooth"})},{deep:!0});const i=d({id:null,name:"",code:"",price:0,quantity:1,stock:0,unit:"Pcs",image:null}),N=s=>{i.value={id:s.id,name:s.name,code:s.code,image_url:s.image_url,price:parseFloat(s.selling_price||s.price||0),quantity:1,stock:parseInt(s.stock||0),unit:s.unit?.name||"Pcs"},H.value=!0},ee=s=>{const{scrollTop:e,clientHeight:o,scrollHeight:A}=s.target;e+o>=A-50&&V()},te=s=>{J.value=s,k.value=!0},B=()=>{F.value="product",q.value=!0},ae=()=>{F.value="member",q.value=!0},oe=async s=>{if(q.value=!1,alert("scan berhasil "+F.value+" | "+s),F.value=="product")try{const e=await T(s);e?(s=e,N(s)):alert("Produk tidak ditemukan di database.")}catch(e){console.error("Terjadi kesalahan saat query produk:",e),alert("Gagal mengambil data produk.")}else F.value=="member"&&(s=G(s))},Y=(s=!1)=>{x(i.value),H.value=!1,s&&B()},t=s=>{if(p.items.length===0)return M.error("Keranjang kosong!");if(n.value)return M.error("Qty tidak valid!");if(p.payment_method==="cash"&&!S.value)return M.error("Uang kurang!");X(s,{onSuccess:e=>{I.value=!1,j.value=!1;const o=e.props.flash?.print_url;s&&o?setTimeout(()=>{window.open(o,"_blank","width=300,height=600")},50):s&&!o?M.error("Gagal mendapatkan URL Print dari server."):M.success("Transaksi berhasil disimpan.")}})},r=s=>{const e=p.items.find(o=>o.product_id===s);return e?e.quantity:0};return(s,e)=>(m(),g(se,null,[P(l(ge),{title:"Kasir POS"}),P(xe,{showConfirmModal:I.value,changeAmount:l($),onClose:e[0]||(e[0]=o=>I.value=!1),onConfirmTransaction:t},null,8,["showConfirmModal","changeAmount"]),P(Ce,{show:k.value,product:J.value,onClose:e[1]||(e[1]=o=>k.value=!1),onAddToCart:e[2]||(e[2]=o=>{N(o)})},null,8,["show","product"]),P(Se,{show:h.value,products:l(R),onClose:e[3]||(e[3]=o=>h.value=!1),onRemove:l(Q),onAddToCart:e[4]||(e[4]=o=>{N(o)})},null,8,["show","products","onRemove"]),q.value?(m(),me(we,{key:0,onResult:oe,onClose:e[5]||(e[5]=o=>q.value=!1)})):b("",!0),a("div",je,[a("div",qe,[P(_e,{categories:_.categories,brands:_.brands,"is-fetching":l(v),search:l(u).search,"onUpdate:search":e[6]||(e[6]=o=>l(u).search=o),category:l(u).category,"onUpdate:category":e[7]||(e[7]=o=>l(u).category=o),"sub-category":l(u).subCategory,"onUpdate:subCategory":e[8]||(e[8]=o=>l(u).subCategory=o),brand:l(u).brand,"onUpdate:brand":e[9]||(e[9]=o=>l(u).brand=o),sort:l(u).sort,"onUpdate:sort":e[10]||(e[10]=o=>l(u).sort=o),hideEmptyStock:l(u).hideEmptyStock,"onUpdate:hideEmptyStock":e[11]||(e[11]=o=>l(u).hideEmptyStock=o),onScan:B},null,8,["categories","brands","is-fetching","search","category","sub-category","brand","sort","hideEmptyStock"]),a("div",{ref_key:"productGridRef",ref:L,class:"h-[calc(100vh-220px)] flex-1 p-4 overflow-y-auto bg-gray-100 custom-scroll scroll-smooth pb-28 lg:pb-4 dark:bg-gray-900",onScroll:ee},[a("div",Fe,[(m(!0),g(se,null,ye(l(y),o=>(m(),g("div",{key:o.id,class:U(["relative flex flex-col justify-between overflow-hidden transition-all duration-200 border shadow-sm group rounded-xl bg-white dark:bg-gray-800",[o.stock==0?"opacity-75 grayscale-[0.5]":"",r(o.id)>0?"border-lime-500 ring-1 ring-lime-500 bg-lime-50/30 dark:bg-lime-900/10":"border-gray-200 dark:border-gray-700 hover:shadow-md"]])},[a("div",{class:"flex-1 flex flex-col cursor-pointer active:scale-[0.98] transition-transform",onClick:A=>l(x)(o)},[a("div",Pe,[a("div",$e,[o.unit?(m(),g("span",Te,c(o.unit.name),1)):b("",!0),o.size?(m(),g("span",ze,c(o.size.name),1)):b("",!0)]),o.image_url?(m(),g("img",{key:0,src:o.image_url,loading:"lazy",class:"absolute inset-0 z-10 object-cover w-full h-full transition-transform duration-500 group-hover:scale-105",alt:"",onerror:"this.style.display='none'"},null,8,De)):b("",!0),o.image_url?b("",!0):(m(),g("div",Ie,[...e[24]||(e[24]=[a("svg",{class:"w-10 h-10 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),o.stock<=0?(m(),g("div",He,[...e[25]||(e[25]=[a("span",{class:"px-2 py-1 text-xs font-bold text-white transform border-2 border-white rounded -rotate-12"},"KOSONG",-1)])])):b("",!0)]),a("div",Ae,[a("div",Ee,[a("span",Re,c(o.brand?.name||"No Brand"),1)]),a("h3",{class:"text-xs font-bold leading-snug text-gray-800 dark:text-gray-100 line-clamp-2 min-h-[2.5em] mb-2",title:o.name},c(o.name),9,Le),a("div",Ne,[a("div",Ue,[a("div",{class:U(["w-1.5 h-1.5 rounded-full",o.stock<=5?"bg-red-500 animate-pulse":"bg-green-500 dark:bg-green-400"])},null,2),a("span",{class:U(["text-[10px] font-medium",o.stock<=5?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"])},c(o.stock<=5?`Sisa ${parseFloat(o.stock)}`:`Stok ${parseFloat(o.stock)}`),3)])]),a("div",Oe,[a("span",Ve,c(l(z)(o.selling_price||o.price)),1),r(o.id)>0?(m(),g("div",Ge,c(r(o.id)),1)):(m(),g("div",Qe,[...e[26]||(e[26]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]))])])],8,Be),a("div",Ke,[a("button",{onClick:re(A=>te(o),["stop"]),class:"py-2.5 flex items-center justify-center gap-1.5 text-xs font-semibold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition"},[...e[27]||(e[27]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),Z(" Detail ",-1)])],8,Je),a("button",{onClick:re(A=>l(Q)(o),["stop"]),class:U(["py-2.5 flex items-center justify-center gap-1.5 text-xs font-semibold transition",l(K)(o.id)?"bg-lime-100 text-lime-700 dark:bg-lime-900/30 dark:text-lime-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},[e[28]||(e[28]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),Z(" "+c(l(K)(o.id)?"Batal":"Bandingkan"),1)],10,Ye)])],2))),128))]),l(v)?(m(),g("div",Ze,[...e[29]||(e[29]=[a("div",{class:"w-8 h-8 mx-auto mb-2 border-b-2 rounded-full animate-spin border-lime-500"},null,-1),a("span",{class:"text-xs text-gray-400"},"Memuat database produk...",-1)])])):l(y).length===0?(m(),g("div",We,[e[31]||(e[31]=pe('<div class="relative mb-6"><div class="flex items-center justify-center w-24 h-24 rounded-full shadow-inner bg-gray-50 dark:bg-gray-800"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><div class="absolute -top-2 -right-2 bg-white dark:bg-gray-700 rounded-full p-1.5 shadow-md border border-gray-100 dark:border-gray-600"><div class="p-1 rounded-full bg-lime-100 dark:bg-lime-900/50"><svg class="w-5 h-5 text-lime-500 dark:text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01"></path></svg></div></div></div><h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white"> Produk tidak ditemukan </h3><p class="max-w-xs mx-auto mb-6 text-sm leading-relaxed text-gray-500 dark:text-gray-400"> Kami tidak dapat menemukan produk dengan kata kunci atau kategori tersebut. </p>',3)),a("button",{onClick:e[12]||(e[12]=o=>{s.search="",s.selectedCategory="all"}),class:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:border-lime-500 hover:text-lime-600 dark:hover:border-lime-500 dark:hover:text-lime-400 shadow-sm hover:shadow-md"},[...e[30]||(e[30]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Z(" Reset Pencarian ",-1)])])])):b("",!0),l(y).length>0&&l(O).length>l(y).length?(m(),g("div",Xe," Scroll untuk memuat lebih banyak... ")):b("",!0)],544),l(R)?.length>0?(m(),g("div",et,[a("div",tt,c(l(R).length)+" Banding ",1),a("div",at,[a("button",{onClick:e[13]||(e[13]=o=>h.value=!0),class:"px-3 py-1.5 bg-lime-500 hover:bg-lime-400 text-black text-xs font-bold rounded-full transition"}," Buka "),a("button",{onClick:e[14]||(e[14]=(...o)=>l(D)&&l(D)(...o)),class:"p-1.5 hover:bg-gray-700 rounded-full text-gray-400 hover:text-white transition"},[...e[32]||(e[32]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):b("",!0),l(p).items.length>0?(m(),g("div",ot,[a("button",{onClick:e[15]||(e[15]=o=>j.value=!0),class:"w-full bg-gray-900 dark:bg-lime-600 text-white p-3.5 rounded-2xl shadow-xl shadow-gray-900/20 flex justify-between items-center animate-bounce-subtle"},[a("div",st,[a("span",rt,c(l(p).items.reduce((o,A)=>o+parseFloat(A.quantity),0)),1),a("div",nt,[e[33]||(e[33]=a("span",{class:"text-[9px] text-gray-400 dark:text-lime-100 uppercase font-bold tracking-wider"},"Total Belanja",-1)),a("span",lt,c(l(z)(l(E))),1)])]),e[34]||(e[34]=a("span",{class:"flex items-center gap-1 px-4 py-2 text-xs font-bold bg-gray-700 dark:bg-lime-800/30 rounded-xl"},[Z(" Bayar "),a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})])],-1))])])):b("",!0)]),P(ke,{showMobileCart:j.value,reprops:l(C),onOpenScanMember:ae,onShowBayar:e[16]||(e[16]=o=>I.value=!0),onShowDesktop:e[17]||(e[17]=o=>j.value=!1)},null,8,["showMobileCart","reprops"])]),P(he,{show:H.value,onClose:e[23]||(e[23]=o=>H.value=!1),title:"Tambah Pesanan"},{footer:ne(()=>[a("div",Ct,[a("button",{onClick:e[21]||(e[21]=o=>Y(!1)),class:"flex-1 font-bold transition border text-lime-700 bg-lime-100 border-lime-200 rounded-xl active:bg-lime-200 dark:bg-lime-800 dark:text-lime-300 dark:border-lime-700"}," Masuk Keranjang "),a("button",{onClick:e[22]||(e[22]=o=>Y(!0)),class:"flex-[1.3] bg-gray-900 text-white font-bold rounded-xl shadow-xl flex items-center justify-center gap-2 active:scale-[0.98] transition hover:bg-gray-800 dark:bg-white dark:text-gray-900"},[...e[40]||(e[40]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),a("span",null,"Scan Lagi",-1)])])])]),default:ne(()=>[a("div",it,[a("div",dt,[a("div",ut,c(i.value.name?.substring(0,2).toUpperCase()),1),a("div",ct,[a("h3",mt,c(i.value.name),1),a("div",gt,[a("p",yt,c(i.value.code),1),a("p",{class:U(["text-xs font-medium",3>i.value.stock?"text-red-500":"text-gray-400"])}," Stok: "+c(i.value.stock),3)])])]),a("div",pt,[a("div",bt,[a("button",{onClick:e[18]||(e[18]=o=>i.value.quantity>1?i.value.quantity--:null),class:"flex items-center justify-center text-gray-500 transition bg-white border border-gray-200 shadow-sm w-14 h-14 dark:bg-gray-800 rounded-xl dark:border-gray-600 active:scale-95 hover:text-red-500 disabled:opacity-50",disabled:i.value.quantity<=1},[...e[35]||(e[35]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,ft),a("div",vt,[e[36]||(e[36]=a("label",{class:"block text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-0.5"},"Jumlah Beli",-1)),be(a("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>i.value.quantity=o),type:"number",class:"w-full p-0 text-3xl font-black text-center text-gray-800 bg-transparent border-none dark:text-white focus:ring-0"},null,512),[[fe,i.value.quantity,void 0,{number:!0}]])]),a("button",{onClick:e[20]||(e[20]=o=>i.value.quantity++),class:"flex items-center justify-center text-white transition shadow-lg w-14 h-14 bg-lime-500 rounded-xl shadow-lime-500/30 active:scale-95"},[...e[37]||(e[37]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])])])]),a("div",ht,[a("div",null,[e[38]||(e[38]=a("p",{class:"text-xs text-gray-400"},"Harga Satuan",-1)),a("p",xt,c(l(z)(i.value.price)),1)]),a("div",kt,[e[39]||(e[39]=a("p",{class:"text-xs font-bold text-gray-400 uppercase"}," Subtotal ",-1)),a("p",wt,c(l(z)(i.value.price*i.value.quantity)),1)])]),i.value.quantity>i.value.stock?(m(),g("div",_t," ⚠️ Jumlah melebihi sisa stok ("+c(i.value.stock)+") ",1)):b("",!0)])]),_:1},8,["show"])],64))}};export{Rt as default};
