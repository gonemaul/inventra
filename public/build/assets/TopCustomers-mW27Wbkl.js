import{_ as k}from"./AuthenticatedLayout-BfKFT1gl.js";import{l,o as d,e as i,g as m,i as v,w as u,f as t,B as w,k as g,m as _,F as x,H as T,n as B,t as s}from"./vendor-core-CTIsLlXR.js";import{_ as C}from"./ReportPagination-B9KyalBq.js";import{u as j}from"./useExport-ZWbXSJP4.js";import"./useSidebar-CS5Wldf6.js";import"./useActionLoading-C7V52Mi3.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";const D={class:"space-y-6 pb-20"},V={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},L={class:"flex items-center gap-2"},N={class:"bg-white border border-gray-200 rounded-2xl shadow-sm dark:bg-gray-800 dark:border-gray-700 overflow-hidden"},R={class:"overflow-x-auto"},z={class:"w-full text-sm text-left"},M={class:"divide-y divide-gray-100 dark:divide-gray-700"},E={class:"px-6 py-4 text-center"},F={class:"px-6 py-4"},H={class:"font-bold text-gray-800 dark:text-white text-base"},I={class:"text-xs text-gray-500"},P={class:"px-6 py-4 text-center font-medium text-gray-600 dark:text-gray-300"},S={class:"px-6 py-4 text-right"},$={class:"font-black text-emerald-600 text-base"},A={class:"px-6 py-4 text-center text-gray-500"},U={key:0},G={class:"p-4 border-t border-gray-100 dark:border-gray-700 flex justify-end"},Z={__name:"TopCustomers",props:{customers:Object},setup(n){const o=n,{exportToCsv:h}=j(),b=()=>{const r=o.customers.data.map((e,a)=>({Rank:(o.customers.current_page-1)*o.customers.per_page+a+1,Nama:e.customer?.name||"Umum",Member:e.customer?.member_code||"-",Telp:e.customer?.phone||"-","Jumlah Transaksi":e.visit_count,"Total Belanja":e.total_spent,"Terakhir Datang":e.last_seen}));h("Laporan_Top_Customers",r)},y=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),f=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-",p=(r,e)=>{const a=(o.customers.current_page-1)*o.customers.per_page+r+1;return a===1?{label:"ðŸ¥‡ #1",class:"bg-yellow-100 text-yellow-800 border-yellow-300"}:a===2?{label:"ðŸ¥ˆ #2",class:"bg-gray-100 text-gray-800 border-gray-300"}:a===3?{label:"ðŸ¥‰ #3",class:"bg-orange-100 text-orange-800 border-orange-300"}:{label:`#${a}`,class:"bg-white text-gray-500 border-gray-200"}};return(r,e)=>(d(),l(x,null,[i(m(v),{title:"Pelanggan Setia"}),i(k,{headerTitle:"Top Customers"},{default:u(()=>[t("div",D,[t("div",V,[t("div",L,[i(m(w),{href:r.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:u(()=>[...e[0]||(e[0]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),g(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",{class:"flex gap-2"},[t("button",{onClick:b,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),g(" Export CSV ",-1)])]),e[2]||(e[2]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),g(" Print ")],-1))])]),e[6]||(e[6]=t("div",{class:"p-6 text-white bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl shadow-lg relative overflow-hidden"},[t("div",{class:"relative z-10 max-w-2xl"},[t("h2",{class:"text-2xl font-bold mb-2"},"ðŸ’Ž Pelanggan Adalah Raja"),t("p",{class:"text-blue-100 text-sm"}," Berikut adalah daftar pelanggan dengan total belanja tertinggi. Gunakan data ini untuk memberikan reward atau promosi khusus bagi pelanggan setia Anda. ")]),t("div",{class:"absolute right-0 bottom-0 opacity-10 p-4"},[t("svg",{class:"w-32 h-32",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])])],-1)),t("div",N,[t("div",R,[t("table",z,[e[5]||(e[5]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700/50"},[t("tr",null,[t("th",{class:"px-6 py-4 w-20 text-center"},"Rank"),t("th",{class:"px-6 py-4"},"Pelanggan"),t("th",{class:"px-6 py-4 text-center"},"Frekuensi Belanja"),t("th",{class:"px-6 py-4 text-right"},"Total Belanja"),t("th",{class:"px-6 py-4 text-center"},"Terakhir Datang")])],-1)),t("tbody",M,[(d(!0),l(x,null,T(n.customers.data,(a,c)=>(d(),l("tr",{key:c,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition"},[t("td",E,[t("span",{class:B(["px-3 py-1 text-xs font-black border rounded-full shadow-sm whitespace-nowrap",p(c).class])},s(p(c).label),3)]),t("td",F,[t("div",H,s(a.customer?.name||"Umum / Tanpa Nama"),1),t("div",I," Member: "+s(a.customer?.member_code||"-")+" â€¢ Telp: "+s(a.customer?.phone||"-"),1)]),t("td",P,s(a.visit_count)+"x ",1),t("td",S,[t("div",$,s(y(a.total_spent)),1),e[3]||(e[3]=t("div",{class:"text-[10px] text-gray-400"},"Total Revenue",-1))]),t("td",A,s(f(a.last_seen)),1)]))),128)),n.customers.data.length===0?(d(),l("tr",U,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-400"}," Belum ada data pelanggan yang tercatat. ",-1)])])):_("",!0)])])]),t("div",G,[i(C,{links:n.customers.links},null,8,["links"])])])])]),_:1})],64))}};export{Z as default};
