import{_ as k}from"./DataTable-DQP4LpPT.js";import{s as r,g as d,o as l,a as u,b as s,w as o,i as c,c as _,d as b,l as v,f as h,n as w,t as x,F as C}from"./app-C_cXePOB.js";import{_ as N}from"./ImageModal-DbaHFI2H.js";import"./Modal-DR4Qf9lZ.js";const B={class:"p-4 space-y-5 bg-white border rounded-lg shadow-md dark:bg-gray-900 dark:border-lime-500"},$=["onClick"],I={class:"flex flex-wrap gap-2"},D=["onClick"],E=["onClick"],A={__name:"invoiceTable",props:{purchase:{type:Array,required:!0},isCheckingMode:{type:Boolean,default:!1},canEditDelete:Boolean},emits:["edit-invoice","delete-invoice"],setup(i,{emit:T}){const n=r(!1),p=r(null),m=r(null),f=(a,t)=>{p.value=a,m.value="Invoice-#"+t,n.value=!0},y=[{key:"invoice_number",label:"No Nota",sortable:!0,width:"100px",slot:"invoice"},{key:"invoice_date",label:"Tanggal Nota",sortable:!0,width:"150px",format:"tanggal"},{key:"due_date",label:"Jatuh Tempo",sortable:!0,width:"150px",format:"tanggal"},{key:"total_amount",label:"Nominal Total",sortable:!0,width:"200px",format:"rupiah"},{key:"payment_status",label:"Status Bayar",sortable:!0,width:"120px",slot:"status"},{key:"aksi",label:"Aksi",width:"180px",slot:"aksi"}];return(a,t)=>(l(),d(C,null,[u(N,{show:n.value,imageUrl:p.value,productName:m.value,onClose:t[0]||(t[0]=e=>n.value=!1)},null,8,["show","imageUrl","productName"]),s("div",B,[t[3]||(t[3]=s("h3",{class:"text-lg font-bold dark:text-white"},"Daftar Nota Keuangan",-1)),u(k,{columns:y,data:i.purchase.invoices,serverSide:!1,perPageOptions:[5,10,20]},{invoice:o(({row:e})=>[s("span",{class:"text-blue-500 cursor-pointer",onClick:g=>f(e.invoice_image,e.invoice_number)},x(e.invoice_number),9,$)]),status:o(({row:e})=>[s("span",{class:w([{"px-2 py-1 text-white rounded":!0,"bg-green-600":e.payment_status==="paid","bg-yellow-600":e.payment_status==="partial","bg-red-600":e.payment_status==="unpaid"},"text-xs uppercase"])},x(e.payment_status),3)]),aksi:o(({row:e})=>[s("div",I,[u(b(v),{href:a.route("purchases.linkInvoiceItems",{purchase:i.purchase.id,invoice:e.id}),class:"px-2 py-1 text-xs text-white bg-orange-500 rounded hover:bg-orange-600"},{default:o(()=>[...t[1]||(t[1]=[h(" Detail ",-1)])]),_:2},1032,["href"]),i.canEditDelete?(l(),d("button",{key:0,onClick:g=>a.$emit("edit-invoice",e),class:"px-2 py-1 text-xs text-white bg-blue-500 rounded hover:bg-blue-600"}," Edit ",8,D)):c("",!0),i.canEditDelete?(l(),d("button",{key:1,onClick:g=>a.$emit("delete-invoice",e),class:"px-2 py-1 text-xs text-white bg-red-500 rounded hover:bg-red-600"}," Hapus ",8,E)):c("",!0),e.payment_status!=="paid"?(l(),_(b(v),{key:2,href:a.route("finance.detail",e.id),class:"px-2 py-1 text-xs text-white rounded bg-lime-600 hover:bg-lime-700"},{default:o(()=>[...t[2]||(t[2]=[h(" Bayar ",-1)])]),_:2},1032,["href"])):c("",!0)])]),_:1},8,["data"])])],64))}};export{A as default};
