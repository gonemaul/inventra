import{q as u,J as v,Y as p,l as o,o as i,f as t,t as d,y as n,e as g,K as w,F as h,H as I,z as m,m as S,j as x,X as j,n as M,O as B,k as T,w as $,g as H,B as R}from"./vendor-core-BC1dSzkC.js";import{_ as k}from"./InputError-DGYw8hC3.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";const N={class:"flex flex-col gap-4"},C={class:"p-4 transition-colors bg-white border border-gray-100 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},E={class:"flex items-center justify-between pb-2 mb-4 border-b border-gray-100 dark:border-gray-700"},q={class:"text-xl font-extrabold text-lime-600 dark:text-lime-400"},D={class:"text-xs font-medium text-right text-gray-500 dark:text-gray-400"},z={class:"grid grid-cols-1 gap-3"},A=["disabled"],U=["value"],V={class:"relative p-4 overflow-hidden transition-colors bg-white border border-gray-100 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},K={class:"mb-4"},P={class:"text-base font-bold text-gray-800 break-words dark:text-white"},F={key:0,class:"text-xs font-mono text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 inline-block px-1.5 py-0.5 rounded mt-1"},L={class:"flex gap-4"},O={class:"relative flex-shrink-0 w-24 h-24 overflow-hidden bg-gray-100 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600"},J=["src"],Q={class:"flex-1 space-y-3"},X=["disabled"],Y={class:"flex justify-between gap-3"},G={class:"relative"},W=["value","disabled"],Z={class:"relative"},_=["value"],tt={class:"grid grid-cols-3 gap-2 mt-4"},et=["disabled"],at={class:"overflow-hidden transition-colors bg-white border border-gray-100 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},rt={class:"p-4 space-y-4 text-xs border-t border-gray-100 dark:border-gray-700"},st={class:"flex justify-between pb-2 text-gray-800 border-b border-gray-100 dark:border-gray-700 dark:text-gray-300"},dt={class:"text-center"},ot={class:"font-medium"},it={class:"text-center"},lt={class:"font-medium"},nt={class:"text-center"},gt={class:"font-medium"},bt={class:"grid grid-cols-2 text-gray-700 gap-x-4 gap-y-3 dark:text-gray-300"},yt={class:"flex justify-between"},ut={class:"font-bold"},mt={class:"flex justify-between"},xt={class:"font-bold text-orange-500 dark:text-orange-400"},kt={class:"flex justify-between"},ct={class:"font-bold text-lime-600 dark:text-lime-400"},ft={class:"flex justify-between"},vt={class:"font-bold"},pt={class:"flex justify-between col-span-2 pt-2 border-t border-gray-100 dark:border-gray-700"},wt={class:"font-bold text-gray-800 dark:text-white"},ht={class:"grid grid-cols-2 gap-3 mt-2"},It=["disabled"],Tt={__name:"HeadRabMobile",props:{formHeader:Object,dropdowns:Object,stagingItem:Object,isEdit:Boolean,isEditingMode:Boolean,cartItems:Array,displayedPrice:[String,Number],totalUnit:[Number,String],totalMacam:[Number,String],totalBelanja:[Number,String]},emits:["update:displayedPrice","saveStaging","resetStaging","submitTransaction","openRecommendation"],setup(a){const c=a,l=u(!1),b=u(null);v(()=>c.stagingItem.product_id,s=>{s&&p(()=>{b.value?.select()})});const y=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s);function f(s){return!s&&s!==0?"":new Intl.NumberFormat("id-ID").format(s)}return(s,e)=>(i(),o("div",N,[t("div",C,[t("div",E,[t("div",null,[e[11]||(e[11]=t("span",{class:"text-xs font-bold tracking-wide text-gray-500 uppercase dark:text-gray-400"},"Total Belanja",-1)),t("p",q,d(y(a.totalBelanja)),1)]),t("div",D,[t("p",null,d(a.totalUnit)+" Unit",1),t("p",null,d(a.totalMacam)+" Macam",1)])]),t("div",z,[t("div",null,[e[13]||(e[13]=t("label",{class:"block mb-1 text-xs font-bold text-gray-500 dark:text-gray-400"},"Supplier",-1)),n(t("select",{disabled:a.isEdit,"onUpdate:modelValue":e[0]||(e[0]=r=>a.formHeader.supplier_id=r),class:"w-full px-3 py-2 text-sm transition-colors bg-white border border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400"},[e[12]||(e[12]=t("option",{value:""},"Pilih Supplier",-1)),(i(!0),o(h,null,I(a.dropdowns.suppliers,r=>(i(),o("option",{key:r.id,value:r.id},d(r.name),9,U))),128))],8,A),[[w,a.formHeader.supplier_id]]),g(k,{message:a.formHeader.errors.supplier_id},null,8,["message"])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block mb-1 text-xs font-bold text-gray-500 dark:text-gray-400"},"Tanggal",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>a.formHeader.transaction_date=r),type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:[color-scheme:dark] transition-colors"},null,512),[[m,a.formHeader.transaction_date]]),g(k,{message:a.formHeader.errors.transaction_date},null,8,["message"])])])]),t("div",V,[t("div",K,[e[15]||(e[15]=t("label",{class:"block mb-1 text-xs font-bold text-gray-500 dark:text-gray-400"},"Barang Terpilih",-1)),t("div",P,d(a.stagingItem.name?a.stagingItem.name:"Belum ada barang dipilih"),1),a.stagingItem.code?(i(),o("div",F,d(a.stagingItem.code),1)):S("",!0)]),t("div",L,[t("div",O,[e[16]||(e[16]=t("div",{class:"absolute inset-0 z-0 flex flex-col items-center justify-center text-gray-400 dark:text-gray-500 font-bold text-[10px]"},[t("svg",{class:"w-8 h-8 mb-1 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",{class:"text-[10px] font-medium"},"No Image")],-1)),t("img",{src:a.stagingItem.image_url,loading:"lazy",decoding:"async",onload:"this.classList.remove('opacity-0')",onerror:"this.style.display='none'",class:"absolute inset-0 z-10 object-cover w-full h-full opacity-0"},null,8,J)]),t("div",Q,[t("div",null,[e[17]||(e[17]=t("label",{class:"block mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Qty",-1)),n(t("input",{"on@keydown":e[2]||(e[2]=x(r=>s.$emit("saveStaging"),["prevent"])),ref_key:"qtyInputMobile",ref:b,"onUpdate:modelValue":e[3]||(e[3]=r=>a.stagingItem.quantity=r),type:"number",min:"1",placeholder:"0",disabled:!a.stagingItem.product_id,class:"w-full px-3 py-2 text-sm transition-colors bg-white border border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 disabled:bg-gray-100 dark:disabled:bg-gray-800 dark:disabled:text-gray-600"},null,40,X),[[m,a.stagingItem.quantity,void 0,{number:!0}]])]),t("div",Y,[t("div",null,[e[19]||(e[19]=t("label",{class:"block mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Harga Beli",-1)),t("div",G,[e[18]||(e[18]=t("span",{class:"absolute text-xs text-gray-500 left-3 top-2 dark:text-gray-400"},"Rp",-1)),t("input",{value:a.displayedPrice,onKeydown:e[4]||(e[4]=j(x(r=>s.$emit("saveStaging"),["prevent"]),["enter"])),onInput:e[5]||(e[5]=r=>s.$emit("update:displayedPrice",r.target.value)),type:"text",placeholder:"0",disabled:!a.stagingItem.product_id,class:"w-full py-2 pl-8 pr-3 font-mono text-sm text-right transition-colors bg-white border border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 disabled:bg-gray-100 dark:disabled:bg-gray-800 dark:disabled:text-gray-600"},null,40,W)])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Subtotal Item",-1)),t("div",Z,[e[20]||(e[20]=t("span",{class:"absolute text-xs text-gray-500 left-3 top-2 dark:text-gray-400"},"Rp",-1)),t("input",{value:f((a.stagingItem.quantity||0)*(a.stagingItem.purchase_price||0)),type:"text",placeholder:"0",disabled:!0,class:"w-full py-2 pl-8 pr-3 font-mono text-sm text-right transition-colors bg-white border border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 disabled:bg-gray-100 dark:disabled:bg-gray-800 dark:disabled:text-gray-600"},null,8,_)])])])])]),t("div",tt,[t("button",{onClick:e[6]||(e[6]=r=>s.$emit("resetStaging")),type:"button",class:"col-span-1 py-2.5 text-xs font-bold text-red-600 bg-red-50 border border-red-100 rounded-lg hover:bg-red-100 dark:bg-red-900/20 dark:text-red-400 dark:border-red-900/30 dark:hover:bg-red-900/40"}," RESET "),t("button",{onClick:e[7]||(e[7]=r=>s.$emit("saveStaging")),disabled:!a.stagingItem.product_id,type:"button",class:"col-span-2 py-2.5 text-xs font-bold text-white bg-lime-600 rounded-lg hover:bg-lime-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 dark:disabled:text-gray-500 shadow-sm"},d(a.isEditingMode?"UPDATE ITEM":"TAMBAH KE LIST"),9,et)])]),t("div",at,[t("button",{onClick:e[8]||(e[8]=r=>l.value=!l.value),type:"button",class:"flex items-center justify-between w-full p-3 text-sm font-bold text-gray-700 transition dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700"},[e[23]||(e[23]=t("span",null,"Rincian Data Barang",-1)),(i(),o("svg",{class:M([{"rotate-180":l.value},"w-5 h-5 text-gray-500 transition-transform dark:text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...e[22]||(e[22]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),n(t("div",rt,[t("div",st,[t("div",dt,[e[24]||(e[24]=t("span",{class:"block text-gray-400 dark:text-gray-500 mb-0.5"},"Kategori",-1)),t("span",ot,d(a.stagingItem.category||"-"),1)]),t("div",it,[e[25]||(e[25]=t("span",{class:"block text-gray-400 dark:text-gray-500 mb-0.5"},"Satuan",-1)),t("span",lt,d(a.stagingItem.unit||"-"),1)]),t("div",nt,[e[26]||(e[26]=t("span",{class:"block text-gray-400 dark:text-gray-500 mb-0.5"},"Ukuran",-1)),t("span",gt,d(a.stagingItem.size||"-"),1)])]),t("div",bt,[t("div",yt,[e[27]||(e[27]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Sisa Stok:",-1)),t("span",ut,d(a.stagingItem.current_stock||"0"),1)]),t("div",mt,[e[28]||(e[28]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Rek. Restok:",-1)),t("span",xt,d(a.stagingItem.restock_recommendation||"0"),1)]),t("div",kt,[e[29]||(e[29]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Stok Masuk:",-1)),t("span",ct,d(a.stagingItem.quantity||"0"),1)]),t("div",ft,[e[30]||(e[30]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Total Akhir:",-1)),t("span",vt,d((a.stagingItem.current_stock||0)+(a.stagingItem.quantity||0)),1)]),t("div",pt,[e[31]||(e[31]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Subtotal Item Ini:",-1)),t("span",wt,d(y((a.stagingItem.quantity||0)*(a.stagingItem.purchase_price||0))),1)])])],512),[[B,l.value]])]),t("div",ht,[t("button",{onClick:e[9]||(e[9]=r=>s.$emit("openRecommendation")),type:"button",class:"flex items-center justify-center gap-2 py-3 text-xs font-bold text-white uppercase transition bg-yellow-500 rounded-lg shadow-sm hover:bg-yellow-600 dark:bg-yellow-600 dark:hover:bg-yellow-700"},[...e[32]||(e[32]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),T(" Rekomendasi ",-1)])]),g(H(R),{href:s.route("purchases.index"),class:"w-full"},{default:$(()=>[...e[33]||(e[33]=[t("button",{type:"button",class:"w-full py-3 text-xs font-bold text-gray-700 uppercase transition bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600"}," Kembali ",-1)])]),_:1},8,["href"])]),t("button",{onClick:e[10]||(e[10]=r=>s.$emit("submitTransaction")),disabled:a.formHeader.processing||a.cartItems.length===0,type:"button",class:"w-full py-4 text-sm font-extrabold tracking-widest text-white uppercase transition-all bg-blue-600 rounded-lg shadow-md hover:bg-blue-700 disabled:bg-gray-400 dark:disabled:bg-gray-700 dark:disabled:text-gray-500"},d(a.formHeader.processing?"Menyimpan Transaksi...":"SIMPAN TRANSAKSI"),9,It)]))}};export{Tt as default};
