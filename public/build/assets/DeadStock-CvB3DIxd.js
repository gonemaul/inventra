import{u as w,l as d,o as l,e as i,g as c,i as v,w as u,f as t,C as _,k as n,t as a,z as j,L as D,p as S,F as h,I as B,n as y}from"./vendor-core-B46KUNyc.js";import{_ as C}from"./AuthenticatedLayout-9yD8UcND.js";import{_ as H}from"./ReportPagination-CgkiJBKS.js";import{u as T}from"./useExport-ZWbXSJP4.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-DSTl-7Rw.js";import"./useActionLoading-pomD9vky.js";const N={class:"space-y-6 pb-20"},z={class:"flex flex-col gap-4 mb-4 md:flex-row md:items-center md:justify-between print:hidden"},M={class:"flex items-center gap-2"},V={class:"flex flex-col items-center justify-between gap-6 p-6 text-white shadow-lg bg-gradient-to-r from-red-800 to-red-600 rounded-2xl md:flex-row"},A={class:"max-w-xl mt-1 text-red-100"},L={class:"text-right bg-white/10 p-4 rounded-xl border border-white/20 backdrop-blur-sm min-w-[200px]"},P={class:"mt-1 text-3xl font-black"},F={class:"mt-1 text-xs text-red-200"},I={class:"flex flex-col items-center justify-between gap-4 p-4 bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700 md:flex-row"},E={class:"flex items-center w-full gap-2 md:w-auto"},U={class:"bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700 relative"},G={class:"overflow-x-auto"},O={class:"w-full text-sm text-left"},R={class:"divide-y divide-gray-100 dark:divide-gray-700"},$={class:"px-6 py-4"},J={class:"font-bold text-gray-800 dark:text-white"},K={class:"text-xs text-gray-500"},q={class:"px-6 py-4 text-center"},Q={class:"px-2 py-1 font-bold text-gray-700 bg-gray-100 rounded dark:bg-gray-700 dark:text-gray-300"},W={class:"px-6 py-4 font-medium text-right text-gray-600 dark:text-gray-300"},X={class:"px-6 py-4 text-xs text-center text-gray-500"},Y={class:"px-6 py-4 text-center"},Z={class:"inline-flex flex-col items-center"},tt={class:"px-6 py-4 text-center"},et={key:0},st={colspan:"6",class:"px-6 py-12 text-center"},at={class:"flex flex-col items-center justify-center text-green-500"},rt={class:"text-sm text-gray-500"},ot={class:"p-4 border-t border-gray-100 dark:border-gray-700 flex justify-center md:justify-end"},ut={__name:"DeadStock",props:{products:Object,filters:Object,total_frozen_asset:Number},setup(r){const g=r,{exportToCsv:b}=T(),k=()=>{const o=g.products.data.map(e=>({Nama:e.name,Stok:e.stock,Unit:e.unit?.name,"Harga Beli":e.purchase_price,"Nilai Aset":e.stock*e.purchase_price,"Terakhir Terjual":e.last_sold_at||"Belum Pernah"}));b("Laporan_Dead_Stock",o)},x=w({days:g.filters.days||90}),m=()=>{x.get(route("reports.dead-stock"),{preserveScroll:!0})},p=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o),f=o=>o?new Date(o).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Belum Pernah";return(o,e)=>(l(),d(h,null,[i(c(v),{title:"Dead Stock Analysis"}),i(C,{headerTitle:"Analisa Dead Stock"},{default:u(()=>[t("div",N,[t("div",z,[t("div",M,[i(c(_),{href:o.route("reports.index"),class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-gray-600 transition bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-50 hover:text-blue-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:u(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),n(" Kembali ",-1)])]),_:1},8,["href"])]),t("div",{class:"flex gap-2"},[t("button",{onClick:k,class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-green-600 rounded-lg shadow hover:bg-green-700"},[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),n(" Export CSV ",-1)])]),e[3]||(e[3]=t("button",{onclick:"window.print()",class:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})]),n(" Print ")],-1))])]),t("div",V,[t("div",null,[e[6]||(e[6]=t("h2",{class:"flex items-center gap-2 text-2xl font-black tracking-tight uppercase"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),n(" Uang Mati di Gudang ")],-1)),t("p",A,[e[4]||(e[4]=n(" Barang-barang ini tidak terjual lebih dari ",-1)),t("strong",null,a(r.filters.days)+" hari",1),e[5]||(e[5]=n(". Segera lakukan tindakan (Diskon/Bundle) agar cashflow berputar kembali. ",-1))])]),t("div",L,[e[7]||(e[7]=t("p",{class:"text-xs font-bold tracking-widest text-red-100 uppercase"}," Total Nilai Aset Macet ",-1)),t("p",P,a(p(r.total_frozen_asset)),1),t("p",F,a(r.products.total)+" Jenis Barang ",1)])]),t("div",I,[t("div",E,[e[9]||(e[9]=t("span",{class:"text-sm font-bold text-gray-500"},"Tampilkan barang yang tidak laku selama:",-1)),j(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>c(x).days=s),onChange:m,class:"text-sm font-bold border-gray-300 rounded-lg focus:ring-red-500 dark:bg-gray-700 dark:text-white"},[...e[8]||(e[8]=[t("option",{value:"30"},"30 Hari",-1),t("option",{value:"60"},"60 Hari",-1),t("option",{value:"90"},"90 Hari (Standard)",-1),t("option",{value:"180"},"180 Hari (Parah)",-1),t("option",{value:"365"},"1 Tahun (Akut)",-1)])],544),[[D,c(x).days]])]),e[10]||(e[10]=t("div",{class:"text-xs text-gray-400"}," *Data dihitung berdasarkan transaksi penjualan terakhir. ",-1))]),t("div",U,[t("div",G,[t("table",O,[e[14]||(e[14]=t("thead",{class:"text-xs text-gray-500 uppercase border-b bg-gray-50 dark:bg-gray-700/50 dark:border-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-4"},"Produk"),t("th",{class:"px-6 py-4 text-center"}," Stok Macet "),t("th",{class:"px-6 py-4 text-right"}," Nilai Aset (HPP) "),t("th",{class:"px-6 py-4 text-center"}," Terakhir Laku "),t("th",{class:"px-6 py-4 text-center"}," Durasi (Hari) "),t("th",{class:"px-6 py-4 text-center"},"Saran AI")])],-1)),t("tbody",R,[(l(!0),d(h,null,B(r.products.data,s=>(l(),d("tr",{key:s.id,class:"transition hover:bg-red-50/30 dark:hover:bg-red-900/10"},[t("td",$,[t("div",J,a(s.name),1),t("div",K,a(s.code)+" â€¢ "+a(s.category),1)]),t("td",q,[t("span",Q,a(s.stock)+" "+a(s.unit),1)]),t("td",W,a(p(s.asset_value)),1),t("td",X,a(f(s.last_sale_date)),1),t("td",Y,[t("div",Z,[t("span",{class:y(["text-lg font-black",s.days_silent>180?"text-red-600":"text-orange-500"])},a(s.days_silent),3),e[11]||(e[11]=t("span",{class:"text-[10px] uppercase font-bold text-gray-400"},"Hari",-1))])]),t("td",tt,[t("span",{class:y(["px-3 py-1 rounded-full text-[10px] font-bold uppercase border shadow-sm whitespace-nowrap",{"bg-red-100 text-red-700 border-red-200":s.days_silent>180,"bg-orange-100 text-orange-700 border-orange-200":s.days_silent<=180,"bg-gray-100 text-gray-600 border-gray-200":!s.last_sale_date}])},a(s.suggestion),3)])]))),128)),r.products.data.length===0?(l(),d("tr",et,[t("td",st,[t("div",at,[e[12]||(e[12]=t("svg",{class:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[13]||(e[13]=t("h3",{class:"text-lg font-bold text-gray-800 dark:text-white"}," Gudang Sehat! ",-1)),t("p",rt," Tidak ada barang yang macet lebih dari "+a(r.filters.days)+" hari. ",1)])])])):S("",!0)])])]),t("div",ot,[i(H,{links:r.products.links},null,8,["links"])])])])]),_:1})],64))}};export{ut as default};
