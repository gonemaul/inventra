import{u as v,j as p,g as i,o as n,a as c,d as o,h as w,w as T,b as t,k as u,A as x,B as f,f as j,t as d,i as q,F as m,q as F}from"./app-XPyOtybP.js";import{_ as V}from"./AuthenticatedLayout-DDte47LZ.js";import{m as B}from"./vue3-apexcharts-CJY4YM0W.js";import"./useSidebar-B1dsdx0g.js";import"./useActionLoading-HgSkmBE-.js";const D={class:"space-y-6"},N={class:"flex flex-col items-end justify-between gap-4 p-5 bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700 md:flex-row"},O={class:"flex flex-col w-full gap-4 md:flex-row md:w-auto"},U={class:"flex items-center gap-2"},A={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},P={class:"p-6 bg-white border border-gray-200 shadow-lg lg:col-span-2 rounded-2xl dark:bg-gray-800 dark:border-gray-700"},z={class:"flex items-center gap-2 mb-4 text-lg font-bold text-gray-800 dark:text-white"},C={key:0},I={key:1,class:"flex items-center justify-center h-64 text-gray-400"},R={class:"flex flex-col overflow-hidden bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},S={class:"flex-1 overflow-y-auto max-h-[450px] custom-scrollbar"},L={class:"w-full text-sm text-left"},M={class:"divide-y divide-gray-100 dark:divide-gray-700"},Q={class:"w-10 px-4 py-3 text-lg italic font-black text-center text-gray-300 group-hover:text-blue-500"},E={class:"px-2 py-3"},G=["title"],H={class:"text-[10px] text-gray-500 uppercase tracking-wider"},J={class:"px-4 py-3 text-right"},X={class:"font-black text-gray-800 dark:text-white"},$={class:"text-[10px] text-gray-400"},K={key:0},rt={__name:"TopProducts",props:{filters:Object,data:Array},setup(g){const l=g,s=v({start_date:l.filters.start_date,end_date:l.filters.end_date,limit:l.filters.limit,sort_by:l.filters.sort_by}),_=()=>{s.get(route("reports.top-products"),{preserveScroll:!0})},y=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),h=p(()=>({chart:{type:"bar",height:400,fontFamily:"Inter, sans-serif",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%",distributed:!0}},colors:["#84cc16","#3b82f6","#f59e0b","#ef4444","#8b5cf6"],dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(r,e){return l.filters.sort_by==="total_revenue"?y(r):r+" Pcs"},offsetX:0},xaxis:{categories:l.data.map(r=>r.name.length>20?r.name.substring(0,20)+"...":r.name),labels:{formatter:r=>l.filters.sort_by==="total_revenue"?(r/1e6).toFixed(1)+"jt":r}},tooltip:{y:{formatter:r=>l.filters.sort_by==="total_revenue"?y(r):r+" Unit"}},grid:{show:!1}})),k=p(()=>[{name:l.filters.sort_by==="total_qty"?"Terjual (Qty)":"Omzet (Rp)",data:l.data.map(r=>l.filters.sort_by==="total_qty"?r.total_qty:r.total_revenue)}]);return(r,e)=>(n(),i(m,null,[c(o(w),{title:"Produk Terlaris"}),c(V,{headerTitle:"Analisa Produk Terlaris"},{default:T(()=>[t("div",D,[t("div",N,[t("div",O,[t("div",U,[u(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>o(s).start_date=a),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[x,o(s).start_date]]),e[4]||(e[4]=t("span",{class:"text-gray-400"},"-",-1)),u(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>o(s).end_date=a),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[x,o(s).end_date]])]),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>o(s).sort_by=a),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},[...e[5]||(e[5]=[t("option",{value:"total_qty"}," Berdasarkan Jumlah Terjual (Qty) ",-1),t("option",{value:"total_revenue"}," Berdasarkan Total Uang (Omzet) ",-1)])],512),[[f,o(s).sort_by]]),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>o(s).limit=a),class:"w-24 text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},[...e[6]||(e[6]=[t("option",{value:"5"},"Top 5",-1),t("option",{value:"10"},"Top 10",-1),t("option",{value:"20"},"Top 20",-1)])],512),[[f,o(s).limit]])]),t("button",{onClick:_,class:"w-full px-6 py-2 font-bold text-white transition bg-blue-600 rounded-lg shadow hover:bg-blue-700 md:w-auto"}," Analisa ")]),t("div",A,[t("div",P,[t("h3",z,[e[7]||(e[7]=t("span",{class:"text-2xl"},"ðŸ†",-1)),j(" Grafik Top "+d(o(s).limit)+" Produk ",1)]),g.data.length>0?(n(),i("div",C,[c(o(B),{type:"bar",height:"400",options:h.value,series:k.value},null,8,["options","series"])])):(n(),i("div",I," Tidak ada data penjualan. "))]),t("div",R,[e[9]||(e[9]=t("div",{class:"p-4 border-b border-gray-100 bg-gray-50/50 dark:bg-gray-800 dark:border-gray-700"},[t("h3",{class:"font-bold text-gray-800 dark:text-white"}," Leaderboard ")],-1)),t("div",S,[t("table",L,[t("tbody",M,[(n(!0),i(m,null,F(g.data,(a,b)=>(n(),i("tr",{key:b,class:"transition hover:bg-gray-50 dark:hover:bg-gray-700/30 group"},[t("td",Q," #"+d(b+1),1),t("td",E,[t("div",{class:"font-bold text-gray-800 dark:text-white line-clamp-1",title:a.name},d(a.name),9,G),t("div",H,d(a.code)+" â€¢ "+d(a.category_name||"No Cat"),1)]),t("td",J,[t("div",X,d(o(s).sort_by==="total_qty"?a.total_qty:y(a.total_revenue)),1),t("div",$,d(o(s).sort_by==="total_qty"?"Terjual":"Omzet"),1)])]))),128)),g.data.length===0?(n(),i("tr",K,[...e[8]||(e[8]=[t("td",{colspan:"3",class:"px-4 py-8 text-xs text-center text-gray-400"}," Data kosong ",-1)])])):q("",!0)])])])])])])]),_:1})],64))}};export{rt as default};
