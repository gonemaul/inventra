import{_ as V}from"./AuthenticatedLayout-DgtTuRzB.js";import{m as s,j as $,q as C,s as B,g as m,o,a as l,d as M,h as j,w as T,b as c,c as f,i as p,F as x,x as A}from"./app-DwOZ8O7W.js";import I from"./modalFilter-B8TDMkeM.js";import O from"./card-product-DW0W8Dsy.js";import F from"./pagination-B3EkpRjw.js";import{_ as U}from"./Filter-yVrdQphk.js";import{l as E}from"./lodash-BbuTDpt5.js";import{u as L}from"./useActionLoading-D41ljnOE.js";import{_ as K}from"./DeleteConfirm-DDdY3a12.js";import{_ as R}from"./ImageModal-BLHTPr2M.js";import"./useSidebar-BYtjcE5l.js";import"./Modal-DnFGslV2.js";import"./TextInput-DSjdPGH_.js";import"./PrimaryButton-BQIY3AiW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"w-full min-h-screen"},H={class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-1 lg:grid-cols-2"},z={key:0,class:"col-span-full text-center ..."},ne={__name:"index",props:{products:Object,filters:Object,dropdowns:Object},setup(r){const n=r,i=s(n.filters.search||""),u=s(!1),{isActionLoading:g}=L(),h=s(null),d=s(!1),v=s(null),k=s(null),N=$(()=>n.filters.trashed===!0||n.filters.trashed==="true"),P=$(()=>{const e=Object.keys(n.filters),t=["search","page","per_page"];return e.filter(a=>!t.includes(a)).length}),b=e=>{v.value=e.path,k.value=e.name,d.value=!0},w=(e,t=!1)=>{let a={};t?a={title:"Hapus Permanen Produk",message:"Produk ini akan dihapus selamanya. Anda yakin menghapus",itemName:e.name,url:route("products.destroy",{id:e.id,permanen:!0})}:a={title:"Pindahkan ke Sampah",message:"Anda yakin ingin memindahkan produk",itemName:e.name,url:route("products.destroy",{id:e.id})},h.value.open(a)},D=e=>{g.value=!0,C.put(route("products.restoreProduct",{id:e.id}),{},{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error(t)},onFinish:()=>{g.value=!1}})},S=E.throttle(()=>{const e={...n.filters};e.search=i.value,e.search||delete e.search,C.get(route("products.index"),e,{preserveState:!0,replace:!0})},300);return B(i,S),(e,t)=>(o(),m(x,null,[l(R,{show:d.value,imageUrl:v.value,productName:k.value,onClose:t[0]||(t[0]=a=>d.value=!1)},null,8,["show","imageUrl","productName"]),l(K,{ref_key:"showConfirmModal",ref:h,onSuccess:t[1]||(t[1]=()=>{})},null,512),l(M(j),{title:"Data Barang"}),l(V,{headerTitle:"Data Barang"},{default:T(()=>[c("div",q,[l(I,{show:u.value,onClose:t[2]||(t[2]=a=>u.value=!1),filters:r.filters,dropdowns:r.dropdowns},null,8,["show","filters","dropdowns"]),l(U,{filters:r.filters,modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=a=>i.value=a),onShowFilter:t[4]||(t[4]=a=>u.value=!0),filterCount:P.value,actions:[{route:e.route("products.create"),buttonText:"Tambah Produk"}]},null,8,["filters","modelValue","filterCount","actions"]),r.products.data.length>10?(o(),f(F,{key:0,metadata:r.products,filters:r.filters},null,8,["metadata","filters"])):p("",!0),c("div",H,[r.products.data.length===0?(o(),m("div",z,[...t[5]||(t[5]=[c("p",{class:"text-gray-500 ..."}," Tidak ada produk yang ditemukan. ",-1)])])):p("",!0),(o(!0),m(x,null,A(r.products.data,a=>(o(),f(O,{"is-trash-view":N.value,key:a.id,data:a,onDelete:y=>w(a,!1),onForceDelete:y=>w(a,!0),onRestore:y=>D(a),onImageClick:b},null,8,["is-trash-view","data","onDelete","onForceDelete","onRestore"]))),128))]),r.products.data.length>8?(o(),f(F,{key:1,metadata:r.products,filters:r.filters},null,8,["metadata","filters"])):p("",!0)])]),_:1})],64))}};export{ne as default};
