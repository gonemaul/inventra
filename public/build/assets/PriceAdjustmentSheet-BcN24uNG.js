import{u as F,C as u,l as i,o as d,f as e,m as b,t as s,k as j,y,z as f,g as n,F as R,H as B,n as g,j as C}from"./vendor-core-BhnropoY.js";import{u as D}from"./useActionLoading-Bnt8PnmV.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-common-pmZ7KOuE.js";import"./vendor-charts-Bw6UNgWf.js";const N={class:"flex-1 p-4 space-y-6 overflow-y-auto custom-scrollbar"},S={class:"flex items-center gap-3 pb-3 border-b border-gray-100 dark:border-gray-700"},z={class:"relative flex-shrink-0 w-20 h-20 overflow-hidden bg-gray-100 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600"},A=["src"],H={class:"flex-1 min-w-0"},V={class:"flex items-center mb-1"},L={class:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-1.5 py-0.5 rounded text-[10px] font-mono font-bold"},U={class:"text-[10px] font-medium text-gray-500 dark:text-gray-400 mb-1"},$={key:0},E={class:"text-sm font-bold leading-snug text-gray-900 dark:text-white line-clamp-2"},O={class:"space-y-5"},T={class:"relative p-3 border border-yellow-100 bg-yellow-50 dark:bg-yellow-900/10 rounded-xl dark:border-yellow-900/30"},G={class:"block text-[10px] font-bold text-yellow-700 dark:text-yellow-500 uppercase tracking-wider mb-1"},J={class:"relative"},q={key:0,class:"text-[10px] text-red-500 mt-1"},K={class:"relative p-3 border bg-lime-50 dark:bg-lime-900/10 rounded-xl border-lime-100 dark:border-lime-900/30"},Q={class:"block text-[10px] font-bold text-lime-700 dark:text-lime-500 uppercase tracking-wider mb-1"},W={class:"relative"},X={key:0,class:"text-[10px] text-red-500 mt-1"},Y={class:"flex gap-2 pb-2 overflow-x-auto no-scrollbar"},Z=["onClick"],ee={class:"flex flex-col"},te={class:"text-right"},re={class:"text-[10px] text-gray-400 uppercase font-bold block mb-0.5"},se={class:"flex gap-3 p-4 bg-white border-t border-gray-200 dark:border-gray-700 dark:bg-customBg-tableDark"},oe=["disabled"],ae={key:0},le={key:1},ne={__name:"PriceAdjustmentSheet",props:{product:Object},emits:["close","success"],setup(a,{emit:h}){const c=a,_=h,{isActionLoading:x}=D(),r=F({id:c.product?.id,type:"price",purchase_price:c.product?.purchase_price||0,selling_price:c.product?.selling_price||0}),k=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o||0),p=u(()=>(parseInt(r.selling_price)||0)-(parseInt(r.purchase_price)||0)),m=u(()=>(parseInt(c.product?.selling_price)||0)-(parseInt(c.product?.purchase_price)||0)),v=u(()=>{const o=parseInt(r.purchase_price)||0;return o<=0?0:(p.value/o*100).toFixed(1)}),w=u(()=>{const o=parseInt(c.product?.purchase_price)||0;return o<=0?0:(m.value/o*100).toFixed(1)}),I=o=>{const t=parseInt(r.purchase_price)||0;if(t<=0)return;const l=t*(o/100);r.selling_price=Math.ceil(t+l)},P=()=>{x.value=!0,r.put(route("products.update",c.product?.id),{onSuccess:()=>_("success"),onFinish:()=>x.value=!1,preserveScroll:!0})};return(o,t)=>(d(),i("form",{onSubmit:C(P,["prevent"]),class:"flex flex-col h-full bg-white dark:bg-customBg-tableDark"},[e("div",N,[e("div",S,[e("div",z,[a.product.image_url?(d(),i("img",{key:0,src:a.product.image_url,loading:"lazy",decoding:"async",onerror:"this.style.display='none'",onload:"this.classList.remove('opacity-0')",class:"absolute inset-0 z-10 object-cover w-full h-full opacity-0"},null,8,A)):b("",!0),t[3]||(t[3]=e("div",{class:"absolute inset-0 z-0 w-full h-full flex items-center justify-center text-[10px] text-gray-400"}," NO IMG ",-1))]),e("div",H,[e("div",V,[e("span",L,s(a.product.code),1)]),e("div",U,[j(s(a.product.category?.name)+" ",1),a.product.product_type?(d(),i("span",$," | "+s(a.product.product_type?.name),1)):b("",!0)]),e("h2",E,s(a.product.name),1)])]),e("div",O,[e("div",T,[e("label",G," Harga Beli (HPP) | Rp "+s(a.product?.purchase_price),1),e("div",J,[t[4]||(t[4]=e("span",{class:"absolute left-0 top-1.5 text-sm font-bold text-yellow-600/50"},"Rp",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n(r).purchase_price=l),type:"number",placeholder:"0",class:"w-full p-0 text-xl font-black text-gray-800 placeholder-gray-300 bg-transparent border-none pl-7 dark:text-white focus:ring-0"},null,512),[[f,n(r).purchase_price]])]),n(r).errors.purchase_price?(d(),i("p",q,s(n(r).errors.purchase_price),1)):b("",!0)]),e("div",K,[e("label",Q," Harga Jual | Rp "+s(a.product?.selling_price),1),e("div",W,[t[5]||(t[5]=e("span",{class:"absolute left-0 top-1.5 text-sm font-bold text-lime-600/50"},"Rp",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>n(r).selling_price=l),type:"number",placeholder:"0",class:"w-full p-0 text-xl font-black text-gray-800 placeholder-gray-300 bg-transparent border-none pl-7 dark:text-white focus:ring-0"},null,512),[[f,n(r).selling_price]])]),n(r).errors.selling_price?(d(),i("p",X,s(n(r).errors.selling_price),1)):b("",!0)])]),e("div",null,[t[6]||(t[6]=e("label",{class:"text-[10px] text-gray-400 font-bold uppercase mb-2 block"},"Set Profit Cepat (%)",-1)),e("div",Y,[(d(),i(R,null,B([10,20,30,50,100],l=>e("button",{key:l,type:"button",onClick:ie=>I(l),class:"px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-600 text-xs font-bold text-gray-600 dark:text-gray-300 hover:bg-lime-50 hover:border-lime-200 hover:text-lime-600 transition whitespace-nowrap"}," +"+s(l)+"% ",9,Z)),64))])]),e("div",{class:g(["flex items-center justify-between p-4 transition-colors duration-300 border rounded-xl",p.value<0?"bg-red-50 border-red-100 dark:bg-red-900/20 dark:border-red-800":"bg-gray-50 border-gray-100 dark:bg-gray-700/50 dark:border-gray-600"])},[e("div",ee,[e("span",{class:g(["text-[10px] font-bold uppercase tracking-wider",p.value<0?"text-red-500":"text-gray-400"])},s(p.value<0?"Potensi Rugi":"Estimasi Profit")+" | Rp "+s(m.value),3),e("span",{class:g(["text-xl font-black",p.value<0?"text-red-600":"text-gray-800 dark:text-white"])},s(k(p.value)),3)]),e("div",te,[e("span",re,"Margin | "+s(w.value)+" % ",1),e("span",{class:g(["inline-block px-2 py-1 text-sm font-bold rounded",p.value<0?"bg-red-200 text-red-700":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300"])},s(v.value)+"% ",3)])],2)]),e("div",se,[e("button",{type:"button",onClick:t[2]||(t[2]=l=>o.$emit("close")),class:"w-1/3 px-4 py-3 text-sm font-bold text-gray-700 transition bg-gray-100 rounded-xl hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"}," Batal "),e("button",{type:"submit",disabled:n(r).processing,class:"flex justify-center w-2/3 px-4 py-3 text-sm font-bold text-white transition transform shadow-lg bg-lime-600 rounded-xl hover:bg-lime-700 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed"},[n(r).processing?(d(),i("span",ae,"Menyimpan...")):(d(),i("span",le,"Update Harga"))],8,oe)])],32))}},ge=M(ne,[["__scopeId","data-v-49bba62c"]]);export{ge as default};
