import{q as s,C as x,I as C,J as Z,v as Q,N as X,l as v,o,e as c,g as I,i as Y,w as M,f as a,d as i,m as $,L as _,n as w,k as E,t as L,F as S,H as V}from"./vendor-core-CJbEklrS.js";import{d as ee}from"./vendor-common-GpUWqhKr.js";import{u as te}from"./useActionLoading-FfnGJtHr.js";import{_ as re}from"./AuthenticatedLayout-DeaehwQg.js";import ae from"./modalFilter-D1zwqVY5.js";import O from"./pagination-BsAKZx8S.js";import{_ as oe}from"./Filter-BS3ljYye.js";import{_ as le}from"./DeleteConfirm-BS8jwaVF.js";import{_ as se}from"./ImageModal-B0umRIyZ.js";import{B as ne}from"./BottomSheet-BK4YJI0j.js";import ie from"./ProductCardList-C60TfSsf.js";import ue from"./ProductCardGrid-CRoGTXGo.js";import de from"./ProductKanbanBoard-Be_CzacV.js";import R from"./EmptyState-Df8SzZs5.js";import me from"./StockAdjustmentSheet-DJr1X2kL.js";import ve from"./PriceAdjustmentSheet-Di4tS3iV.js";import ce from"./ProductDetailSheet-BSpZ_Btd.js";import ge from"./MobileCardGrid-ypKSX_dS.js";import"./vendor-charts-Bw6UNgWf.js";import"./useSidebar-By4kjs-E.js";import"./BottomSheetFilter-DCuDmFac.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-D3g6WrLG.js";import"./PrimaryButton-Dbwz-4sj.js";import"./Modal-CSrVmq0b.js";import"./ProductKanbanCard-CrLq9g85.js";import"./InputRupiah-LTaplENR.js";const fe={class:"w-full pb-10"},pe={class:"flex gap-1 p-1 my-3 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},ke={class:"flex items-center gap-2 pl-2 border-l border-gray-300 dark:border-gray-700 shrink-0"},he={key:1,class:""},be={key:0,class:"grid grid-cols-2 gap-6 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},we={key:1,class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-2 lg:grid-cols-3"},ye={key:2},xe={key:2,class:"mt-8"},Qe={__name:"index",props:{products:Object,filters:Object,dropdowns:Object},setup(l){const u=l,{isActionLoading:f}=te(),d=s({title:"Detail Produk",data:{}}),m=s("grid"),p=s("detail"),F=s(!1),D=s(null),g=s(!1),k=s(u.filters.search||""),U=x(()=>u.filters.trashed===!0||u.filters.trashed==="true"),G=x(()=>{const r=Object.keys(u.filters),e=["search","page","per_page"];return r.filter(t=>!e.includes(t)).length}),P=s(!1),A=s(null),j=s(null),T=s(window.innerWidth<1024),N=()=>{T.value=window.innerWidth<1024},K={restock:{label:"ðŸš¨ Stok",class:"bg-red-500 animate-pulse",priority:1},margin_alert:{label:"âš ï¸ Margin",class:"bg-yellow-400",priority:2},dead_stock:{label:"ðŸ¢ Slow",class:"bg-gray-600",priority:3},trend:{label:"ðŸ”¥ Trending",class:"bg-purple-600 animate-pulse",priority:4},new:{label:"âœ¨ New",class:"bg-lime-500",priority:5},high_margin:{label:"ðŸ’° Cuan",class:"bg-emerald-600",priority:6},promo:{label:"% Promo",class:"bg-blue-500",priority:7}},y=x(()=>u.products.data.map(r=>{const e=(r.insights||[]).map(t=>({...K[t.type],type:t.type})).filter(t=>t.label).sort((t,n)=>t.priority-n.priority).slice(0,2);return{...r,active_badges:e}})),h=(r,e=null)=>{p.value=r,e!=null&&(d.value={},d.value.data=e),r=="detail"?d.value.title="Detail Produk":r=="stock"?d.value.title="Penyesuaian Stock":r=="price"&&(d.value.title="Penyesuaian Harga"),g.value=!0},B=r=>{A.value=r.path,j.value=r.name,P.value=!0},b=(r,e=!1)=>{let t={};e?t={title:"Hapus Permanen Produk",message:"Produk ini akan dihapus selamanya. Anda yakin menghapus",itemName:r.name,url:route("products.destroy",{id:r.slug,permanen:!0})}:t={title:"Pindahkan ke Sampah",message:"Anda yakin ingin memindahkan produk",itemName:r.name,url:route("products.destroy",{id:r.slug})},D.value.open(t)},H=r=>{f.value=!0,C.put(route("products.restoreProduct",{id:r.slug}),{},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error(e)},onFinish:()=>{f.value=!1}})},W=ee.throttle(()=>{const r={...u.filters};r.search=k.value,(!r.search||k.value=="")&&delete r.search,C.get(route("products.index"),r,{preserveState:!0,replace:!0})},300);Z(k,W);const q=x(()=>u.filters),z=r=>{const e={...u.filters};e.sort=r,console.log(r),r==="default"&&delete e.sort,f.value=!0,C.get(route("products.index"),e,{preserveState:!0,replace:!0,onFinish:()=>{f.value=!1}})},J=()=>{f.value=!0,C.get(route("products.index"),{per_page:u.filters.per_page||10},{preserveState:!0,replace:!0,onFinish:()=>{f.value=!1}})};return Q(()=>window.addEventListener("resize",N)),X(()=>window.removeEventListener("resize",N)),(r,e)=>(o(),v(S,null,[c(se,{show:P.value,imageUrl:A.value,productName:j.value,onClose:e[0]||(e[0]=t=>P.value=!1)},null,8,["show","imageUrl","productName"]),c(le,{ref_key:"showConfirmModal",ref:D,onSuccess:e[1]||(e[1]=()=>{})},null,512),c(I(Y),{title:"Data Barang"}),c(re,{headerTitle:"Data Barang"},{default:M(()=>[a("div",fe,[c(I(_),{data:"dropdowns"},{fallback:M(()=>[...e[17]||(e[17]=[a("div",{class:""},null,-1)])]),default:M(()=>[c(ae,{show:F.value,onClose:e[2]||(e[2]=t=>F.value=!1),filters:l.filters,dropdowns:l.dropdowns},null,8,["show","filters","dropdowns"])]),_:1}),c(oe,{filters:l.filters,modelValue:k.value,"onUpdate:modelValue":e[3]||(e[3]=t=>k.value=t),onShowFilter:e[4]||(e[4]=t=>F.value=!0),filterCount:G.value,actions:[{route:r.route("products.create"),buttonText:"Tambah Produk"}]},null,8,["filters","modelValue","filterCount","actions"]),a("div",pe,[a("button",{onClick:e[5]||(e[5]=t=>m.value="grid"),class:w([m.value==="grid"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Grid"},[...e[18]||(e[18]=[a("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),a("button",{onClick:e[6]||(e[6]=t=>m.value="list"),class:w([m.value==="list"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Daftar"},[...e[19]||(e[19]=[a("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2),a("button",{onClick:e[7]||(e[7]=t=>m.value="kanban"),class:w([m.value==="kanban"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Analisa DSS"},[...e[20]||(e[20]=[a("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1)])],2),a("div",ke,[a("button",{onClick:e[8]||(e[8]=t=>z(l.filters.sort==="cheapest"?"default":"cheapest")),class:w([l.filters.sort==="cheapest"?"bg-orange-100 text-orange-700 border-orange-200":"bg-white text-gray-400 border-gray-200","p-1.5 border rounded-lg transition-all flex items-center gap-2 font-medium text-sm"]),title:"Termurah"},[e[21]||(e[21]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M12 20V10"}),a("path",{d:"M18 20V4"}),a("path",{d:"M6 20v-4"})],-1)),E(" "+L(l.filters.sort==="cheapest"?"Termurah":""),1)],2),a("button",{onClick:e[9]||(e[9]=t=>z(l.filters.sort==="bestseller"?"default":"bestseller")),class:w([l.filters.sort==="bestseller"?"bg-purple-100 text-purple-700 border-purple-200":"bg-white text-gray-400 border-gray-200","p-1.5 border rounded-lg transition-all flex gap-2 items-center font-medium text-sm"]),title:"Terlaris"},[e[22]||(e[22]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),a("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),a("path",{d:"M4 22h16"}),a("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),a("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),a("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})],-1)),E(" "+L(l.filters.sort==="bestseller"?"Terlaris":""),1)],2)])]),l.products.data.length>10?(o(),i(O,{key:0,metadata:l.products,filters:l.filters,class:"mb-3"},null,8,["metadata","filters"])):$("",!0),l.products.data.length>0?(o(),v("div",he,[m.value==="grid"?(o(),v("div",be,[T.value?(o(!0),v(S,{key:0},V(y.value,t=>(o(),i(ge,{key:"mobile"+t.id,data:t,onClick:n=>h("detail",t),onImageClick:B},null,8,["data","onClick"]))),128)):(o(!0),v(S,{key:1},V(y.value,t=>(o(),i(ue,{key:"desktop"+t.id,data:t,onDelete:n=>b(t),onForceDelete:n=>b(t,!0),onRestore:n=>H(t),onImageClick:B,onAdjustStock:n=>h("stock",t),onAdjustPrice:n=>h("price",t)},null,8,["data","onDelete","onForceDelete","onRestore","onAdjustStock","onAdjustPrice"]))),128))])):m.value==="list"?(o(),v("div",we,[(o(!0),v(S,null,V(y.value,t=>(o(),i(ie,{"is-trash-view":U.value,key:t.id,data:t,onDelete:n=>b(t,!1),onForceDelete:n=>b(t,!0),onRestore:n=>H(t),onImageClick:B},null,8,["is-trash-view","data","onDelete","onForceDelete","onRestore"]))),128))])):m.value==="kanban"?(o(),v("div",ye,[c(de,{products:y.value},null,8,["products"])])):$("",!0)])):(o(),v("div",xe,[q.value?(o(),i(R,{key:0,title:"Tidak ditemukan",message:"Maaf, tidak ada produk yang cocok dengan pencarian atau filter Anda. Coba atur ulang.",icon:"search","action-label":"Reset Filter","action-type":"button",onAction:J})):(o(),i(R,{key:1,title:"Belum ada Produk",message:"Toko Anda masih kosong. Mulai tambahkan produk pertama Anda sekarang!",icon:"box","action-label":"Tambah Produk Baru","action-url":r.route("products.create"),"action-type":"link"},null,8,["action-url"]))])),l.products.total>8?(o(),i(O,{key:3,metadata:l.products,filters:l.filters},null,8,["metadata","filters"])):$("",!0)])]),_:1}),c(ne,{show:g.value,onClose:e[16]||(e[16]=t=>g.value=!1),title:d.value.title},{default:M(()=>[p.value=="detail"?(o(),i(ce,{key:0,data:d.value.data,onAdjustStock:e[10]||(e[10]=t=>h("stock")),onAdjustPrice:e[11]||(e[11]=t=>h("price")),onDelete:b},null,8,["data"])):p.value=="stock"?(o(),i(me,{key:1,product:d.value.data,onClose:e[12]||(e[12]=t=>g.value=!1),onSuccess:e[13]||(e[13]=t=>{g.value=!1,p.value="detail"})},null,8,["product"])):p.value=="price"?(o(),i(ve,{key:2,product:d.value.data,onClose:e[14]||(e[14]=t=>g.value=!1),onSuccess:e[15]||(e[15]=t=>{g.value=!1,p.value="detail"})},null,8,["product"])):$("",!0)]),_:1},8,["show","title"])],64))}};export{Qe as default};
