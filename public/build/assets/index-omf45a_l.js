import{_ as z}from"./AuthenticatedLayout-DnsbiX89.js";import{E as d,p,D as w,H,l as n,o,e as u,g as I,i as R,w as E,f as s,d as m,m as y,n as b,F as M,C as V}from"./vendor-core-D38XQ_w0.js";import O from"./modalFilter-BMa3WYVT.js";import U from"./ProductCardList-B_vp3v90.js";import K from"./ProductCardGrid-ByNOmIW_.js";import L from"./ProductKanbanBoard-A5W9XOXW.js";import B from"./pagination-Bwgk4im8.js";import{_ as G}from"./Filter-DrrKjkQi.js";import{d as q}from"./vendor-common-BBegFRNv.js";import{u as J}from"./useActionLoading-s7e1gqkt.js";import{_ as Q}from"./DeleteConfirm-DBShr97H.js";import{_ as W}from"./ImageModal-Cnbh4QPH.js";import P from"./EmptyState-BSQk8Uj6.js";import"./useSidebar-BzR847ej.js";import"./vendor-charts-Bw6UNgWf.js";import"./Modal-DrnPoAKc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProductKanbanCard-BOpkeHeu.js";import"./TextInput-lw9tkZ28.js";import"./PrimaryButton-BaxuxEfe.js";import"./BottomSheet-CCD1ZQZl.js";const X={class:"w-full"},Y={class:"flex gap-1 p-1 my-3 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"},Z={key:1,class:""},_={key:0,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},ee={key:1,class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-1 lg:grid-cols-2"},te={key:2},ae={key:2,class:"mt-8"},Ce={__name:"index",props:{products:Object,filters:Object,dropdowns:Object},setup(r){const i=r,l=d("grid"),f=d(i.filters.search||""),h=d(!1),{isActionLoading:g}=J(),x=d(null),k=d(!1),C=d(null),$=d(null),S=p(()=>i.filters.trashed===!0||i.filters.trashed==="true"),A=p(()=>{const a=Object.keys(i.filters),e=["search","page","per_page"];return a.filter(t=>!e.includes(t)).length}),F=a=>{C.value=a.path,$.value=a.name,k.value=!0},v=(a,e=!1)=>{let t={};e?t={title:"Hapus Permanen Produk",message:"Produk ini akan dihapus selamanya. Anda yakin menghapus",itemName:a.name,url:route("products.destroy",{id:a.id,permanen:!0})}:t={title:"Pindahkan ke Sampah",message:"Anda yakin ingin memindahkan produk",itemName:a.name,url:route("products.destroy",{id:a.id})},x.value.open(t)},D=a=>{g.value=!0,w.put(route("products.restoreProduct",{id:a.id}),{},{preserveScroll:!0,onSuccess:()=>{},onError:e=>{console.error(e)},onFinish:()=>{g.value=!1}})},N=q.throttle(()=>{const a={...i.filters};a.search=f.value,a.search||delete a.search,w.get(route("products.index"),a,{preserveState:!0,replace:!0})},300);H(f,N);const j=p(()=>i.filters),T=()=>{g.value=!0,w.get(route("products.index"),{per_page:i.filters.per_page||10},{preserveState:!0,replace:!0,onFinish:()=>{g.value=!1}})};return(a,e)=>(o(),n(M,null,[u(W,{show:k.value,imageUrl:C.value,productName:$.value,onClose:e[0]||(e[0]=t=>k.value=!1)},null,8,["show","imageUrl","productName"]),u(Q,{ref_key:"showConfirmModal",ref:x,onSuccess:e[1]||(e[1]=()=>{})},null,512),u(I(R),{title:"Data Barang"}),u(z,{headerTitle:"Data Barang"},{default:E(()=>[s("div",X,[u(O,{show:h.value,onClose:e[2]||(e[2]=t=>h.value=!1),filters:r.filters,dropdowns:r.dropdowns},null,8,["show","filters","dropdowns"]),u(G,{filters:r.filters,modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),onShowFilter:e[4]||(e[4]=t=>h.value=!0),filterCount:A.value,actions:[{route:a.route("products.create"),buttonText:"Tambah Produk"}]},null,8,["filters","modelValue","filterCount","actions"]),s("div",Y,[s("button",{onClick:e[5]||(e[5]=t=>l.value="grid"),class:b([l.value==="grid"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Grid"},[...e[8]||(e[8]=[s("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),s("button",{onClick:e[6]||(e[6]=t=>l.value="list"),class:b([l.value==="list"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Daftar"},[...e[9]||(e[9]=[s("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2),s("button",{onClick:e[7]||(e[7]=t=>l.value="kanban"),class:b([l.value==="kanban"?"bg-lime-500 text-white":"text-gray-400 hover:bg-gray-100 hover:text-lime-500","p-2 transition rounded"]),title:"Mode Analisa DSS"},[...e[10]||(e[10]=[s("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1)])],2)]),r.products.data.length>10?(o(),m(B,{key:0,metadata:r.products,filters:r.filters},null,8,["metadata","filters"])):y("",!0),r.products.data.length>0?(o(),n("div",Z,[l.value==="grid"?(o(),n("div",_,[(o(!0),n(M,null,V(r.products.data,t=>(o(),m(K,{key:t.id,data:t,onDelete:c=>v(t,!1),onForceDelete:c=>v(t,!0),onRestore:c=>D(t),onImageClick:F},null,8,["data","onDelete","onForceDelete","onRestore"]))),128))])):l.value==="list"?(o(),n("div",ee,[(o(!0),n(M,null,V(r.products.data,t=>(o(),m(U,{"is-trash-view":S.value,key:t.id,data:t,onDelete:c=>v(t,!1),onForceDelete:c=>v(t,!0),onRestore:c=>D(t),onImageClick:F},null,8,["is-trash-view","data","onDelete","onForceDelete","onRestore"]))),128))])):l.value==="kanban"?(o(),n("div",te,[u(L,{products:r.products.data},null,8,["products"])])):y("",!0)])):(o(),n("div",ae,[j.value?(o(),m(P,{key:0,title:"Tidak ditemukan",message:"Maaf, tidak ada produk yang cocok dengan pencarian atau filter Anda. Coba atur ulang.",icon:"search","action-label":"Reset Filter","action-type":"button",onAction:T})):(o(),m(P,{key:1,title:"Belum ada Produk",message:"Toko Anda masih kosong. Mulai tambahkan produk pertama Anda sekarang!",icon:"box","action-label":"Tambah Produk Baru","action-url":a.route("products.create"),"action-type":"link"},null,8,["action-url"]))])),r.products.data.length>8?(o(),m(B,{key:3,metadata:r.products,filters:r.filters},null,8,["metadata","filters"])):y("",!0)])]),_:1})],64))}};export{Ce as default};
