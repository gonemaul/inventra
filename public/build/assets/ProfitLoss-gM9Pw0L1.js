import{u as v,j as x,g as l,o as g,a as c,d as n,h as _,w,b as t,k as p,A as u,t as s,n as j,F as m,q as L}from"./app-Bgy6qXfz.js";import{_ as B}from"./AuthenticatedLayout-2TC9EZAp.js";import{m as P}from"./vue3-apexcharts-BXVNx6u-.js";import"./useActionLoading-C6Q8Ko1z.js";const F={class:"max-w-5xl mx-auto space-y-6"},D={class:"flex justify-end gap-2 p-3 bg-white shadow-sm dark:bg-gray-800 rounded-xl"},O={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},I={class:"relative overflow-hidden bg-white border border-gray-200 shadow-xl md:col-span-2 dark:bg-gray-800 rounded-2xl dark:border-gray-700"},N={class:"p-8"},R={class:"mb-6"},S={class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700"},T={class:"font-bold text-gray-900 dark:text-white"},V={class:"mb-6"},z={class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700"},C={class:"font-bold text-red-500"},H={class:"flex items-center justify-between p-4 mb-6 rounded-lg bg-blue-50 dark:bg-blue-900/20"},K={class:"text-xs font-bold text-blue-600"},M={class:"text-xl font-black text-blue-700 dark:text-blue-400"},U={class:"mb-6"},q={class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700"},A={class:"font-bold text-red-500"},E={class:"relative z-10 flex items-center justify-between"},$={class:"mt-1 text-xs opacity-75"},G={class:"text-3xl font-black tracking-tight"},J={class:"space-y-6"},Q={class:"p-6 bg-white border border-gray-200 shadow-sm dark:bg-gray-800 rounded-2xl dark:border-gray-700"},W={key:0},X={key:1,class:"py-10 text-xs text-center text-gray-400"},Y={class:"mt-4 space-y-2"},Z={class:"text-gray-600 dark:text-gray-400"},tt={class:"font-bold"},ot={__name:"ProfitLoss",props:{filters:Object,data:Object},setup(a){const b=a,i=v({start_date:b.filters.start_date,end_date:b.filters.end_date}),y=()=>{i.get(route("reports.profit-loss"),{preserveScroll:!0})},r=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o),f=x(()=>({chart:{type:"donut"},labels:b.data.expense_details.map(o=>o.category||"Lain-lain"),colors:["#f43f5e","#f59e0b","#8b5cf6","#3b82f6"],dataLabels:{enabled:!1},legend:{position:"bottom"}})),k=x(()=>b.data.expense_details.map(o=>parseFloat(o.total)));return(o,e)=>(g(),l(m,null,[c(n(_),{title:"Laporan Laba Rugi"}),c(B,{headerTitle:"Laba Rugi (Profit & Loss)"},{default:w(()=>[t("div",F,[t("div",D,[p(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=d=>n(i).start_date=d),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[u,n(i).start_date]]),p(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=d=>n(i).end_date=d),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[u,n(i).end_date]]),t("button",{onClick:y,class:"px-4 text-sm font-bold text-white bg-purple-600 rounded-lg hover:bg-purple-700"}," Hitung ")]),t("div",O,[t("div",I,[e[11]||(e[11]=t("div",{class:"h-2 bg-gradient-to-r from-purple-500 to-indigo-600"},null,-1)),t("div",N,[e[10]||(e[10]=t("h2",{class:"mb-8 text-xl font-black tracking-widest text-center text-gray-800 uppercase dark:text-white"}," Income Statement ",-1)),t("div",R,[e[3]||(e[3]=t("p",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Pendapatan ",-1)),t("div",S,[e[2]||(e[2]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Penjualan Kotor (Omzet)",-1)),t("span",T,s(r(a.data.revenue)),1)])]),t("div",V,[e[5]||(e[5]=t("p",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Harga Pokok ",-1)),t("div",z,[e[4]||(e[4]=t("span",{class:"text-gray-700 dark:text-gray-300"},"HPP Barang Terjual",-1)),t("span",C,"("+s(r(a.data.cogs))+")",1)])]),t("div",H,[t("div",null,[e[6]||(e[6]=t("h4",{class:"text-sm font-black text-gray-800 uppercase dark:text-white"}," Laba Kotor ",-1)),t("span",K,"Margin: "+s(a.data.gross_margin)+"%",1)]),t("span",M,s(r(a.data.gross_profit)),1)]),t("div",U,[e[8]||(e[8]=t("p",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Biaya Operasional ",-1)),t("div",q,[e[7]||(e[7]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Total Pengeluaran",-1)),t("span",A,"("+s(r(a.data.expenses))+")",1)])]),t("div",{class:j(["relative p-6 overflow-hidden text-white shadow-lg rounded-xl",a.data.net_profit>=0?"bg-gradient-to-br from-emerald-500 to-teal-600":"bg-gradient-to-br from-red-500 to-pink-600"])},[t("div",E,[t("div",null,[e[9]||(e[9]=t("h3",{class:"text-sm font-bold tracking-widest uppercase opacity-90"}," Laba Bersih ",-1)),t("p",$," Net Margin: "+s(a.data.net_margin)+"% ",1)]),t("div",G,s(r(a.data.net_profit)),1)])],2)])]),t("div",J,[t("div",Q,[e[12]||(e[12]=t("h3",{class:"mb-4 text-sm font-bold text-gray-800 dark:text-white"}," Komposisi Biaya ",-1)),a.data.expense_details.length>0?(g(),l("div",W,[c(n(P),{type:"donut",height:"250",options:f.value,series:k.value},null,8,["options","series"])])):(g(),l("div",X," Belum ada data pengeluaran. ")),t("div",Y,[(g(!0),l(m,null,L(a.data.expense_details,(d,h)=>(g(),l("div",{key:h,class:"flex justify-between pb-1 text-xs border-b border-gray-100 dark:border-gray-700"},[t("span",Z,s(d.category||"Lainnya"),1),t("span",tt,s(r(d.total)),1)]))),128))])])])])])]),_:1})],64))}};export{ot as default};
