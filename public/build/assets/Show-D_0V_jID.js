import{m as B,j as S,g as l,o as d,a as u,d as b,h as F,w as _,b as t,l as P,f as a,t as s,F as m,x as y}from"./app-DwOZ8O7W.js";import{_ as L}from"./DeleteConfirm-DDdY3a12.js";import{_ as H}from"./AuthenticatedLayout-DgtTuRzB.js";import"./Modal-DnFGslV2.js";import"./useActionLoading-D41ljnOE.js";import"./useSidebar-BYtjcE5l.js";const M={class:"w-full min-h-screen px-4 py-8 print:bg-white print:p-0 sm:px-6 lg:px-8 bg-customBg-light text-customText-light dark:bg-customBg-dark dark:text-customText-dark"},T={class:"flex flex-col items-start print:hidden justify-between gap-4 mx-auto mb-8 max-w-[87rem] md:flex-row md:items-center"},I={class:"flex items-center gap-2 mb-1 text-sm text-gray-500 dark:text-gray-300"},N={class:"flex items-center gap-2 text-2xl font-bold text-gray-800 dark:text-gray-300"},V={class:"px-2 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-200 rounded dark:text-gray-800"},R={class:"flex flex-col gap-2"},q={class:"flex items-center gap-3 p-2 pr-4 bg-white border border-gray-100 rounded-full shadow-sm"},z={class:"flex items-center justify-center w-8 h-8 text-xs font-bold text-indigo-600 bg-indigo-100 rounded-full"},O={class:"text-sm"},$={class:"font-medium text-gray-800 leading-none mt-0.5"},Q={class:"hidden pb-4 mb-6 border-b border-gray-300 print:block"},U={class:"flex justify-between mt-2 text-sm text-gray-600"},A={class:"grid grid-cols-1 gap-6 mx-auto max-w-[87rem] lg:grid-cols-3 print:block"},E={class:"space-y-6 lg:col-span-2"},J={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},K={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},Y={class:"text-2xl font-black text-indigo-600"},G={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},W={class:"flex items-center justify-between mb-2"},X={class:"bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-full"},Z={class:"text-2xl font-black text-green-600"},tt={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},et={class:"flex items-baseline gap-1"},st={class:"text-2xl font-black text-gray-800"},ot={class:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl"},rt={class:"overflow-x-auto"},nt={class:"w-full text-sm text-left"},at={class:"divide-y divide-gray-100"},it={class:"px-6 py-3 font-medium text-gray-900"},lt={class:"font-mono text-xs font-normal text-gray-400"},dt={class:"px-4 py-3 font-mono text-right text-gray-500"},ct={class:"px-4 py-3 font-bold text-center text-gray-400"},gt={class:"text-xs font-normal text-gray-400"},xt={class:"px-4 py-3 font-mono font-bold text-right text-gray-800"},ut={class:"px-6 py-3 font-mono font-bold text-right text-green-600"},mt={class:"space-y-6 print:space-y-3"},ft={class:"p-5 bg-white border border-gray-200 shadow-sm print:mt-3 rounded-xl"},pt={class:"space-y-4"},ht={class:"flex items-center gap-3 overflow-hidden"},bt={class:"flex items-center justify-center flex-shrink-0 w-6 h-6 text-xs font-bold text-orange-600 bg-orange-100 rounded"},yt=["title"],vt={class:"flex-shrink-0 text-sm font-bold text-gray-900"},wt={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},_t={class:"space-y-4"},kt={class:"flex items-center gap-3 overflow-hidden"},jt={class:"flex items-center justify-center flex-shrink-0 w-6 h-6 text-xs font-bold text-green-600 bg-green-100 rounded"},Dt={class:"text-sm font-medium text-gray-700 truncate"},Ct={class:"flex-shrink-0 font-mono text-sm font-bold text-green-600"},Bt={class:"p-5 bg-white border border-gray-200 shadow-sm rounded-xl"},St={class:"bg-gray-100 rounded-lg p-3 text-sm text-gray-600 italic border border-gray-200 min-h-[60px]"},Ft={class:"pt-4 mt-4 text-xs text-gray-400 border-t border-gray-200"},Pt={class:"flex justify-between"},Lt={class:"hidden print:block"},Rt={__name:"Show",props:{sale:Object},setup(n){const c=n,k=()=>window.print(),v=B(null),g=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),w=r=>new Date(r).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),x=r=>r.product_snapshot?.name||r.product?.name||"Unknown",j=r=>r.product_snapshot?.code||r.product?.code||"-",D=new Date().toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),C=()=>{const r={title:"Hapus rekap penjualan?",message:"Yakin ingin menghapus rekap penjualan ini? Stok produk akan dikembalikan otomatis.",itemName:c.sale.reference_no,url:route("sales.destroy",c.sale.id)};v.value.open(r)},f=S(()=>{const r=c.sale.items,e=[...r].sort((p,h)=>parseFloat(h.quantity)-parseFloat(p.quantity)).slice(0,5),o=[...r].sort((p,h)=>parseFloat(h.profit)-parseFloat(p.profit)).slice(0,5),i=c.sale.total_revenue>0?(c.sale.total_profit/c.sale.total_revenue*100).toFixed(1):0;return{topSelling:e,topProfit:o,margin:i}});return(r,e)=>(d(),l(m,null,[u(b(F),{title:`Laporan - ${n.sale.reference_no}`},null,8,["title"]),u(L,{ref_key:"showConfirmDelete",ref:v,onSuccess:e[0]||(e[0]=()=>{})},null,512),u(H,{showSidebar:!1,showHeader:!1},{default:_(()=>[t("div",M,[t("div",T,[t("div",null,[t("div",I,[u(b(P),{href:r.route("sales.index"),class:"flex items-center transition hover:text-indigo-600"},{default:_(()=>[...e[1]||(e[1]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),a(" Riwayat ",-1)])]),_:1},8,["href"]),e[2]||(e[2]=t("span",null,"/",-1)),e[3]||(e[3]=t("span",null,"Detail Transaksi",-1))]),t("h1",N,[a(s(w(n.sale.transaction_date))+" ",1),t("span",V,s(n.sale.reference_no),1)])]),t("div",R,[t("div",q,[t("div",z,s(n.sale.user.name.substring(0,2).toUpperCase()),1),t("div",O,[e[4]||(e[4]=t("div",{class:"text-gray-500 text-[10px] uppercase font-bold leading-none"}," Diinput Oleh ",-1)),t("div",$,s(n.sale.user.name),1)])]),t("div",{class:"flex items-center gap-3"},[t("button",{onClick:k,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 transition bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),a(" Cetak Laporan ",-1)])]),t("button",{onClick:C,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-700 transition border border-red-200 rounded-lg shadow-sm bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),a(" Hapus ",-1)])])])])]),t("div",Q,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold text-gray-900"}," Laporan Penjualan Harian ",-1)),t("div",U,[t("div",null,"Tanggal: "+s(w(n.sale.transaction_date)),1),t("div",null,"No. Ref: "+s(n.sale.reference_no),1)])]),t("div",A,[t("div",E,[t("div",J,[t("div",K,[e[8]||(e[8]=t("div",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Total Omset ",-1)),t("div",Y,s(g(n.sale.total_revenue)),1)]),t("div",G,[t("div",W,[e[9]||(e[9]=t("div",{class:"text-xs font-bold tracking-wider text-gray-400 uppercase"}," Laba Bersih ",-1)),t("span",X,s(f.value.margin)+"% Margin ",1)]),t("div",Z," + "+s(g(n.sale.total_profit)),1)]),t("div",tt,[e[11]||(e[11]=t("div",{class:"mb-2 text-xs font-bold tracking-wider text-gray-400 uppercase"}," Volume Penjualan ",-1)),t("div",et,[t("span",st,s(n.sale.items.length),1),e[10]||(e[10]=t("span",{class:"text-sm font-medium text-gray-500"},"Jenis Barang",-1))])])]),t("div",ot,[e[13]||(e[13]=t("div",{class:"flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50/50"},[t("h3",{class:"font-bold text-gray-700"}," Rincian Barang Keluar ")],-1)),t("div",rt,[t("table",nt,[e[12]||(e[12]=t("thead",{class:"text-xs text-gray-500 uppercase bg-gray-200 border-b border-gray-100"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Produk"),t("th",{class:"px-4 py-3 text-right"}," Harga "),t("th",{class:"px-4 py-3 text-center"}," Qty "),t("th",{class:"px-4 py-3 text-right"}," Subtotal "),t("th",{class:"px-6 py-3 text-right text-green-600"}," Laba ")])],-1)),t("tbody",at,[(d(!0),l(m,null,y(n.sale.items,o=>(d(),l("tr",{key:o.id,class:"hover:bg-gray-50/50"},[t("td",it,[a(s(x(o))+" ",1),t("div",lt,s(j(o)),1)]),t("td",dt,s(g(o.selling_price)),1),t("td",ct,[a(s(parseFloat(o.quantity))+" ",1),t("span",gt,s(o.product_snapshot?.unit),1)]),t("td",xt,s(g(o.subtotal)),1),t("td",ut,s(g(o.profit)),1)]))),128))])])])])]),t("div",mt,[t("div",ft,[e[14]||(e[14]=t("h3",{class:"flex items-center gap-2 mb-4 text-sm font-bold tracking-wide text-gray-700 uppercase"},[t("svg",{class:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),a(" Produk Terlaris (Qty) ")],-1)),t("div",pt,[(d(!0),l(m,null,y(f.value.topSelling,(o,i)=>(d(),l("div",{key:i,class:"flex items-center justify-between"},[t("div",ht,[t("div",bt,s(i+1),1),t("div",{class:"text-sm font-medium text-gray-700 truncate",title:x(o)},s(x(o)),9,yt)]),t("div",vt,s(parseFloat(o.quantity))+" "+s(o.product_snapshot?.unit),1)]))),128))])]),t("div",wt,[e[15]||(e[15]=t("h3",{class:"flex items-center gap-2 mb-4 text-sm font-bold tracking-wide text-gray-700 uppercase"},[t("svg",{class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),a(" Penyumbang Profit ")],-1)),t("div",_t,[(d(!0),l(m,null,y(f.value.topProfit,(o,i)=>(d(),l("div",{key:i,class:"flex items-center justify-between"},[t("div",kt,[t("div",jt,s(i+1),1),t("div",Dt,s(x(o)),1)]),t("div",Ct,s(g(o.profit)),1)]))),128))])]),t("div",Bt,[e[17]||(e[17]=t("h3",{class:"mb-2 text-xs font-bold tracking-wide text-gray-700 uppercase"}," Catatan Shift ",-1)),t("div",St,' "'+s(n.sale.notes||"Tidak ada catatan khusus.")+'" ',1),t("div",Ft,[e[16]||(e[16]=t("h4",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-3"}," Informasi Dokumen ",-1)),t("div",Pt,[t("div",null," Dibuat: "+s(new Date(n.sale.created_at).toLocaleString("id-ID")),1),t("div",Lt," Dicetak: "+s(b(D)),1)])])])])])])]),_:1})],64))}};export{Rt as default};
