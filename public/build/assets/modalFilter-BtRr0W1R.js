import{u as F,c as S,o as n,w as D,b as t,k as d,d as a,g,F as y,x as f,t as u,z as k,A as x,q as _}from"./app-DwOZ8O7W.js";import{_ as M}from"./Modal-DnFGslV2.js";import{u as U}from"./useActionLoading-D41ljnOE.js";const V={class:"w-full p-4 bg-white shadow rounded-xl dark:bg-gray-800"},A={class:"mb-4"},I=["value"],B={class:"mb-4"},C=["value"],j={class:"mb-4"},T={class:"flex gap-2"},L={class:"mb-4"},N={class:"flex gap-2"},O={class:"flex flex-col w-full gap-2"},R={class:"text-xs text-gray-500"},$={class:"flex flex-col w-full gap-2"},q={class:"text-xs text-gray-500"},z={class:"flex justify-end gap-2"},E=["disabled"],H={__name:"modalFilter",props:{show:{type:Boolean,default:!1},filters:Object,dropdowns:Object},emits:["close"],setup(m,{emit:w}){const l=m,b=w,s=F({status:l.filters.status||"",supplier_id:l.filters.supplier_id||"",min_date:l.filters.min_date||"",max_date:l.filters.max_date||"",min_total:l.filters.min_total||"",max_total:l.filters.max_total||""}),{isActionLoading:p}=U();function c(i){return Object.entries(i).reduce((e,[r,o])=>(typeof o=="boolean"&&o===!1||o!=null&&o!==""&&(Array.isArray(o)&&o.length===0||(e[r]=o)),e),{})}function h(){const i=s.data(),r={...{search:l.filters.search||""},...i},o=c(r);p.value=!0,_.get(route("purchases.index"),o,{preserveState:!0,replace:!0,only:["purchases","filters "],onFinish:()=>{p.value=!1,b("close")}})}function v(){const i=c({search:l.filters.search||""});p.value=!0,_.get(route("purchases.index"),i,{preserveState:!0,replace:!0,onFinish:()=>{p.value=!1,b("close"),s.reset("status","supplier_id","max_date","min_date","min_total","max_total")}})}return(i,e)=>(n(),S(M,{show:m.show,onClose:e[6]||(e[6]=r=>i.$emit("close")),maxWidth:"lg"},{default:D(()=>[t("div",V,[e[13]||(e[13]=t("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white"}," Filter Pembelian ",-1)),t("div",A,[e[8]||(e[8]=t("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>a(s).status=r),class:"w-full px-3 py-2 text-sm text-gray-800 border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[e[7]||(e[7]=t("option",{value:""},"Semua Status",-1)),(n(!0),g(y,null,f(m.dropdowns.purchaseStatuses,r=>(n(),g("option",{key:r,value:r},u(r.charAt(0).toUpperCase()+r.slice(1)),9,I))),128))],512),[[k,a(s).status]])]),t("div",B,[e[10]||(e[10]=t("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300"},"Supplier",-1)),d(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>a(s).supplier_id=r),class:"w-full px-3 py-2 text-sm text-gray-800 border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[e[9]||(e[9]=t("option",{value:""},"Semua Supplier",-1)),(n(!0),g(y,null,f(m.dropdowns.suppliers,r=>(n(),g("option",{key:r.id,value:r.id},u(r.name),9,C))),128))],512),[[k,a(s).supplier_id]])]),t("div",j,[e[11]||(e[11]=t("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal",-1)),t("div",T,[d(t("input",{type:"date",placeholder:"Min",class:"w-1/2 px-3 py-2 text-sm border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":e[2]||(e[2]=r=>a(s).min_date=r)},null,512),[[x,a(s).min_date]]),d(t("input",{type:"date",placeholder:"Max",class:"w-1/2 px-3 py-2 text-sm border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":e[3]||(e[3]=r=>a(s).max_date=r)},null,512),[[x,a(s).max_date]])])]),t("div",L,[e[12]||(e[12]=t("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-300"},"Total",-1)),t("div",N,[t("div",O,[d(t("input",{type:"number",placeholder:"Min",class:"px-3 py-2 text-sm border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":e[4]||(e[4]=r=>a(s).min_total=r)},null,512),[[x,a(s).min_total,void 0,{number:!0}]]),t("span",R,u(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a(s).min_total)||0),1)]),t("div",$,[d(t("input",{type:"number",placeholder:"Max",class:"px-3 py-2 text-sm border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":e[5]||(e[5]=r=>a(s).max_total=r)},null,512),[[x,a(s).max_total,void 0,{number:!0}]]),t("span",q,u(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a(s).max_total)||0),1)])])]),t("div",z,[t("button",{class:"px-4 py-2 text-sm font-medium text-white rounded-lg bg-lime-500 hover:bg-lime-600 disabled:opacity-50",onClick:h,disabled:a(s).processing},u(a(s).processing?"Menerapkan...":"Terapkan"),9,E),t("button",{class:"px-4 py-2 text-sm font-medium bg-gray-200 rounded-lg hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-gray-200",onClick:v,type:"button"}," Reset ")])])]),_:1},8,["show"]))}};export{H as default};
