import{u as h,C as z,d as B,o as a,w as M,f as e,y as i,g as l,l as n,F as x,H as g,t as u,K as p,z as c,n as _,m as T,I as w}from"./vendor-core-CJbEklrS.js";import{u as D}from"./useActionLoading-FfnGJtHr.js";import{B as A}from"./BottomSheetFilter-DCuDmFac.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";const j={class:"flex-1 space-y-8 o custom-scrollbar"},N={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-x-6 gap-y-4"},$=["value"],I=["disabled"],P={value:""},R=["value","selected"],J=["value"],K=["value"],O={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},L=["value"],Z=["value"],E={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},q={class:"col-span-2"},G={class:"flex gap-2"},Q={class:"col-span-2 md:col-span-1 mx-auto"},W={class:"flex gap-2"},X={class:""},Y={class:"text-[10px] text-gray-400 mt-1 text-left"},tt={class:"text-[10px] text-gray-400 mt-1 text-left"},et={class:"col-span-2 md:col-span-1 mx-auto"},st={class:"flex gap-2"},rt={class:""},lt={class:"text-[10px] text-gray-400 mt-1 text-left"},ot={class:""},at={class:"text-[10px] text-gray-400 mt-1 text-left"},it={class:"p-4 border border-gray-100 bg-gray-50 dark:bg-gray-700/30 rounded-xl dark:border-gray-600"},dt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},nt={class:"sm:col-span-2"},ut={class:"flex gap-2"},pt=["value"],mt={class:"flex overflow-hidden bg-white border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600"},xt={class:"flex flex-col-reverse items-center justify-between gap-4 px-5 py-3 mt-3 border-t border-gray-100 rounded-xl sm:flex-row dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800 sm:gap-0"},gt={class:"flex w-full gap-3 sm:w-auto"},bt=["disabled"],ct={key:0,class:"w-4 h-4 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},yt={__name:"modalFilter",props:{show:{type:Boolean,default:!1},filters:Object,dropdowns:Object},emits:["close"],setup(m,{emit:S}){const o=m,v=S,U=[{value:"created_at",label:"Tanggal Dibuat"},{value:"name",label:"Nama Produk"},{value:"stock",label:"Jumlah Stok"},{value:"selling_price",label:"Harga Jual"},{value:"purchase_price",label:"Harga Beli"},{value:"total_sold_all_time",label:"Terjual"}],r=h({category_id:o.filters.category_id||"",brand_id:o.filters.brand_id||"",supplier_id:o.filters.supplier_id||"",product_type_id:o.filters.product_type_id||"",unit_id:o.filters.unit_id||"",size_id:o.filters.size_id||"",min_stock:o.filters.stock_min||"",max_stock:o.filters.stock_max||"",min_price:o.filters.price_min||"",max_price:o.filters.price_max||"",min_cost:o.filters.cost_min||"",max_cost:o.filters.cost_max||"",status:o.filters.status||"",trashed:o.filters.trashed||"",sort:o.filters.sort||"created_at",order:o.filters.order||"desc"}),{isActionLoading:b}=D(),k=z(()=>o.filters?.category_id&&o.filters?.category_id==r.category_id?o.dropdowns.types.filter(d=>d.category_id==o.filters?.category_id):o.dropdowns.types.filter(d=>d.category_id===r.category_id));function V(d){return Object.entries(d).reduce((t,[s,f])=>(f!=null&&f!==""&&(t[s]=f),t),{})}function F(){const t={...o.filters.search?{search:o.filters.search}:{},category_id:r.category_id,brand_id:r.brand_id,supplier_id:r.supplier_id,product_type_id:r.product_type_id,unit_id:r.unit_id,size_id:r.size_id,status:r.status,trashed:r.trashed,sort:r.sort,order:r.order,stock_min:r.min_stock,stock_max:r.max_stock,price_min:r.min_price,price_max:r.max_price,cost_min:r.min_cost,cost_max:r.max_cost},s=V(t);v("close"),b.value=!0,w.get(route("products.index"),s,{preserveState:!0,replace:!0,onFinish:()=>{b.value=!1}})}function C(){const d=o.filters.search?{search:o.filters.search}:{};v("close"),b.value=!0,w.get(route("products.index"),d,{preserveState:!0,replace:!0,onFinish:()=>{b.value=!1,r.reset(),r.defaults()}})}const y=d=>d?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(d):"0";return(d,t)=>(a(),B(A,{show:m.show,title:"produk",onClose:t[18]||(t[18]=s=>d.$emit("close"))},{default:M(()=>[e("div",j,[e("section",null,[t[26]||(t[26]=e("h3",{class:"pb-1 mb-3 text-xs font-bold tracking-wider text-gray-400 uppercase border-b border-gray-100 dark:border-gray-700"}," Klasifikasi Produk ",-1)),e("div",N,[e("div",null,[t[20]||(t[20]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Kategori",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l(r).category_id=s),class:"form-select"},[t[19]||(t[19]=e("option",{value:""},"Semua Kategori",-1)),(a(!0),n(x,null,g(m.dropdowns.categories,s=>(a(),n("option",{key:s.id,value:s.id},u(s.name),9,$))),128))],512),[[p,l(r).category_id]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Tipe Produk",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(r).product_type_id=s),class:"form-select",disabled:k.value?.length===0},[e("option",P,u(k.value?.length===0?"Tidak Ada Tipe":"Semua Tipe"),1),(a(!0),n(x,null,g(k.value,s=>(a(),n("option",{key:s.id,value:s.id,selected:s.id===l(r).product_type_id},u(s.name),9,R))),128))],8,I),[[p,l(r).product_type_id]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Merk / Brand",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l(r).brand_id=s),class:"form-select"},[t[22]||(t[22]=e("option",{value:""},"Semua Merk",-1)),(a(!0),n(x,null,g(m.dropdowns.brands,s=>(a(),n("option",{key:s.id,value:s.id},u(s.name),9,J))),128))],512),[[p,l(r).brand_id]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Supplier",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(r).supplier_id=s),class:"form-select"},[t[24]||(t[24]=e("option",{value:""},"Semua Supplier",-1)),(a(!0),n(x,null,g(m.dropdowns.suppliers,s=>(a(),n("option",{key:s.id,value:s.id},u(s.name),9,K))),128))],512),[[p,l(r).supplier_id]])])])]),e("section",null,[t[31]||(t[31]=e("h3",{class:"pb-1 mb-3 text-xs font-bold tracking-wider text-gray-400 uppercase border-b border-gray-100 dark:border-gray-700"}," Spesifikasi Fisik ",-1)),e("div",O,[e("div",null,[t[28]||(t[28]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Satuan (Unit)",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(r).unit_id=s),class:"form-select"},[t[27]||(t[27]=e("option",{value:""},"Semua Satuan",-1)),(a(!0),n(x,null,g(m.dropdowns.units,s=>(a(),n("option",{key:s.id,value:s.id},u(s.name),9,L))),128))],512),[[p,l(r).unit_id]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Ukuran (Size)",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(r).size_id=s),class:"form-select"},[t[29]||(t[29]=e("option",{value:""},"Semua Ukuran",-1)),(a(!0),n(x,null,g(m.dropdowns.sizes,s=>(a(),n("option",{key:s.id,value:s.id},u(s.name),9,Z))),128))],512),[[p,l(r).size_id]])])])]),e("section",null,[t[38]||(t[38]=e("h3",{class:"pb-1 mb-3 text-xs font-bold tracking-wider text-gray-400 uppercase border-b border-gray-100 dark:border-gray-700"}," Rentang Nilai ",-1)),e("div",E,[e("div",q,[t[33]||(t[33]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Jumlah Stok",-1)),e("div",G,[i(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=s=>l(r).min_stock=s),placeholder:"Min",class:"px-1 text-center form-input"},null,512),[[c,l(r).min_stock]]),t[32]||(t[32]=e("span",{class:"self-center text-gray-400"},"-",-1)),i(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>l(r).max_stock=s),placeholder:"Max",class:"px-1 text-center form-input"},null,512),[[c,l(r).max_stock]])])]),e("div",Q,[t[35]||(t[35]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Harga Jual",-1)),e("div",W,[e("div",X,[i(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=s=>l(r).min_price=s),placeholder:"Min",class:"px-1 text-center form-input"},null,512),[[c,l(r).min_price]]),e("p",Y,u(y(l(r).min_price)),1)]),t[34]||(t[34]=e("span",{class:"self-start mt-2 text-gray-400"},"-",-1)),e("div",null,[i(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>l(r).max_price=s),placeholder:"Max",class:"px-1 text-center form-input"},null,512),[[c,l(r).max_price]]),e("p",tt,u(y(l(r).max_price)),1)])])]),e("div",et,[t[37]||(t[37]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Harga Beli",-1)),e("div",st,[e("div",rt,[i(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=s=>l(r).min_cost=s),placeholder:"Min",class:"px-1 text-center form-input"},null,512),[[c,l(r).min_cost]]),e("p",lt,u(y(l(r).min_cost)),1)]),t[36]||(t[36]=e("span",{class:"self-start mt-2 text-gray-400"},"-",-1)),e("div",ot,[i(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=s=>l(r).max_cost=s),placeholder:"Max",class:"px-1 text-center form-input"},null,512),[[c,l(r).max_cost]]),e("p",at,u(y(l(r).max_cost)),1)])])])])]),e("section",it,[e("div",dt,[e("div",null,[t[40]||(t[40]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Status Produk",-1)),i(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>l(r).status=s),class:"form-select"},[...t[39]||(t[39]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"active"},"Aktif (Tampil)",-1),e("option",{value:"inactive"}," Non-Aktif (Disembunyikan) ",-1)])],512),[[p,l(r).status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Data Terhapus",-1)),i(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>l(r).trashed=s),class:"font-medium text-red-600 form-select"},[...t[41]||(t[41]=[e("option",{value:""},"Sembunyikan Sampah",-1),e("option",{value:"with"},"Tampilkan Arsip Sampah",-1),e("option",{value:"only"}," Hanya Sampah (Recovery) ",-1)])],512),[[p,l(r).trashed]])]),e("div",nt,[t[44]||(t[44]=e("label",{class:"block mb-1.5 text-xs font-bold text-gray-700 dark:text-gray-300"},"Urutkan Data",-1)),e("div",ut,[i(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>l(r).sort=s),class:"flex-1 form-select"},[(a(),n(x,null,g(U,s=>e("option",{key:s.value,value:s.value},u(s.label),9,pt)),64))],512),[[p,l(r).sort]]),e("div",mt,[e("button",{type:"button",onClick:t[15]||(t[15]=s=>l(r).order="asc"),class:_(["px-3 py-2 text-xs font-bold transition hover:bg-lime-50 dark:hover:bg-gray-600",l(r).order==="asc"?"bg-lime-500 text-white hover:bg-lime-600":"text-gray-600 dark:text-gray-300"])}," A-Z ",2),t[43]||(t[43]=e("div",{class:"w-px bg-gray-300 dark:bg-gray-600"},null,-1)),e("button",{type:"button",onClick:t[16]||(t[16]=s=>l(r).order="desc"),class:_(["px-3 py-2 text-xs font-bold transition hover:bg-lime-50 dark:hover:bg-gray-600",l(r).order==="desc"?"bg-lime-500 text-white hover:bg-lime-600":"text-gray-600 dark:text-gray-300"])}," Z-A ",2)])])])])])]),e("div",xt,[e("button",{onClick:C,class:"text-xs font-bold text-gray-500 transition border-b border-gray-400 border-dashed dark:text-gray-400 hover:text-red-500 hover:border-red-500"}," Reset ke Default "),e("div",gt,[e("button",{onClick:t[17]||(t[17]=s=>d.$emit("close")),class:"flex-1 sm:flex-none px-5 py-2.5 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-bold text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition"}," Batal "),e("button",{onClick:F,class:"flex-1 sm:flex-none px-8 py-2.5 rounded-xl bg-lime-500 hover:bg-lime-600 text-white font-bold text-sm shadow-md shadow-lime-200 dark:shadow-none transition flex items-center justify-center gap-2",disabled:l(b)},[l(b)?(a(),n("svg",ct,[...t[45]||(t[45]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):T("",!0),t[46]||(t[46]=e("span",null,"Terapkan Filter",-1))],8,bt)])])]),_:1},8,["show"]))}},Ut=H(yt,[["__scopeId","data-v-3c0958cf"]]);export{Ut as default};
