import{_ as v}from"./AuthenticatedLayout-DeaehwQg.js";import{C as h,l as n,o as g,e as i,g as u,i as w,w as o,L as _,f as e,F as m,H as j,n as b,t as d,m as y,k as P}from"./vendor-core-CJbEklrS.js";import C from"./card-detail-BbTaXn6h.js";import{_ as D}from"./Tabs-CoU5UNTk.js";import R from"./tab-forecasting-mFwrifPY.js";import B from"./tab-analisis-CiBvtapM.js";import"./useSidebar-By4kjs-E.js";import"./useActionLoading-FfnGJtHr.js";import"./vendor-common-GpUWqhKr.js";import"./vendor-charts-Bw6UNgWf.js";import"./DeleteConfirm-BS8jwaVF.js";import"./Modal-CSrVmq0b.js";const L={class:"w-full min-h-screen space-y-5"},N={class:"p-4 bg-white rounded-lg shadow dark:bg-gray-800"},S={class:"grid grid-cols-2 gap-4 mt-4"},F={class:"p-3 border border-blue-100 rounded bg-blue-50 dark:bg-gray-700 dark:border-gray-600"},I={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},M={class:"text-sm text-gray-500"},T={class:"p-3 border border-green-100 rounded bg-green-50 dark:bg-gray-700 dark:border-gray-600"},V={class:"text-lg font-bold text-green-600 dark:text-green-400"},$={class:"p-4 bg-white rounded-lg shadow dark:bg-gray-800"},q={class:"divide-y divide-gray-100 dark:divide-gray-700"},H={class:"text-lg"},z={class:"flex flex-col"},A={class:"text-sm font-bold text-gray-800 dark:text-gray-200"},K={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 space-y-0.5"},E={key:0,class:"font-mono text-[10px] text-gray-400 uppercase tracking-wide"},O={key:1,class:"line-clamp-1"},W={key:2,class:"text-[10px] text-gray-400 flex items-center gap-1 mt-1"},G={class:"px-1 bg-gray-100 rounded dark:bg-gray-700"},J={class:"px-1 font-bold text-gray-600 bg-gray-100 rounded dark:bg-gray-700 dark:text-gray-300"},Q={class:"ml-2 text-right shrink-0"},U={class:"text-[10px] text-gray-400 mt-1"},ne={__name:"detail",props:{detail:Array},setup(s){const x=s,p=[{key:"ringkasan",label:"Ringkasan Penjualan"},{key:"analisis",label:"Analisis Pergerakan"},{key:"forecast",label:"Forecasting Restock"},{key:"riwayat",label:"Riwayat Stock"}],k=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),f=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",c=l=>{const t=l.type,r=Number(l.quantity);let a={label:"Transaksi",icon:"ðŸ“",colorClass:"bg-gray-100 text-gray-600",isPositive:r>0,sign:r>0?"+":""};switch(t){case"initial":a.label="Stok Awal",a.icon="ðŸ",a.colorClass="bg-blue-100 text-blue-600",a.isPositive=!0;break;case"purchase":a.label="Pembelian",a.icon="ðŸš›",a.colorClass="bg-green-100 text-green-600",a.isPositive=!0;break;case"sale":a.label="Penjualan",a.icon="ðŸ›’",a.colorClass="bg-red-100 text-red-600",a.isPositive=!1;break;case"adjustment_in":a.label="Koreksi Masuk",a.icon="ðŸ”§",a.colorClass="bg-emerald-100 text-emerald-600",a.isPositive=!0;break;case"adjustment_out":a.label="Koreksi Keluar",a.icon="ðŸ“‰",a.colorClass="bg-orange-100 text-orange-600",a.isPositive=!1;break;case"adjustment_opname":a.label="Stok Opname",a.icon="ðŸ“‹",a.isPositive=r>=0,a.colorClass=a.isPositive?"bg-purple-100 text-purple-600":"bg-pink-100 text-pink-600";break;case"return_in":a.label="Retur Customer",a.icon="â†©ï¸",a.colorClass="bg-teal-100 text-teal-600",a.isPositive=!0;break;case"return_out":a.label="Retur Supplier",a.icon="â†ªï¸",a.colorClass="bg-rose-100 text-rose-600",a.isPositive=!1;break}return a};return h(()=>{const l=Math.max(...x.detail.chart_data.map(t=>t.qty));return l===0?5:l}),(l,t)=>(g(),n(m,null,[i(u(w),{title:"Detail"}),i(v,{headerTitle:"Detail Barang"},{default:o(()=>[i(u(_),{data:["detail"]},{fallback:o(()=>[...t[0]||(t[0]=[e("div",{class:"w-full min-h-screen space-y-5"},[e("div",{class:"flex flex-col overflow-hidden bg-white border-t border-l-4 border-gray-200 shadow-md md:flex-row dark:bg-gray-800 rounded-xl dark:border-gray-700 animate-pulse"},[e("div",{class:"flex flex-col w-full border-b border-gray-100 md:w-56 lg:w-64 bg-gray-50 dark:bg-gray-900 md:border-b-0 md:border-r dark:border-gray-700"},[e("div",{class:"relative flex-1 w-full min-h-[160px] md:h-full flex items-center justify-center bg-gray-200 dark:bg-gray-800"},[e("svg",{class:"w-10 h-10 text-gray-300 dark:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("div",{class:"absolute w-16 h-5 bg-gray-300 rounded-lg top-2 left-2 dark:bg-gray-700"})]),e("div",{class:"w-full h-8 bg-gray-300 dark:bg-gray-700"})]),e("div",{class:"flex flex-col justify-between flex-1 gap-4 p-4 sm:p-5"},[e("div",null,[e("div",{class:"flex flex-wrap items-center justify-between gap-2 mb-2"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-16 h-5 bg-gray-200 rounded dark:bg-gray-700"}),e("span",{class:"text-gray-200 dark:text-gray-700"},"|"),e("div",{class:"w-20 h-5 bg-gray-200 rounded dark:bg-gray-700"}),e("span",{class:"text-gray-200 dark:text-gray-700"},"|"),e("div",{class:"h-5 bg-gray-200 rounded w-14 dark:bg-gray-700"})]),e("div",{class:"hidden w-24 h-5 bg-gray-200 rounded dark:bg-gray-700 md:block"})]),e("div",{class:"w-3/4 h-8 mb-4 bg-gray-200 rounded sm:h-9 md:h-10 dark:bg-gray-700"}),e("div",{class:"flex flex-wrap items-center gap-4 pb-3 mb-3 border-b border-gray-100 dark:border-gray-700"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-3 bg-gray-200 rounded dark:bg-gray-700"}),e("div",{class:"w-12 h-6 bg-gray-200 rounded dark:bg-gray-700"})]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-3 bg-gray-200 rounded dark:bg-gray-700"}),e("div",{class:"w-12 h-6 bg-gray-200 rounded dark:bg-gray-700"})]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-8 h-3 bg-gray-200 rounded dark:bg-gray-700"}),e("div",{class:"w-10 h-6 bg-gray-200 rounded dark:bg-gray-700"})])])]),e("div",{class:"grid grid-cols-1 gap-4 mb-4 sm:grid-cols-2"},[e("div",{class:"p-3 border border-gray-100 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-700"},[e("div",{class:"w-20 h-3 mb-2 bg-gray-200 rounded dark:bg-gray-700"}),e("div",{class:"w-32 h-8 mb-2 bg-gray-300 rounded dark:bg-gray-600"}),e("div",{class:"w-24 h-5 bg-gray-200 rounded dark:bg-gray-700"})]),e("div",{class:"p-3 border border-gray-100 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-700"},[e("div",{class:"flex justify-between mb-2"},[e("div",{class:"w-20 h-3 bg-gray-200 rounded dark:bg-gray-700"}),e("div",{class:"w-16 h-4 bg-gray-200 rounded dark:bg-gray-700"})]),e("div",{class:"w-32 h-8 mb-2 bg-gray-300 rounded dark:bg-gray-600"}),e("div",{class:"w-24 h-5 bg-gray-200 rounded dark:bg-gray-700"})])]),e("div",{class:"flex flex-wrap items-center justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700"},[e("div",{class:"w-full h-10 bg-gray-200 rounded-lg sm:w-24 dark:bg-gray-700"}),e("div",{class:"flex w-full gap-2 sm:w-auto"},[e("div",{class:"flex-1 w-full h-10 bg-gray-300 rounded-lg sm:flex-none sm:w-24 dark:bg-gray-600"}),e("div",{class:"flex-1 w-full h-10 bg-gray-200 rounded-lg sm:flex-none sm:w-24 dark:bg-gray-700"})])])])]),e("div",{class:"w-full overflow-x-auto animate-pulse"},[e("div",{class:"flex border-b-2 border-gray-200 min-w-max flex-nowrap dark:border-gray-700"},[e("div",{class:"flex items-center gap-2 px-4 py-3 bg-gray-100 border-b-2 border-gray-300 rounded-t-lg dark:bg-gray-800 dark:border-gray-600"},[e("div",{class:"w-16 h-4 bg-gray-300 rounded dark:bg-gray-600"}),e("div",{class:"w-5 h-5 bg-gray-300 rounded-full dark:bg-gray-600"})]),e("div",{class:"flex items-center gap-2 px-4 py-3 border-b-2 border-transparent"},[e("div",{class:"w-24 h-4 bg-gray-200 rounded dark:bg-gray-700"})]),e("div",{class:"flex items-center gap-2 px-4 py-3 border-b-2 border-transparent"},[e("div",{class:"w-20 h-4 bg-gray-200 rounded dark:bg-gray-700"}),e("div",{class:"w-5 h-5 bg-gray-200 rounded-full dark:bg-gray-700"})]),e("div",{class:"flex items-center gap-2 px-4 py-3 border-b-2 border-transparent"},[e("div",{class:"w-16 h-4 bg-gray-200 rounded dark:bg-gray-700"})])])])],-1)])]),default:o(()=>[e("div",L,[i(C,{data:s.detail.product,dss:s.detail.dss,price_trend:s.detail.price_trend},null,8,["data","dss","price_trend"]),i(D,{tabs:p,defaultTab:"ringkasan"},{ringkasan:o(()=>[e("div",N,[t[3]||(t[3]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Ringkasan Penjualan ",-1)),t[4]||(t[4]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-300"}," Performa penjualan produk ini dalam 7 hari terakhir. ",-1)),e("div",S,[e("div",F,[t[1]||(t[1]=e("p",{class:"text-xs text-gray-500 uppercase dark:text-gray-400"}," Terjual (30 Hari) ",-1)),e("p",I,[P(d(s.detail.dss.sales_30_days)+" ",1),e("span",M,d(s.detail.product.unit?.name),1)])]),e("div",T,[t[2]||(t[2]=e("p",{class:"text-xs text-gray-500 uppercase dark:text-gray-400"}," Estimasi Omzet (30 Hari) ",-1)),e("p",V,d(k(s.detail.dss.sales_30_days*s.detail.product.selling_price)),1)])])])]),analisis:o(()=>[i(B,{inventory:s.detail.product.inventory,product:s.detail.product,chart_data:s.detail.chart_data},null,8,["inventory","product","chart_data"])]),forecast:o(()=>[i(R,{inventory:s.detail.product.inventory},null,8,["inventory"])]),riwayat:o(()=>[e("div",$,[t[6]||(t[6]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Riwayat Stock "),e("p",{class:"text-sm text-gray-600 dark:text-gray-300"}," Mutasi keluar masuk barang. ")])],-1)),e("ul",q,[(g(!0),n(m,null,j(s.detail.stock_history,(r,a)=>(g(),n("li",{key:a,class:"flex items-start justify-between px-2 py-4 transition rounded-lg group hover:bg-gray-50 dark:hover:bg-gray-800/50"},[e("div",{class:b(["flex gap-3",{"opacity-50":r.type==="deleted"}])},[e("div",{class:b(["flex items-center justify-center w-10 h-10 rounded-full shadow-sm shrink-0",c(r).colorClass])},[e("span",H,d(c(r).icon),1)],2),e("div",z,[e("h4",A,d(c(r).label),1),e("div",K,[r.reference_number?(g(),n("p",E," #"+d(r.reference_number),1)):y("",!0),r.description?(g(),n("p",O,d(r.description),1)):y("",!0),r.type!=="initial"?(g(),n("p",W,[e("span",G,d(r.stock_before),1),t[5]||(t[5]=e("span",null,"âžœ",-1)),e("span",J,d(r.stock_after),1)])):y("",!0)])])],2),e("div",Q,[e("p",{class:b(["text-sm font-bold",r.type==="adjustment_opname"?"text-blue-600":c(r).isPositive?"text-green-600":"text-red-600"])},d(r.type==="adjustment_opname"?"~ ":c(r).isPositive?"+ ":"- ")+d(r.type==="adjustment_opname"?r.stock_after:r.quantity),3),e("p",U,d(f(r.created_at||r.date))+" WIB ",1)])]))),128))])])]),_:1})])]),_:1})]),_:1})],64))}};export{ne as default};
