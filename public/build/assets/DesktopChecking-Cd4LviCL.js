import{c as f,o as d,w as p,b as e,a as m,f as u,g as i,i as l,e as g,F as y,q as h,t as r,k as b,A as x,v as k,n as c}from"./app-XPyOtybP.js";import{_ as w}from"./AuthenticatedLayout-DDte47LZ.js";import{P as I}from"./PrimaryButton-DnqBiT7c.js";import{_ as M}from"./SecondaryButton-DpO6SxuF.js";import T from"./search-DKa9yUjr.js";import"./useSidebar-B1dsdx0g.js";import"./useActionLoading-HgSkmBE-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-ZaNQ8XGg.js";const j={class:"flex items-center justify-between mb-4"},C={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},_={class:"space-y-6 lg:col-span-2"},V={class:"flex flex-col h-full bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},B={class:"flex items-center justify-between px-5 py-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800"},S={key:0,class:"px-2 py-1 text-[10px] font-bold bg-gray-100 text-gray-500 rounded border"},N={key:0,class:"flex flex-col items-center justify-center flex-1 py-12 text-center"},U={class:"flex-1 overflow-auto custom-scrollbar"},L={class:"w-full text-sm text-left"},P={class:"sticky top-0 z-10 text-xs font-bold text-gray-500 uppercase border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"},R={key:0,class:"w-10 px-2 py-3 text-center"},H={class:"divide-y divide-gray-100 dark:divide-gray-700"},q={class:"px-4 py-3 align-top"},z={class:"text-sm font-bold text-gray-800 dark:text-white line-clamp-2"},O={class:"text-[13px] text-gray-600 dark:text-gray-200 mt-0.5 flex flex-wrap gap-1"},A={class:"bg-gray-100 dark:bg-gray-700 px-1.5 rounded"},F={key:0},K={class:"mt-2 space-y-1"},$={key:0,class:"flex items-center text-[10px] text-red-600 font-bold bg-red-50 w-fit px-1.5 rounded"},D={key:1,class:"flex items-center text-[10px] text-green-600 font-bold bg-green-50 w-fit px-1.5 rounded"},E={key:2,class:"text-[10px] text-orange-600 font-bold flex items-center"},Q={key:3,class:"text-[10px] text-purple-600 font-bold flex items-center"},G={class:"px-2 py-3 align-top"},J=["onUpdate:modelValue","disabled"],W={class:"text-[10px] text-center text-gray-400 mt-1"},X={class:"px-2 py-3 align-top"},Y={class:"relative"},Z=["onUpdate:modelValue","disabled"],ee={class:"text-[10px] text-right text-gray-400 mt-1"},te={key:0,class:"px-2 py-3 text-center align-middle"},se=["value"],ae={key:0,class:"flex items-center justify-between gap-3 p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800"},oe=["disabled"],re={class:"flex gap-2"},de=["disabled"],ie=["disabled"],le={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},ne={class:"space-y-6 lg:col-span-1"},ue={class:"relative flex flex-col p-5 bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},ce={class:"flex items-start justify-between pb-3 mb-4 border-b border-gray-100 dark:border-gray-700"},ge={class:"flex items-center gap-2"},be={class:"text-xl font-black tracking-tight text-gray-800 dark:text-white"},pe={key:0,class:"flex items-center justify-center w-6 h-6 text-teal-500 border border-teal-100 rounded-full bg-teal-50 dark:bg-teal-900/30 dark:border-teal-800",title:"Tervalidasi (Data Fisik & Sistem Cocok)"},me={class:"grid grid-cols-1 gap-3 mb-4 text-sm"},ye={class:"flex items-center gap-3"},he={class:"font-bold text-gray-800 dark:text-white"},xe={class:"w-40 text-xs text-gray-500 truncate dark:text-gray-400"},ke={class:"flex items-center justify-between p-2 text-xs border border-gray-100 rounded-lg bg-gray-50 dark:bg-gray-700/50 dark:border-gray-600"},ve={class:"flex flex-col"},fe={class:"font-bold text-gray-700 dark:text-gray-300"},we={class:"flex flex-col text-right"},Ie={class:"font-bold text-red-600 dark:text-red-400"},Me={class:"mt-2 space-y-2"},Te={class:"flex items-center justify-between text-xs"},je={class:"font-bold text-gray-800 dark:text-white"},Ce={class:"flex items-center justify-between text-xs"},_e={class:"font-medium text-gray-500 dark:text-gray-400"},Ve={class:"font-bold text-blue-600 dark:text-blue-400"},Be={class:"flex items-center justify-between text-sm font-black"},Se={key:0,class:"mt-auto"},Ne=["src"],Ue={key:0,class:"p-4 border-2 rounded-lg shadow-lg border-lime-100 bg-lime-50 dark:bg-lime-900/30"},Le={key:1,class:"p-6 bg-white border-2 border-gray-100 rounded-lg shadow-lg dark:bg-gray-800"},Pe={key:0,class:"py-4 text-center text-gray-500"},Re={key:1,class:"overflow-y-auto border rounded max-h-48 dark:border-gray-700"},He={class:"p-2 space-y-1"},qe=["for"],ze=["id","value"],Oe={class:"flex flex-col flex-1"},Ae={class:"font-medium text-gray-900 dark:text-white"},Fe={class:"flex items-center justify-between mt-1 text-xs"},Ke={class:"text-gray-600 dark:text-gray-400"},$e={class:"font-bold text-gray-800 dark:text-gray-200"},De={key:2,class:"flex justify-end mt-4"},tt={__name:"DesktopChecking",props:{purchase:Object,invoice:Object,unlinkedItems:Object,linkedItems:Object,products:{type:Array,default:()=>[]},actions:Object},setup(o){const v=o;return(a,t)=>(d(),f(w,{headerTitle:`Invoice : #${o.invoice.invoice_number}`,showSidebar:!1},{default:p(()=>[e("div",j,[m(M,{onClick:a.goBackToChecking},{default:p(()=>[...t[8]||(t[8]=[u(" â† Kembali ke Validasi Utama ",-1)])]),_:1},8,["onClick"])]),e("div",C,[e("div",_,[e("div",V,[e("div",B,[t[9]||(t[9]=e("div",null,[e("h3",{class:"text-lg font-bold text-gray-800 dark:text-white"}," Item Terhubung "),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Sesuaikan Qty dan Harga sesuai fisik barang. ")],-1)),o.linkedItems.length===0?(d(),i("span",S," KOSONG ")):l("",!0)]),o.linkedItems.length===0?(d(),i("div",N,[...t[10]||(t[10]=[e("div",{class:"flex items-center justify-center w-12 h-12 mb-3 bg-gray-100 rounded-full dark:bg-gray-700"},[e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1),e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"}," Belum ada item tertaut. ",-1),e("p",{class:"mt-1 text-xs text-gray-400"}," Pilih item dari daftar di sebelah kanan. ",-1)])])):(d(),i("form",{key:1,onSubmit:t[3]||(t[3]=g((...s)=>a.saveCorrections&&a.saveCorrections(...s),["prevent"])),class:"flex flex-col flex-1 min-h-0"},[e("div",U,[e("table",L,[e("thead",P,[e("tr",null,[t[12]||(t[12]=e("th",{class:"px-4 py-3"},"Produk",-1)),t[13]||(t[13]=e("th",{class:"w-24 px-2 py-3 text-center"}," Qty Fisik ",-1)),t[14]||(t[14]=e("th",{class:"w-32 px-2 py-3 text-right"}," Harga Satuan ",-1)),a.pageMode==="edit"?(d(),i("th",R,[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])):l("",!0)])]),e("tbody",H,[(d(!0),i(y,null,h(a.editableLinkedItems,s=>(d(),i("tr",{key:s.id,class:"transition group hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",q,[e("div",null,[e("p",z,r(s.product_snapshot.brand+" "+s.product_snapshot.name+" "+s.product_snapshot.size),1),e("div",O,[e("span",A,r(s.product_snapshot.code),1),e("span",null,r(s.product_snapshot.brand),1),s.product_snapshot.size?(d(),i("span",F,"â€¢ "+r(s.product_snapshot.size),1)):l("",!0),e("span",null,"| "+r(s.product_snapshot.category)+" | "+r(s.product_snapshot.productType),1)]),e("div",K,[s.purchase_price>(s.product_snapshot.purchase_price||0)?(d(),i("div",$,[t[15]||(t[15]=e("span",{class:"mr-1"},"ðŸ“ˆ",-1)),u(" Naik "+r(o.actions.formatRupiah(s.purchase_price-s.product_snapshot.purchase_price)),1)])):s.purchase_price<(s.product_snapshot.purchase_price||0)?(d(),i("div",D,[t[16]||(t[16]=e("span",{class:"mr-1"},"ðŸ“‰",-1)),u(" Turun "+r(o.actions.formatRupiah(s.product_snapshot.purchase_price-s.purchase_price)),1)])):l("",!0),s.quantity<(s.product_snapshot.stock||0)?(d(),i("div",E,[t[17]||(t[17]=e("span",{class:"w-1.5 h-1.5 bg-orange-500 rounded-full mr-1"},null,-1)),u(" Kurang "+r((s.product_snapshot.stock||0)-s.quantity)+" (Parsial) ",1)])):s.quantity>(s.product_snapshot.stock||0)?(d(),i("div",Q,[t[18]||(t[18]=e("span",{class:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-1"},null,-1)),u(" Lebih "+r(s.quantity-(s.product_snapshot.stock||0))+" (Bonus) ",1)])):l("",!0)])])]),e("td",G,[b(e("input",{type:"number","onUpdate:modelValue":n=>s.quantity=n,disabled:a.pageMode!=="edit",class:"w-full text-sm font-bold text-center border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 disabled:bg-gray-100 disabled:text-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",min:"0"},null,8,J),[[x,s.quantity,void 0,{number:!0}]]),e("div",W," Target: "+r(s.product_snapshot.stock||0),1)]),e("td",X,[e("div",Y,[t[19]||(t[19]=e("span",{class:"absolute text-xs text-gray-400 left-2 top-2"},"Rp",-1)),b(e("input",{type:"number","onUpdate:modelValue":n=>s.purchase_price=n,disabled:a.pageMode!=="edit",class:"w-full pl-7 pr-2 py-1.5 text-right text-sm font-medium border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 disabled:bg-gray-100 disabled:text-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,8,Z),[[x,s.purchase_price,void 0,{number:!0}]])]),e("div",ee," Awal: "+r(o.actions.formatRupiah(s.product_snapshot.purchase_price||0)),1)]),a.pageMode==="edit"?(d(),i("td",te,[b(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[0]||(t[0]=n=>a.selectedUnlinkItemIds=n),class:"w-4 h-4 text-red-600 transition border-gray-300 rounded cursor-pointer focus:ring-red-500 hover:scale-110"},null,8,se),[[k,a.selectedUnlinkItemIds]])])):l("",!0)]))),128))])])]),a.pageMode==="edit"?(d(),i("div",ae,[e("button",{onClick:t[1]||(t[1]=g((...s)=>a.submitUnlinkage&&a.submitUnlinkage(...s),["prevent"])),disabled:a.selectedUnlinkItemIds.length===0||a.isProcessing,class:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-red-600 transition border border-red-200 rounded-lg bg-red-50 hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed"},[t[20]||(t[20]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),e("span",null,"Lepas ("+r(a.selectedUnlinkItemIds.length)+")",1)],8,oe),e("div",re,[e("button",{onClick:t[2]||(t[2]=g((...s)=>a.validateInvoice&&a.validateInvoice(...s),["prevent"])),disabled:a.editableLinkedItems.length===0||v.invoice.status==="validated",class:"px-4 py-2 text-xs font-bold text-white transition bg-teal-500 rounded-lg shadow-sm hover:bg-teal-600 disabled:opacity-50 disabled:cursor-not-allowed"}," Validasi Invoice ",8,de),e("button",{type:"submit",disabled:a.isProcessing,class:"flex items-center gap-2 px-4 py-2 text-xs font-bold text-white transition transform rounded-lg shadow-md bg-lime-500 hover:bg-lime-600 shadow-lime-200 dark:shadow-none active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"},[a.isProcessing?(d(),i("svg",le,[...t[21]||(t[21]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):l("",!0),t[22]||(t[22]=e("span",null,"Simpan Perubahan",-1))],8,ie)])])):l("",!0)],32))])]),e("div",ne,[e("div",ue,[e("div",ce,[e("div",null,[t[24]||(t[24]=e("p",{class:"text-[10px] font-bold tracking-widest text-gray-400 uppercase mb-1"}," INVOICE TARGET ",-1)),e("div",ge,[e("h3",be," #"+r(o.invoice.invoice_number),1),o.invoice.status==="validated"?(d(),i("div",pe,[...t[23]||(t[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):l("",!0)])]),e("span",{class:c(["px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wide border shadow-sm",{"bg-green-100 text-green-700 border-green-200":o.invoice.payment_status==="paid","bg-yellow-100 text-yellow-700 border-yellow-200":o.invoice.payment_status==="partial","bg-red-100 text-red-700 border-red-200":o.invoice.payment_status==="unpaid"}])},r(o.invoice.payment_status),3)]),e("div",me,[e("div",ye,[t[25]||(t[25]=e("div",{class:"flex items-center justify-center w-8 h-8 text-gray-500 bg-gray-100 rounded-lg dark:bg-gray-700 dark:text-gray-100"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",null,[e("p",he,r(o.purchase.supplier?.name||"Umum/Cash"),1),e("p",xe,r(o.purchase.supplier?.address||"-")+" | "+r(o.purchase.supplier?.phone||"-"),1)])]),e("div",ke,[e("div",ve,[t[26]||(t[26]=e("span",{class:"text-gray-400"},"Terbit",-1)),e("span",fe,r(o.actions.formatTanggal(o.invoice.invoice_date)),1)]),t[28]||(t[28]=e("div",{class:"w-px h-6 bg-gray-300 dark:bg-gray-600"},null,-1)),e("div",we,[t[27]||(t[27]=e("span",{class:"text-gray-400"},"Jatuh Tempo",-1)),e("span",Ie,r(o.actions.formatTanggal(o.invoice.due_date)),1)])])]),e("div",{class:c(["relative p-3 mb-4 overflow-hidden border rounded-xl",Math.abs(o.invoice.total_amount-a.computedTotalNominal)<100?"bg-lime-50 border-lime-200 dark:bg-lime-900/20 dark:border-lime-800":"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800"])},[e("div",{class:c(["absolute top-0 right-0 px-2 py-0.5 rounded-bl-lg text-[9px] font-bold uppercase tracking-widest text-white shadow-sm",Math.abs(o.invoice.total_amount-a.computedTotalNominal)<100?"bg-lime-500":"bg-red-500"])},r(Math.abs(o.invoice.total_amount-a.computedTotalNominal)<100?"Balanced (Cocok)":"Unbalanced (Selisih)"),3),e("div",Me,[e("div",Te,[t[29]||(t[29]=e("span",{class:"font-medium text-gray-500 dark:text-gray-400"},"Target Nota Fisik",-1)),e("span",je,r(o.actions.formatRupiah(o.invoice.total_amount)),1)]),e("div",Ce,[e("span",_e,"Total Item Terhubung ("+r(a.computedTotalQty)+")",1),e("span",Ve,r(o.actions.formatRupiah(a.computedTotalNominal)),1)]),t[30]||(t[30]=e("div",{class:"my-1 border-t border-gray-300/50 dark:border-gray-600"},null,-1)),e("div",Be,[e("span",{class:c(Math.abs(o.invoice.total_amount-a.computedTotalNominal)<100?"text-lime-700 dark:text-lime-400":"text-red-600 dark:text-red-400")},r(Math.abs(o.invoice.total_amount-a.computedTotalNominal)<100?"Selisih Rp 0":"Selisih"),3),e("span",{class:c(Math.abs(o.invoice.total_amount-a.computedTotalNominal)<100?"text-lime-700 dark:text-lime-400":"text-red-600 dark:text-red-400")},r(o.actions.formatRupiah(o.invoice.total_amount-a.computedTotalNominal)),3)])])],2),o.invoice.invoice_url?(d(),i("div",Se,[t[32]||(t[32]=e("p",{class:"mb-2 text-[10px] font-bold text-gray-400 uppercase tracking-wider"}," Lampiran Bukti ",-1)),e("div",{class:"relative overflow-hidden border border-gray-200 cursor-pointer group rounded-xl dark:border-gray-600",onClick:t[4]||(t[4]=s=>a.openImageModal(o.invoice.invoice_url,o.invoice.invoice_number))},[e("img",{src:o.invoice.invoice_url,alt:"Bukti Nota",class:"object-cover w-full h-24 transition duration-500 group-hover:scale-110 group-hover:opacity-75"},null,8,Ne),t[31]||(t[31]=e("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-300 bg-black/30 backdrop-blur-[1px]"},[e("svg",{class:"w-6 h-6 text-white drop-shadow-md",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})])],-1))])])):l("",!0)]),a.pageMode==="edit"?(d(),i("div",Ue,[t[33]||(t[33]=e("h4",{class:"mb-3 font-bold text-yellow-800 dark:text-yellow-200"}," Tambah Item Baru / Pengganti ",-1)),m(T,{isSearching:a.isSearching,modelValue:a.searchKeyword,"onUpdate:modelValue":t[5]||(t[5]=s=>a.searchKeyword=s),results:a.searchResults,onSelect:a.addNewSubstituteItem,placeholder:"Cari produk ..."},null,8,["isSearching","modelValue","results","onSelect"])])):l("",!0),a.pageMode==="edit"?(d(),i("div",Le,[t[34]||(t[34]=e("h4",{class:"mb-3 font-bold dark:text-gray-200"}," Produk Belum Tertaut ",-1)),e("form",{onSubmit:t[7]||(t[7]=g((...s)=>a.submitLinkage&&a.submitLinkage(...s),["prevent"]))},[a.pageMode==="edit"&&o.unlinkedItems.length==0?(d(),i("p",Pe," Semua produk sudah ditautkan. ")):(d(),i("div",Re,[e("ul",He,[(d(!0),i(y,null,h(o.unlinkedItems,s=>(d(),i("li",{key:s.id,class:"flex items-center justify-between w-full p-2 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"},[e("label",{for:"link_item_"+s.id,class:"flex items-start w-full gap-2 text-sm cursor-pointer dark:text-gray-300"},[b(e("input",{id:"link_item_"+s.id,type:"checkbox",value:s.id,"onUpdate:modelValue":t[6]||(t[6]=n=>a.selectedLinkItemIds=n),class:"rounded text-lime-600 mt-1.5"},null,8,ze),[[k,a.selectedLinkItemIds]]),e("div",Oe,[e("div",Ae,r(s.product.name)+" ("+r(s.product.code)+") ",1),e("div",Fe,[e("span",Ke," ("+r(s.quantity)+"x) @"+r(o.actions.formatRupiah(s.purchase_price)),1),e("span",$e," Subtotal: "+r(o.actions.formatRupiah(s.subtotal)),1)])])],8,qe)]))),128))])])),o.unlinkedItems.length>0?(d(),i("div",De,[m(I,{type:"submit",disabled:a.selectedLinkItemIds.length===0||a.isProcessing},{default:p(()=>[u(" Tautkan "+r(a.selectedLinkItemIds.length)+" Item ",1)]),_:1},8,["disabled"])])):l("",!0)],32)])):l("",!0)])])]),_:1},8,["headerTitle"]))}};export{tt as default};
