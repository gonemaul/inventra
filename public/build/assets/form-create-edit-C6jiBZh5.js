import{u as V,s as U,g as o,o as a,b as r,i as n,n as S,d as s,t as d,a as m,f as u,k as c,A as g,F as x,m as y,z as B,w as v,l as P,e as D}from"./app-C_cXePOB.js";import{_ as b}from"./TextInput-PROtXgwY.js";import{P as F}from"./PrimaryButton-D5q8Vryj.js";import{_ as M}from"./SecondaryButton-ClbDvNQj.js";import{u as j}from"./useActionLoading-Bvh_DZn-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"flex flex-col gap-4 md:flex-row"},C={class:"flex flex-col lg:w-2/5"},I=["src"],z={key:1,class:"flex flex-col items-center justify-center w-full h-full pt-5 pb-6"},K={key:0,class:"mt-1 text-sm text-red-500"},L={class:"flex flex-col justify-center flex-1 gap-3"},A={key:0,class:"mt-1 text-sm text-red-500"},H={key:0,class:"mt-1 text-sm text-red-500"},R={class:"grid grid-cols-1 gap-3 mt-5 md:grid-cols-3"},T={key:0,value:null},O=["value"],$={key:0,class:"mt-1 text-sm text-red-500"},E={key:0,value:null},J=["value"],q={key:0,class:"mt-1 text-sm text-red-500"},G={key:0,value:null},W=["value"],Q={key:0,class:"mt-1 text-sm text-red-500"},X={key:0,value:null},Y=["value"],Z={key:0,class:"mt-1 text-sm text-red-500"},ee={key:0,value:null},te=["value"],re={key:0,class:"mt-1 text-sm text-red-500"},se={key:0,value:null},le=["value"],oe={key:0,class:"mt-1 text-sm text-red-500"},ae={class:"mt-4"},de={key:0,class:"mt-1 text-sm text-red-500"},ie={class:"flex flex-col gap-3 mt-4 md:flex-row"},ne={class:"flex-1"},ue={class:"flex justify-between"},me={class:"text-sm text-gray-500"},pe={key:0,class:"mt-1 text-sm text-red-500"},ce={class:"flex-1"},ge={class:"flex justify-between"},xe={class:"text-sm text-gray-500"},ye={key:0,class:"mt-1 text-sm text-red-500"},be={class:"grid grid-cols-1 gap-3 mt-4 md:grid-cols-4"},ke={key:0,class:"mt-1 text-sm text-red-500"},_e={key:0,class:"mt-1 text-sm text-red-500"},fe={key:0,class:"mt-1 text-sm text-red-500"},ve=["value"],we={key:0,class:"mt-1 text-sm text-red-500"},he={class:"flex justify-end gap-3 mt-6"},Fe={__name:"form-create-edit",props:{dropdowns:Object,product:{type:Object,default:null},mode:String},setup(p){const i=p,{isActionLoading:f}=j(),e=V({category_id:i.product?.category_id||null,unit_id:i.product?.unit_id||null,size_id:i.product?.size_id||null,supplier_id:i.product?.supplier_id||null,brand_id:i.product?.brand_id||null,product_type_id:i.product?.product_type_id||null,name:i.product?.name||"",code:i.product?.code||"",description:i.product?.description||"",status:i.product?.status||"active",purchase_price:i.product?.purchase_price||0,selling_price:i.product?.selling_price||0,stock:i.product?.stock||0,min_stock:i.product?.min_stock||0,target_margin_percent:i.product?.target_margin_percent||20,image:null}),_=U(i.product?.image_path?`/storage/${i.product.image_path}`:null);function w(k){const t=k.target.files[0];t&&(e.image=t,_.value=URL.createObjectURL(t))}const h=()=>{f.value=!0,i.mode==="create"?e.post(route("products.store"),{onFinish:()=>f.value=!1}):e.transform(k=>({...k,_method:"put"})).post(route("products.update",{product:i.product.id}),{onFinish:()=>f.value=!1})};return(k,t)=>(a(),o("form",{class:"p-6 bg-gray-100 rounded-lg shadow dark:bg-customBg-tableDark",onSubmit:D(h,["prevent"])},[r("div",N,[r("div",C,[r("label",{for:"image-upload",class:S(["flex flex-col items-center justify-center w-40 mt-2 rounded-lg cursor-pointer aspect-square bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600",{"border-2 border-gray-300 border-dashed":!_.value}])},[_.value?(a(),o("img",{key:0,src:_.value,alt:"Preview",class:"object-cover w-full h-full rounded-lg"},null,8,I)):(a(),o("div",z,[...t[15]||(t[15]=[r("p",{class:"mb-2 text-sm text-gray-500 dark:text-gray-200"},[r("span",{class:"font-semibold"},"Klik untuk Upload")],-1),r("p",{class:"text-xs text-gray-500 dark:text-gray-200"}," WEBP, PNG (max. 1MB) ",-1)])])),r("input",{id:"image-upload",type:"file",name:"image",class:"hidden",onChange:w},null,32)],2),s(e).errors.image?(a(),o("p",K,d(s(e).errors.image),1)):n("",!0)]),r("div",L,[r("div",null,[t[16]||(t[16]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},"Kode Barang",-1)),m(b,{class:"w-full max-h-10",id:"kode",type:"text",name:"kode",placeholder:"Kode Barang",modelValue:s(e).code,"onUpdate:modelValue":t[0]||(t[0]=l=>s(e).code=l)},null,8,["modelValue"]),s(e).errors.code?(a(),o("p",A,d(s(e).errors.code),1)):n("",!0)]),r("div",null,[t[17]||(t[17]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Nama Barang"),r("span",{class:"text-red-500"},"*")],-1)),m(b,{class:"w-full max-h-10",id:"nama",type:"text",name:"nama",placeholder:"Nama Barang",modelValue:s(e).name,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).name=l)},null,8,["modelValue"]),s(e).errors.name?(a(),o("p",H,d(s(e).errors.name),1)):n("",!0)])])]),r("div",R,[r("div",null,[t[18]||(t[18]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Kategori"),r("span",{class:"text-red-500"},"*")],-1)),c(r("select",{class:"w-full px-3 py-2 text-sm border border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":t[2]||(t[2]=l=>s(e).category_id=l)},[i.mode=="create"?(a(),o("option",T," Pilih Kategori ")):n("",!0),(a(!0),o(x,null,y(p.dropdowns.categories,l=>(a(),o("option",{key:l.id,value:l.id},d(l.name),9,O))),128))],512),[[g,s(e).category_id]]),s(e).errors.category_id?(a(),o("p",$,d(s(e).errors.category_id),1)):n("",!0)]),r("div",null,[t[19]||(t[19]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Type"),r("span",{class:"text-red-500"},"*")],-1)),c(r("select",{class:"w-full px-3 py-2 text-sm border border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500","onUpdate:modelValue":t[3]||(t[3]=l=>s(e).product_type_id=l)},[i.mode=="create"?(a(),o("option",E," Pilih Type ")):n("",!0),(a(!0),o(x,null,y(p.dropdowns.type,l=>(a(),o("option",{key:l.id,value:l.id},d(l.name),9,J))),128))],512),[[g,s(e).product_type_id]]),s(e).errors.product_type_id?(a(),o("p",q,d(s(e).errors.product_type_id),1)):n("",!0)]),r("div",null,[t[20]||(t[20]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Satuan"),r("span",{class:"text-red-500"},"*")],-1)),c(r("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>s(e).unit_id=l),class:"w-full px-3 py-2 text-sm border border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(a(),o("option",G," Pilih Satuan ")):n("",!0),(a(!0),o(x,null,y(p.dropdowns.units,l=>(a(),o("option",{key:l.id,value:l.id},d(l.name),9,W))),128))],512),[[g,s(e).unit_id]]),s(e).errors.unit_id?(a(),o("p",Q,d(s(e).errors.unit_id),1)):n("",!0)]),r("div",null,[t[21]||(t[21]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Ukuran"),r("span",{class:"text-red-500"},"*")],-1)),c(r("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>s(e).size_id=l),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(a(),o("option",X," Pilih Ukuran ")):n("",!0),(a(!0),o(x,null,y(p.dropdowns.sizes,l=>(a(),o("option",{key:l.id,value:l.id},d(l.name),9,Y))),128))],512),[[g,s(e).size_id]]),s(e).errors.size_id?(a(),o("p",Z,d(s(e).errors.size_id),1)):n("",!0)]),r("div",null,[t[22]||(t[22]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Merk"),r("span",{class:"text-red-500"},"*")],-1)),c(r("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>s(e).brand_id=l),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(a(),o("option",ee," Pilih Merk ")):n("",!0),(a(!0),o(x,null,y(p.dropdowns.brand,l=>(a(),o("option",{key:l.id,value:l.id},d(l.name),9,te))),128))],512),[[g,s(e).brand_id]]),s(e).errors.brand_id?(a(),o("p",re,d(s(e).errors.brand_id),1)):n("",!0)]),r("div",null,[t[23]||(t[23]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Supplier"),r("span",{class:"text-red-500"},"*")],-1)),c(r("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>s(e).supplier_id=l),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},[i.mode=="create"?(a(),o("option",se," Pilih Supplier ")):n("",!0),(a(!0),o(x,null,y(p.dropdowns.suppliers,l=>(a(),o("option",{key:l.id,value:l.id},d(l.name),9,le))),128))],512),[[g,s(e).supplier_id]]),s(e).errors.supplier_id?(a(),o("p",oe,d(s(e).errors.supplier_id),1)):n("",!0)])]),r("div",ae,[t[24]||(t[24]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Deskripsi"),r("span",{class:"text-red-500"},"*")],-1)),c(r("textarea",{"onUpdate:modelValue":t[8]||(t[8]=l=>s(e).description=l),name:"description",id:"description",rows:"3",placeholder:"Deskripsi Barang",class:"w-full px-3 py-2 border border-gray-400 rounded-lg dark:bg-gray-700 dark:text-white focus:border-lime-500 focus:ring-lime-500"},null,512),[[B,s(e).description]]),s(e).errors.description?(a(),o("p",de,d(s(e).errors.description),1)):n("",!0)]),r("div",ie,[r("div",ne,[t[25]||(t[25]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Harga Beli"),r("span",{class:"text-red-500"},"*")],-1)),m(b,{modelValue:s(e).purchase_price,"onUpdate:modelValue":t[9]||(t[9]=l=>s(e).purchase_price=l),class:"w-full max-h-10",id:"price_buy",type:"number",min:"0",name:"price_buy",placeholder:"Harga Beli"},null,8,["modelValue"]),r("span",ue,[r("p",me,d(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s(e).purchase_price)||0),1),s(e).errors.purchase_price?(a(),o("p",pe,d(s(e).errors.purchase_price),1)):n("",!0)])]),r("div",ce,[t[26]||(t[26]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Harga Jual"),r("span",{class:"text-red-500"},"*")],-1)),m(b,{modelValue:s(e).selling_price,"onUpdate:modelValue":t[10]||(t[10]=l=>s(e).selling_price=l),class:"w-full max-h-10",id:"price_sell",type:"number",min:"0",name:"price_sell",placeholder:"Harga Jual"},null,8,["modelValue"]),r("span",ge,[r("p",xe,d(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s(e).selling_price)||0),1),s(e).errors.selling_price?(a(),o("p",ye,d(s(e).errors.selling_price),1)):n("",!0)])])]),r("div",be,[r("div",null,[t[27]||(t[27]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 border-gray-400 dark:text-gray-100"},[u("Stock"),r("span",{class:"text-red-500"},"*")],-1)),m(b,{class:"w-full max-h-10",id:"stock",type:"number",name:"stock",min:"0",placeholder:"Stock",modelValue:s(e).stock,"onUpdate:modelValue":t[11]||(t[11]=l=>s(e).stock=l)},null,8,["modelValue"]),s(e).errors.stock?(a(),o("p",ke,d(s(e).errors.stock),1)):n("",!0)]),r("div",null,[t[28]||(t[28]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 border-gray-400 dark:text-gray-100"},[u("Min Stock"),r("span",{class:"text-red-500"},"*")],-1)),m(b,{modelValue:s(e).min_stock,"onUpdate:modelValue":t[12]||(t[12]=l=>s(e).min_stock=l),class:"w-full max-h-10",id:"min_stock",min:"0",type:"number",name:"min_stock",placeholder:"Min Stock"},null,8,["modelValue"]),s(e).errors.min_stock?(a(),o("p",_e,d(s(e).errors.min_stock),1)):n("",!0)]),r("div",null,[t[29]||(t[29]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 border-gray-400 dark:text-gray-100"},[u("Margin(%)"),r("span",{class:"text-red-500"},"*")],-1)),m(b,{modelValue:s(e).target_margin_percent,"onUpdate:modelValue":t[13]||(t[13]=l=>s(e).target_margin_percent=l),class:"w-full max-h-10",id:"target_margin_percent",type:"number",min:"0",name:"target_margin_percent",placeholder:"Min Stock"},null,8,["modelValue"]),s(e).errors.target_margin_percent?(a(),o("p",fe,d(s(e).errors.target_margin_percent),1)):n("",!0)]),r("div",null,[t[30]||(t[30]=r("label",{class:"block mb-1 text-sm font-medium text-gray-700 dark:text-gray-100"},[u("Status"),r("span",{class:"text-red-500"},"*")],-1)),c(r("select",{"onUpdate:modelValue":t[14]||(t[14]=l=>s(e).status=l),class:"w-full px-3 py-2 text-sm border border-gray-400 rounded-lg focus:border-lime-500 focus:ring-lime-500 dark:bg-gray-700 dark:text-white"},[(a(!0),o(x,null,y(p.dropdowns.productStatuses,l=>(a(),o("option",{key:l,value:l},d(l.charAt(0).toUpperCase()+l.slice(1)),9,ve))),128))],512),[[g,s(e).status]]),s(e).errors.status?(a(),o("p",we,d(s(e).errors.status),1)):n("",!0)])]),r("div",he,[m(s(P),{href:k.route("products.index")},{default:v(()=>[m(M,null,{default:v(()=>[...t[31]||(t[31]=[u("Batal",-1)])]),_:1})]),_:1},8,["href"]),m(F,{type:"submit",disabled:s(e).processing},{default:v(()=>[u(d(s(e).processing?"Menyimpan...":"Simpan"),1)]),_:1},8,["disabled"])])],32))}};export{Fe as default};
