import{u as P,x as b,j as $,g as i,o as x,a as m,d as g,h as j,w as D,b as t,k as v,A as f,t as a,f as F,i as h,F as k,q as T,n as V}from"./app-CjEDMysI.js";import{_ as A}from"./AuthenticatedLayout-DzmprZiX.js";import"./useActionLoading-CKYbla82.js";const M={class:"space-y-6"},N={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},B={class:"flex items-center gap-4 p-4 bg-white border border-gray-200 shadow-sm md:col-span-2 dark:bg-gray-800 rounded-2xl dark:border-gray-700"},K={class:"flex items-center justify-between p-4 text-white shadow-lg bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl"},L={class:"text-2xl font-black"},O={class:"text-right"},R={class:"text-xl font-bold"},q={class:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-2xl dark:bg-gray-800 dark:border-gray-700"},I={class:"overflow-x-auto"},S={class:"w-full text-sm text-left"},z={class:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700/50"},U={key:0},E={class:"divide-y divide-gray-100 dark:divide-gray-700"},G={class:"px-6 py-3"},H={class:"font-bold text-gray-800 dark:text-white"},J={class:"text-[10px] text-gray-500"},Q={class:"px-6 py-3 font-bold text-center text-gray-600"},W={class:"px-6 py-3 text-right text-gray-500"},X={class:"px-6 py-3 text-xs text-right text-red-400"},Y={class:"px-6 py-3 font-black text-right text-emerald-600 bg-emerald-50/30 dark:text-emerald-400 dark:bg-emerald-900/10"},Z={class:"px-6 py-3 text-center"},tt={key:0},at={__name:"GrossProfit",props:{filters:Object,data:Array,summary:Object},setup(u){const y=u,d=P({start_date:y.filters.start_date,end_date:y.filters.end_date}),_=()=>{d.get(route("reports.gross-profit"),{preserveScroll:!0})},p=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),w=s=>s>=25?"text-emerald-600 bg-emerald-50 border-emerald-200":s>=10?"text-yellow-600 bg-yellow-50 border-yellow-200":s>0?"text-red-600 bg-red-50 border-red-200":"text-gray-600 bg-gray-100",l=b("profit"),n=b("desc"),C=$(()=>[...y.data].sort((s,e)=>{let r=s[l.value],c=e[l.value];return n.value==="asc"?r-c:c-r})),o=s=>{l.value===s?n.value=n.value==="asc"?"desc":"asc":(l.value=s,n.value="desc")};return(s,e)=>(x(),i(k,null,[m(g(j),{title:"Analisa Laba Kotor"}),m(A,{headerTitle:"Laba Kotor Per Produk"},{default:D(()=>[t("div",M,[t("div",N,[t("div",B,[e[8]||(e[8]=t("span",{class:"text-sm font-bold text-gray-500"},"Periode:",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=r=>g(d).start_date=r),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[f,g(d).start_date]]),e[9]||(e[9]=t("span",{class:"text-gray-400"},"-",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=r=>g(d).end_date=r),class:"text-sm border-gray-300 rounded-lg dark:bg-gray-700 dark:text-white"},null,512),[[f,g(d).end_date]]),t("button",{onClick:_,class:"px-4 py-2 text-sm font-bold text-white bg-blue-600 rounded-lg shadow hover:bg-blue-700"}," Analisa ")]),t("div",K,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs font-bold tracking-widest uppercase text-emerald-100"}," Total Laba Kotor ",-1)),t("h3",L,a(p(u.summary.total_profit)),1)]),t("div",O,[e[11]||(e[11]=t("p",{class:"text-xs text-emerald-100"},"Rata-rata Margin",-1)),t("p",R,a(u.summary.avg_margin)+"% ",1)])])]),t("div",q,[t("div",I,[t("table",S,[t("thead",z,[t("tr",null,[t("th",{class:"px-6 py-3 cursor-pointer hover:text-blue-600",onClick:e[2]||(e[2]=r=>o("name"))}," Produk "),t("th",{class:"px-6 py-3 text-center cursor-pointer hover:text-blue-600",onClick:e[3]||(e[3]=r=>o("qty"))}," Terjual "),t("th",{class:"px-6 py-3 text-right cursor-pointer hover:text-blue-600",onClick:e[4]||(e[4]=r=>o("revenue"))}," Omzet "),t("th",{class:"px-6 py-3 text-right cursor-pointer hover:text-blue-600",onClick:e[5]||(e[5]=r=>o("cogs"))}," Modal (HPP) "),t("th",{class:"px-6 py-3 text-right cursor-pointer hover:text-blue-600 bg-emerald-50/50 dark:bg-emerald-900/10",onClick:e[6]||(e[6]=r=>o("profit"))},[e[12]||(e[12]=F(" Profit (Rp) ",-1)),l.value==="profit"?(x(),i("span",U,a(n.value==="asc"?"↑":"↓"),1)):h("",!0)]),t("th",{class:"px-6 py-3 text-center cursor-pointer hover:text-blue-600",onClick:e[7]||(e[7]=r=>o("margin"))}," Margin (%) ")])]),t("tbody",E,[(x(!0),i(k,null,T(C.value,(r,c)=>(x(),i("tr",{key:c,class:"transition hover:bg-gray-50 dark:hover:bg-gray-700/30"},[t("td",G,[t("div",H,a(r.name),1),t("div",J,a(r.code)+" • "+a(r.category),1)]),t("td",Q,a(r.qty),1),t("td",W,a(p(r.revenue)),1),t("td",X," -"+a(p(r.cogs)),1),t("td",Y,a(p(r.profit)),1),t("td",Z,[t("span",{class:V(["px-2 py-1 text-xs font-bold border rounded",w(r.margin)])},a(r.margin)+"% ",3)])]))),128)),u.data.length===0?(x(),i("tr",tt,[...e[13]||(e[13]=[t("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-400"}," Tidak ada data penjualan pada periode ini. ",-1)])])):h("",!0)])])])])])]),_:1})],64))}};export{at as default};
