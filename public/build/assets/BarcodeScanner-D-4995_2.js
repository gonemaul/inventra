import{H as p}from"./vendor-scanner-DjT4WSI1.js";import{E as d,K as w,Q as k,l as c,o as u,f as o,m as x,B as m,n as y}from"./vendor-core-PGoj2oEu.js";import"./vendor-common-BBegFRNv.js";import"./vendor-charts-Bw6UNgWf.js";const C={class:"fixed inset-0 z-[9999] bg-black flex flex-col justify-center"},z={key:0,class:"absolute inset-0 flex items-center justify-center bg-black z-[10000]"},B={class:"absolute z-10 bottom-4 right-4"},S={class:"absolute top-0 left-0 right-0 p-6 flex justify-between items-start z-[10001]"},E={__name:"BarcodeScanner",emits:["result","close"],setup(F,{emit:b}){const i=b;let r=null;const s=d(!1),l=d(!1),g=async()=>{const t="global-reader";try{r=new p(t);const e={fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1},a={facingMode:"environment",focusMode:"continuous",width:{min:640,ideal:1920},height:{min:480,ideal:1080}};await r.start({facingMode:"environment"},{...e,videoConstraints:a},v,h),s.value=!0}catch(e){console.error("Error starting scanner:",e),alert("Gagal mengakses kamera. Pastikan izin diberikan."),i("close")}},v=(t,e)=>{n().then(()=>{navigator.vibrate&&navigator.vibrate(300),i("result",t)})},h=t=>{},n=async()=>{if(r)try{r.isScanning&&await r.stop(),r.clear()}catch(t){console.error("Failed to stop scanner",t)}r=null,s.value=!1},f=()=>{const t=!l.value;r.applyVideoConstraints({advanced:[{torch:t}]}).then(()=>{l.value=t}).catch(e=>{console.error("Fitur Flash tidak didukung di device ini",e),alert("Flash tidak didukung di perangkat/browser ini.")})};return w(()=>{g()}),k(()=>{n()}),(t,e)=>(u(),c("div",C,[e[5]||(e[5]=o("div",{id:"global-reader",class:"w-full h-full bg-black"},null,-1)),s.value?x("",!0):(u(),c("div",z,[...e[1]||(e[1]=[m('<div class="text-center"><svg class="w-10 h-10 mx-auto mb-2 animate-spin text-lime-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-sm font-medium text-white">Membuka Kamera...</p></div>',1)])])),o("div",B,[o("button",{onClick:f,class:y(["p-3 transition-colors rounded-full shadow-lg",l.value?"bg-yellow-400 text-black":"bg-white text-gray-800"])},[...e[2]||(e[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})],-1)])],2)]),o("div",S,[e[4]||(e[4]=o("div",{class:"px-4 py-2 text-sm font-medium text-white border rounded-full bg-black/50 backdrop-blur-sm border-white/20"}," Arahkan ke Barcode ",-1)),o("button",{onClick:e[0]||(e[0]=a=>t.$emit("close")),class:"flex items-center justify-center w-10 h-10 text-white transition rounded-full bg-white/20 backdrop-blur-md hover:bg-white/40"},[...e[3]||(e[3]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e[6]||(e[6]=m('<div class="absolute inset-0 flex items-center justify-center pointer-events-none z-[10000]"><div class="relative w-64 h-64 border-2 border-lime-500/50 rounded-2xl"><div class="absolute top-0 left-0 w-5 h-5 border-t-4 border-l-4 border-lime-500 -mt-0.5 -ml-0.5 rounded-tl-lg"></div><div class="absolute top-0 right-0 w-5 h-5 border-t-4 border-r-4 border-lime-500 -mt-0.5 -mr-0.5 rounded-tr-lg"></div><div class="absolute bottom-0 left-0 w-5 h-5 border-b-4 border-l-4 border-lime-500 -mb-0.5 -ml-0.5 rounded-bl-lg"></div><div class="absolute bottom-0 right-0 w-5 h-5 border-b-4 border-r-4 border-lime-500 -mb-0.5 -mr-0.5 rounded-br-lg"></div><div class="absolute top-1/2 left-4 right-4 h-0.5 bg-red-500 shadow-[0_0_15px_rgba(239,68,68,0.8)] animate-scan"></div></div></div>',1))]))}};export{E as default};
